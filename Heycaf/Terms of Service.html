<!DOCTYPE html><html lang="en"><head>
<title>Hey.Café</title>
<meta charset="utf-8">
<meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="description" content="A new social network designed to be fast, contains no ads, and respects your privacy. Share in a safe online community and make new friends.">
<meta name="apple-mobile-web-app-title" content="Hey.Café">
<meta name="theme-color" content="#6048f4">
<meta name="HandheldFriendly" content="true">
<meta name="MobileOptimized" content="width">
<meta name="robots" content="noai">
<meta name="robots" content="noimageai">
<meta name="app-token" content="qdkrhmvrnwaalvh">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hey.Café">
<meta name="twitter:description" content="A new social network designed to be fast, contains no ads, and respects your privacy. Share in a safe online community and make new friends.">
<meta name="twitter:image" content="https://hey.cafe/logo_social.png?v=qdkrhmvrnwaalvh">
<meta name="generator" content="Hey.Café">
<meta property="og:url" content="">
<meta property="og:type" content="website">
<meta property="og:title" content="Hey.Café">
<meta property="og:site_name" content="Hey.Café">
<meta property="og:description" content="A new social network designed to be fast, contains no ads, and respects your privacy. Share in a safe online community and make new friends.">
<meta property="og:image" content="https://hey.cafe/logo_social.png?v=qdkrhmvrnwaalvh">
<link rel="home" href="https://hey.cafe" rel="home">
<link rel="canonical" href="https://hey.cafe/help">
<link rel="manifest" href="/manifest.json">
<link rel="icon" type="image/png" href="https://hey.cafe/logo.png?v=qdkrhmvrnwaalvh">
<link rel="apple-touch-icon" href="https://hey.cafe/logo_social.png?v=qdkrhmvrnwaalvh">
<link rel="apple-touch-startup-image" href="https://hey.cafe/logo_social.png?v=qdkrhmvrnwaalvh">
<link rel="icon" type="image/x-icon" href="/favicon.ico?v=qdkrhmvrnwaalvh">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=qdkrhmvrnwaalvh">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=qdkrhmvrnwaalvh">
<link rel="me" href="https://mastodon.social/@heycafe">
<link rel="preconnect" href="https://assets.heycafecdn.com">
<link rel="preconnect" href="https://proxy.heycafecdn.com">
<link rel="preconnect" href="https://b2.heycafecdn.com">
<style>
	body{ background-color:transparent; }
	#onjslaunchfail{ animation: 1s nolaunchfailfade;animation-fill-mode: forwards;visibility: hidden;}
	@keyframes nolaunchfailfade{ 99% { visibility: hidden; } 100% { visibility: visible; }}
</style>
<script>function ae(s) { return encodeURIComponent(s); } function ad(s) { return document.querySelector(s); } function ac(s) { return document.getElementsByClassName(s); } function ab(s) { return document.getElementsByTagName(s); } function aa(s) { return document.getElementById(s); } var s_domain="hey.cafe"; var s_hostname=""; var s_timestamp=0; var s_structure="simple"; var s_referral=false; var s_logout_reload=false; var s_loginrestore=false; var s_loginmessage=false; var s_debug=false; var s_modl=false; var s_gestures="on"; var s_checkups=true; var s_body_input=false; var s_body_livearea=false; var s_authsession=null; var s_iframesource=null; var s_httprequests=0; var s_httprequests_translate=0; var s_token=false; var s_token_alert=false; var s_pwa=false; var s_pwa_can=false; var s_renderengine="unknown"; var s_device="unknown"; var s_embed=false; var s_embed_position=0; var s_reloadkill=false; var s_scroll=0; var s_scroll_modl=0; var s_scroll_header=0; var s_touch_start_x=0; var s_touch_start_y=0; var s_touch_end_x=0; var s_touch_end_y=0; var s_touch_direction=false; var s_touch_onscroller=false; var s_touch_distance=0; var s_mode="light"; var s_accent="96, 79, 216"; var s_version="0.8"; var s_char_reg=460; var s_char_pro=4500; var s_width=window.innerWidth; var sp=window.location.pathname; var sprender=null; var s_lowpowerdevice=false; var su_session=null; var su_alias=null; var su_id=null; var su_name=null; var su_language="en"; var su_header=null; var su_avatar=null; var su_pro=false; var su_admin=false; var su_moderator=false; var su_default_header="https://b2.heycafecdn.com/file/HeyCafe/defaults/header_account.jpg"; var su_default_avatar="https://b2.heycafecdn.com/file/HeyCafe/defaults/avatar_account.png"; var s_app_colour="false"; var s_app_stats="false"; var s_app_reducemotion="false"; var s_app_hidesuggestions="false"; var s_app_forcedisplay="false"; var s_app_scaledisplay="false"; var s_app_reactions="false"; var suc_notifications=false; var suc_messages=false; var suc_settings=false; var suc_pro_expire=0; var suc_pro_expire_seconds=0; var s_suggestionclear=false; var sic=false; var sic_type="false"; var sic_last="false"; var sic_resource="false"; var sic_resource_sub="false"; var sic_function=""; var sp_title=""; var sp_description=""; var sp_url=""; var sp_image=""; var sh=[''+window.location.pathname+'']; var shl_url=false; var shl_contents=false; var shl_structure=false; var shl_scroll=false; var shl_meta_title=""; var shl_meta_description=""; var shl_meta_url=""; var shl_meta_image=""; var ss=[]; ss["endpoint-001"]={hostname: "endpoint-001.hey.cafe", online: null, speed:0}; ss["endpoint-002"]={hostname: "endpoint-002.hey.cafe", online: null, speed:0}; ss["endpoint-003"]={hostname: "endpoint-003.hey.cafe", online: null, speed:0}; ss["endpoint-004"]={hostname: "endpoint-004.hey.cafe", online: null, speed:0}; ss["endpoint-005"]={hostname: "endpoint-005.hey.cafe", online: null, speed:0}; ss["endpoint-006"]={hostname: "endpoint-006.hey.cafe", online: null, speed:0}; function fu_dlx(){ var number_total=Object.keys(ss).length; var number_picked=Math.floor(Math.random() * number_total); var number_on=0; var server="endpoint-001"; fu_qeq(ss, function(id){ if (number_on==number_picked){ server=id; if (ss[id]["online"]==false){ return fu_dlx();}}
number_on=number_on+1;}); return server;} function fu_rbw(){ var serverid=fu_dlx(); return ss[serverid]["hostname"];} function fu_qgs(server,name,value){ var id=server.replace(".hey.cafe", ""); ss[id][name]=value;} var sr=[]; sr["blank"]={code: "2754", pro: false, canpick: false}; sr["emoji-thumb-up"]={code: "1f44d", pro: false, canpick: true}; sr["emoji-thumb-down"]={code: "1f44e", pro: false, canpick: true}; sr["emoji-heart"]={code: "2764", pro: false, canpick: true}; sr["emoji-heart-broken"]={code: "1f494", pro: false, canpick: true}; sr["emoji-wave"]={code: "1f44b", pro: false, canpick: true}; sr["emoji-partyface"]={code: "1f973", pro: false, canpick: true}; sr["emoji-love"]={code: "1f970", pro: false, canpick: true}; sr["emoji-pride"]={code: "1f3f3-fe0f-200d-1f308", pro: false, canpick: true}; sr["emoji-trans"]={code: "1f3f3-fe0f-200d-26a7-fe0f", pro: false, canpick: true}; sr["emoji-hug"]={code: "1fac2", pro: false, canpick: true}; sr["emoji-fingerscrossed"]={code: "1f91e", pro: false, canpick: true}; sr["emoji-peace"]={code: "270c", pro: false, canpick: true}; sr["emoji-clap"]={code: "1f44f", pro: false, canpick: true}; sr["emoji-fire"]={code: "1f525", pro: true, canpick: true}; sr["emoji-cool"]={code: "1f60e", pro: true, canpick: true}; sr["emoji-spock"]={code: "1f596", pro: true, canpick: true}; sr["emoji-rainbow"]={code: "1f308", pro: true, canpick: true}; sr["emoji-light"]={code: "1f4a1", pro: true, canpick: true}; sr["emoji-gaming"]={code: "1f579", pro: true, canpick: true}; sr["emoji-party"]={code: "1f389", pro: true, canpick: true}; sr["emoji-mind-blown"]={code: "1f92f", pro: true, canpick: true}; sr["emoji-cookie"]={code: "1f36a", pro: true, canpick: true}; sr["emoji-trophy"]={code: "1f3c6", pro: true, canpick: true}; sr["emoji-rose"]={code: "1f339", pro: true, canpick: true}; sr["emoji-star"]={code: "2b50", pro: false, canpick: true}; sr["emoji-smile"]={code: "1f642", pro: false, canpick: true}; sr["emoji-laugh"]={code: "1f602", pro: false, canpick: true}; sr["emoji-angry"]={code: "1f621", pro: false, canpick: true}; sr["emoji-dizzy"]={code: "1f974", pro: false, canpick: true}; sr["emoji-flushed"]={code: "1f633", pro: false, canpick: true}; sr["emoji-frown"]={code: "2639", pro: false, canpick: true}; sr["emoji-grimace"]={code: "1f62c", pro: false, canpick: true}; sr["emoji-grin"]={code: "1f600", pro: false, canpick: true}; sr["emoji-thinking"]={code: "1f914", pro: false, canpick: true}; sr["emoji-omg"]={code: "1f631", pro: false, canpick: true}; sr["emoji-beam"]={code: "1f601", pro: false, canpick: true}; sr["emoji-sweat"]={code: "1f605", pro: false, canpick: true}; sr["emoji-hearts"]={code: "1f60d", pro: false, canpick: true}; sr["emoji-stars"]={code: "1f929", pro: false, canpick: true}; sr["emoji-tears"]={code: "1f923", pro: false, canpick: true}; sr["emoji-eyes-only"]={code: "1f440", pro: false, canpick: true}; sr["emoji-tongue"]={code: "1f61b", pro: false, canpick: true}; sr["emoji-tongue-squint"]={code: "1f61d", pro: false, canpick: true}; sr["emoji-tongue-wink"]={code: "1f61c", pro: false, canpick: true}; sr["emoji-kiss"]={code: "1f617", pro: false, canpick: true}; sr["emoji-kiss-heart"]={code: "1f618", pro: false, canpick: true}; sr["emoji-laugh-outloud"]={code: "1f606", pro: false, canpick: true}; sr["emoji-meh"]={code: "1f610", pro: false, canpick: true}; sr["emoji-blank"]={code: "1f636", pro: false, canpick: true}; sr["emoji-eyes"]={code: "1f644", pro: false, canpick: true}; sr["emoji-cry"]={code: "1f62d", pro: false, canpick: true}; sr["emoji-tear"]={code: "1f622", pro: false, canpick: true}; sr["emoji-wink"]={code: "1f609", pro: false, canpick: true}; sr["emoji-shock"]={code: "1f628", pro: false, canpick: true}; sr["emoji-tired"]={code: "1f629", pro: false, canpick: true}; sr["emoji-duck"]={code: "1f986", pro: true, canpick: false}; sr["emoji-chick"]={code: "1f423", pro: false, canpick: true}; fu_wkn("loader", "#uiLoaderLight", "overflow:hidden;position:fixed;z-index:800000;color:rgb(255,255,255);background: rgb(0,0,0);text-align:center;left:50%;width: 300px;margin-left: -150px;border-radius: 100px;height: auto;-webkit-transition: all 250ms ease-in-out;-moz-transition: all 250ms ease-in-out;-o-transition: all 250ms ease-in-out;transition: all 250ms ease-in-out;"); fu_wkn("loader", "#uiLoaderLight .progress", "font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif;font-weight:600;padding:20px;padding-top:10px;padding-bottom:10px;text-transform: uppercase;font-size:1em;"); fu_wkn("loader", "#uiLoaderLight.show", "top: calc(10px + env(safe-area-inset-top));"); fu_wkn("loader", "#uiLoaderLight.hide", "top: -200px;"); fu_wkn("loader", "#uiNotification", "position:fixed;z-index:7000;max-width:500px;height:0px;text-align:left;top:60px;right:0px;-webkit-transition: all 250ms ease-in-out;-moz-transition: all 250ms ease-in-out;-o-transition: all 250ms ease-in-out;transition: all 250ms ease-in-out;"); fu_wkn("loader", "#uiAlert", "position:fixed;z-index:750000;width:100%;height:0px;text-align:center;top:0px;left:0px;-webkit-transition: all 250ms ease-in-out;-moz-transition: all 250ms ease-in-out;-o-transition: all 250ms ease-in-out;transition: all 250ms ease-in-out;"); var sc={}; function fu_unj(name){ if (sc[""+name+""]==undefined){ sc[""+name+""]=null;} return sc[""+name+""];} function fu_ojv(name,data){ if (sc[""+name+""]==undefined){ sc[""+name+""]=null;}
sc[""+name+""]=data;} function fu_ehb(){ sc={};} var s_archive_cache={}; function fu_mgo(name){ if (s_archive_cache[""+name+""]==undefined){ s_archive_cache[""+name+""]=null;} return s_archive_cache[""+name+""];} function fu_hqt(name,data){ if (s_archive_cache[""+name+""]==undefined){ s_archive_cache[""+name+""]=null;}
s_archive_cache[""+name+""]=data;} function fu_vxt(){ s_archive_cache={};} if (window.location.hostname!=s_domain){ if (window.location.hostname=="beta.hey.cafe"){ s_domain=window.location.hostname;} if (window.location.hostname=="hey.cafe"){ s_domain=window.location.hostname;}} if (fu_pkg("ses_su_session")!=""){ fu_ccj("ses_su_session",fu_pkg("ses_su_session")); fu_ccj("ses_su_alias",fu_pkg("ses_su_alias")); fu_ccj("ses_su_id",fu_pkg("ses_su_id")); fu_ccj("ses_su_name",fu_pkg("ses_su_name")); fu_ccj("ses_su_language",fu_pkg("ses_su_language")); fu_ccj("ses_s_sessions",fu_pkg("ses_s_sessions")); fu_rzh("ses_su_session"); fu_rzh("ses_su_alias"); fu_rzh("ses_su_id"); fu_rzh("ses_su_name"); fu_rzh("ses_su_language"); fu_rzh("ses_s_sessions");} if (fu_rpz("ses_su_session")!=""){ su_session=fu_rpz("ses_su_session"); su_alias=fu_rpz("ses_su_alias"); su_id=fu_rpz("ses_su_id"); su_name=fu_rpz("ses_su_name"); su_language=fu_rpz("ses_su_language"); su_name="unknown";} if (fu_rpz("ses_s_referral")!=""){ s_referral=fu_rpz("ses_s_referral");} if (fu_rpz("ses_s_gestures")!=""){ s_gestures=fu_rpz("ses_s_gestures");}
window.onerror = function(msg, url, lineNo, columnNo, error){ fu_ewy(msg, url, lineNo, columnNo, error);}; window.onkeyup = function(e){ var event = e.which || e.keyCode || 0; if (event==27){ if (s_modl==false){ var elementactive="BODY"; if (document.activeElement.tagName!=undefined){ elementactive=document.activeElement.tagName;} if (elementactive!="INPUT" && elementactive!="TEXTAREA" && elementactive!="LIVEAREA"){ if (sp!="/debug"){ fu_wrg("/debug");}else{ fu_wrg("/");}} }else{ fu_jwg();}} if (event==13){ document.activeElement.click();}}; function fu_few(error){ fu_jom("So sorry the page failed to load, you can tap to refresh. "+error+"","😭",sp,true);} function fu_meg(count){ if (count>=1){ var newtitle="("+count+") "+sp_title+"";}else{ var newtitle=sp_title;} if (ad('title').innerHTML!=newtitle){ ad('title').innerHTML = newtitle;}} function fu_vbf(title){ if (title==""){ var newtitle="Hey.Café";}else{ var newtitle=title+" / Hey.Café";} if (sp_title!=newtitle){ sp_title=newtitle; ad('title').innerHTML = newtitle; ad('meta[property="og:title"]').content = newtitle; ad('meta[name="twitter:title"]').content = newtitle;}} function fu_qyp(description){ if (description==""){ var newdescription="Social media kicked up a notch";}else{ var newdescription=description;}
sp_description=newdescription; ad('meta[name="description"]').content = newdescription; ad('meta[property="og:description"]').content = newdescription; ad('meta[name="twitter:description"]').content = newdescription;} function fu_uyr(url,replace_history){ if (sp_url!=url){ if (replace_history==undefined){ replace_history=false;} if (url==""){ var newurl=window.location.pathname;}else{ var newurl=url;}
sp_url=newurl; ad('link[rel="canonical"]').href = "https://hey.cafe"+newurl; ad('meta[property="og:url"]').content = "https://hey.cafe"+newurl; if (replace_history==true){ if (s_pwa==false){ window.history.replaceState(null, sp_title, sp_url);}} }} function fu_bgt(url){ if (url==""){ var newurl="https://hey.cafe/logo.png";}else{ var newurl=url;}
sp_image=newurl; ad('meta[property="og:image"]').content = newurl; ad('meta[name="twitter:image"]').content = newurl;} function fu_mdb(){ var scroll_height=document.body.scrollHeight; var scroll_width=document.body.scrollWidth; if (scroll_height<=80){ scroll_height=80;} var message = { height: scroll_height, width: scroll_width, domain: s_domain, page: sp }; window.top.postMessage(message, "*"); setTimeout("fu_mdb()", 100);} document.addEventListener('click', function (event){ var target=event.target; if (target!=null){ if (target.hasAttribute("href")==false){ target=target.parentElement;}} if (target!=null){ if (target.hasAttribute("href")==false){ target=target.parentElement;}} if (target!=null){ if (target.hasAttribute("href")==false){ target=target.parentElement;}} if (target!=null){ if (target.hasAttribute("href")==false){ target=target.parentElement;}} if (target!=null){ if (target.hasAttribute("href")==false){ target=target.parentElement;}} if (target!=null){ if (target.hasAttribute("href")==false){ target=target.parentElement;}} if (target!=null){ if (target.hasAttribute("href")==false){ target=target.parentElement;}} if (target!=null){ if (target.hasAttribute("href")==false){ target=target.parentElement;}} if (target!=null){ if (target.hasAttribute("href")==false){ target=target.parentElement;}} if (target!=null){ if (target.hasAttribute("href")==false){ target=target.parentElement;}} if (target!=null){ if (target.hasAttribute("href")==false){ target=target.parentElement;}} if (target!=null){ if (target.hasAttribute("href")){ if (target.hasAttribute("target")==false){ var url=target.getAttribute('href'); url=url.replace("https://"+s_domain+"", ""); if (!url.match(/javascript/)){ if (!url.match(/mailto:/)){ if (s_embed==false){ event.preventDefault(); fu_wrg(url);}else{ event.preventDefault(); window.open(url, '_blank');}} }} }}
fu_mxp("uiToolTip");}, false); window.addEventListener('message', function(e){ var message = e.data; if (message.type=="embed_position"){ s_embed_position=message.value;}} , false); window.addEventListener('popstate', function (event){ if (sp!=window.location.pathname){ var count=sh.length; if (count>=2){ var url=sh[count-2]; fu_ixc();}else{ fu_wrg(window.location.pathname);}} }); document.addEventListener('scroll', function(e){ fu_jsf(); var newscroll=window.scrollY; if (s_width<700){ if (aa('container_headercase')){ if (s_scroll<=newscroll){ s_scroll_header=s_scroll_header-(s_scroll-newscroll); if (s_scroll_header>=100){ s_scroll_header=100;} if (s_scroll_header>=5){ aa('container_headercase').style.top="-200px"; aa('uiNotification').style.top="0px"; aa("container_menu").style.bottom="-200px"; aa('uiPopover').style.bottom="0px";}else{ aa('container_headercase').style.top="-"+s_scroll_header+"px"; aa("container_menu").style.bottom="-"+s_scroll_header+"px";}}else{ s_scroll_header=0; aa('container_headercase').style.top="0px"; aa('uiNotification').style.top="60px"; aa('uiPopover').style.bottom="60px"; if (s_width<700){ aa('container_menu').style.bottom="0px";}} if (newscroll<=0){ s_scroll_header=0; aa('container_headercase').style.top="0px"; aa('uiNotification').style.top="60px"; aa('uiPopover').style.bottom="60px"; aa('container_menu').style.bottom="0px";}} }
fu_mxp("uiToolTip"); fu_mxp("uiSuggestion"); s_scroll=newscroll;}); function fu_mfs(){ s_touch_distance=0; s_touch_direction=false; s_touch_onscroller=false; if (s_touch_end_x < s_touch_start_x){ var mydist=s_touch_start_x-s_touch_end_x; if (mydist>=40){ s_touch_distance=mydist; s_touch_direction="left";}} if (s_touch_end_x > s_touch_start_x){ var mydist=s_touch_end_x-s_touch_start_x; if (mydist>=40){ s_touch_distance=mydist; s_touch_direction="right";}} if (s_touch_end_y < s_touch_start_y){ var mydist=s_touch_start_y-s_touch_end_y; if (mydist>=40){ s_touch_distance=mydist; s_touch_direction="up";}} if (s_touch_end_y > s_touch_start_y){ var mydist=s_touch_end_y-s_touch_start_y; if (mydist>=40){ s_touch_distance=mydist; s_touch_direction="down";}} var elements=document.elementsFromPoint(s_touch_start_x, (s_touch_start_y - s_scroll)); for (var i = 0; i < elements.length; i++){ if (elements[i].scrollWidth > elements[i].clientWidth){ s_touch_onscroller=true;}} if (s_gestures=="on"){ if (s_touch_onscroller==false){ if (s_touch_distance>=150){ if (s_touch_direction=="right"){ if (sh.length>=2){ fu_hrr("Back gesture detected"); fu_ixc();}} }} }
fu_udy("Gesture Detect: distance: "+s_touch_distance+", direction: "+s_touch_direction+", start x:"+s_touch_start_x+", end x: "+s_touch_end_x+", start y:"+s_touch_start_y+", end y: "+s_touch_end_y+", scroller: "+s_touch_onscroller+", page scroll: "+s_scroll+"");} document.addEventListener('touchstart', e => { s_touch_start_x = e.changedTouches[0].screenX; s_touch_start_y = e.changedTouches[0].screenY;}); document.addEventListener('touchend', e => { s_touch_end_x = e.changedTouches[0].screenX; s_touch_end_y = e.changedTouches[0].screenY; fu_mfs();}); var uiToolTipBlank=true; var uiToolTipActiveText=""; document.addEventListener('mousemove', e => { if (s_device!="Android" && s_device!="iOS" && s_device!="NativeiOSApp" && s_device!="NativeAndroidApp"){ var elements=document.elementsFromPoint(e.clientX, e.clientY); var hastooltip=false; for (var i = 0; i < elements.length; i++){ if (elements[i].hasAttribute("data-title")){ var element=elements[i]; var elmx=e.clientX; var elmy=e.clientY; var type="left"; var allowed=false; if (elmx>=(s_width/2)){ type="right"; elmx=s_width-elmx;} if (aa("js_content")){ if (fu_cxk(aa("js_content"),element)){ if (s_modl==false){ allowed=true;}} } if (aa("uiModl")){ if (fu_cxk(aa("uiModl"),element)){ if (s_modl==true){ allowed=true;}} } if (uiToolTipActiveText!=element.getAttribute("data-title")){ fu_mxp("uiToolTip"); uiToolTipActiveText=element.getAttribute("data-title");} if (allowed==true){ elmx=elmx+10; elmy=elmy+5; hastooltip=true; uiToolTipBlank=false; if (aa("active_tooltip")){ if (type=="left"){ aa("active_tooltip").style.left=""+elmx+"px"; aa("active_tooltip").style.top=""+elmy+"px"; aa("active_tooltip").style.right="";} if (type=="right"){ aa("active_tooltip").style.right=""+elmx+"px"; aa("active_tooltip").style.top=""+elmy+"px"; aa("active_tooltip").style.left="";}}else{ fu_zfc("uiToolTip","<tooltip id='active_tooltip' style='"+type+":"+elmx+"px;top:"+elmy+"px;max-width:300px;'>"+fu_cpd(fu_nwo(element.getAttribute("data-title")))+"</tooltip>");}} }} if (hastooltip==false){ if (uiToolTipBlank==false){ fu_mxp("uiToolTip"); uiToolTipBlank=true;}} }}, {passive: true}); document.addEventListener("DOMContentLoaded", function(){ aa("js_startup").innerHTML=""; aa("js_startup").innerHTML=aa("js_startup").innerHTML+"<div id='uiLoaderLight' class='hide'><div class='progress' id='uiLoaderLightProgress'>Loading</div></div>"; aa("js_startup").innerHTML=aa("js_startup").innerHTML+"<a id='uiOpenSafari' style='display:none;' href='' target='_blank'>Link</a>"; aa("js_startup").innerHTML=aa("js_startup").innerHTML+"<div id='uiModl'></div>"; aa("js_startup").innerHTML=aa("js_startup").innerHTML+"<div id='uiToolTip'></div>"; aa("js_startup").innerHTML=aa("js_startup").innerHTML+"<div id='uiPopover'></div>"; aa("js_startup").innerHTML=aa("js_startup").innerHTML+"<div id='uiNotification'></div>"; aa("js_startup").innerHTML=aa("js_startup").innerHTML+"<div id='uiPhoneNotch'></div>"; aa("js_startup").innerHTML=aa("js_startup").innerHTML+"<div id='uiAlert'></div>"; aa("js_startup").innerHTML=aa("js_startup").innerHTML+"<div id='uiSuggestion'></div>"; aa("js_startup").innerHTML=aa("js_startup").innerHTML+"<div id='uiBackground'></div>"; if (typeof navigator.serviceWorker !== 'undefined'){ navigator.serviceWorker.register('/service_worker.js', {scope: '/'});} var startedrender=false; fu_clu(); fu_cap("Creating UI Elements"); if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches){ fu_azs("dark"); startedrender=true; s_mode="dark";} if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches){ fu_azs("light"); startedrender=true; s_mode="light";} if (startedrender==false){ fu_azs("light");}
fu_hxc(); if (sp.startsWith("/embed/")){ fu_wta("embed");}
fu_cap("Launching application"); fu_qla();}); window.addEventListener("pageshow", fu_vwz, false); window.addEventListener("beforeunload", fu_fok, false); window.addEventListener("pagehide", fu_fok, false); function fu_cap(message){ fu_zfc("uiLoaderLightProgress",message);} function fu_clu(message){ if (message==undefined){ fu_cap("Loading...");}else{ fu_cap(message);} if (aa("uiLoaderLight")){ aa("uiLoaderLight").classList.add("show"); aa("uiLoaderLight").classList.remove("hide");}} function fu_nxk(){ if (aa("uiLoaderLight")){ aa("uiLoaderLight").classList.add("hide"); aa("uiLoaderLight").classList.remove("show");}
fu_jsf();} function fu_jom(message,emoji,url,sticky){ if (emoji==undefined){ emoji="👋";} if (url==undefined){ url="false";} if (sticky==undefined){ sticky=false;}
notificationid="notification_"+fu_hmk(30)+""; aa("uiNotification").innerHTML="<div onclick=\"fu_pyp('"+notificationid+"','"+url+"');\" id='"+notificationid+"' class='notification'><div style='float: left;margin-right: 10px;width: 20px;height: 20px;padding: 15px;border-radius: 100%;font-size: 1.7em;overflow: hidden;margin-left: -5px;margin-top: -5px;margin-bottom: -5px;'><div style='margin-left: -8px;margin-top: -6px;'>"+fu_cpd(emoji)+"</div></div><div style='min-width:250px;'>"+message+"</div></div>"+aa("uiNotification").innerHTML+""; if (sticky==false){ setTimeout("fu_pyp('"+notificationid+"','false');", 10000);} return notificationid;} function fu_pyp(id,url){ if (aa(id)!=undefined){ aa(id).remove(); if (url=="reload"){ window.location.reload();}else{ if (url!="false"){ if (url.startsWith("http")){ window.location.replace(url);}else{ fu_wrg(url);}} }} } function fu_hrr(message){ notificationid="notification_"+fu_hmk(30)+""; aa("uiAlert").innerHTML="<div onclick=\"fu_ddx('"+notificationid+"');\" id='"+notificationid+"' class='notification hide'>"+message+"</div>"; setTimeout(function(){ if (aa(notificationid)!=undefined){ aa(notificationid).classList.remove("hide"); aa(notificationid).classList.add("show");}}, 100); setTimeout("fu_ddx('"+notificationid+"');", 5000);} function fu_ddx(id){ if (aa(id)!=undefined){ aa(id).classList.remove("show"); aa(id).classList.add("hide"); setTimeout(function(){ if (aa(id)!=undefined){ aa(id).remove();}}, 1000);}} function fu_vwz(evt){ if (evt.persisted){ }else{ }} function fu_fok(evt){ if (evt.persisted){ }else{ }} function fu_gem(){ if (window.innerWidth>=700 && s_width<700){ s_width=window.innerWidth; fu_wrg(sp);} if (window.innerWidth<700 && s_width>=700){ s_width=window.innerWidth; fu_wrg(sp);} if (window.innerWidth>=1100 && s_width<1100){ s_width=window.innerWidth; fu_wrg(sp);} if (window.innerWidth<1100 && s_width>=1100){ s_width=window.innerWidth; fu_wrg(sp);} if (s_app_forcedisplay=="false"){ if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches){ if (s_mode=="light"){ fu_azs("dark"); s_mode="dark"; fu_jin(s_structure); fu_hxc();}} if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches){ if (s_mode=="dark"){ fu_azs("light"); s_mode="light"; fu_jin(s_structure); fu_hxc();}} }else{ if (s_app_forcedisplay=="dark"){ if (s_mode=="light"){ fu_azs("dark"); s_mode="dark"; fu_jin(s_structure); fu_hxc();}} if (s_app_forcedisplay=="light"){ if (s_mode=="dark"){ fu_azs("light"); s_mode="light"; fu_jin(s_structure); fu_hxc();}} } if (document.activeElement.tagName=="INPUT" && s_body_input==false){ s_body_input=false; document.body.classList.add("active_input");}else{ s_body_input=false; document.body.classList.remove("active_input");} if (document.activeElement.tagName=="LIVEAREA" && s_body_livearea==false){ s_body_livearea=false; document.body.classList.add("active_livearea");}else{ s_body_livearea=false; document.body.classList.remove("active_livearea");} if (aa("container_modl")){ var nowscroll=aa("container_modl").scrollTop; if (nowscroll!=s_scroll_modl){ fu_jsf();}
s_scroll_modl=nowscroll;}else{ s_scroll_modl=0;} if (ab("TEXTAREA")){ runactions = ab("TEXTAREA"); [].slice.call(runactions).forEach(function(item){ if (item.hasAttribute("activated")==false){ var datathis = item.value; datathis=datathis.replace(/\s\s\s\s/g, "\n\n"); item.value = datathis; item.setAttribute('style', 'height:'+(item.scrollHeight-20)+'px;overflow:hidden;'); item.setAttribute('activated', 'true'); setTimeout(function(){ item.style.height = (item.scrollHeight-20)+'px';}, 10);}else{ if (item.offsetHeight<=(item.scrollHeight-20)){ item.style.height = (item.scrollHeight-20)+'px';}} if (item.hasAttribute("charcost")==true){ var costcase=item.getAttribute("charcostcase"); var size=parseInt(item.getAttribute("maxsize")); var textinbox=item.value; var urlmatches = textinbox.match(/\bhttps?:\/\/([^\<\n\s]+)\b/gi); fu_qeq(urlmatches, function(id){ var data=urlmatches[""+id+""]; textinbox=textinbox.replace(data, "1234567890123456789012345678901234567890");}); var count=textinbox.length; var totalcost=Math.round(size-count); if (aa(costcase)){ fu_zfc(costcase,"<div style='font-variant-numeric: tabular-nums;'>"+totalcost+"</div>");}} });} if (ac("emojiconvert")){ runemojies = ac("emojiconvert"); [].slice.call(runemojies).forEach(function(item){ var source=item.getAttribute("alt"); source=fu_xla(source); item.setAttribute('alt', source); item.classList.remove("emojiconvert");});} if (ab("TRANS")){ runtranslations = ab("TRANS"); [].slice.call(runtranslations).forEach(function(item){ if (item.hasAttribute("done")==false){ if (fu_qoh(item)){ var newid="uitrans_"+fu_hmk(40)+""; item.setAttribute('done', "true"); item.setAttribute('id', newid); fu_qel(newid);}} });} if (ab("ACTION")){ runactions = ab("ACTION"); [].slice.call(runactions).forEach(function(item){ var done=false; var type=item.getAttribute("type"); if (type=="inview_load_comments"){ if (s_httprequests<=2){ if (fu_qoh(item)){ var send_conversation=item.getAttribute("conversation"); var send_count=item.getAttribute("count"); var send_comment=item.getAttribute("comment"); fu_phq(send_conversation,send_count,send_comment); done=true;}} } if (type=="inview_load_comments_pinned"){ if (s_httprequests<=2){ if (fu_qoh(item)){ var send_conversation=item.getAttribute("conversation"); fu_zyb(send_conversation); done=true;}} } if (type=="inview_load_translate"){ if (s_httprequests<=2){ if (fu_qoh(item)){ var send_container=item.getAttribute("container"); var send_source=item.getAttribute("source"); var send_target=item.getAttribute("target"); var send_text=fu_xla(item.getAttribute("text")); if (item.hasAttribute("replace")==true){ var send_replace=item.getAttribute("replace"); fu_ocf(send_container,send_source,send_target,send_text,send_replace);}else{ fu_ocf(send_container,send_source,send_target,send_text);}
done=true;}} } if (type=="inview_item_checkup"){ if (fu_qoh(item)){ var send_type=item.getAttribute("item_type"); var send_last=item.getAttribute("item_last"); var send_resource=item.getAttribute("item_resource"); var send_resource_sub=item.getAttribute("item_resource_sub"); var send_function=item.getAttribute("item_function"); sic=true; sic_type=send_type; sic_last=send_last; sic_resource=send_resource; sic_resource_sub=send_resource_sub; sic_function=send_function; done=true;}} if (type=="inview_load_metadata"){ if (s_httprequests<=2){ if (fu_qoh(item)){ var send_element=item.getAttribute("element"); var send_url=item.getAttribute("url"); fu_xjg(send_element,send_url,false); done=true;}} } if (type=="inview_load_metadata_light"){ if (s_httprequests<=2){ if (fu_qoh(item)){ var send_element=item.getAttribute("element"); var send_url=item.getAttribute("url"); fu_xjg(send_element,send_url,true); done=true;}} } if (type=="inview_load_videos_youtube"){ if (s_httprequests<=2){ if (fu_qoh(item)){ var send_element=item.getAttribute("element"); var send_url=item.getAttribute("url"); var send_goto=item.getAttribute("goto"); fu_qvq(send_element,send_url,send_goto); done=true;}} } if (type=="inview_load_emoji"){ if (s_httprequests<=2){ if (fu_qoh(item)){ var send_element=item.getAttribute("element"); var send_text=item.getAttribute("text"); fu_zfg(send_element,send_text); done=true;}} } if (type=="inview_load_preview_conversation"){ if (s_httprequests<=2){ if (fu_qoh(item)){ var send_element=item.getAttribute("element"); var send_conversation=item.getAttribute("conversation"); var send_header=true; if (item.hasAttribute("header")){ var send_header=item.getAttribute("header");}
fu_uxt(send_element,send_conversation,send_header); done=true;}} } if (type=="inview_load_preview_comment"){ if (s_httprequests<=2){ if (fu_qoh(item)){ var send_element=item.getAttribute("element"); var send_conversation=item.getAttribute("conversation"); var send_comment=item.getAttribute("comment"); var send_header=true; if (item.hasAttribute("header")){ var send_header=item.getAttribute("header");}
fu_pgp(send_element,send_conversation,send_comment,send_header); done=true;}} } if (type=="inview_load_mention"){ if (s_httprequests<=2){ if (fu_qoh(item)){ var send_element=item.getAttribute("element"); var send_alias=item.getAttribute("alias"); fu_tmp(send_element,send_alias); done=true;}} } if (type=="inview_load_cafe"){ if (s_httprequests<=2){ if (fu_qoh(item)){ var send_element=item.getAttribute("element"); var send_alias=item.getAttribute("alias"); fu_lyi(send_element,send_alias); done=true;}} } if (type=="inview_loadmore_pagefeed"){ if (fu_qoh(item)){ var send_offset=item.getAttribute("offset"); fu_aac(send_offset); done=true;}} if (type=="inview_loadmore_pagecafes"){ if (fu_qoh(item)){ var send_offset=item.getAttribute("offset"); fu_ket(send_offset); done=true;}} if (type=="inview_loadmore_pageprofile"){ if (fu_qoh(item)){ var send_offset=item.getAttribute("offset"); var send_alias=item.getAttribute("alias"); var send_pinned=item.getAttribute("pinned"); var send_tagged=item.getAttribute("tagged"); fu_wjv(send_offset,send_alias,send_pinned,send_tagged); done=true;}} if (type=="inview_loadmore_pagechat"){ if (fu_qoh(item)){ var send_offset=item.getAttribute("offset"); var send_chat=item.getAttribute("chat"); fu_lmr(send_offset,send_chat); done=true;}} if (type=="inview_loadmore_pagecafe"){ if (fu_qoh(item)){ var send_offset=item.getAttribute("offset"); var send_alias=item.getAttribute("alias"); var send_pinned=item.getAttribute("pinned"); var send_tagged=item.getAttribute("tagged"); fu_wsi(send_offset,send_alias,send_pinned,send_tagged); done=true;}} if (type=="inview_translate_run"){ if (s_httprequests_translate<=1){ if (fu_qoh(item)){ var send_element=item.getAttribute("element"); var send_text=item.getAttribute("text"); fu_yrg(send_element,send_text); done=true;}} } if (done==true){ item.remove();}});} if (ab("TIMESTAMP")){ runactions = ab("TIMESTAMP"); [].slice.call(runactions).forEach(function(item){ var done=false; var time=item.getAttribute("time"); if (fu_qoh(item)==true){ var newtime=fu_agm(time); if (item.innerHTML!=newtime){ item.setAttribute("data-title",fu_sak(time)); item.innerHTML=newtime;}} });} if (window.innerWidth!=s_width){ s_width=window.innerWidth; fu_jin(s_structure);} if (s_httprequests<=-1){ s_httprequests=0;} if (s_httprequests_translate<=-1){ s_httprequests_translate=0;}
fu_udy("Active Network Requests: "+s_httprequests+""); setTimeout("fu_gem()", 400);} function fu_fom(){ if (s_checkups==true){ fu_ayu("https://"+s_domain+"/app-token.txt?version="+s_timestamp+"",function(result){ if (result!="" && !result.includes("error")){ if (result!=s_token){ if (s_token_alert==false){ s_token_alert=fu_jom("The app has been updated, tap here to reload.","🎉","reload",true);}}else{ if (s_token_alert!=false){ fu_pyp(s_token_alert,"false"); s_token_alert=false;} setTimeout("fu_fom()", 600000);}}else{ if (s_token_alert!=false){ fu_pyp(s_token_alert,"false"); s_token_alert=false;}} },5000);}else{ setTimeout("fu_fom()", 5000);}} function fu_yij(){ if (s_checkups==true){ fu_ehb(); setTimeout("fu_yij()", 300000);}else{ setTimeout("fu_yij()", 5000);}} function fu_iff(){ if (s_checkups==true){ if (su_id!=null){ var item=""; if (sic==true){ var item="?item=true&type="+sic_type+"&last="+sic_last+"&resource="+sic_resource+"&resource_sub="+sic_resource_sub+"";}
fu_npw("https://"+s_hostname+"/get_account_checkup"+item+"",function(result){ var response = fu_hdg(result); if (response["fail"]==undefined){ if (response["system_api_error"]!=undefined){ if (response["system_api_error"]=="noauth"){ fu_drb();}} if (response["response_data"]!=undefined){ if (response["response_data"]!=""){ if (response["response_data"]["item_foundnew"]==true){ if (aa("checkup_item_canview")!=undefined){ if (fu_qoh(aa("checkup_item_canview"),false)){ setTimeout(""+sic_function+" fu_jsf();", 5); setTimeout("fu_jsf();", 500); sic=false; sic_type="false"; sic_last="false"; sic_resource="false"; sic_resource_sub="false"; sic_function="";}} }
s_timestamp=response["system_api_timestamp"]; su_avatar=response["response_data"]["info_avatar"]; su_header=response["response_data"]["info_header"]; su_name=response["system_account_name"]; if (aa("uiCheckupNotifications")){ if (response["response_data"]["notifications"]==0){ fu_zfc("uiCheckupNotifications",""+fu_gmq("bell")+"");}else{ if (s_width>=700){ fu_zfc("uiCheckupNotifications",""+fu_gmq("bell-fill")+"&ensp;"+fu_atf(response["response_data"]["notifications"])+"");}else{ fu_zfc("uiCheckupNotifications",""+fu_gmq("bell-fill")+"");}} } if (aa("uiCheckupMessages")){ if (response["response_data"]["messages"]==0){ fu_zfc("uiCheckupMessages",""+fu_gmq("envelope")+"");}else{ if (s_width>=700){ fu_zfc("uiCheckupMessages",""+fu_gmq("envelope-fill")+"&ensp;"+fu_atf(response["response_data"]["messages"])+"");}else{ fu_zfc("uiCheckupMessages",""+fu_gmq("envelope-fill")+"");}} } if (suc_notifications < response["response_data"]["notifications"]){ if (suc_notifications==0){ }} var titlecount=response["response_data"]["messages"]+response["response_data"]["notifications"]; fu_meg(titlecount); var lastonlinelist=fu_unj('ui_generate_menu_online'); var lastonlinehash=fu_unj('ui_generate_menu_online_hash'); fu_ojv('ui_generate_menu_online',response["response_data"]["friends_online"]); cachedata=response["response_data"]["friends_online"]; var newlist=""; if (cachedata!=false){ fu_qeq(cachedata, function(id){ var online='<text class="online_'+cachedata[""+id+""]["alias"]+'"><div class="badge" style="float: right;margin-right: -60px;font-size: 0.7em;"><div style="background:rgb(199, 82, 82);border-radius: 5px;width: 8px;height: 8px;display: inline-block;"></div> Offline</div></text>'; if (fu_gmr(cachedata[""+id+""]["seen"])<=60){ if (fu_gmr(cachedata[""+id+""]["active"])<=60){ var online='<text class="online_'+cachedata[""+id+""]["alias"]+'"><div class="badge online" style="float: right;margin-right: -60px;font-size: 0.7em;"><div style="background:rgb(82, 199, 135);border-radius: 5px;width: 8px;height: 8px;display: inline-block;"></div> Online</div></text>';}else{ var online='<text class="online_'+cachedata[""+id+""]["alias"]+'"><div class="badge idle" style="float: right;margin-right: -60px;font-size: 0.7em;"><div style="background:rgb(199, 144, 82);border-radius: 5px;width: 8px;height: 8px;display: inline-block;"></div> Idle</div></text>';}}
newlist=""+newlist+"<a href=\"javascript:fu_xlg('"+cachedata[""+id+""]["alias"]+"');\" class='multiline' style='padding-right: 70px;'><img src='"+s_imagecache+"?url="+cachedata[""+id+""]["avatar"]+"&size=88' class='avatar' alt='Avatar image for account "+cachedata[""+id+""]["name"]+"'>"+online+"&ensp;"+fu_cpd(cachedata[""+id+""]["name"])+"<div class='subline'>@"+cachedata[""+id+""]["alias"]+"</div></a>";}); var newhash=newlist.hashCode(); if (newhash!=lastonlinehash){ fu_ojv('ui_generate_menu_online_hash', newhash); fu_mxp("container_friends_online_list"); fu_pco("container_friends_online_list", "<div class='section'><h4 style='margin-top: 0px;'>Online Friends</h4><div id='gen_myfriend_list'></div></div>",true); fu_pco("gen_myfriend_list", newlist);}}else{ fu_ojv('ui_generate_menu_online_hash',"blank"); fu_mxp("container_friends_online_list"); fu_pco("container_friends_online_list", "<div class='section'><h4 style='margin-top: 0px;'>Online Friends</h4><div style='text-align:center;'>No friends online</div></div>",true);} var lastcafelist=fu_unj('ui_generate_menu_cafes'); var lastcafehash=fu_unj('ui_generate_menu_cafes_hash'); fu_ojv('ui_generate_menu_cafes',response["response_data"]["cafes_recent"]); cachedata=response["response_data"]["cafes_recent"]; var newlist=""; if (cachedata!=false){ fu_qeq(cachedata, function(id){ var time=fu_agm(cachedata[""+id+""]["activity"]); var timelocal=fu_sak(cachedata[""+id+""]["activity"]); newlist=""+newlist+"<a href='/!"+cachedata[""+id+""]["alias"]+"' class='multiline'><img src='"+s_imagecache+"?url="+cachedata[""+id+""]["avatar"]+"&size=88' class='avatar' alt='Avatar image for café "+cachedata[""+id+""]["name"]+"'>&ensp;"+fu_cpd(cachedata[""+id+""]["name"])+"<div class='subline'><timestamp time='"+cachedata[""+id+""]["activity"]+"' data-title='"+timelocal+"'>"+time+"</timestamp></div></a>";}); var newhash=newlist.hashCode(); if (newhash!=lastcafehash){ fu_ojv('ui_generate_menu_cafes_hash', newhash); fu_mxp("container_cafes_list"); fu_pco("container_cafes_list", "<div class='section'><h4 style='margin-top: 0px;'>My Cafés</h4><div id='gen_mycafe_list'></div></div>",true); fu_pco("gen_mycafe_list", newlist);}}else{ fu_ojv('ui_generate_menu_cafes_hash',"blank"); fu_mxp("container_cafes_list"); fu_pco("container_cafes_list", "<div class='section'><h4 style='margin-top: 0px;'>My Cafés</h4><div style='text-align:center;'>Not in any Cafés</div></div>",true);}
suc_notifications=response["response_data"]["notifications"]; suc_messages=response["response_data"]["messages"]; su_pro=response["response_data"]["info_pro"]; suc_pro_expire=response["response_data"]["info_pro_expire"]; suc_pro_expire_seconds=response["response_data"]["info_pro_expire_seconds"];}else{ fu_wrg('/error/500');}} }
fu_jsf();},2000);} if (s_embed==false){ setTimeout("fu_iff()", 1000);}}else{ setTimeout("fu_iff()", 5000);}} function fu_hxc(){ var frosting="-webkit-backdrop-filter: blur(20px) saturate(200%)!important;-moz-backdrop-filter: blur(20px) saturate(200%)!important;backdrop-filter: blur(20px) saturate(200%)!important;"; var ua = window.navigator.userAgent.toLowerCase(); var os_iOS = ua.indexOf('iphone') > -1 || ua.indexOf('ipad') > -1 || ua.indexOf('macintosh') > -1 && 'ontouchend' in document; var os_iOSApp = ua.indexOf('iphone') > -1 && ua.indexOf('heycafe_iosapp') > -1 && 'ontouchend' in document; var os_Android = ua.indexOf('android') > -1; var os_AndroidApp = ua.indexOf('android') > -1 && ua.indexOf('heycafe_androidapp'); var detect_engine_webkit = ua.indexOf('applewebkit') > -1; var detect_engine_gecko = ua.indexOf('gecko') > -1 && ua.indexOf('firefox') > -1; var os_macOS = ua.indexOf('macintosh'); accent=s_accent; if (s_app_colour!="false"){ accent=s_app_colour;} if (detect_engine_webkit==true){ s_renderengine="webkit";} if (os_iOS==true){ s_device="iOS";} if (os_iOSApp==true){ s_device="NativeiOSApp"; s_pwa=true;} if (os_Android==true){ s_device="Android";} if (os_AndroidApp==true){ s_device="NativeAndroidApp"; s_pwa=true;} if (os_macOS==true){ s_device="Mac";} if (detect_engine_gecko==true){ s_lowpowerdevice=true;} if (s_device=="iOS" || s_device=="Android"){ s_pwa_can=true;} if (window.matchMedia('(display-mode: standalone)').matches){ s_pwa=true;} if (window.navigator.standalone){ if (window.navigator.standalone==true){ s_pwa=true;}} if (s_device=="NativeiOSApp"){ fu_wkn("loader", "#uiNotification", "margin-top:calc(env(safe-area-inset-top) + 0px);"); aa("uiPhoneNotch").innerHTML='<div style="background:rgba(0,0,0,0.8);position: fixed;left: 0px;top: -10px;width: 100%;height: calc(env(safe-area-inset-top) + 10px);z-index: 50000;'+frosting +'"></div>';} if (s_device=="iOS" && s_pwa==true){ fu_wkn("loader", "#uiNotification", "margin-top:calc(env(safe-area-inset-top) + 0px);"); aa("uiPhoneNotch").innerHTML='<div style="background:rgba(0,0,0,0.8);position: fixed;left: 0px;top: -10px;width: 100%;height: calc(env(safe-area-inset-top) + 10px);z-index: 50000;'+frosting +'"></div>';}} function fu_qla(){ if (s_pwa==true){ viewport = ad("meta[name=viewport]"); viewport.setAttribute('content', 'viewport-fit=cover, width=device-width, initial-scale=1, user-scalable=no');}
fu_cap("Making some checks"); fu_xmv();} function fu_xmv(){ var serverid=fu_dlx(); s_hostname=ss[serverid]["hostname"]; fu_cap("Selecting endpoint"); fu_oqu();} function fu_oqu(){ fu_cap("Connecting to server"); var a = performance.now(); fu_npw("https://"+s_hostname+"?session="+su_session+"",function(result){ var response = fu_hdg(result); var b = performance.now(); var speed=b-a; fu_cap("Endpoint speed was "+speed+"ms"); fu_qgs(s_hostname,"speed",speed); fu_qgs(s_hostname,"online",true); if (response["system_api_timestamp"]!=undefined){ s_timestamp=response["system_api_timestamp"]; s_authsession=response["system_authsession"]; if (response["system_account_id"]!=undefined){ if (response["system_account_id"]==false){ su_session=null; su_alias=null; su_id=null; su_name=null; su_language="en"; fu_ymy("ses_su_session"); fu_ymy("ses_su_alias"); fu_ymy("ses_su_id"); fu_ymy("ses_su_name"); fu_ymy("ses_su_language");} if (response["system_account_id"]!=false){ su_session=response["system_account_session"]; su_alias=response["system_account_alias"]; su_id=response["system_account_id"]; su_name=response["system_account_name"]; su_language=response["system_account_language"]; su_avatar=response["newsession_account_avatar"]; su_header=response["newsession_account_header"]; su_pro=response["newsession_account_pro"]; su_admin=response["newsession_account_admin"]; su_moderator=response["newsession_account_moderator"]; s_app_colour=response["newsession_app_colour"]; s_app_stats=response["newsession_app_stats"]; s_app_reducemotion=response["newsession_app_reducemotion"]; s_app_hidesuggestions=response["newsession_app_hidesuggestions"]; s_app_forcedisplay=response["newsession_app_forcedisplay"]; s_app_scaledisplay=response["newsession_app_scaledisplay"]; s_app_reactions=response["newsession_app_reactions"]; var renderchangeforce=false; if (s_app_colour!="false"){ renderchangeforce=true; fu_hxc();} if (s_app_reducemotion!="false"){ renderchangeforce=true;} if (s_app_hidesuggestions!="false"){ renderchangeforce=true;} if (s_app_forcedisplay!="false"){ renderchangeforce=true;} if (s_app_scaledisplay!="false"){ renderchangeforce=true;} if (renderchangeforce==true){ fu_azs(s_mode); fu_hxc();}
fu_ccj("ses_su_session", su_session); fu_ccj("ses_su_alias", su_alias); fu_ccj("ses_su_id", su_id); fu_ccj("ses_su_name", su_name); fu_ccj("ses_su_language", su_language);}}
fu_cap("Host time sync of "+response["system_api_timestamp"]+""); fu_cap("Done"); fu_nxk(); fu_llf(); setTimeout(function(){ fu_mdz();}, 40);}else{ fu_cap("Load failed, trying again"); setTimeout(function(){ fu_drb();}, 100);}},2000);} function fu_mdz(){ if (s_pwa==false){ if (s_pwa_can==true){ fu_lsn((window.screen.width*window.devicePixelRatio),(window.screen.height*window.devicePixelRatio),function(image){ var spash = document.createElement('link'); spash.href = image; spash.media = '(device-width: '+window.screen.width+'px) and (device-height: '+window.screen.height+'px) and (-webkit-device-pixel-ratio: '+window.devicePixelRatio+')'; spash.rel = "apple-touch-startup-image"; document.head.appendChild(spash);});}}
s_token=ad('meta[name="app-token"]').content; if (window.location !== window.parent.location){ s_iframesource=window.parent.location; fu_mdb();} if (fu_pkg("ses_s_beta")!=""){ if (fu_pkg("ses_s_beta")=="true"){ if (s_domain=='hey.cafe'){ if (sp.startsWith("/share")==false && sp.startsWith("/request")==false && sp.startsWith("/embed")==false){ fu_gxi('ses_s_beta', 'true', 60); fu_jom("Hey you should be on beta... Redirecting now...","😎"); setTimeout("window.location.replace('https://beta.hey.cafe"+sp+"');", 500);}} }} if (s_domain=="beta.hey.cafe"){ fu_gxi('ses_s_beta', 'true', 60);}
fu_gem(); fu_iff(); fu_yij(); setTimeout("fu_fom()", 600000);} function fu_udy(message){ if (s_debug==true){ console.log(message);}} function fu_fqw(element){ if (aa(element)){ var data=aa(element).innerHTML; data=fu_diw(data); navigator.clipboard.writeText(data); fu_hrr("Copied to clipboard");}else{ fu_hrr("Can't copy");}} function fu_diw(input){ var e = document.createElement('div'); e.innerHTML = input; return e.childNodes[0].nodeValue;} function fu_gmq(string){ return "<img alt='"+string+"' class='svgicon' src='https://assets.heycafecdn.com/bootstrap_icons/svg/"+string+".svg' style='width: 1.2em;margin-left: 2px;margin-right: 2px;display: inline;vertical-align: text-top;'>";} var formatrender_currenthash=0; var formatrender_run=0; function fu_mqk(e){ if (ab("LIVEAREA")){ runactions = ab("LIVEAREA"); [].slice.call(runactions).forEach(function(item){ var position=fu_cpl(item); var originaldata=item.innerHTML; var contents=item.innerHTML; var newlinesmax=contents.match(/\n*$/gi)[0].length; var maincontainer=item.getAttribute("contentcontainer"); var entersend=false; var runupdate=true; if (item.hasAttribute("entersend")==true){ entersend=item.getAttribute("entersend");} if (contents!=""){ contents=" "+contents+""; var contenthash=contents.hashCode(); formatrender_run=formatrender_run+1; var runnumber=formatrender_run; formatrender_currenthash=contenthash; contents=fu_kwe(contents); contents=fu_jca(contents); var updateposition=true; fu_udy("la_render "+runnumber+": refresh: "+contents+""); if (e!=false){ fu_udy("la_render "+runnumber+": key: event"); fu_udy(e); if (e.key === "Meta"){ updateposition=false;} if (e.keyCode === 13){ updateposition=false;} if (e.keyCode === 229){ updateposition=false;} if (e.keyCode === 40){ updateposition=false;} if (e.keyCode === 39){ updateposition=false;} if (e.keyCode === 38){ updateposition=false;} if (e.keyCode === 37){ updateposition=false;} if (e.inputType){ if (e.inputType=="insertCompositionText"){ updateposition=false;} if (e.inputType=="insertText"){ if (e.data!=" "){ if (fu_cpd(e.data)!=e.data){ updateposition=false;}}} if (e.inputType=="insertParagraph"){ updateposition=false;} if (e.inputType=="insertReplacementText"){ updateposition=false;} if (e.inputType=="deleteContentBackward"){ updateposition=false;}}
fu_udy("la_render "+runnumber+": enter check"); if (entersend!=false){ fu_udy("la_render "+runnumber+": enter send not false"); if (e.keyCode === 13 || e.inputType=="insertParagraph"){ fu_udy("la_render "+runnumber+": clicking "+entersend+""); aa(entersend).click(); runupdate=false; var matches = contents.match(/(.*)\<div\>\<br\>\<\/div\>$/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(.*)\<div\>\<br\>\<\/div\>$/); contents=contents.replace(result[0], result[1]+"<br>"); item.innerHTML=contents;});}} }else{ fu_udy("la_render "+runnumber+": key: noevent");} if (runupdate==true){ if (s_lowpowerdevice==true){ updateposition=false;} if (position==0){ if (e==false){ updateposition=false;}}
fu_udy("la_render "+runnumber+": update: "+updateposition+""); var maincontent=contents; maincontent=maincontent.trim(); maincontent=maincontent.replace(/^\n|\n$/g, ''); maincontent=maincontent.replaceAll("&nbsp;", " "); maincontent=maincontent.replaceAll("<div><br></div>", "\n"); maincontent=maincontent.replaceAll("<br>", "\n"); maincontent=maincontent.replaceAll("<div>", "\n"); maincontent=maincontent.replaceAll("</div>", ""); maincontent=fu_kwe(maincontent); maincontent=fu_kwe(maincontent); aa(maincontainer).value=maincontent; fu_udy("la_render "+runnumber+": container: done"); setTimeout(function(){ fu_udy("la_render "+runnumber+": timeout: done"); if (contenthash!=formatrender_currenthash){ fu_udy("la_render "+runnumber+": timeout: hash: wrong"); updateposition=false;} if (runnumber!=formatrender_run){ fu_udy("la_render "+runnumber+": timeout: run: wrong"); updateposition=false;} var contenttoupdate=false; if (updateposition==true){ var matches = contents.match(/([^&a-z0-9A-Z\/]\@)([^\n\s\!\?\@\#\$\%\&\.\,\<\>\(\)]+)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\@)([^\n\s\!\?\@\#\$\%\&\.\,\<\>\(\)]+)/); var id=fu_hmk(20); if (fu_wid(contents,result[0])<=1){ var tag="bad"; if (fu_unj('generate_livearea_mention_'+result[2]+'')!=null){ tag="good";}
contenttoupdate=true; contents=contents.replace(result[0], "<text class=\"mention "+tag+"\" id=\"mention_"+id+"\" data=\""+result[2]+"\">@"+result[2]+"</text>");}}); var matches = contents.match(/([^&a-z0-9A-Z\/]\!)([^\n\s\!\?\@\#\$\%\&\.\,\<\>\(\)]+)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/([^&]\!)([^\n\s\!\?\@\#\$\%\&\.\,\<\>\(\)]+)/); var id=fu_hmk(20); if (fu_wid(contents,result[0].substring(1))<=1){ var tag="bad"; if (fu_unj('generate_livearea_cafe_'+result[2]+'')!=null){ tag="good";}
contenttoupdate=true; contents=contents.replace(result[0].substring(1), "<text class=\"cafe "+tag+"\" id=\"cafe_"+id+"\" data=\""+result[2]+"\">!"+result[2]+"</text>");}}); var matches = contents.match(/([^&a-z0-9A-Z\/]\#)([^\n\s\!\?\@\#\$\%\&\.\,\<\>\(\)]+)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/([^&]\#)([^\n\s\!\?\@\#\$\%\&\.\,\<\>\(\)]+)/); var id=fu_hmk(20); if (fu_wid(contents,result[0].substring(1))<=1){ var tag="wait"; contenttoupdate=true; contents=contents.replace(result[0].substring(1), "<text class=\"tag "+tag+"\" id=\"tag_"+id+"\" data=\""+result[2]+"\">#"+result[2]+"</text>");}}); var matches = contents.match(/([^&a-z0-9A-Z\/]\:)([^\n\s\!\?\@\#\$\%\&\.\,\<\>\(\)]+)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/([^&]\:)([^\n\s\!\?\@\#\$\%\&\.\,\<\>\(\)]+)/); var id=fu_hmk(20); if (fu_wid(contents,result[0].substring(1))<=1){ var tag="bad"; contenttoupdate=true; contents=contents.replace(result[0].substring(1), "<text class=\"emoji "+tag+"\" id=\"emoji_"+id+"\" data=\""+fu_csj(result[2])+"\">:"+result[2]+"</text>");}}); contents=fu_cpd(contents); contents=contents.trimStart(); contents=contents.replace(/^\n|\n$/g, ''); fu_udy("la_render "+runnumber+": timeout: contents: "+contents+""); if (item.innerHTML==originaldata){ item.innerHTML=contents; var wheretogo=position; var secondposition=fu_yxq(item); fu_udy("la_render "+runnumber+": timeout: contents: updated"); if ((secondposition+1)<wheretogo){ wheretogo=secondposition;} if (wheretogo>=secondposition){ wheretogo=secondposition;} if (wheretogo!=0){ fu_iyi(item,wheretogo);}
fu_udy("la_render "+runnumber+": timeout: position: old "+position+" new "+wheretogo+" max "+secondposition+""); var matches = contents.match(/\<text class="mention ([^\<\>]+)" id="([^\<\>]+)" data="([^\<\>]+)">([^\<\>]+)\<\/text\>/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<text class="mention ([^\<\>]+)" id="([^\<\>]+)" data="([^\<\>]+)">([^\<\>]+)\<\/text\>/); if (result[1]=="bad"){ fu_sfs(result[2],result[3]);}}); var matches = contents.match(/\<text class="cafe ([^\<\>]+)" id="([^\<\>]+)" data="([^\<\>]+)">([^\<\>]+)\<\/text\>/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<text class="cafe ([^\<\>]+)" id="([^\<\>]+)" data="([^\<\>]+)">([^\<\>]+)\<\/text\>/); if (result[1]=="bad"){ fu_nsm(result[2],result[3]);}}); var matches = contents.match(/\<text class="emoji ([^\<\>]+)" id="([^\<\>]+)" data="([^\<\>]+)">([^\<\>]+)\<\/text\>/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<text class="emoji ([^\<\>]+)" id="([^\<\>]+)" data="([^\<\>]+)">([^\<\>]+)\<\/text\>/); if (result[1]=="bad"){ fu_nzi(result[2],fu_xla(result[3]));}});}} }, 20);}} });}} function fu_jro(e){ formatrender_currenthash=0; formatrender_run=formatrender_run+1;} function fu_fap(e){ if (ab("LIVEAREA")){ runactions = ab("LIVEAREA"); [].slice.call(runactions).forEach(function(item){ item.innerHTML=""; var maincontainer=item.getAttribute("contentcontainer"); if (aa(maincontainer)){ aa(maincontainer).value="";}});}} function fu_sfs(element,search){ if (aa(element)){ var x = fu_twy(aa(element)).left; var y = fu_twy(aa(element)).top; if (aa("container_modl")){ y=y-s_scroll_modl; x=x-375; y=y-72;}else{ y=y-s_scroll;} if (x<=0){ x=0;}
fu_pco("uiSuggestion","<bubble class='float_suggestions' style='left:"+x+"px;top:"+y+"px;'>Loading...</bubble>"); fu_npw("https://"+s_hostname+"/get_account_info?query="+search+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_ojv('generate_livearea_mention_'+search+'',response["response_data"]); fu_qtl(element,response["response_data"]);}else{ fu_vdm(element,search);}},false,true);}} function fu_qtl(element,data){ if (aa(element)){ fu_mxp("uiSuggestion"); aa(element).classList.add("good"); aa(element).classList.remove("bad");}} function fu_vdm(element,search){ if (aa(element)){ var x = fu_twy(aa(element)).left; var y = fu_twy(aa(element)).top; if (aa("container_modl")){ y=y-s_scroll_modl; x=x-375; y=y-72;}else{ y=y-s_scroll;} if (x<=0){ x=0;}
fu_pco("uiSuggestion","<bubble class='float_suggestions' style='left:"+x+"px;top:"+y+"px;'>Loading...</bubble>"); fu_npw("https://"+s_hostname+"/get_search_accounts?search="+ae(fu_csj(search))+"&count=10",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_gwg(element,response["response_data"]);}else{ fu_mxp("uiSuggestion");}},false,true);}} function fu_gwg(element,data){ if (aa(element)){ var x = fu_twy(aa(element)).left; var y = fu_twy(aa(element)).top; if (aa("container_modl")){ y=y-s_scroll_modl; x=x-375; y=y-72;}else{ y=y-s_scroll;} if (x<=0){ x=0;} var suggestions=""; fu_qeq(data["accounts"], function(id){ var content=data["accounts"][""+id+""]; suggestions=suggestions+"<div class=\"minibubble\" onclick=\"javascript:fu_qpg('"+element+"','@"+content["alias"]+"');\" style='margin-top: 0px;margin-bottom:3px;padding: 8px;'><img source='"+content["avatar"]+"' class='avatar optimizer_img' alt='Avatar for "+content["name"]+"' style='display: inline-block;width: 16px;height: 16px;margin-bottom: -2px;'> "+fu_cpd(content["name"])+"</div>";}); if (suggestions==""){ suggestions="No matches...";}
fu_mxp("uiSuggestion"); fu_pco("uiSuggestion","<bubble class='float_suggestions' style='left:"+x+"px;top:"+y+"px;'>"+suggestions+"</bubble>"); s_suggestionclear=element; setTimeout("fu_wuw('"+element+"');", 100);}} function fu_nsm(element,search){ if (aa(element)){ var x = fu_twy(aa(element)).left; var y = fu_twy(aa(element)).top; if (aa("container_modl")){ y=y-s_scroll_modl; x=x-375; y=y-72;}else{ y=y-s_scroll;} if (x<=0){ x=0;}
fu_pco("uiSuggestion","<bubble class='float_suggestions' style='left:"+x+"px;top:"+y+"px;'>Loading...</bubble>"); fu_npw("https://"+s_hostname+"/get_cafe_info?query="+search+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_ojv('generate_livearea_cafe_'+search+'',response["response_data"]); fu_vep(element,response["response_data"]);}else{ fu_mjz(element,search);}},false,true);}} function fu_vep(element,data){ if (aa(element)){ fu_mxp("uiSuggestion"); aa(element).classList.add("good"); aa(element).classList.remove("bad");}} function fu_mjz(element,search){ if (aa(element)){ var x = fu_twy(aa(element)).left; var y = fu_twy(aa(element)).top; if (aa("container_modl")){ y=y-s_scroll_modl; x=x-375; y=y-72;}else{ y=y-s_scroll;} if (x<=0){ x=0;}
fu_pco("uiSuggestion","<bubble class='float_suggestions' style='left:"+x+"px;top:"+y+"px;'>Loading...</bubble>"); fu_npw("https://"+s_hostname+"/get_search_cafes?search="+ae(fu_csj(search))+"&count=10",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_exk(element,response["response_data"]);}else{ fu_mxp("uiSuggestion");}},false,true);}} function fu_exk(element,data){ if (aa(element)){ var x = fu_twy(aa(element)).left; var y = fu_twy(aa(element)).top; if (aa("container_modl")){ y=y-s_scroll_modl; x=x-375; y=y-72;}else{ y=y-s_scroll;} if (x<=0){ x=0;} var suggestions=""; fu_qeq(data["cafes"], function(id){ var content=data["cafes"][""+id+""]; suggestions=suggestions+"<div class=\"minibubble\" onclick=\"javascript:fu_qpg('"+element+"','!"+content["alias"]+"');\" style='margin-top: 0px;margin-bottom:3px;padding: 8px;'><img source='"+content["avatar"]+"' class='avatar optimizer_img' alt='Avatar for Cafe "+content["name"]+"' style='display: inline-block;width: 16px;height: 16px;margin-bottom: -2px;'> "+fu_cpd(content["name"])+"</div>";}); if (suggestions==""){ suggestions="No matches...";}
fu_mxp("uiSuggestion"); fu_pco("uiSuggestion","<bubble class='float_suggestions' style='left:"+x+"px;top:"+y+"px;'>"+suggestions+"</bubble>"); s_suggestionclear=element; setTimeout("fu_wuw('"+element+"');", 100);}} function fu_nzi(element,search){ if (aa(element)){ var x = fu_twy(aa(element)).left; var y = fu_twy(aa(element)).top; if (aa("container_modl")){ y=y-s_scroll_modl; x=x-375; y=y-72;}else{ y=y-s_scroll;} if (x<=0){ x=0;}
fu_pco("uiSuggestion","<bubble class='float_suggestions' style='left:"+x+"px;top:"+y+"px;'>Loading...</bubble>"); fu_npw("https://"+s_hostname+"/get_system_emoji_search?search="+search+"&count=20",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_xae(element,response["response_data"]);}else{ fu_mxp("uiSuggestion");}},false,true);}} function fu_xae(element,data){ if (aa(element)){ var x = fu_twy(aa(element)).left; var y = fu_twy(aa(element)).top; if (aa("container_modl")){ y=y-s_scroll_modl; x=x-375; y=y-72;}else{ y=y-s_scroll;} if (x<=0){ x=0;} var suggestions=""; fu_qeq(data, function(id){ var content=data[""+id+""]; suggestions=suggestions+"<div class=\"minibubble\" onclick=\"javascript:fu_qpg('"+element+"','"+content["emoji"]+"');\" style='margin-top: 0px;margin-bottom:3px;padding: 8px;'>"+fu_cpd(content["emoji"])+" "+fu_cpd(content["alias_a"])+"</div>";}); if (suggestions==""){ suggestions="No matches...";}
fu_mxp("uiSuggestion"); fu_pco("uiSuggestion","<bubble class='float_suggestions' style='left:"+x+"px;top:"+y+"px;'>"+suggestions+"</bubble>"); s_suggestionclear=element; setTimeout("fu_wuw('"+element+"');", 100);}} function fu_qpg(element,content){ if (aa(element)){ fu_mxp("uiSuggestion"); aa(element).classList.add("wait"); aa(element).classList.remove("bad"); aa(element).classList.remove("good"); aa(element).innerHTML=content; fu_mqk(true);}} function fu_wuw(element){ if (!aa(element)){ if (s_suggestionclear==element){ fu_mxp("uiSuggestion");}}else{ setTimeout("fu_wuw('"+element+"');", 100);}} function fu_npw(url, callback, maxtime, cache, credentials){ s_httprequests=s_httprequests+1; var queryString = ""; var hash=url.hashCode(); if (s_authsession!=null){ queryString=""+queryString+"http_authsession="+s_authsession+""; if (document.hidden){ queryString=""+queryString+"&http_backgroundtask=true";}} var timeout=10000; var storecache=false; var cachefound=false; if (maxtime!=undefined){ if (maxtime!=false){ timeout=maxtime;}} if (cache!=undefined){ storecache=cache;} if (credentials==undefined){ credentials=true;} if (storecache==true){ if (fu_unj('gethttp_cache_storage_'+hash+'')!=null){ cachefound=true;}} if (cachefound==false){ var xhr = new XMLHttpRequest(); xhr.timeout = timeout; xhr.withCredentials = credentials; xhr.onreadystatechange = function(){ if(xhr.readyState==4){ s_httprequests=s_httprequests-1; content = xhr.responseText; if (content==""){ content="{ \"fail\": \"page_error\", \"system_api_error\": true }";} if (storecache==true){ fu_ojv('gethttp_cache_storage_'+hash+'',content);}
callback(content);}else{ if(xhr.readyState==4 && xhr.status!=200){ s_httprequests=s_httprequests-1; callback("{ \"fail\": \"unknown\", \"system_api_error\": true }");}} }
xhr.ontimeout = function(){ s_httprequests=s_httprequests-1; callback("{ \"fail\": \"timeout\", \"system_api_error\": true }");}
xhr.open("POST", url, true); xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"); xhr.send(queryString);}else{ s_httprequests=s_httprequests-1; var content=fu_unj('gethttp_cache_storage_'+hash+''); callback(content);}} function fu_opn(url, data, callback, cacheclear, credentials){ s_httprequests=s_httprequests+1; var purgecache=true; if (cacheclear!=undefined){ purgecache=cacheclear;} if (credentials==undefined){ credentials=true;} var queryString = ""; var xhr = new XMLHttpRequest(); xhr.withCredentials = credentials; xhr.onreadystatechange = function(){ if(xhr.readyState==4){ s_httprequests=s_httprequests-1; content = xhr.responseText; if (content==""){ content="{ \"fail\": \"page_error\", \"system_api_error\": true }";} if (purgecache==true){ fu_ehb();}
callback(content);}}
xhr.open("POST", url, true); if (s_authsession!=null){ queryString=""+queryString+"http_authsession="+s_authsession+""; if (document.hidden){ queryString=""+queryString+"&http_backgroundtask=true";}} var queryString = "&data="+data; xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"); xhr.send(queryString);} function fu_ayu(url, callback, maxtime, credentials){ s_httprequests=s_httprequests+1; var xhr = new XMLHttpRequest(); var timeout=10000; if (maxtime!=undefined){ timeout=maxtime;} if (credentials==undefined){ credentials=true;}
xhr.timeout = timeout; xhr.withCredentials = credentials; xhr.onreadystatechange = function(){ if(xhr.readyState==4){ s_httprequests=s_httprequests-1; content = xhr.responseText; if (content==""){ content="{ \"fail\": \"page_error\", \"system_api_error\": true }";}
callback(content);}else{ if(xhr.readyState==4 && xhr.status!=200){ s_httprequests=s_httprequests-1; callback("{ \"fail\": \"unknown\", \"system_api_error\": true }");}} }
xhr.ontimeout = function(){ s_httprequests=s_httprequests-1; callback("{ \"fail\": \"timeout\", \"system_api_error\": true }");}
xhr.open("GET", url, true); xhr.send();} function fu_vbz(hex){ var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex); return result ? { r: parseInt(result[1], 16),
g: parseInt(result[2], 16),
b: parseInt(result[3], 16) } : null;} function fu_xtr(r,g,b){ r = r.toString(16); g = g.toString(16); b = b.toString(16); if (r.length==1){ r = "0"+r;} if (g.length==1){ g = "0"+g;} if (b.length==1){ b = "0"+b;} return "#"+r + g + b;} function fu_qlz(col, amt){ if (col.includes("rgb")){ col=col.replace("rgb(", ""); col=col.replace(")", ""); col=col.replace(/\s/g, ''); var arr=col.split(","); col=fu_xtr(parseInt(arr[0]),parseInt(arr[1]),parseInt(arr[2]));}
col = col.replace(/^#/, ''); if (col.length === 3) col = col[0] + col[0] + col[1] + col[1] + col[2] + col[2]; let [r, g, b] = col.match(/.{2}/g); ([r, g, b] = [parseInt(r, 16) + amt, parseInt(g, 16) + amt, parseInt(b, 16) + amt]); r = Math.max(Math.min(255, r), 0).toString(16); g = Math.max(Math.min(255, g), 0).toString(16); b = Math.max(Math.min(255, b), 0).toString(16); const rr = (r.length < 2 ? '0' : '') + r; const gg = (g.length < 2 ? '0' : '') + g; const bb = (b.length < 2 ? '0' : '') + b; var hex='#'+rr+''+gg+''+bb+''; var rgb=fu_vbz(hex); return 'rgb('+rgb['r']+','+rgb['g']+','+rgb['b']+')';} function fu_rio(col){ if (col.includes("rgb")){ col=col.replace("rgb(", ""); col=col.replace(")", ""); col=col.replace(/\s/g, ''); var arr=col.split(","); col=fu_xtr(parseInt(arr[0]),parseInt(arr[1]),parseInt(arr[2]));}
col = col.replace(/^#/, ''); if (col.length === 3) col = col[0] + col[0] + col[1] + col[1] + col[2] + col[2]; let [r, g, b] = col.match(/.{2}/g); ([r, g, b] = [parseInt(r, 16), parseInt(g, 16), parseInt(b, 16)]); r = Math.max(Math.min(255, r), 0).toString(16); g = Math.max(Math.min(255, g), 0).toString(16); b = Math.max(Math.min(255, b), 0).toString(16); const rr = (r.length < 2 ? '0' : '') + r; const gg = (g.length < 2 ? '0' : '') + g; const bb = (b.length < 2 ? '0' : '') + b; var hex='#'+rr+''+gg+''+bb+''; var rgb=fu_vbz(hex); var brightness = Math.round(((parseInt(rgb['r']) * 299) + (parseInt(rgb['g']) * 587) + (parseInt(rgb['b']) * 114)) / 1000); var textColour = (brightness > 125) ? '#000000' : '#ffffff'; return textColour;} function fu_hhx(col, amt){ if (col.includes("rgb")){ col=col.replace("rgba(", ""); col=col.replace("rgb(", ""); col=col.replace(")", ""); col=col.replace(/\s/g, ''); var rgb=col.split(","); return 'rgba('+parseInt(rgb[0])+','+parseInt(rgb[1])+','+parseInt(rgb[2])+','+amt+')';}else{ return col;}} function fu_uae(name, blanksend){ if (ad('meta[name="'+name+'"]')){ return ad('meta[name="'+name+'"]').content;}else{ return blanksend;}} function fu_agm(timestamp){ var math_now=s_timestamp.split(""); var math_new=timestamp.split(""); var t1 = new Date(""+math_now[0]+""+math_now[1]+""+math_now[2]+""+math_now[3]+"", (""+math_now[4]+""+math_now[5]+"" - 1), ""+math_now[6]+""+math_now[7]+"", ""+math_now[8]+""+math_now[9]+"", ""+math_now[10]+""+math_now[11]+"", ""+math_now[12]+""+math_now[13]+"", 0); var t2 = new Date(""+math_new[0]+""+math_new[1]+""+math_new[2]+""+math_new[3]+"", (""+math_new[4]+""+math_new[5]+"" - 1), ""+math_new[6]+""+math_new[7]+"", ""+math_new[8]+""+math_new[9]+"", ""+math_new[10]+""+math_new[11]+"", ""+math_new[12]+""+math_new[13]+"", 0); var dif = t1.getTime() - t2.getTime(); var seconds = dif / 1000; if (seconds > ((24*3600)*2)){ return Math.floor(seconds/(24*3600))+" days ago";} if (seconds > 24*3600){ return "Yesterday";} if (seconds > (3600*2)){ return Math.floor(seconds/3600)+" hours ago";} if (seconds > 3600){ return "1 hour ago";} if (seconds >= 60 && seconds < 120){ return "1 minute ago";} if (seconds > 60){ return Math.floor(seconds/60)+" minutes ago";} if (seconds==1){ return "1 second ago";} if (seconds < 60){ return Math.floor(seconds)+" seconds ago";}} function fu_gmr(timestamp){ var math_now=s_timestamp.split(""); var math_new=timestamp.split(""); var t1 = new Date(""+math_now[0]+""+math_now[1]+""+math_now[2]+""+math_now[3]+"", (""+math_now[4]+""+math_now[5]+"" - 1), ""+math_now[6]+""+math_now[7]+"", ""+math_now[8]+""+math_now[9]+"", ""+math_now[10]+""+math_now[11]+"", ""+math_now[12]+""+math_now[13]+"", 0); var t2 = new Date(""+math_new[0]+""+math_new[1]+""+math_new[2]+""+math_new[3]+"", (""+math_new[4]+""+math_new[5]+"" - 1), ""+math_new[6]+""+math_new[7]+"", ""+math_new[8]+""+math_new[9]+"", ""+math_new[10]+""+math_new[11]+"", ""+math_new[12]+""+math_new[13]+"", 0); var dif = t1.getTime() - t2.getTime(); var seconds = dif / 1000; return seconds;} function fu_sak(timestamp){ var secondsago=fu_gmr(timestamp); var nowdate=new Date(); nowdate.setSeconds(nowdate.getSeconds() - secondsago); var finalcode=nowdate.toLocaleString("en-GB", { hour12: true, year: 'numeric', month: 'numeric', day: 'numeric', hour: '2-digit', minute: '2-digit'}); return finalcode;} function fu_pbr(wide,tall,media){ s_modl=true; if (wide==undefined){ wide=false;} if (tall==undefined){ tall=false;} if (media==undefined){ media=false;} var offsettop=0; if (s_embed==true){ offsettop=s_embed_position;} if (!aa("container_modl")){ ab("BODY")[0].classList.add("noscroll"); aa("uiModl").innerHTML="<modl style='padding-top: "+offsettop+"px;'><div class='background' onclick='javascript:fu_jwg();'></div><div class='case' id='container_modl_case'><div class='frame' id='container_modl'></div></div><div class='close' onclick='javascript:fu_jwg();'>"+fu_gmq("x")+"</div></modl>";}else{ aa("container_modl").innerHTML="";} if (wide==true){ aa("container_modl_case").classList.add("wide");}else{ aa("container_modl_case").classList.remove("wide");} if (tall==true){ aa("container_modl_case").classList.add("tall");}else{ aa("container_modl_case").classList.remove("tall");} if (media==true){ aa("container_modl_case").classList.add("media");}else{ aa("container_modl_case").classList.remove("media");} setTimeout("fu_jsf();", 20); setTimeout("fu_jsf();", 500);} function fu_ikg(resource,type,raw,alt){ if (raw==undefined){ raw=false;} if (alt==undefined){ alt="false";}else{ alt=fu_xla(alt);} var altrender=""; if (alt!="false"){ altrender="<bubble class='alt_text'>"+fu_cpd(fu_nwo(alt))+"</bubble>";} if (type=="image"){ fu_pbr(false,false,true); if (raw==true){ fu_pco("container_modl",""+altrender+"<bubble class='noframe' onclick=\"javascript:fu_jwg();\"><div style=\"position: absolute; width: 100%; top: 20px;z-index: -5;\"><div class=\"loading\"></div></div><div style='text-align: center;'><a href='"+resource+"' target='_blank'><img src='"+resource+"' style='max-width: 100%;width: auto;text-align: center;'></a></div></bubble>");}else{ fu_pco("container_modl",""+altrender+"<bubble class='noframe' onclick=\"javascript:fu_jwg();\"><div style=\"position: absolute; width: 100%; top: 20px;z-index: -5;\"><div class=\"loading\"></div></div><div style='text-align: center;'><a href='"+resource+"' target='_blank'><img source='"+resource+"' nowait='true' useparent='true' class='optimizer_img' style='max-width: 100%;width: auto;text-align: center;'></a></div></bubble>");}} if (type=="video"){ fu_pbr(true); fu_pco("container_modl","<bubble><video style='width: 100vw;height: auto;max-height: calc(100vh - 80px);' controls autoplay><source src=\""+resource+"\">Your browser does not support the video tag.</video></bubble>");} if (type=="content"){ fu_pbr(true); fu_pco("container_modl","<bubble class='conversation normal'><div class='content' id='modl_content_loadin'><div id='loading'></div></div></bubble>"); fu_ayu(""+resource+"",function(result){ var contents = fu_mtb(result); contents=fu_uiv(contents); contents=fu_idd(contents); contents=fu_ibd(contents); contents=fu_cpd(contents); contents=fu_esd(contents); contents=fu_ebi(contents); fu_mxp("modl_content_loadin"); fu_pco("modl_content_loadin",""+contents+"");},10000,false);}} function fu_jwg(){ s_modl=false; if (aa("container_modl")){ ab("BODY")[0].classList.remove("noscroll"); aa("uiModl").innerHTML="";}} function fu_jog(element,type,source,html){ if (aa(element)){ fu_mxp(element); if (type=="external"){ fu_pco(element,'<bubble class="alt1" style="text-align:center;"><h3 style="margin-top:0px;">Want to load content from the external source '+source+'?</h3><div>When you load content from an external source the company hosting this content can see information about you including your location and browser data.<BR><BR><div class="button" style="padding: 30px;padding-top: 15px;padding-bottom: 15px;" onclick="fu_hoy(\''+element+'\',\''+html+'\')">Yes load media</div><div style="padding: 30px;padding-top: 15px;padding-bottom: 15px;"><a href="javascript:fu_ghv(\''+element+'\',\''+html+'\');">Yes load media (in PIP)</a></div></div></bubble>');} if (type=="internal"){ fu_pco(element,'<bubble class="alt1" style="text-align:center;"><h3 style="margin-top:0px;">Want to load content?</h3><div>Not all attachments are checked to be safe, only open files from accounts you trust. If you find media someone has uploaded as inappropriate please report it.<BR><BR><div class="button" style="padding: 30px;padding-top: 15px;padding-bottom: 15px;" onclick="fu_hoy(\''+element+'\',\''+html+'\')">Yes load media</div><div style="padding: 30px;padding-top: 15px;padding-bottom: 15px;"><a href="javascript:fu_ghv(\''+element+'\',\''+html+'\');">Yes load media (in PIP)</a></div></div></bubble>');}} setTimeout("fu_jsf();", 20); setTimeout("fu_jsf();", 500);} function fu_hoy(element,html){ fu_mxp(element); fu_pco(element,fu_xla(html)); setTimeout("fu_jsf();", 20); setTimeout("fu_jsf();", 500);} function fu_ghv(element,html){ fu_mxp(element); fu_pco(element,'<bubble class="alt1" style="text-align:center;"><h3 style="margin-top:0px;">Playing in PIP</h3><div>You can navagate away from the page if you wish and the media will stay open.</div></bubble>'); fu_ela(fu_hmk(30),"<div style='margin-left:-10px;margin-right:-10px;margin-top:-10px;margin-bottom:-10px;'>"+fu_xla(html)+"</div>");} function fu_ela(id,content){ if (!aa("popover_"+id)){ fu_pco("uiPopover","<popover id='popover_"+id+"'><div class='close' onclick=\"javascript:fu_dfc('"+id+"');\">x</div><div>"+content+"</div></popover>");} setTimeout("fu_jsf();", 20); setTimeout("fu_jsf();", 500);} function fu_dfc(id){ if (aa("popover_"+id)){ aa("popover_"+id).remove();}} function fu_qel(element){ if (aa(element)){ var elements=aa(element).querySelectorAll('*'); if (elements.length>=1){ aa(element).removeAttribute("id"); elements.forEach(el => { if (el.innerHTML!=undefined){ if (el.innerHTML!=""){ var transtext=el.innerHTML; if (transtext.includes("<")==false && transtext.includes(">")==false){ el.innerHTML=fu_hnl(transtext);}} }});}else{ var transtext=aa(element).innerHTML; if (transtext.includes("<")==false && transtext.includes(">")==false){ aa(element).innerHTML=fu_hnl(transtext); aa(element).removeAttribute("id");}} }} function fu_hnl(text){ if (su_language!=null){ var hashsource=""+su_language+"_en_"+text+""; var hash=hashsource.hashCode(); if (fu_mgo('translate_'+hash+'')==null){ var transelement="uitrans_"+fu_hmk(40)+""; var transcall="<action type='inview_translate_run' element='"+transelement+"' text='"+text+"'></action>"; return "<span id='"+transelement+"'>"+text+"</span>"+transcall+"";}else{ var response=fu_mgo('translate_'+hash+''); return "<span>"+response["text"]+"</span>";}} } function fu_yrg(element,text){ s_httprequests_translate=s_httprequests_translate+1; if (su_language!=null && su_language!="en"){ var hashsource=""+su_language+"_en_"+text+""; var hash=hashsource.hashCode(); if (fu_mgo('translate_'+hash+'')==null){ if (aa(element)){ var postdata={}; postdata["text"]=ae(fu_csj(fu_klh(text))); postdata["target"]=su_language; postdata["source"]="en"; postdata=fu_ere(postdata); var randhostname=fu_rbw(); fu_opn("https://"+randhostname+"/api/language_translate",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_hqt('translate_'+hash+'',response["response_data"]); s_httprequests_translate=s_httprequests_translate-1; fu_byh(element,response["response_data"]);}else{ s_httprequests_translate=s_httprequests_translate-1;}},false);}}else{ var response=fu_mgo('translate_'+hash+''); s_httprequests_translate=s_httprequests_translate-1; fu_byh(element,response);}}else{ s_httprequests_translate=s_httprequests_translate-1;}} function fu_byh(element,response){ if (aa(element)){ fu_mxp(element); fu_pco(element,response["text"]); aa(element).removeAttribute("id");}} function fu_ljg(element,content){ if (aa(element)){ aa(element).removeAttribute('replc'); aa(element).innerHTML=content;}} function fu_ugn(element){ if (aa(element)){ return aa(element).innerHTML;}else{ return false;}} function fu_pco(element,content,translate){ if (translate==undefined || su_language==null || su_language=="en"){ translate=false;} if (aa(element)){ aa(element).removeAttribute('replc'); if (translate==false){ aa(element).insertAdjacentHTML('beforeend', content);}else{ var transid="trans_"+fu_hmk(30)+""; aa(element).insertAdjacentHTML('beforeend',"<span id='"+transid+"'>"+content+"</span>"); fu_qel(transid);}} } function fu_fic(element,content){ if (aa(element)){ aa(element).insertAdjacentHTML('afterbegin', content);}} function fu_mxp(element){ if (aa(element)){ aa(element).removeAttribute('replc'); aa(element).innerHTML="";} setTimeout("fu_jsf();", 20); setTimeout("fu_jsf();", 500);} function fu_zfc(element,content){ if (aa(element)){ var hash=content.hashCode(); var replace=true; if (aa(element).getAttribute('replc')){ if (hash==aa(element).getAttribute('replc')){ replace=false;}} if (replace==true){ aa(element).setAttribute('replc', hash); aa(element).innerHTML=content;}} } function fu_wkn(parent, name, rules){ if (aa("ui-style-"+parent+"")){ var style = aa("ui-style-"+parent+"");}else{ var style = document.createElement('style'); style.setAttribute("id", "ui-style-"+parent+""); style.type = 'text/css'; ab('head')[0].appendChild(style);}
style.sheet.insertRule(name+"{"+rules+"}", 0);} function fu_cen(parent){ if (aa("ui-style-"+parent+"")){ aa("ui-style-"+parent+"").remove();}} function fu_heq(element,textarea,preview){ aa(preview).src=URL.createObjectURL(element.files[0]); fu_zqy(element, function(data){ aa(textarea).value=data;});} function fu_pxf(element,textarea,preview,button,onlytype){ var uploadgood=true; var uploadmessage=""; var file=element.files[0]; var size=element.files[0].size; var size_kb=size/1024; var size_mb=size_kb/1024; var types_images = ['image/jpeg', 'image/png', 'image/gif', 'image/webp']; var types_videos = ['video/quicktime', 'video/mp4', 'video/mpeg']; if (button!=false){ aa(button).disabled = true;}
element.style.display = "none"; aa(preview).innerHTML="<div style='text-align:center;margin-top:20px;margin-bottom:20px;'><div id='uploader_temp_header'><strong>Uploading file...</strong><BR><div class='loading'></div></div><div id='uploader_temp_progress'></div><div id='uploader_temp_preview'></div></div>"; if (button==undefined){ button=false;} if (onlytype==undefined){ onlytype=false;} if (onlytype=="images"){ if (types_images.indexOf(file.type)==-1){ uploadgood=false; uploadmessage="You can only upload images";}} if (size_mb>=96){ uploadgood=false; uploadmessage="File is to large, file needs to be 96mb or under";} if (aa(preview)==undefined){ uploadgood=false; uploadmessage="Upload area missing";} if (uploadgood==true){ if (types_images.indexOf(file.type)!==-1){ var previewurl=URL.createObjectURL(file); if (aa("uploader_temp_preview")!=undefined){ aa("uploader_temp_preview").innerHTML="<img style='margin-top:20px;max-width:400px;margin-bottom:10px;' src='"+previewurl+"'>";}}
let data = new FormData(); data.append('file', file); let request = new XMLHttpRequest(); request.withCredentials = true; request.open('POST', "https://"+s_hostname+"/post_temp_file"); if (s_authsession!=null){ request.setRequestHeader("authsession", s_authsession);}
request.upload.addEventListener('progress', function(e){ let percent_complete = (e.loaded / e.total)*100; aa("uploader_temp_progress").innerHTML=""+Math.round(percent_complete)+"%";}); request.addEventListener('load', function(e){ var status=request.status; var data=request.response; var response = fu_hdg(data); if (response["system_api_error"]==false && response["response_data"]!=false){ var id=response["response_data"]["filename"]; aa(textarea).value=id; if (aa("uploader_temp_header")!=undefined){ aa("uploader_temp_header").innerHTML="<strong>Finished</strong>"; aa("uploader_temp_progress").innerHTML="Upload is finished, you can now submit."; if (button!=false){ aa(button).disabled = false;}} if (types_videos.indexOf(file.type)!==-1){ if (aa("uploader_temp_header")!=undefined){ aa("uploader_temp_header").innerHTML="<strong>Uploading Preview</strong>"; aa("uploader_temp_progress").innerHTML="We are now uploading the preview"; var previewurl=URL.createObjectURL(file); aa("uploader_temp_preview").innerHTML="<video id=\"main-video\" controls><source type=\""+file.type+"\"></video><canvas id=\"video-canvas\"></canvas>"; ad("#main-video source").setAttribute('src', previewurl); aa("main-video").load(); var canvcx=aa("video-canvas").getContext("2d"); var stages_meta=false; var stages_play=false; var stages_preview=false; aa("main-video").addEventListener('loadedmetadata', function(){ if (stages_preview==false){ aa("video-canvas").width = aa("main-video").videoWidth; aa("video-canvas").height = aa("main-video").videoHeight; stages_meta=true;}}); aa("main-video").addEventListener('canplay', function(){ if (stages_preview==false){ aa("video-canvas").style.display = 'inline'; aa("main-video").currentTime = (aa("main-video").duration/2)/2; stages_play=true;}}); aa("main-video").addEventListener('timeupdate', function(){ if (stages_preview==false){ if (stages_meta==true){ if (stages_play==true){ canvcx.drawImage(aa("main-video"), 0, 0, aa("main-video").videoWidth, aa("main-video").videoHeight); var image = aa("video-canvas").toDataURL('image/jpeg'); aa("main-video").style.display = 'none'; aa("video-canvas").style.display = 'none'; let preview_data = new FormData(); preview_data.append('image', image); preview_data.append('file', aa(textarea).value); stages_preview=true; let preview_request = new XMLHttpRequest(); preview_request.withCredentials = true; preview_request.open('POST', "https://"+s_hostname+"/post_temp_preview"); if (s_authsession!=null){ preview_request.setRequestHeader("authsession", s_authsession);}
preview_request.upload.addEventListener('progress', function(e){ let percent_complete = (e.loaded / e.total)*100; aa("uploader_temp_progress").innerHTML=""+Math.round(percent_complete)+"%";}); preview_request.addEventListener('load', function(e){ var status=preview_request.status; var data=preview_request.response; var response = fu_hdg(data); if (response["system_api_error"]==false && response["response_data"]!=false){ var id=response["response_data"]["filename"]; aa("uploader_temp_header").innerHTML="<strong>Finished</strong>"; aa("uploader_temp_progress").innerHTML="Upload is finished, you can now submit."; if (button!=false){ aa(button).disabled = false;}}else{ aa("uploader_temp_header").innerHTML="<strong>Error</strong>"; aa("uploader_temp_progress").innerHTML="Preview upload failed";}}); preview_request.send(preview_data);}} }});}} }else{ aa("uploader_temp_header").innerHTML="<strong>Error</strong>"; aa("uploader_temp_progress").innerHTML="File upload failed";}}); request.send(data);}else{ aa("uploader_temp_header").innerHTML="<strong>Error</strong>"; aa("uploader_temp_progress").innerHTML=uploadmessage;}} function fu_zqy(element, callback){ var file = element.files[0]; var reader = new FileReader(); reader.onloadend = function(){ callback(reader.result);}
reader.readAsDataURL(file);}var cp_elements_radius = 16; var cp_elements_align = "left"; var cp_fonts="-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Oxygen-Sans,Ubuntu,Cantarell,\"Helvetica Neue\",sans-serif;"; var cp_frost_heavy="-webkit-backdrop-filter: blur(20px) saturate(200%)!important;-moz-backdrop-filter: blur(20px) saturate(200%)!important;backdrop-filter: blur(20px) saturate(200%)!important;"; var cp_frost_medium="-webkit-backdrop-filter: blur(10px) saturate(200%)!important;-moz-backdrop-filter: blur(10px) saturate(200%)!important;backdrop-filter: blur(10px) saturate(200%)!important;"; var cp_frost_light="-webkit-backdrop-filter: blur(5px) saturate(200%)!important;-moz-backdrop-filter: blur(5px) saturate(200%)!important;backdrop-filter: blur(5px) saturate(200%)!important;"; var cp_radial_transparent_purpleblue="radial-gradient(200% 200% at 5% 5%, rgba(213,95,254,0.22), rgba(47,141,255,0.22), rgba(21,173,161,0.22)), rgba(255,255,255,0.22)"; var css_special_inline_event_none=""; var css_special_inline_event_pride="background: linear-gradient( 124deg, #010101 12.5%, #784F17 12.5%, #784F17 25%, #e70000 25%, #e70000 37.5%, #ff8c00 37.5%, #ff8c00 50%, #ffef00 50%, #ffef00 62.5%, #00811f 62.5%, #00811f 75%, #0044ff 75%, #0044ff 87.5%, #760089 87.5% );color: #ffffff !important;text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;"; var css_special_inline_event_pride_2024="background: linear-gradient(to right, rgb(237, 34, 36), rgb(243, 91, 34), rgb(249, 150, 33), rgb(245, 193, 30), rgb(241, 235, 27) 27%, rgb(241, 235, 27), rgb(241, 235, 27) 33%, rgb(99, 199, 32), rgb(12, 155, 73), rgb(33, 135, 141), rgb(57, 84, 165), rgb(97, 55, 155), rgb(147, 40, 142));color: #ffffff !important;text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;"; var css_special_inline_event_canada_day="background: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSc2NTAnIGhlaWdodD0nNjUwJyB2aWV3Qm94PSctMjAxNSAtMjAwMCA0MDMwIDQwMzAnPjxwYXRoIGZpbGw9JyNEODA2MjEnIGQ9J20tOTAgMjAzMCA0NS04NjNhOTUgOTUgMCAwIDAtMTExLTk4bC04NTkgMTUxIDExNi0zMjBhNjUgNjUgMCAwIDAtMjAtNzNsLTk0MS03NjIgMjEyLTk5YTY1IDY1IDAgMCAwIDM0LTc5bC0xODYtNTcyIDU0MiAxMTVhNjUgNjUgMCAwIDAgNzMtMzhsMTA1LTI0NyA0MjMgNDU0YTY1IDY1IDAgMCAwIDExMS01N2wtMjA0LTEwNTIgMzI3IDE4OWE2NSA2NSAwIDAgMCA5MS0yN2wzMzItNjUyIDMzMiA2NTJhNjUgNjUgMCAwIDAgOTEgMjdsMzI3LTE4OS0yMDQgMTA1MmE2NSA2NSAwIDAgMCAxMTEgNTdsNDIzLTQ1NCAxMDUgMjQ3YTY1IDY1IDAgMCAwIDczIDM4bDU0Mi0xMTUtMTg2IDU3MmE2NSA2NSAwIDAgMCAzNCA3OWwyMTIgOTktOTQxIDc2MmE2NSA2NSAwIDAgMC0yMCA3M2wxMTYgMzIwLTg1OS0xNTFhOTUgOTUgMCAwIDAtMTExIDk4bDQ1IDg2M3onLz48L3N2Zz4=\"), linear-gradient( 90deg, #D80621 12.5%, #D80621 12.5%, #D80621 25%, #FFFFFF 25%, #FFFFFF 37.5%, #FFFFFF 37.5%, #FFFFFF 50%, #FFFFFF 50%, #FFFFFF 62.5%, #FFFFFF 62.5%, #FFFFFF 75%, #D80621 75%, #D80621 87.5%, #D80621 87.5% );background-size: contain;background-repeat: no-repeat;background-position: center;color: #ffffff !important;text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;"; var cpc_background=""; var cpc_alt_background=""; var cpc_alt_active_background=""; var cpc_text=""; var cpc_alt_text=""; var cpc_link=""; var cpc_button_background=""; var cpc_button_text=""; var cpc_alt_button_background=""; var cpc_alt_button_text=""; var cpc_box_background=""; var cpc_border="rgba(0,0,0,0.2)"; var cpc_shadow="rgba(50,50,50,0.06) 0px 2px 4px 1px"; var cpc_alert_background="rgb(0,0,0)"; var cpc_alert_border="rgba(255,255,255,0.8)"; var cpc_alert_text="rgb(255,255,255)"; var cpc_alt1_background="rgb(248,226,178)"; var cpc_alt1_text=fu_rio(cpc_alt1_background); var cpc_alt2_background="rgb(222,210,252)"; var cpc_alt2_text=fu_rio(cpc_alt2_background); var cpc_alt3_background="rgb(195,228,243)"; var cpc_alt3_text=fu_rio(cpc_alt3_background); var cpc_alt4_background="rgb(211,238,195)"; var cpc_alt4_text=fu_rio(cpc_alt4_background); var cpc_alt5_background="rgb(239,212,230)"; var cpc_alt5_text=fu_rio(cpc_alt5_background); var cpc_alt6_background="rgb(243,219,181)"; var cpc_alt6_text=fu_rio(cpc_alt6_background); var cpc_alt7_background="rgb(240,205,204)"; var cpc_alt7_text=fu_rio(cpc_alt7_background); function fu_azs(mode,accent){ if (mode==undefined){ mode=s_mode;} if (accent==undefined){ accent=s_accent; if (s_app_colour!="false"){ accent=s_app_colour;}}
fu_cen("all"); if (mode=="dark"){ cpc_link=fu_qlz("rgb("+accent+")",40); if (fu_rio(cpc_link)=="#ffffff"){ cpc_link=fu_qlz(cpc_link,80);}
cpc_background="rgb(0,0,0)"; cpc_text=fu_rio(cpc_background); cpc_alt_background="rgb(45,45,45)"; cpc_alt_tint_background="rgb(50,50,50)"; cpc_alt_active_background="rgb(40,40,40)"; cpc_alt_text=fu_rio(cpc_alt_background); cpc_box_background="rgb(23,23,23)"; cpc_text=fu_rio(cpc_background); cpc_button_background=fu_qlz("rgb("+accent+")",0); cpc_button_text=fu_rio(cpc_button_background); cpc_alt_button_background=fu_qlz(cpc_background,30); cpc_alt_button_text=fu_rio(cpc_alt_button_background);} if (mode=="light"){ cpc_link="rgb("+accent+")"; if (fu_rio(cpc_link)=="#000000"){ cpc_link=fu_qlz(cpc_link,-80);}
cpc_background="rgb(242,242,242)"; cpc_text=fu_rio(cpc_background); cpc_alt_background="rgb(240,240,240)"; cpc_alt_tint_background="rgb(245,245,245)"; cpc_alt_active_background="rgb(230,230,230)"; cpc_alt_text=fu_rio(cpc_alt_background); cpc_box_background="rgb(255,255,255)"; cpc_text=fu_rio(cpc_background); cpc_button_background=fu_qlz("rgb("+accent+")",0); cpc_button_text=fu_rio(cpc_button_background); cpc_alt_button_background=fu_qlz(cpc_background,-30); cpc_alt_button_text=fu_rio(cpc_alt_button_background);}
s_blank_colour=cpc_alt_background; fu_wkn("all", "html", "padding:0px;min-height:100vh;margin:0px;"); if (s_app_scaledisplay=="false"){ fu_wkn("all", "body", "-webkit-touch-callout: none;padding:0px;min-height:100vh;margin:0px;background:"+cpc_background+";color:"+cpc_text+";font-family: "+cp_fonts+";font-size:1em;line-height: 1.3;-webkit-font-smoothing: antialiased;-webkit-text-size-adjust: 100%;font-size: 100%;text-rendering: optimizeLegibility;");} if (s_app_scaledisplay=="small"){ fu_wkn("all", "body", "-webkit-touch-callout: none;padding:0px;min-height:100vh;margin:0px;background:"+cpc_background+";color:"+cpc_text+";font-family: "+cp_fonts+";font-size:1.15em;line-height: 1.3;-webkit-font-smoothing: antialiased;-webkit-text-size-adjust: 100%;font-size: 100%;text-rendering: optimizeLegibility;");} if (s_app_scaledisplay=="medium"){ fu_wkn("all", "body", "-webkit-touch-callout: none;padding:0px;min-height:100vh;margin:0px;background:"+cpc_background+";color:"+cpc_text+";font-family: "+cp_fonts+";font-size:1.25em;line-height: 1.3;-webkit-font-smoothing: antialiased;-webkit-text-size-adjust: 100%;font-size: 100%;text-rendering: optimizeLegibility;");} if (s_app_scaledisplay=="large"){ fu_wkn("all", "body", "-webkit-touch-callout: none;padding:0px;min-height:100vh;margin:0px;background:"+cpc_background+";color:"+cpc_text+";font-family: "+cp_fonts+";font-size:1.5em;line-height: 1.3;-webkit-font-smoothing: antialiased;-webkit-text-size-adjust: 100%;font-size: 100%;text-rendering: optimizeLegibility;");}
fu_wkn("all", "body.noscroll", "overflow:hidden;"); fu_wkn("all", "body .hide_if_active_input","max-height:400px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", "body .hide_if_active_livearea","max-height:400px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", "body.active_input .hide_if_active_input, body.active_livearea .hide_if_active_livearea", "overflow:hidden;max-height:0px !important;padding-top:0px !important;padding-bottom:0px !important;margin-top:0px !important;margin-bottom:0px !important;"); fu_wkn("all", "a:focus", "outline-offset: -2px;outline: 2px solid rgb(243,199,116) !important;"); fu_wkn("all", "a:focus bubble", "outline-offset: -2px;outline: 2px solid rgb(243,199,116) !important;"); fu_wkn("all", "bubble .button:focus", "outline-offset: -2px;outline: 2px solid rgb(243,199,116) !important;"); fu_wkn("all", "input:focus", "outline-offset: -2px;outline: 2px solid rgb(243,199,116) !important;"); fu_wkn("all", "button:focus", "outline-offset: -2px;outline: 2px solid rgb(243,199,116) !important;"); fu_wkn("all", "*[tabindex]:focus", "outline-offset: -2px;outline: 2px solid rgb(243,199,116) !important;"); fu_wkn("all", "input:focus:not([type=submit])", "outline-offset: -2px;outline: 2px solid "+fu_qlz(cpc_button_background,20)+" !important;"); fu_wkn("all", "textarea:focus", "outline-offset: -2px;outline: 2px solid "+fu_qlz(cpc_button_background,20)+" !important;"); fu_wkn("all", "livearea:focus", "outline-offset: -2px;outline: 2px solid "+fu_qlz(cpc_button_background,20)+" !important;"); fu_wkn("all", "p", "margin-top:10px;margin-bottom:10px;"); fu_wkn("all", "pre", "overflow: auto;font-family: "+cp_fonts+";padding:15px;border-radius: "+cp_elements_radius+"px;background:"+cpc_alt_background+";"); fu_wkn("all", "pre p", "padding:0px !important;margin:0px !important;"); fu_wkn("all", "content", "display: block;margin-top: env(safe-area-inset-top);margin-bottom: env(safe-area-inset-bottom);padding-top:10px;padding-bottom:10px;"); fu_wkn("all", "svg", "height: 1em;width: 1em;display: inline-flex;align-self: center;top: 0.15em;position: relative;"); if (mode=="dark"){ fu_wkn("all", ".svgicon", "filter: invert(1);");}
fu_wkn("all", "img", "height: auto;width: 100%;"); fu_wkn("all", ".optimizer_hidden", "opacity:0;"); fu_wkn("all", ".optimizer_show", "opacity:1;"); fu_wkn("all", "span[onclick]:hover img[emoji], div[onclick]:hover img[emoji], a:hover img[emoji]", "filter: drop-shadow(1px 0 0 white) drop-shadow(-1px 0 0 white) drop-shadow(0 1px 0 white) drop-shadow(0 -1px 0 white);"); fu_wkn("all", "tooltip", "position:fixed;display:inline-block;z-index: 9000;padding:5px;padding-left:10px;padding-right:10px;font-size:0.8em;box-shadow: "+cpc_shadow+";background:"+cpc_box_background+";border-radius: "+cp_elements_radius+"px;border:1px solid "+cpc_button_background+";"); fu_wkn("all", "details", "overflow:hidden;background:"+cpc_alt_background+";border-radius: "+cp_elements_radius+"px;padding:15px;padding-bottom: 5px;"); fu_wkn("all", "details summary", "cursor: pointer;background:"+fu_qlz(cpc_alt_background,-20)+";padding:10px;outline: none;margin-left: -15px;margin-top: -15px;margin-right: -15px;margin-bottom: 10px;padding-left: 20px;padding-right: 20px;"); fu_wkn("all", "rainbow", "display: inline-block;-webkit-background-clip: text;-webkit-text-fill-color: transparent;font-size: 1.5em;font-weight:600;transition: background-image .25s ease-in-out;"); if (mode=="dark"){ fu_wkn("all", "rainbow", "background-image: linear-gradient(to left, violet, yellow, lightblue, green, orange, red);");}else{ fu_wkn("all", "rainbow", "background-image: linear-gradient(to left, violet, indigo, blue, green, orange, red);");}
fu_wkn("all", "rainbow:hover", "background-image: linear-gradient(to left, "+cpc_text+", "+cpc_text+");"); fu_wkn("all", ".sticker", "z-index: 4;display: inline-grid;place-items: center;font-weight: 900;font-size: 2.5em;color: #bb4af0;margin-left: 10px;margin-right: 10px;"); fu_wkn("all", ".sticker span", "z-index: 6;background: linear-gradient(to right, #ef548f, #ef8b6d, #cfef6b, #3bf0c1, #bb4af0);-webkit-background-clip: text;-webkit-text-fill-color: transparent;-webkit-text-stroke: 0.03em rgba(0, 0, 0, 0.7);"); fu_wkn("all", ".sticker > *, .sticker::before, .sticker::after", "grid-area: text;"); fu_wkn("all", ".sticker::before, .sticker::after", "content: attr(data-text); color: #fff;"); fu_wkn("all", ".sticker::before", "z-index: 2;-webkit-text-stroke: 0.41em white;"); fu_wkn("all", ".sticker::after", "z-index: 1;text-shadow: 0.07em 0.08em 0.35em rgba(0, 0, 0, 1), -0.07em -0.05em 0.35em rgba(0, 0, 0, 1);"); fu_wkn("all", "img:not([src])", "opacity:0;"); fu_wkn("all", ".playbuttoncase", "z-index: 25;border: 2px solid #ffffff;font-size: 48px;color: rgb(255,255,255);background: rgba(21, 106, 52, 0.62);width: 48px;height: 48px;padding: 20px;line-height: 0;border-radius: 100%;position: absolute;top: 50%;left: 50%;margin-left: -48px;margin-top: -48px;"); fu_wkn("all", ".playbutton", "vertical-align: middle;display: inline-block;width: 0;height: 0;border-top: 20px solid transparent;border-bottom: 20px solid transparent;border-left: 30px solid rgb(255,255,255);margin-top: 5px;margin-left: 12px;"); fu_wkn("all", "span[onclick]", "display: inline-block;cursor: pointer;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", "span[onclick]:hover", "background:"+cpc_button_background+" !important;color:"+cpc_button_text+" !important;"); fu_wkn("all", "h1", "margin-top: 0px;"); fu_wkn("all", "hr", "margin-top:15px;margin-bottom:15px;border:0px;height:2px;background:"+cpc_alt_background+";"); fu_wkn("all", "iframe", "height:100%;width:100%;border:0px;border-radius: "+cp_elements_radius+"px;"); fu_wkn("all", "video", "height:100%;width:100%;border:0px;border-radius: "+cp_elements_radius+"px;"); fu_wkn("all", "#embed_preview iframe", "border-radius:0px;"); fu_wkn("all", ".horizontalscroll", "padding-top:3px;padding-bottom:3px;overflow-x: auto;white-space: nowrap;padding: 5px;padding-left:0px;padding-right:5px;margin-top:10px;"); fu_wkn("all", "bubble .horizontalscroll", "border:0px;background:none;margin-top:0px;"); fu_wkn("all", "#uiNotification", "right: 0px;"); fu_wkn("all", "#uiNotification .notification", "cursor: pointer;font-weight:500;display:block;overflow:hidden;margin-bottom:0px;color:"+cpc_alt1_text+";background:"+cpc_alt1_background+";border-radius:"+cp_elements_radius+"px;border:1px solid "+cpc_border+";padding:15px;margin-top:15px;margin-right:15px;margin-left:15px;"); fu_wkn("all", "#uiAlert .notification", "position:relative;cursor: pointer;display:inline-block;overflow:hidden;color:"+cpc_alert_text+";background:"+cpc_alert_background+";border-radius:100px;font-weight:600;padding:20px;padding-top:10px;padding-bottom:10px;margin-top:10px;margin-right:5px;margin-left:5px;-webkit-transition: all 350ms ease-in-out;-moz-transition: all 350ms ease-in-out;-o-transition: all 350ms ease-in-out;transition: all 350ms ease-in-out;"); fu_wkn("all", "#uiAlert .notification.show", "top: calc(0px + env(safe-area-inset-top));"); fu_wkn("all", "#uiAlert .notification.hide", "top: -200px;"); fu_wkn("all", "#uiPopover", "position: fixed;bottom: 0px;right: 0px;max-width: calc(100vw - 15px);max-height: 50vh;z-index: 2000;"); fu_wkn("all", "#uiPopover popover", "width: 300px;float: right;z-index: 2000;margin-right: 15px;margin-bottom: 10px;background: "+cpc_box_background+";border:1px solid "+cpc_border+";border-radius:"+cp_elements_radius+"px;padding: 10px;animation: animation-bubble-in 250ms cubic-bezier(0.17,0.04,0.03,0.94) both !important;box-shadow: "+cpc_shadow+";"); fu_wkn("all", "#uiPopover .close", "color:"+cpc_button_text+" !important;background:"+cpc_button_background+";;border-radius: "+cp_elements_radius+"px;position: absolute;margin-top: -20px;margin-right: -10px;padding: 5px;padding-left: 10px;padding-right: 10px;right: 0;z-index: 2200;text-align: center;font-size: 13px;cursor: pointer;text-transform: lowercase;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", "#uiPopover .close:hover", "background:"+fu_qlz(cpc_button_background,20)+" !important;"); fu_wkn("all", "modl", "animation: animation-modl-in 200ms linear 1 forwards !important;display:block;z-index: 8000;position: fixed;top: 0px;left: 0px;width: 100%;height: 100%;margin-top: env(safe-area-inset-top);max-height: calc(100% - env(safe-area-inset-top));"); fu_wkn("all", "modl .background", "cursor: pointer;display:block;z-index: -5;position: fixed;top: -100px;left: -100px;width: calc(100% + 200px);height: calc(100% + 200px);background:"+fu_hhx(cpc_box_background,0.8)+";"+cp_frost_light+""); fu_wkn("all", "modl .case", "width:100%;max-width: 750px;position: absolute;top: 25%;left: 50%;transform: translate(-50%,-25%);max-height: calc(100svh - env(safe-area-inset-bottom));overflow: auto;-webkit-overflow-scrolling: touch;overflow-x: hidden;"); fu_wkn("all", "modl .frame", "margin:10px;margin-bottom: calc(10px + env(safe-area-inset-bottom));"); fu_wkn("all", "modl .frame .nomarginmodl", "margin-top: -15px;margin-left: -15px;margin-right: -15px;"); fu_wkn("all", "modl .case.wide", "max-width: 1100px;"); fu_wkn("all", "modl .case.media", "max-width: 11000px;"); fu_wkn("all", "modl .case.media .frame", "background: none;box-shadow:none;"); fu_wkn("all", "modl .case.media bubble.alt_text", "max-width:600px;margin:0px auto;margin-bottom:10px;"); fu_wkn("all", "modl .case.media bubble.noframe", "overflow: hidden;text-align: center;padding: 0px;background: none !important;border:0px;border-radius: 0px;box-shadow:none;border:0px solid "+cpc_border+";"); fu_wkn("all", "modl .case.media bubble img", "max-width: 100vw;max-height: calc(100vh - 80px);width: auto;"); fu_wkn("all", "modl .close", "display: block;position: fixed;top: 10px;right: 10px;width: 30px;height: 30px;line-height: 30px;padding: 0px;font-weight: 600;text-align: center;box-shadow: "+cpc_shadow+";z-index: 100;border-radius: 100%;cursor: pointer;text-transform: uppercase;transition: all 200ms ease-in-out 0s;color:"+cpc_button_text+" !important;background:"+cpc_button_background+";border:1px solid "+cpc_border+";"); fu_wkn("all", "modl .close:hover", "background:"+fu_qlz(cpc_button_background,20)+" !important;"); if (fu_rio(cpc_button_background)=="#ffffff"){ fu_wkn("all", "modl .close .svgicon", "filter: invert(1);");}else{ fu_wkn("all", "modl .close .svgicon", "filter: invert(0);");}
fu_wkn("all", ".avatar", "z-index: 5;position: relative;display:inline-block;border-radius:100%;background:rgb(255,255,255);"); fu_wkn("all", "a", "color:"+cpc_link+";font-weight:600;text-decoration:none;-webkit-tap-highlight-color: rgba(0,0,0,0);"); fu_wkn("all", "a:hover", "color:"+fu_qlz(cpc_link,-40)+";"); fu_wkn("all", ".mention a", "background:rgba("+accent+",0.1);color:"+cpc_text+";border-radius: "+cp_elements_radius+"px;padding: 3px;padding-left: 10px;padding-right: 10px;display: inline-block;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", ".mention a:hover", "background:rgba("+accent+",0.3);color:"+cpc_text+";"); fu_wkn("all", ".mention a .avatar", "margin-right: 4px;"); fu_wkn("all", ".mention a img", "width: 1em !important;height: 1em !important;max-width: 1em !important;max-height: 1em !important;"); fu_wkn("all", ".tab", "display:inline-block;cursor: pointer;margin-left:5px;margin-right:5px;padding:10px;padding-left:20px;padding-right:20px;font-size: 0.8em;border-radius:"+cp_elements_radius+"px;background: "+cpc_box_background+";color:"+cpc_text+" !important;border:1px solid "+cpc_border+";box-shadow: "+cpc_shadow+";-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", "bubble .tab", "background: "+cpc_alt_background+";color:"+cpc_alt_text+" !important;box-shadow:none;"); fu_wkn("all", ".tab.current", "border:1px solid "+cpc_button_background+";"); fu_wkn("all", ".tab.important", "color:"+cpc_button_text+" !important;background:"+cpc_button_background+";"); fu_wkn("all", ".tab.important:hover", "background:"+fu_qlz(cpc_button_background,20)+" !important;"); if (fu_rio(cpc_button_background)=="#ffffff"){ fu_wkn("all", ".tab.important .svgicon", "filter: invert(1);");}else{ fu_wkn("all", ".tab.important .svgicon", "filter: invert(0);");}
fu_wkn("all", ".tab.important.alt1", "color:"+cpc_alt1_text+" !important;background:"+cpc_alt1_background+";"); fu_wkn("all", ".tab.important.alt2", "color:"+cpc_alt2_text+" !important;background:"+cpc_alt2_background+";"); fu_wkn("all", ".tab.important.alt3", "color:"+cpc_alt3_text+" !important;background:"+cpc_alt3_background+";"); fu_wkn("all", ".tab.important.alt4", "color:"+cpc_alt4_text+" !important;background:"+cpc_alt4_background+";"); fu_wkn("all", ".tab.important.alt4", "color:"+cpc_alt5_text+" !important;background:"+cpc_alt5_background+";"); fu_wkn("all", ".tab.important.alt4", "color:"+cpc_alt6_text+" !important;background:"+cpc_alt6_background+";"); fu_wkn("all", ".tab.important.alt4", "color:"+cpc_alt7_text+" !important;background:"+cpc_alt7_background+";"); fu_wkn("all", ".tab.solidhover", "cursor:default;"); fu_wkn("all", ".tab.nohover", "cursor:default;background:none !important;color:"+cpc_text+" !important;border:0px solid "+cpc_border+";"); fu_wkn("all", ".tab:not(.nohover):not(.solidhover):hover", "background:"+cpc_alt_active_background+" !important;color:"+cpc_alt_text+" !important;"); fu_wkn("all", ".tab.important:not(.nohover):not(.solidhover):hover", "background:"+fu_qlz(cpc_button_background,20)+" !important;color:"+cpc_button_text+" !important;"); fu_wkn("all", ".verified_badge img", "width: 0.8em !important;vertical-align: baseline !important;filter: invert(43%) sepia(79%) saturate(2932%) hue-rotate(209deg) brightness(90%) contrast(89%);"); fu_wkn("all", "bubble", "display:block;overflow:auto;margin-bottom:15px;padding: 10px;box-shadow: "+cpc_shadow+";background:"+cpc_box_background+";border-radius: "+cp_elements_radius+"px;border:1px solid "+cpc_border+";animation: animation-bubble-in 250ms cubic-bezier(0.17,0.04,0.03,0.94) both !important;"); fu_wkn("all", "bubble.noanimation", "animation: animation-bubble-in 0ms cubic-bezier(0.17,0.04,0.03,0.94) both !important;"); fu_wkn("all", "modl bubble:last-of-type", "margin-bottom:0px;"); fu_wkn("all", "bubble .button", "background:"+cpc_button_background+";color:"+cpc_button_text+";padding: 5px;padding-left: 15px;padding-right: 15px;display:inline-block;border-radius: "+cp_elements_radius+"px;text-align: center;cursor: pointer;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", "bubble .button:hover", "background:"+fu_qlz(cpc_button_background,20)+";color:"+cpc_button_text+";"); fu_wkn("all", "bubble[onclick]", "cursor: pointer;border-radius: "+cp_elements_radius+"px;border:0px;padding:10px;background:"+cpc_box_background+";color:"+cpc_alt_text+";border:1px solid "+cpc_border+";"); fu_wkn("all", "bubble[onclick]:hover", "background:rgba("+accent+",0.2) !important;color:"+cpc_text+" !important;border:1px solid "+fu_qlz(cpc_button_background,20)+";"); fu_wkn("all", "bubble.alt0", "background:"+cpc_background+";border-radius: "+cp_elements_radius+"px;padding:15px;border:0px;border:1px solid "+cpc_border+";"); fu_wkn("all", "bubble.alt1, bubble.alt1[onclick]", "color:"+cpc_alt1_text+";background:"+cpc_alt1_background+";border-radius: "+cp_elements_radius+"px;padding:15px !important;border:0px;border:1px solid "+cpc_border+";"); fu_wkn("all", "bubble.alt2, bubble.alt2[onclick]", "color:"+cpc_alt2_text+";background:"+cpc_alt2_background+";border-radius: "+cp_elements_radius+"px;padding:15px !important;border:0px;border:1px solid "+cpc_border+";"); fu_wkn("all", "bubble.alt3, bubble.alt3[onclick]", "color:"+cpc_alt3_text+";background:"+cpc_alt3_background+";border-radius: "+cp_elements_radius+"px;padding:15px !important;border:0px;border:1px solid "+cpc_border+";"); fu_wkn("all", "bubble.alt4, bubble.alt4[onclick]", "color:"+cpc_alt4_text+";background:"+cpc_alt4_background+";border-radius: "+cp_elements_radius+"px;padding:15px !important;border:0px;border:1px solid "+cpc_border+";"); fu_wkn("all", "bubble.alt5, bubble.alt5[onclick]", "color:"+cpc_alt5_text+";background:"+cpc_alt5_background+";border-radius: "+cp_elements_radius+"px;padding:15px !important;border:0px;border:1px solid "+cpc_border+";"); fu_wkn("all", "bubble.alt6, bubble.alt6[onclick]", "color:"+cpc_alt6_text+";background:"+cpc_alt6_background+";border-radius: "+cp_elements_radius+"px;padding:15px !important;border:0px;border:1px solid "+cpc_border+";"); fu_wkn("all", "bubble.alt7, bubble.alt7[onclick]", "color:"+cpc_alt7_text+";background:"+cpc_alt7_background+";border-radius: "+cp_elements_radius+"px;padding:15px !important;border:0px;border:1px solid "+cpc_border+";"); fu_wkn("all", "bubble .minibubble", "overflow:hidden;background:"+cpc_alt_background+";border-radius: "+cp_elements_radius+"px;padding:10px;border:1px solid "+cpc_border+";"); fu_wkn("all", "bubble .minibubble.list", "overflow:hidden;background:none;border-radius: 0px;border-bottom:1px solid "+cpc_alt_active_background+";"); fu_wkn("all", "bubble .minibubble.list[onclick]:hover", "padding:10px;border-radius: "+cp_elements_radius+"px;"); fu_wkn("all", "bubble .minibubble.list:last-of-type", "border-bottom:0px solid "+cpc_alt_background+";"); fu_wkn("all", "bubble .minibubble:first-of-type", "margin-top:0px;"); fu_wkn("all", "bubble .minibubble .extra", "font-size: 0.8em;margin-top:10px;background: "+cpc_alt_background+";padding:10px;border-radius: "+cp_elements_radius+"px;"); fu_wkn("all", "bubble .minibubble.spacing", "margin-top:10px !important;"); fu_wkn("all", "bubble .minibubble:empty", "display:none;"); fu_wkn("all", "bubble.float_suggestions", "position: fixed;z-index: 50000;max-height: 200px;margin-top: 24px;background:"+cpc_alt_background+";color:"+cpc_alt_text+";border-radius:"+cp_elements_radius+"px;border-top-left-radius: 0px;padding: 6px !important;border:2px solid "+cpc_alt2_background+";"); fu_wkn("all", "bubble.float_suggestions .minibubble", "background:"+cpc_alt_background+";color:"+cpc_alt_text+";"); fu_wkn("all", "bubble .embed", "display:block;overflow:hidden;background: "+cpc_alt_background+";color:"+cpc_alt_text+";border-radius: "+cp_elements_radius+"px;padding:10px;margin-top:10px;margin-bottom:10px;"); fu_wkn("all", "bubble .embed[onclick]", "cursor: pointer;"); fu_wkn("all", "bubble .embed[onclick]:hover", "background:"+cpc_alt_active_background+" !important;color:"+cpc_alt_text+" !important;"); fu_wkn("all", "bubble .embed.attachment", "background:rgb(191, 191, 191,0.1);"); fu_wkn("all", "bubble .embed .media", "width:100%;margin:0px;"); fu_wkn("all", "bubble .embed .link", "margin-bottom:0px;"); fu_wkn("all", "bubble .embed a strong", "color:"+cpc_text+";"); fu_wkn("all", "bubble .embed .preview", "float: left;margin-right: 10px;border-radius:"+cp_elements_radius+"px;"); fu_wkn("all", "bubble .embed .preview img", "width: auto;max-width:250px;max-height:140px;border-radius:"+cp_elements_radius+"px;"); fu_wkn("all", "bubble .embed .preview_large", "margin-bottom: 10px;"); fu_wkn("all", "bubble .minibubble[onclick]", "margin-top:10px;cursor: pointer;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", "bubble .minibubble[onclick]:hover", "background:"+cpc_alt_active_background+" !important;color:"+cpc_alt_text+" !important;"); fu_wkn("all", "bubble .translatebubble", "overflow:hidden;background:"+fu_hhx(cpc_alt4_background,0.3)+";border-radius: "+cp_elements_radius+"px;padding:15px;padding-top:10px;padding-bottom:10px;"); fu_wkn("all", "bubble.shadedbackground", "padding:0px;background-position: center;background-size:cover;"); fu_wkn("all", "bubble.shadedbackground .cover", "margin-left:0px;margin-right:0px;margin-top:0px;text-align:center;overflow:hidden;padding:20px;"); fu_wkn("all", ".reaction", "margin:10px;display: inline-block;"); fu_wkn("all", ".reaction .reactcontent", "display:inline-block;width: 50px;height: 50px;font-size: 25px;line-height: 50px;text-align: center;"); fu_wkn("all", ".reaction .avatar", "width: 20px;height: 20px;margin-left: -18px;margin-bottom: -3px;"); fu_wkn("all", "bubble.profile", "text-align:left;overflow: hidden;padding:0px;"); fu_wkn("all", "bubble.profile .minibubble", "background: none;border-radius: 0px;padding: 10px;padding-left:0px;padding-top:10px;line-height: 1.2em;text-align:left;border:0px solid "+cpc_border+";"); fu_wkn("all", "bubble.profile .tab","z-index: 5;position: relative;float: right;margin-left:0px;margin-top: 10px;font-size:0.8em;font-weight:600;padding: 6px;padding-left: 10px;padding-right: 10px;margin-right:10px;box-shadow: "+cpc_shadow+";"); fu_wkn("all", "bubble.profile .gradiant", "background: linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 0.7) 100%);width: 100%;height: 100%;position: absolute;"); fu_wkn("all", "bubble.profile .avatar.main", "width: 150px;height: 150px;margin-bottom: 10px;margin-top: 10px;margin-right: 20px;float: left;margin-top: -50px;margin-left: 15px;"); fu_wkn("all", "bubble.profile h1", "font-size: 1.8em;margin-top: 10px;z-index: 5;position: relative;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;max-width: calc(100% - 300px);"); fu_wkn("all", "bubble.profile h2", "font-size: 0.9em;font-weight: 400;margin-top: -10px;margin-left: 0px;z-index: 5;position: relative;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;max-width: calc(100% - 300px);"); fu_wkn("all", "bubble.profile .cover", "background-position: center;background-size:cover;border-radius:"+cp_elements_radius+"px;border-bottom-left-radius:0px;border-bottom-right-radius:0px;"); fu_wkn("all", "bubble.profile .button", "display:inline-block;padding: 10px;padding-left: 15px;padding-right: 15px;font-size: 0.8em;background:"+cpc_button_background+";color:"+cpc_button_text+";border-radius:"+cp_elements_radius+"px;margin-left:5px;margin-right:5px;float: right;margin-top: -70px;margin-right: 15px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", "bubble.profile .button:hover", "background:"+fu_qlz(cpc_button_background,20)+";color:"+cpc_button_text+";"); fu_wkn("all", "bubble.profile .specialbox", "cursor: pointer;font-size: 0.8em;font-weight:600;background:"+cpc_alt_background+" !important;color:"+cpc_text+" !important;border-radius: "+cp_elements_radius+"px;padding: 5px;padding-left: 10px;margin-top:3px;padding-right: 10px;margin-right:5px;display: inline-block;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", "bubble.profile .specialbox:hover", "background:"+cpc_alt_active_background+" !important;color:"+cpc_alt_text+" !important;"); fu_wkn("all", "bubble.profile .specialbox.important[onclick]", "cursor: pointer;background:"+cpc_button_background+" !important;color:"+cpc_button_text+" !important;"); fu_wkn("all", "bubble.profile .specialbox.important[onclick]:hover", "background:"+fu_qlz(cpc_button_background,20)+" !important;color:"+cpc_button_text+" !important;"); if (fu_rio(cpc_button_background)=="#ffffff"){ fu_wkn("all", "bubble.profile .specialbox.important .svgicon", "filter: invert(1);");}else{ fu_wkn("all", "bubble.profile .specialbox.important .svgicon", "filter: invert(0);");}
fu_wkn("all", "bubble.halfsized.profile", "padding:10px;background:"+cpc_box_background+";margin-bottom:10px;"); fu_wkn("all", "bubble.halfsized.profile .gradiant", "background-image: linear-gradient(rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0) 40%, rgba(0, 0, 0, 0.8) 100%);"); fu_wkn("all", "bubble.halfsized.profile .tab", "background:"+cpc_alt1_background+";color:"+cpc_alt1_text+" !important;"); fu_wkn("all", "bubble.halfsized.profile .cover", "margin-left: -10px;margin-right: -10px;margin-top: -10px;margin-bottom:10px;border-bottom-left-radius:0px;border-bottom-right-radius:0px;"); fu_wkn("all", "bubble.halfsized.profile .avatar.main", "margin-top:0px;margin-left:0px;margin-bottom: 0px;width: 40px;height: 40px;margin-right:10px;"); fu_wkn("all", "bubble.halfsized.profile .minibubble","margin-top: 15px;border-top: 0px;padding:0px;"); fu_wkn("all", "bubble.halfsized.profile h1", "font-size: 1.2em;max-width: calc(100% - 100px);margin-top: 0px;"); fu_wkn("all", "bubble.halfsized.profile h2", "font-size: 0.7em;font-weight: 400;max-width: calc(100% - 100px);"); fu_wkn("all", "bubble.halfsized.video", "padding:10px;margin-bottom:10px;"); fu_wkn("all", "bubble.halfsized.video .embed", "background:"+cpc_box_background+";"); fu_wkn("all", "bubble.halfsized.video .cover", "background-position: center;background-size:cover;margin-left: -10px;margin-right: -10px;margin-top: -10px;margin-bottom:10px;border-bottom-left-radius:0px;border-bottom-right-radius:0px;"); fu_wkn("all", "bubble.halfsized.video .avatar.main", "margin-top:0px;margin-left:0px;margin-bottom: 0px;width: 40px;height: 40px;margin-right:10px;"); fu_wkn("all", "bubble.halfsized.video .minibubble","margin-top: 15px;border-top: 0px;padding-top: 0px;"); fu_wkn("all", "bubble[onclick] .tab", "background:"+cpc_alt1_background+";color:"+cpc_alt1_text+" !important;"); fu_wkn("all", ".conversation", "margin-bottom: 10px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", ".conversation.preview", "margin-bottom: 20px;padding:10px;"); fu_wkn("all", ".conversation.normal .footer_comments", "margin-left: 20px;"); fu_wkn("all", ".conversation.normal .section_extra", "margin-left: 20px;"); fu_wkn("all", ".conversation .cafeheader", "cursor: pointer;background:"+cpc_alt_background+";padding: 10px;border-radius:"+cp_elements_radius+"px;margin-bottom: 10px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", ".conversation .cafeheader:hover", "background:"+cpc_alt_active_background+" !important;color:"+cpc_alt_text+" !important;"); fu_wkn("all", ".conversation .cafeheader .avatar", "max-width: 20px;max-height: 20px;float: left;margin-right: 10px;"); fu_wkn("all", ".conversation .tagged", "float: right;background:"+cpc_alt_background+";color:"+cpc_alt_text+";padding: 5px;padding-left:8px;padding-right:8px;border-radius: "+cp_elements_radius+"px;font-size: 0.7em;margin-right: 5px;cursor: pointer;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", ".conversation .tagged:hover", "background:"+cpc_alt_active_background+" !important;color:"+cpc_alt_text+" !important;"); fu_wkn("all", ".conversation .minibubble .cafe", "background:"+cpc_box_background+";"); fu_wkn("all", ".conversation .minibubble.preview.miniframe", "border:0px solid "+cpc_alt_background+";border-left:2px solid "+cpc_alt_background+";background:none;border-radius:0px;"); fu_wkn("all", ".conversation .minibubble.preview.miniframe[onclick]:hover", "background:"+cpc_alt_active_background+" !important;color:"+cpc_alt_text+" !important;border-radius:"+cp_elements_radius+"px;border-left:2px solid "+cpc_alt_active_background+";"); fu_wkn("all", ".conversation .minibubble.preview .meta", "float:right;"); fu_wkn("all", ".conversation .minibubble.preview", "padding: 10px;padding-bottom: 0px;margin-top: 10px;margin-bottom:10px;"); fu_wkn("all", ".conversation .minibubble.preview .cafe", "padding: 10px;border-radius: 0px;"); fu_wkn("all", ".conversation .minibubble .minibubble.preview", "padding: 10px;margin-top: 0px;margin-bottom:0px;"); fu_wkn("all", ".conversation .minibubble .minibubble.preview .content", "padding-bottom: 0px;"); fu_wkn("all", ".notification .conversation .minibubble.preview", "padding-top: 0px;padding-bottom: 0px;margin-top: 10px;margin-bottom:10px;"); fu_wkn("all", ".conversation .header", "overflow: hidden;padding-top:3px;"); fu_wkn("all", ".conversation .minibubble.preview .header", "min-height: 0px;"); fu_wkn("all", ".conversation .timestamp", "display: inline-block;padding:3px;padding-left: 0px;padding-right: 10px;border-radius: "+cp_elements_radius+"px;"); fu_wkn("all", ".conversation .timestamp:hover", "padding-left: 10px;padding-right: 10px;"); fu_wkn("all", ".conversation .badge", "display: inline-block;padding:3px;padding-left: 10px;padding-right: 10px;margin-left: 5px;border-radius: "+cp_elements_radius+"px;font-size: 0.8em;"); fu_wkn("all", ".conversation .badge.admin", "background:"+cpc_alt4_background+";color: "+fu_rio(cpc_alt4_background)+";"); fu_wkn("all", ".conversation .badge.moderator", "background:"+cpc_alt2_background+";color: "+fu_rio(cpc_alt2_background)+";"); fu_wkn("all", ".conversation .badge.pro", "background:"+cpc_alt1_background+";color: "+fu_rio(cpc_alt1_background)+";"); fu_wkn("all", ".conversation .badge.verified", "background:"+cpc_alt3_background+";color: "+fu_rio(cpc_alt3_background)+";"); fu_wkn("all", ".conversation .badge.online", "background:"+fu_qlz("rgb(82, 199, 135)",75)+";color: rgb(22, 22, 22);"); fu_wkn("all", ".conversation .badge.idle", "background:"+fu_qlz("rgb(199, 144, 82)",75)+";color: rgb(22, 22, 22);"); fu_wkn("all", ".conversation .badge.pin", "background:"+fu_qlz("rgb(199, 82, 82)",75)+";color: rgb(22, 22, 22);"); fu_wkn("all", ".conversation .badge.pin .svgicon", "filter: invert(0);"); fu_wkn("all", ".conversation .header .action", "float: right;font-size: 0.7em;font-weight: 600;background:"+cpc_alt_background+";color:"+cpc_alt_text+";padding: 5px;padding-left: 10px;padding-right: 10px;display:inline-block;border-radius: "+cp_elements_radius+"px;text-align: center;cursor: pointer;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", ".conversation .header .action.important", "background:"+cpc_alt_active_background+";color: "+cpc_alt_text+";"); fu_wkn("all", ".conversation .header .action:hover", "background:"+cpc_alt_active_background+" !important;color:"+cpc_alt_text+" !important;"); fu_wkn("all", ".conversation .footer .minireactions", "display:inline-block;max-width:50%;overflow:hidden;float:right;"); fu_wkn("all", ".conversation .footer .action", "background:"+cpc_alt_background+";color:"+cpc_alt_text+";font-size: 0.85em;font-weight: 600;padding: 5px;padding-left: 10px;padding-right: 10px;display:inline-block;border-radius: "+cp_elements_radius+"px;text-align: center;cursor: pointer;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", ".conversation .footer .action.important", "background:"+cpc_alt_active_background+";color: "+cpc_alt_text+";"); fu_wkn("all", ".conversation .footer .action:hover", "background:"+cpc_alt_active_background+" !important;color:"+cpc_alt_text+" !important;"); fu_wkn("all", ".conversation .footer .footer_mini .action", "font-size: 1.3em;"); fu_wkn("all", ".conversation .header .meta", "color:"+cpc_alt_text+";overflow:hidden;font-weight: 500;font-size: 0.8em;white-space: nowrap;overflow-x: auto;padding-bottom: 5px;padding-top: 5px;"); fu_wkn("all", ".conversation .header h4", "font-weight: 500;margin-top: 0px;margin-bottom: 5px;"); fu_wkn("all", ".conversation .header .avatar", "float:left;height:50px;width:50px;margin-top:-3px;margin-right:10px;"); fu_wkn("all", ".conversation .content_case", "margin-top:10px;margin-bottom:10px;"); fu_wkn("all", ".conversation .content_case > .translate", "margin-top:10px;"); fu_wkn("all", ".conversation .content_case > .attachments", "margin-top:10px;"); fu_wkn("all", ".conversation .content_case > .content > *:first-child", "margin-top:0px;"); fu_wkn("all", ".conversation .content_case > .content > *:last-child", "margin-bottom:0px;"); fu_wkn("all", ".conversation .content_case > .content p:empty", "margin:0px;padding:0px;"); fu_wkn("all", ".conversation .content_case > .translate:empty", "margin:0px;padding:0px;"); fu_wkn("all", ".conversation .content_case > .attachments:empty", "margin:0px;padding:0px;"); fu_wkn("all", ".conversation .content_case > .attachments .media:first-child .media_backing", "margin-top:0px;"); fu_wkn("all", ".conversation .content_case > .attachments .media:last-child .media_backing", "margin-bottom:0px;"); fu_wkn("all", ".conversation .content .cover", "background-position: center;background-size:cover;"); fu_wkn("all", ".conversation .content heading", "display:block;font-weight:500;font-size:1.7em;margin-top:10px;margin-bottom:10px;"); fu_wkn("all", ".conversation .content subheading", "display:block;font-size:1.4em;margin-top:25px;margin-bottom:15px;"); fu_wkn("all", ".conversation .content p:not(:first-child) heading", "margin-top:25px;"); fu_wkn("all", ".conversation .content quote", "display:block;overflow:hidden;padding-left:10px;padding-right:10px;border-radius: "+cp_elements_radius+"px;background:"+cpc_alt_background+";margin-top:10px;margin-bottom:10px;"); fu_wkn("all", ".conversation .attachent", "cursor: pointer;background:"+cpc_alt_background+";border-radius: "+cp_elements_radius+"px;padding: 10px;margin-top:10px;margin-bottom: 10px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", ".conversation .attachent:hover", "background:"+cpc_alt_active_background+";"); fu_wkn("all", ".conversation .media", "position: relative;width: 100%;line-height: 0;overflow:hidden;border-radius: "+cp_elements_radius+"px;"); fu_wkn("all", ".conversation .media_backing", "background-size: cover;background-repeat: no-repeat;background-color: "+cpc_box_background+";background-position: center center;border-radius: "+cp_elements_radius+"px;margin-top:10px;margin-bottom:10px;overflow:hidden;"); fu_wkn("all", ".conversation .preview_large .media_backing", "margin-top:0px;"); fu_wkn("all", ".conversation .media_bg", "background-size: contain;background-repeat: no-repeat;background-position: center center;border-radius: "+cp_elements_radius+"px;"); fu_wkn("all", ".conversation .media_nowrap", "margin-top:10px;margin-bottom:10px;"); fu_wkn("all", ".conversation .media_nowrap:first-child", "margin-top:0px;"); fu_wkn("all", ".conversation .media_nowrap:last-child", "margin-bottom:0px;"); fu_wkn("all", ".conversation .collage", "margin-top:10px;margin-bottom:10px;overflow-x: auto;white-space: nowrap;"); fu_wkn("all", ".conversation .embed .preview .media_backing", "margin-top:0px;margin-bottom: 0px;"); fu_wkn("all", ".conversation .embed .media_backing", "margin-bottom:0px;"); fu_wkn("all", ".conversation .spoiler", "filter: blur(20px);"); fu_wkn("all", ".conversation .window", "padding:15px;overflow:hidden;border:2px solid "+cpc_alt_background+";border-radius: "+cp_elements_radius+"px;"); fu_wkn("all", ".conversation .link", "overflow:hidden;padding:15px;padding-left:20px;padding-right:20px;margin-top:15px;margin-bottom:10px;border-radius:"+cp_elements_radius+"px;text-align:center;background:"+cpc_alt_button_background+";color:"+cpc_alt_button_text+";cursor:pointer;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", ".conversation .link:hover", "background:"+fu_qlz(cpc_alt_button_background,20)+";"); fu_wkn("all", ".conversation .footer_comments:not(:empty)", "margin-top:10px;"); fu_wkn("all", ".conversation.full .footer_comments:not(:empty)", "margin-top:10px;border-top:2px solid "+cpc_alt_background+";padding-top:10px;"); fu_wkn("all", ".conversation .comment_reply_case", "margin-left:0px;border-left:2px solid "+cpc_alt_background+";padding-left:10px;"); fu_wkn("all", ".conversation .comment", "position: relative;min-width:300px;z-index: 1;font-size: 0.85em;border-radius: "+cp_elements_radius+"px;padding-top: 10px;padding-bottom:10px;"); fu_wkn("all", ".conversation .comment.highlight", "border:2px solid "+cpc_alt1_background+";padding:10px;"); fu_wkn("all", ".conversation .comment.highlight::before", "content: \"\";border-radius: "+cp_elements_radius+"px;position: absolute;top: 0; left: 0px;width: 100%; height: 100%; opacity: .05; z-index: -1;background:"+cpc_alt_button_background+";"); fu_wkn("all", ".conversation .comment .header", "padding-top:0px;display: inline;"); fu_wkn("all", ".conversation .comment .footer", "margin-left:50px;margin-bottom: 0px;"); fu_wkn("all", ".conversation .comment .footer .action", "background:"+cpc_alt_background+";color:"+cpc_alt_text+";font-weight: 600;display:inline-block;border-radius: "+cp_elements_radius+"px;text-align: center;padding:5px;padding-left: 10px;padding-right: 10px;cursor: pointer;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", ".conversation .comment .footer .action:hover", "background:"+cpc_alt_active_background+" !important;color:"+cpc_alt_text+" !important;"); fu_wkn("all", ".conversation .comment .header .meta", "color:"+cpc_alt_text+";overflow:hidden;font-weight: 500;font-size: 0.8em;padding-top: 3px;padding-bottom:0px;display: inline;margin-left: 10px;min-width: 40px;"); fu_wkn("all", ".conversation .comment .header strong", "font-size:1.1em;"); fu_wkn("all", ".conversation .comment .header .avatar", "float:left;height:40px;width:40px;margin-top:0px;margin-right:10px;"); fu_wkn("all", ".conversation .comment .content_case", "margin: 0px;margin-left: 50px;margin-top: 10px;margin-bottom: 10px;"); fu_wkn("all", ".conversation .comment .media", "position: relative;width:100%;margin-left: 0px;margin-right: 0px;line-height: 0;overflow:hidden;border-radius: "+cp_elements_radius+"px;"); fu_wkn("all", ".conversation .comment .media_backing", "background-size: cover;background-repeat: no-repeat;background-color: "+cpc_box_background+";background-position: center center;border-radius: "+cp_elements_radius+"px;"); fu_wkn("all", ".conversation .comment .media_bg", "background-size: contain;background-repeat: no-repeat;background-position: center center;border-radius: "+cp_elements_radius+"px;"); fu_wkn("all", ".conversation .comment .window", "padding:15px;overflow:hidden;border:2px solid "+cpc_alt_background+";border-radius: "+cp_elements_radius+"px;"); fu_wkn("all", ".conversation .comment .link", "overflow:hidden;padding:15px;padding-left:20px;padding-right:20px;margin-top:15px;margin-bottom:10px;border-radius:"+cp_elements_radius+"px;text-align:center;background:"+cpc_alt_button_background+";color:"+cpc_alt_button_text+";cursor:pointer;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", ".conversation .comment .link:hover", "background:"+fu_qlz(cpc_alt_button_background,20)+";"); fu_wkn("all", "bubble.message","border:0px;margin:0px;padding:0px;background:none;box-shadow:none;margin-bottom: 5px;text-align:left;"); fu_wkn("all", "bubble.message .content_case.normal", "max-width:calc(100% - 85px);text-align:left;font-size: 0.9em;display:inline-block;background:"+cpc_box_background+";color:"+cpc_text+";border-radius: "+cp_elements_radius+"px;margin: 0px;padding:8px;padding-left:12px;padding-right:12px;box-shadow: "+cpc_shadow+";border:1px solid "+cpc_border+";"); fu_wkn("all", "bubble.message .content_case.update", "max-width:calc(100% - 85px);text-align:left;font-size: 0.9em;display:inline-block;background:"+fu_hhx(cpc_alt1_background,0.3)+";color:"+cpc_alt_text+";border-radius: "+cp_elements_radius+"px;margin: 0px;padding:8px;padding-left:12px;padding-right:12px;box-shadow: "+cpc_shadow+";border:1px solid "+cpc_border+";"); fu_wkn("all", "bubble.message .media", "min-width:200px;"); fu_wkn("all", "bubble.message .embed .media", "min-width:0px;"); fu_wkn("all", "bubble.message .header", "float:left;margin-right:10px;margin-left:0px;"); fu_wkn("all", "bubble.message .footer", "margin-left: 50px;"); fu_wkn("all", "bubble.message .footer .meta", "display: inline-block;font-size:0.6em;"); fu_wkn("all", "bubble.message .footer .meta .timestamp", "background:none;"); fu_wkn("all", "bubble.message .footer .action", "display: inline-block;display:none;font-size:0.6em;background: none;padding: 3px;margin-left:5px;"); fu_wkn("all", "bubble.message .header .avatar", "width:40px;height:40px;margin:0px;box-shadow: "+cpc_shadow+";border:1px solid "+cpc_border+";"); fu_wkn("all", "bubble.message.myself","text-align:right;"); fu_wkn("all", "bubble.message.myself .content_case.normal", "background:"+cpc_button_background+";color:"+cpc_button_text+";"); fu_wkn("all", "bubble.message.myself a", "color:"+cpc_button_text+" !important;"); fu_wkn("all", "bubble.message.myself .embed a", "color:"+cpc_alt_text+" !important;"); fu_wkn("all", "bubble.message.myself .footer", "margin-right: 50px;"); fu_wkn("all", "bubble.message.myself .header", "float:right;margin-left:10px;margin-right:0px;"); fu_wkn("all", "bubble[onclick].notification", "cursor: pointer;"); fu_wkn("all", "bubble[onclick].notification .meta", "color:"+cpc_alt_text+";overflow:hidden;margin-top:10px;font-weight: 500;font-size: 0.8em;"); fu_wkn("all", "textarea", "border:1px solid "+cpc_button_background+";resize: none;background:"+cpc_box_background+";color:"+cpc_text+";-webkit-appearance: none;outline: none;font-size: 1em;border-radius: "+cp_elements_radius+"px;width: 100%;margin-top: 5px;margin-bottom: 5px;max-width: 300px;font-weight: 600;padding: 10px;padding-top: 15px;padding-bottom: 15px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", "textarea.hidden", "display:none;"); fu_wkn("all", "textarea.fullsize", "width: calc(100% - 24px);max-width: 100%;"); fu_wkn("all", "textarea:hover", "border:1px solid "+fu_qlz(cpc_button_background,20)+";"); fu_wkn("all", "input", "border:1px solid "+cpc_button_background+";-webkit-appearance: none;outline: none;font-size: 1em;background:"+cpc_box_background+";color:"+cpc_text+";border-radius: "+cp_elements_radius+"px;width: 100%;margin-top: 5px;margin-bottom: 5px;max-width: 300px;font-weight: 600;padding: 10px;padding-top: 15px;padding-bottom: 15px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", "input:hover", "border:1px solid "+fu_qlz(cpc_button_background,20)+";"); fu_wkn("all", "input:disabled", "opacity:0.7;cursor:default;filter: grayscale(100%);"); fu_wkn("all", "select", "border:1px solid "+cpc_button_background+";-webkit-appearance: none;outline: none;font-size: 1em;background:"+cpc_box_background+";color:"+cpc_text+";border-radius: "+cp_elements_radius+"px;width: 100%;margin-top: 5px;margin-bottom: 5px;max-width: 322px;font-weight: 600;padding: 10px;padding-top: 15px;padding-bottom: 15px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", "input[type=submit]", "border:1px solid "+cpc_border+";text-transform: uppercase;background:"+cpc_button_background+";color:"+cpc_button_text+";cursor:pointer;"); fu_wkn("all", "input[type=submit]:hover", "border:1px solid "+cpc_border+";background:"+fu_qlz(cpc_button_background,20)+";"); fu_wkn("all", "input[type=file]", "cursor: pointer;padding: 40px;max-width: calc(100% - 84px);text-align: center;border: dashed 1px "+cpc_button_background+";color: rgba(0, 0, 0, 0);"); fu_wkn("all", "input[type=file]::file-selector-button", "display:none;"); fu_wkn("all", "input[type=file]:before", "content: 'Tap to select file or drop here';color:"+cpc_text+";"); fu_wkn("all", "[placeholder]::-webkit-input-placeholder", "color:"+cpc_alt_text+";opacity:0.7;font-weight:400;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", "[placeholder]:focus::-webkit-input-placeholder", "transform: translate(10px, 0px);font-weight:600;color:"+cpc_text+";z-index:5;"); fu_wkn("all", "livearea", "text-align:left;display:block;border:1px solid "+cpc_button_background+";resize: none;background:"+cpc_box_background+";color:"+cpc_text+";-webkit-appearance: none;outline: none;font-size: 1em;border-radius: "+cp_elements_radius+"px;width: 100%;margin-top: 5px;margin-bottom: 5px;max-width: 300px;font-weight: 600;padding: 10px;padding-top: 15px;padding-bottom: 15px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", "livearea.fullsize", "width: calc(100% - 24px);max-width: 100%;"); fu_wkn("all", "livearea:hover", "border:1px solid "+fu_qlz(cpc_button_background,20)+";"); fu_wkn("all", "livearea[placeholder]:empty:before", "color:"+cpc_alt_text+";opacity:0.7;content: attr(placeholder);"); fu_wkn("all", "livearea[placeholder]:focus:empty:before", "content: '';"); fu_wkn("all", "livearea .mention", "color:"+cpc_alt2_text+";background:"+cpc_alt2_background+";border-radius: "+cp_elements_radius+"px;padding: 3px;padding-left: 10px;padding-right: 10px;display: inline-block;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", "livearea .tag", "color:"+cpc_alt2_text+";background:"+cpc_alt2_background+";border-radius: "+cp_elements_radius+"px;padding: 3px;padding-left: 10px;padding-right: 10px;display: inline-block;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", "livearea .cafe", "color:"+cpc_alt2_text+";background:"+cpc_alt2_background+";border-radius: "+cp_elements_radius+"px;padding: 3px;padding-left: 10px;padding-right: 10px;display: inline-block;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", "livearea .mention.good", "color:"+cpc_alt3_text+";background:"+cpc_alt3_background+";"); fu_wkn("all", "livearea .tag.good", "color:"+cpc_alt3_text+";background:"+cpc_alt3_background+";"); fu_wkn("all", "livearea .cafe.good", "color:"+cpc_alt3_text+";background:"+cpc_alt3_background+";"); fu_wkn("all", "livearea .mention.wait", "color:"+cpc_alt1_text+";background:"+cpc_alt1_background+";"); fu_wkn("all", "livearea .tag.wait", "color:"+cpc_alt1_text+";background:"+cpc_alt1_background+";"); fu_wkn("all", "livearea .cafe.wait", "color:"+cpc_alt1_text+";background:"+cpc_alt1_background+";"); fu_wkn("all", "livearea .mention.bad", "border-bottom-left-radius: 0px;"); fu_wkn("all", "livearea .tag.bad", "border-bottom-left-radius: 0px;"); fu_wkn("all", "livearea .cafe.bad", "border-bottom-left-radius: 0px;"); fu_wkn("all", "livearea .mention.wait", "border-bottom-left-radius: 0px;"); fu_wkn("all", "livearea .tag.wait", "border-bottom-left-radius: 0px;"); fu_wkn("all", "livearea .cafe.wait", "border-bottom-left-radius: 0px;"); fu_wkn("all", ".header_bubble", "overflow:hidden;background:rgba(0,0,0,0);color:"+cpc_alt_text+";padding:10px;padding-left:15px;padding-right:15px;border-radius:"+cp_elements_radius+"px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("all", ".header_bubble:hover", "background:"+cpc_alt_background+";color:"+cpc_alt_text+";"); fu_wkn("all", ".aspectcase", "width: 100%;position: relative;"); fu_wkn("all", ".aspectcase.onebyone", "padding-bottom: calc(100% / (1/1));"); fu_wkn("all", ".aspectcase.thirtybyeight", "padding-bottom: calc(100% / (30/8));"); fu_wkn("all", ".aspectcase.twentyonebynine", "padding-bottom: calc(100% / (21/9));"); fu_wkn("all", ".aspectcase.sixteenbynine", "padding-bottom: calc(100% / (16/9));"); fu_wkn("all", ".aspectcase.fourbythree", "padding-bottom: calc(100% / (4/3));"); fu_wkn("all", ".aspectcase.threebytwo", "padding-bottom: calc(100% / (3/2));"); fu_wkn("all", ".aspectcase.eightbyfive", "padding-bottom: calc(100% / (8/5));"); fu_wkn("all", ".aspectcase .content", "padding:0px !important;position: absolute;top: 0; bottom: 0; left: 0; right: 0;"); fu_wkn("all", ".loading", "margin: 0px auto;margin-top: 20px;margin-bottom: 20px;width: 40px;height: 40px;box-sizing: border-box;border: solid 4px "+fu_hhx(cpc_link,0.3)+";border-left-color: "+cpc_link+";border-radius: 50%;animation: animation-loading 600ms linear infinite;"); fu_wkn("all", ".fitloading", "margin:5px;width: calc(100% - 10px);height: calc(100% - 10px);box-sizing: border-box;border: solid 2px "+fu_hhx(cpc_link,0.3)+";border-left-color: "+cpc_link+";border-radius: 50%;animation: animation-loading 600ms linear infinite;"); fu_wkn("all", "@keyframes animation-loading", "0% { transform: rotate(0deg);} 100% { transform: rotate(360deg);}"); fu_wkn("all", "@keyframes pride", "0% { background-size: 2000%;} 100% { background-size: 100%;}"); if (s_app_reducemotion=="false"){ fu_wkn("all", "@keyframes animation-bubble-in", "0% {opacity: 0; transform:scale(.95);} 10% { opacity: 0.5;} 100% { opacity:1; transform:scale(1);}"); fu_wkn("all", "@keyframes animation-modl-in", "0% {opacity: 0; transform:scale(0.90);} 10% { opacity: 0.5;} 100% { opacity:1; transform:scale(1);}"); fu_wkn("all", "@keyframes animation-fade-out-down", "from{ opacity: 1; -webkit-transform: none; transform: none;} to{ opacity: 0; -webkit-transform: translate3d(0, 100px, 0); transform: translate3d(0, 100px, 0);}"); fu_wkn("all", "@keyframes animation-fade-out-up", "from{ opacity: 1; -webkit-transform: none; transform: none;} to{ opacity: 0; -webkit-transform: translate3d(0, -100px, 0); transform: translate3d(0, -100px, 0);}"); fu_wkn("all", "@keyframes animation-fade-out-right", "from{ opacity: 1; -webkit-transform: none; transform: none;} to{ opacity: 0; -webkit-transform: translate3d(100px, 0, 0); transform: translate3d(100px, 0, 0);}"); fu_wkn("all", "@keyframes animation-fade-in-up", "from{ opacity: 0; -webkit-transform: translate3d(0, 100px, 0); transform: translate3d(0, 100px, 0);} to{ opacity: 1; -webkit-transform: none; transform: none;}"); fu_wkn("all", "@keyframes animation-fade-in-down", "from{ opacity: 0; -webkit-transform: translate3d(0, -100px, 0); transform: translate3d(0, -100px, 0);} to{ opacity: 1; -webkit-transform: none; transform: none;}"); fu_wkn("all", "@keyframes animation-zoom-in", "from{ opacity: 0; -webkit-transform: scale3d(.3, .3, .3); transform: scale3d(.3, .3, .3);} 50%{ opacity: 1;}"); fu_wkn("all", "@keyframes animation-zoom-out", "0%{ opacity: 1; -webkit-transform: scale3d(1, 1, 1); transform: scale3d(1, 1, 1);} 99%{ opacity: 0; -webkit-transform: scale3d(.3, .3, .3); transform: scale3d(.3, .3, .3);} 100%{ opacity: 0; -webkit-transform: scale3d(.3, .3, .3); transform: scale3d(.3, .3, .3); top: -1200px;}");}else{ fu_wkn("all", "@keyframes animation-bubble-in", "0% { opacity:0; transform:scale(1);} 10% { opacity: 0.5;} 100% { opacity:1; transform:scale(1);}"); fu_wkn("all", "@keyframes animation-modl-in", "0% { opacity:0; transform:scale(1);} 10% { opacity: 0.5;} 100% { opacity:1; transform:scale(1);}"); fu_wkn("all", "@keyframes animation-fade-out-down", "from{ opacity: 0; -webkit-transform: translate3d(0, 100px, 0); transform: translate3d(0, 100px, 0);} to{ opacity: 0; -webkit-transform: translate3d(0, 100px, 0); transform: translate3d(0, 100px, 0);}"); fu_wkn("all", "@keyframes animation-fade-out-up", "from{ opacity: 0; -webkit-transform: translate3d(0, -100px, 0); transform: translate3d(0, -100px, 0);} to{ opacity: 0; -webkit-transform: translate3d(0, -100px, 0); transform: translate3d(0, -100px, 0);}"); fu_wkn("all", "@keyframes animation-fade-out-right", "from{ opacity: 0; -webkit-transform: translate3d(100px, 0, 0); transform: translate3d(100px, 0, 0);} to{ opacity: 0; -webkit-transform: translate3d(100px, 0, 0); transform: translate3d(100px, 0, 0);}"); fu_wkn("all", "@keyframes animation-fade-in-up", "from{ opacity: 1; -webkit-transform: none; transform: none;} to{ opacity: 1; -webkit-transform: none; transform: none;}"); fu_wkn("all", "@keyframes animation-fade-in-down", "from{ opacity: 1; -webkit-transform: none; transform: none;} to{ opacity: 1; -webkit-transform: none; transform: none;}"); fu_wkn("all", "@keyframes animation-zoom-in", "from{ opacity: 1;} 50%{ opacity: 1;}"); fu_wkn("all", "@keyframes animation-zoom-out", "0%{ opacity: 0; -webkit-transform: scale3d(.3, .3, .3); transform: scale3d(.3, .3, .3); top: -1200px;} 100%{ opacity: 0; -webkit-transform: scale3d(.3, .3, .3); transform: scale3d(.3, .3, .3); top: -1200px;}");} var metaThemeColor = ad("meta[name=theme-color]"); var arr=accent.split(","); var col=fu_xtr(parseInt(arr[0]),parseInt(arr[1]),parseInt(arr[2])); metaThemeColor.setAttribute("content", col);} function fu_msz(size,callback){ var background="rgb(255,255,255)"; var topcolour=fu_qlz("rgb("+s_accent+")",0); var bottomcolour=fu_qlz("rgb("+s_accent+")",20); var canvas = document.createElement('canvas'); canvas.height = size; canvas.width = size; canvas.style.backgroundColor = background; var ctx = canvas.getContext('2d'); ctx.beginPath(); ctx.rect(0, 0, size, size); ctx.fillStyle = background; ctx.fill(); ctx.textAlign = "center"; ctx.font = 'bolder '+(size/3)+'px Arial'; ctx.fillStyle = bottomcolour; ctx.fillText("Café", (size/2), ((size/2)+(size/3.9))); ctx.textAlign = "center"; ctx.font = 'bolder '+(size/3)+'px Arial'; ctx.fillStyle = topcolour; ctx.fillText("Hey", (size/2), (size/2)); callback(canvas.toDataURL());} function fu_tzz(ctx, x, y, width, height, radius){ if (width < 2 * radius) radius = width / 2; if (height < 2 * radius) radius = height / 2; ctx.beginPath(); ctx.moveTo(x + radius, y); ctx.arcTo(x + width, y, x + width, y + height, radius); ctx.arcTo(x + width, y + height, x, y + height, radius); ctx.arcTo(x, y + height, x, y, radius); ctx.arcTo(x, y, x + width, y, radius); ctx.closePath();} function fu_cbw(ctx, color, ox, oy, blur){ ctx.shadowColor = color; ctx.shadowOffsetX = ox; ctx.shadowOffsetY = oy; ctx.shadowBlur = blur;} function fu_lsn(width,height,callback){ var background="rgb(235, 235, 235)"; var topcolour=fu_qlz("rgb("+s_accent+")",0); var bottomcolour=fu_qlz("rgb("+s_accent+")",20); var canvas = document.createElement('canvas'); canvas.width = width; canvas.height = height; canvas.style.backgroundColor = background; var ctx = canvas.getContext('2d'); ctx.beginPath(); ctx.rect(0, 0, width, height); ctx.fillStyle = background; ctx.fill(); ctx.textAlign = "center"; ctx.font = 'bolder '+(width/6)+'px Arial'; ctx.fillStyle = bottomcolour; ctx.fillText("Café", (width/2), ((height/2)+(width/8))); ctx.textAlign = "center"; ctx.font = 'bolder '+(width/6)+'px Arial'; ctx.fillStyle = topcolour; ctx.fillText("Hey", (width/2), (height/2)); callback(canvas.toDataURL());} function fu_wta(mode){ s_structure=mode; fu_jin(mode); fu_mxp("js_content"); if (mode=="splash"){ fu_pco("js_content", "<div id='container_contentcase'><div class='top_main_header'><div style='float: left;'><div id='container_header'></div></div><div style='float: right;'><div id='container_menu'></div></div></div><div id='container_content'></div><div id='container_footer'></div></div>");} if (mode=="simple"){ fu_pco("js_content", "<div id='container_contentcase'><div id='container_header'></div><div id='container_menu'></div><div id='container_content'></div><div id='container_footer'></div></div>");} if (mode=="embed"){ fu_pco("js_content", "<div id='container_contentcase'><div id='container_header'></div><div id='container_content'></div><div id='container_footer'></div></div>");} if (mode=="full"){ if (s_width>=700){ fu_pco("js_content", "<div id='container_windowcase'><div id='container_top'></div><div id='container_headercase'><div id='container_header'></div></div><div id='container_contentcase'><div id='container_sidebar'></div><div id='container_menu'></div><div id='container_content'></div></div><div id='container_footer'></div></div>");}else{ fu_pco("js_content", "<div id='container_top'></div><div id='container_menu'></div><div id='container_headercase'><div id='container_header'></div></div><div id='container_content'></div><div id='container_footer'></div>");}}
fu_rur(mode); fu_qns(mode); fu_jsa(mode); fu_cek(mode);} function fu_jin(mode){ fu_cen("simple"); fu_cen("splash"); fu_cen("full"); fu_cen("full_large"); fu_cen("full_medium"); fu_cen("full_small"); fu_cen("special"); fu_cen("embed"); fu_cen("sizebased_tablet"); fu_cen("sizebased_mobile"); if (mode=="simple"){ fu_wkn("simple", "body", "background:"+cpc_background+";color:"+cpc_text+";"); fu_wkn("simple", "#container_header", "margin:0px auto;padding:0px;padding-bottom: 20px;"); fu_wkn("simple", "#container_menu", "margin:0px auto;text-align:center;padding:0px;padding-bottom: 30px;"); fu_wkn("simple", "content", "padding:20px;"); fu_wkn("simple", "#container_contentcase", "max-width: 600px;margin:0px auto;"); fu_wkn("simple", "#container_footer", "margin:0px auto;padding:20px;text-align:center;"); fu_wkn("simple", "#container_header h1", "text-align:center;"); fu_wkn("simple", "bubble.alt0", "background:"+cpc_alt_background+";color:"+cpc_alt_text+";"); fu_wkn("simple", "bubble.alt0 input[type=text]", "background:"+cpc_background+";"); fu_wkn("simple", "bubble.alt0 input[type=password]", "background:"+cpc_background+";"); if (s_width>=700){ fu_wkn("simple", "bubble.halfsized", "display:inline-block;vertical-align:top;width: calc(50% - 27px);"); fu_wkn("simple", "bubble.halfsized:nth-of-type(even)", "margin-left: 5px;"); fu_wkn("simple", "bubble.halfsized:nth-of-type(odd)", "margin-right: 5px;");}} if (mode=="splash"){ fu_wkn("splash", "body", "background:"+cpc_background+";color:"+cpc_text+";"); fu_wkn("splash", "#container_header", "margin:0px auto;margin-bottom:0px;padding:0px;"); fu_wkn("splash", ".top_main_header", "margin-bottom:40px;overflow:hidden;padding-bottom:10px;"); fu_wkn("splash", "content", "padding:20px;"); fu_wkn("splash", "#container_contentcase", "max-width: 1000px;margin:0px auto;"); fu_wkn("splash", "#container_footer", "margin:0px auto;padding:20px;text-align:center;"); if (s_width<=700){ fu_wkn("splash", "content", "padding:10px !important;");}
fu_wkn("splash", ".hero_bubble", "border:0px;background:none;box-shadow:none;"); fu_wkn("splash", ".subhero_bubble", "box-shadow:none;"); if (s_width>=700){ fu_wkn("splash", ".herotext_large", "font-size:5em;font-weight:800;margin-top:0px;margin-bottom: 15px;"); fu_wkn("splash", ".herotext_medium", "font-size: 1.5em;");}else{ fu_wkn("splash", ".herotext_large", "font-size:4em;font-weight:800;margin-top:0px;margin-bottom: 15px;"); fu_wkn("splash", ".herotext_medium", "font-size: 1.3em;");}
fu_wkn("splash", "bubble.alt0", "background:"+cpc_alt_background+";color:"+cpc_alt_text+";"); fu_wkn("splash", ".floatbox_a", "width:46%;display:inline-block;"); fu_wkn("splash", ".floatbox_b", "width:54%;display:inline-block;"); fu_wkn("splash", ".floatbox_c", "width:60%;display:inline-block;"); fu_wkn("splash", ".floatbox_d", "width:40%;display:inline-block;"); fu_wkn("splash", ".floatbox_a bubble", "border-radius:25px;margin:0px;margin-bottom:15px;padding:15px;padding-top: 25px;padding-bottom: 25px;background:"+cpc_box_background+";color:"+cpc_text+";"); fu_wkn("splash", ".floatbox_b bubble", "border-radius:25px;margin:0px;margin-bottom:15px;padding:15px;padding-top: 25px;padding-bottom: 25px;background:"+cpc_box_background+";color:"+cpc_text+";"); fu_wkn("splash", ".floatbox_c bubble", "border-radius:25px;margin:0px;margin-bottom:15px;padding:15px;padding-top: 25px;padding-bottom: 25px;background:"+cpc_box_background+";color:"+cpc_text+";"); fu_wkn("splash", ".floatbox_d bubble", "border-radius:25px;margin:0px;margin-bottom:15px;padding:15px;padding-top: 25px;padding-bottom: 25px;background:"+cpc_box_background+";color:"+cpc_text+";"); if (s_width<=700){ fu_wkn("splash", ".floatbox_a", "width:100% !important;"); fu_wkn("splash", ".floatbox_b", "width:100% !important;"); fu_wkn("splash", ".floatbox_c", "width:100% !important;"); fu_wkn("splash", ".floatbox_d", "width:100% !important;");}else{ fu_wkn("splash", ".floatbox", "overflow:hidden;display: flex;"); fu_wkn("splash", ".ml bubble", "margin-left:15px !important;"); fu_wkn("splash", ".mr bubble", "margin-right:15px !important;"); fu_wkn("splash", ".floatbox_a bubble", "height: calc(100% - 45px);"); fu_wkn("splash", ".floatbox_b bubble", "height: calc(100% - 45px);"); fu_wkn("splash", ".floatbox_c bubble", "height: calc(100% - 45px);"); fu_wkn("splash", ".floatbox_d bubble", "height: calc(100% - 45px);");}} if (mode=="embed"){ fu_wkn("embed", "body", "-webkit-touch-callout: none;padding:0px;min-width:100%;min-height:100% !important;margin:0px;background:none !important;color:"+cpc_text+";font-family: "+cp_fonts+";font-size:1em;"); fu_wkn("embed", "#container_header", "margin:0px auto;"); fu_wkn("embed", "bubble", "padding:10px;margin-bottom:0px;box-shadow:none;border:1px solid "+cpc_border+";"); fu_wkn("embed", "bubble:last-of-type", "margin-bottom:0px;"); fu_wkn("embed", "content", "padding:0px;"); fu_wkn("embed", "#container_contentcase", "max-width: 850px;margin:0px auto;"); fu_wkn("embed", "#container_footer", "margin:0px auto;text-align:center;"); fu_wkn("embed", "#container_header h1", "text-align:center;"); fu_wkn("embed", ".conversation .footer", "display:none;"); fu_wkn("embed", ".conversation .header .action", "display:none;"); fu_wkn("embed", "body.noscroll bubble", "opacity:0.5;"); fu_wkn("embed", "body.noscroll modl bubble", "opacity:1;"); fu_wkn("embed", "modl .background", "opacity:0;"); fu_wkn("embed", "bubble.profile h1", "max-width: calc(100% - 200px);"); fu_wkn("embed", "bubble.profile h2", "max-width: calc(100% - 200px);"); if (s_width<=599){ fu_wkn("embed", "bubble.profile .avatar.main", "border-width:2px;width: 100px;height: 100px;margin-top: -50px;"); fu_wkn("embed", "bubble.profile .minibubble", "padding: 10px;");}} if (mode=="full"){ fu_wkn("full", "body", "background:"+cpc_background+";color:"+cpc_text+";overflow-y:scroll;"); fu_wkn("full", "#container_top", "max-width:1100px;margin:0px auto;margin-top:70px;"); fu_wkn("full", "#container_content", "max-width:1100px;margin:0px auto;margin-bottom:20px;padding:20px;padding-top: 0px;"); fu_wkn("full", "#container_footer", "max-width:1100px;margin:0px auto;padding:20px;text-align:center;"); fu_wkn("full", "#container_headercase", "width: 100%;position: fixed;top: 0px;z-index: 5000;left: 0px;margin-top: env(safe-area-inset-top, 0px);-webkit-transition: top 250ms ease-in-out;-moz-transition: top 250ms ease-in-out;-o-transition: top 250ms ease-in-out;transition: top 250ms ease-in-out;"+cp_frost_heavy+"border-bottom:1px solid "+cpc_border+";"); fu_wkn("full", "#container_header", "overflow:hidden;margin:0px auto;padding:10px;"); fu_wkn("full", ".uibackground", "background:"+cpc_background+";position:fixed;background-size: cover;left:0px;top:0px;z-index: -5;width:100%;height:100%;"); fu_wkn("full", ".uibackground .inside", "width: 100%;height: 100%;-webkit-backdrop-filter: blur(5px)!important;-moz-backdrop-filter: blur(5px)!important;backdrop-filter: blur(5px)!important;background: "+fu_hhx(cpc_background,0.85)+";"); fu_wkn("full", ".sidemenu a", "display:block;margin-bottom:5px;background:"+fu_hhx(cpc_alt_background,0)+";color:"+cpc_alt_text+";border-radius: "+cp_elements_radius+"px;border:1px solid rgba(0,0,0,0);padding: 5px;white-space: nowrap;text-overflow: ellipsis;overflow:hidden;padding-top:10px;padding-bottom:10px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("full", ".sidemenu a.current", "padding-left:15px !important;position: relative;z-index: 5;background:"+cpc_box_background+";border:1px solid "+cpc_button_background+";"); fu_wkn("full", ".sidemenu a.important", "background:"+cpc_button_background+";color:"+cpc_button_text+";padding-top: 10px;padding-bottom: 10px;"); fu_wkn("full", ".sidemenu a.important:hover", "background:"+fu_qlz(cpc_button_background,20)+";"); fu_wkn("full", ".sidemenu a:hover", "background:"+cpc_alt_active_background+" !important;color:"+cpc_alt_text+" !important;padding-left:15px !important;position: relative;z-index: 5;"); fu_wkn("full", ".sidemenu a:last-of-type", "margin-bottom:0px;"); fu_wkn("full", ".sidemenu .section a", "background:"+fu_hhx(cpc_alt_background,0)+";color:"+cpc_alt_text+";"); fu_wkn("full", ".sidemenu .section a:hover", "background:"+cpc_alt_background+";color:"+cpc_alt_text+";"); fu_wkn("full", ".sidemenu .cover", "background-position: center;background-size: cover;"); fu_wkn("full", ".sidemenu .multiline .avatar", "margin-bottom: -24px;width: 44px;height: 44px;margin-top: -5px;"); fu_wkn("full", ".sidemenu .multiline .subline", "margin-top: 5px; font-size: 0.5em; margin-left: 52px;"); fu_wkn("full", ".sidemenu .multiline .badge", "display: inline-block;padding:3px;padding-left: 10px;padding-right: 10px;margin-left: 5px;border-radius: "+cp_elements_radius+"px;"); fu_wkn("full", ".sidemenu .multiline .badge.online", "background:"+fu_qlz("rgb(82, 199, 135)",75)+";color: rgb(22, 22, 22);"); fu_wkn("full", ".sidemenu .multiline .badge.idle", "background:"+fu_qlz("rgb(199, 144, 82)",75)+";color: rgb(22, 22, 22);"); fu_wkn("full", ".header_logo", "float: left;background:"+cpc_alt_background+";color:"+cpc_text+" !important;border-radius: "+cp_elements_radius+"px;font-size: 1em;padding: 10px;padding-left: 20px;padding-right: 20px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;overflow:hidden;"); fu_wkn("full", ".header_logo:hover", "background:"+cpc_button_background+" !important;color:"+cpc_button_text+" !important;"); if (s_width<=899){ fu_wkn("full", "bubble.profile:not(.halfsized) .avatar.main", "border-width: 2px;width: 120px;height: 120px;margin: 0px auto;margin-top: -50px;float: none;display: block;"); fu_wkn("full", "bubble.profile:not(.halfsized) .tab", "padding: 5px;padding-left: 10px;padding-right: 10px;font-size: 0.7em;"); fu_wkn("full", "bubble.profile:not(.halfsized) h1", "font-size: 1.3em;padding-top: 10px;padding-bottom: 2px;text-align: center;max-width: 100%;"); fu_wkn("full", "bubble.profile:not(.halfsized) h2", "font-size: 0.8em;padding-bottom: 5px;text-align: center;max-width: 100%;"); fu_wkn("full", "bubble.profile:not(.halfsized) .button", "margin: 0px auto;display: block;max-width: 150px;float:none;"); fu_wkn("full", "bubble.profile .minibubble", "padding:10px;");} if (s_width>=700){ fu_wkn("full", "#container_contentcase", "max-width: 1100px;margin:0px auto;"); fu_wkn("full", "#container_menu", "overflow: hidden;display:inline-block;vertical-align:top;width:282px;padding:10px;padding-top:20px;"); fu_wkn("full", "#container_content", "display:inline-block;vertical-align:top;width: calc(100% - 342px);padding-right:10px;padding-top:20px;"); fu_wkn("full", "#container_menu .section", "display:block;overflow:auto;margin-bottom:15px;padding: 10px;box-shadow: "+cpc_shadow+";background:"+cpc_box_background+";border-radius: "+cp_elements_radius+"px;border:1px solid "+cpc_border+";"); fu_wkn("full", "#container_sidebar .section", "display:block;overflow:auto;margin-bottom:15px;padding: 10px;box-shadow: "+cpc_shadow+";background:"+cpc_box_background+";border-radius: "+cp_elements_radius+"px;border:1px solid "+cpc_border+";"); if (su_alias==null){ fu_wkn("full", "#container_contentcase", "padding-left: 0px !important;padding-right: 0px !important;max-width: 800px !important;"); fu_wkn("full", "#container_content", "width: calc(100% - 60px) !important;"); fu_wkn("full", "#container_menu", "display:none !important;"); fu_wkn("full", "#container_sidebar", "display:none !important;");}
fu_wkn("full", "#container_headercase", "padding-bottom: 0px;background:"+fu_hhx(cpc_box_background,0.85)+" !important;box-shadow: "+cpc_shadow+";"); fu_wkn("full", "#container_header", "overflow:hidden;"); fu_wkn("full", "bubble.halfsized", "display:inline-block;vertical-align:top;width: calc(50% - 27px);"); fu_wkn("full", "bubble.halfsized:nth-of-type(even)", "margin-left: 5px;"); fu_wkn("full", "bubble.halfsized:nth-of-type(odd)", "margin-right: 5px;"); if (s_width>=1100){ fu_wkn("full_large", "#container_contentcase", "max-width: 900px;padding-left: 300px;padding-right: 300px;"); fu_wkn("full_large", "#container_menu", "position: fixed;left: 10px;top: 59px;width:285px;overflow: auto;margin-top:env(safe-area-inset-top);max-height: calc(calc(100% - 89px) - env(safe-area-inset-top));padding:10px;padding-top:20px;"); fu_wkn("full_large", "#container_sidebar", "position: fixed;right: 10px;top: 59px;width:285px;overflow: auto;margin-top:env(safe-area-inset-top);max-height: calc(calc(100% - 89px) - env(safe-area-inset-top));padding:10px;padding-top:20px;"); fu_wkn("full_large", "#container_content", "width: calc(100% - 40px) !important;");} if (s_width>=1400){ } if (s_width<=1099){ fu_wkn("full_medium", "#container_menu", "width: 260px !important;padding-top:0px;"); fu_wkn("full_medium", "#container_menu .section", "margin-bottom:10px;"); fu_wkn("full_medium", "#container_content", "width: calc(100% - 290px);padding-left:0px;padding-right:10px;");} if (s_width<=799){ fu_wkn("full_small", "#container_menu", "width: 200px !important;"); fu_wkn("full_small", "#container_content", "width: calc(100% - 230px);");}} if (s_width<=699){ fu_wkn("full", ".header_logo", "padding-top: 8px !important;padding-bottom:8px !important;margin-left: calc(50% - 55px);width: 50px;text-align: center;position: absolute;font-size: 0.7em !important;margin-top: 5px;"); fu_wkn("full", "#container_top", "margin-top:60px;"); fu_wkn("full", "#container_headercase", "background:"+fu_hhx(cpc_box_background,0.85)+" !important;border-bottom:1px solid "+cpc_border+";"); fu_wkn("full", "#container_menu", "background:"+fu_hhx(cpc_box_background,0.85)+" !important;border-top:1px solid "+cpc_border+";position:fixed;z-index: 5000;bottom:0px;left:0px;padding:10px;padding-left:5px;padding-right:5px;width:calc(100% - 10px);padding-bottom: calc(10px + env(safe-area-inset-bottom));-webkit-transition: bottom 250ms ease-in-out;-moz-transition: bottom 250ms ease-in-out;-o-transition: bottom 250ms ease-in-out;transition: bottom 250ms ease-in-out;"+cp_frost_heavy+""); fu_wkn("full", "#container_menu a", "display:inline-block;border-radius: "+cp_elements_radius+"px;padding: 5px;margin-left: 5px;margin-right: 5px;font-size: 1em;padding-top: 10px;padding-bottom: 10px;width: calc(25% - 20px);text-align:center;background: "+cpc_alt_background+";color:"+cpc_text+" !important;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_wkn("full", "#container_menu a.important", "background:"+cpc_button_background+";color:"+cpc_button_text+" !important;position: absolute;top: -70px;right: 10px;width: 30px;height: 30px;padding: 15px;border-radius: 100%;font-size: 1.5em;overflow: hidden;"); fu_wkn("full", "#container_menu a:hover", "background: "+cpc_alt_active_background+";"); if (fu_rio(cpc_button_background)=="#ffffff"){ fu_wkn("full", "#container_menu a.important .svgicon", "filter: invert(1);");}else{ fu_wkn("full", "#container_menu a.important .svgicon", "filter: invert(0);");}
fu_wkn("full", "#mobile_popin_menu .section", "display:block;overflow:auto;margin-bottom:15px;padding: 10px;box-shadow: "+cpc_shadow+";background:"+cpc_box_background+";border-radius: "+cp_elements_radius+"px;border:1px solid "+cpc_border+";"); fu_wkn("full", "#container_content", "padding-left: 10px !important;padding-right: 10px !important;"); fu_wkn("full", ".conversation.normal .footer_comments", "margin-left: 10px;"); fu_wkn("full", ".conversation.normal .section_extra", "margin-left: 10px;"); fu_wkn("full", "bubble .embed .preview", "float: none;padding:0px;margin-right: -10px;margin-left: -10px;margin-top: -10px;margin-bottom:10px;"); fu_wkn("full", "bubble .embed .preview img", "border-bottom-left-radius: 0px;min-width:100%;max-width:100%;max-height:800px;border-bottom-right-radius: 0px;"); fu_wkn("full", "bubble .embed .preview .media", "margin-top: -10px;margin-left: -10px;margin-right: -10px;width: calc(100% + 20px);border-bottom-left-radius: 0px;border-bottom-right-radius: 0px;"); fu_wkn("full", "bubble .embed.youtube .media_backing", "border-bottom-left-radius: 0px;border-bottom-right-radius: 0px;"); fu_wkn("full", "bubble .embed.youtube div.media", "margin-top: -10px;margin-left: -10px;margin-right: -10px;width: calc(100% + 20px);border-bottom-left-radius: 0px;border-bottom-right-radius: 0px;"); fu_wkn("full", "bubble .embed.applemusic .media_backing", "border-bottom-left-radius: 0px;border-bottom-right-radius: 0px;"); fu_wkn("full", "bubble .embed.applemusic div.media", "margin-top: -10px;margin-left: -10px;margin-right: -10px;width: calc(100% + 20px);border-bottom-left-radius: 0px;border-bottom-right-radius: 0px;"); if (s_width<=330){ fu_wkn("full", "#container_header", "padding-left:5px !important;padding-right:5px !important;"); fu_wkn("all", ".conversation .comment", "min-width:250px;"); fu_wkn("all", ".reactcontent", "display:none;");}} }} var uiGenerateBackground_image=false; function fu_cek(mode){ if (mode!="full"){ fu_mxp("uiBackground");} if (mode=="full"){ if (su_alias!=null){ if (su_header!=uiGenerateBackground_image){ fu_mxp("uiBackground");}} }} function fu_rur(mode){ fu_mxp("container_header"); if (mode=="full"){ if (s_width>=700){ if (s_mode=="light"){ fu_pco("container_header", "<a tabindex='0' href='/'><div class='header_logo' style='"+css_special_inline_event_pride_2024+"'>Hey.Café</div></a>");} if (s_mode=="dark"){ fu_pco("container_header", "<a tabindex='0' href='/'><div class='header_logo' style='"+css_special_inline_event_pride_2024+"'>Hey.Café</div></a>");} if (sh.length>=2){ fu_pco("container_header", "<a tabindex='0' href='javascript:fu_ixc();'><div class='header_bubble' style='float: left;margin-left:5px;'>"+fu_gmq("arrow-left")+"</div></a>");} if (su_alias!=null){ if (s_width>=900){ fu_pco("container_header", "<form action=\"#\" id=\"mainsearchelement\" onsubmit=\"javascript:fu_blr(this,true);\"><input type=\"text\" class=\"input\" tabindex=\"-1\" onkeyup=\"javascript:fu_blr(aa('mainsearchelement'));\" name=\"search\" size=\"50\" maxlength=\"50\" placeholder=\"Search\" style='border:0px solid #ffffff;float: left;margin: 0px;margin-left:5px;padding-bottom:10px;padding-top:10px;padding-left:20px;padding-right:20px;max-width:300px;'></form>");}else{ fu_pco("container_header", "<a href='javascript:fu_hae();'><div class='header_bubble' style='float: left;margin-left:5px;'>"+fu_gmq("search")+"</div></a>");} if (suc_notifications==0){ fu_pco("container_header", "<a tabindex='0' href='/notifications'><div class='header_bubble' id='uiCheckupNotifications' style='float:right;margin-left:5px;'>"+fu_gmq("bell")+"</div></a>");}else{ fu_pco("container_header", "<a tabindex='0' href='/notifications'><div class='header_bubble' id='uiCheckupNotifications' style='float:right;margin-left:5px;'>"+fu_gmq("bell-fill")+"&ensp;"+fu_atf(suc_notifications)+"</div></a>");} if (suc_messages==0){ fu_pco("container_header", "<a tabindex='0' href='/messages'><div class='header_bubble' id='uiCheckupMessages' style='float:right;margin-left:5px;'>"+fu_gmq("envelope")+"</div></a>");}else{ fu_pco("container_header", "<a tabindex='0' href='/messages'><div class='header_bubble' id='uiCheckupMessages' style='float:right;margin-left:5px;'>"+fu_gmq("envelope-fill")+"</div></a>");}} if (su_alias==null){ if (s_device!="NativeiOSApp"){ fu_pco("container_header", "<a href='/explore'><div class='header_bubble' style='float: left;margin-left:5px;'>Explore</div></a>");}
fu_pco("container_header", "<a href='/login'><div class='header_bubble' style='float: left;margin-left:5px;'>Login</div></a>"); fu_pco("container_header", "<a href='/register'><div class='header_bubble' style='float: left;margin-left:5px;'>Join</div></a>");}}else{ if (s_mode=="light"){ fu_pco("container_header", "<a tabindex='0' href='/'><div class='header_logo' style='"+css_special_inline_event_pride_2024+"'>Hey.Café</div></a>");} if (s_mode=="dark"){ fu_pco("container_header", "<a tabindex='0' href='/'><div class='header_logo' style='"+css_special_inline_event_pride_2024+"'>Hey.Café</div></a>");} if (su_alias!=null){ fu_pco("container_header", "<a href='javascript:fu_lsb();'><div class='header_bubble' style='float: left;margin-right:5px;border-radius: 40px;padding: 2px;'><img alt='Account image that opens menu' src='"+s_imagecache+"?url="+su_avatar+"&size=88' style='width: 35px;display: inline;vertical-align: text-top;border-radius: 35px;'></div></a>");}
fu_pco("container_header", "<a href='javascript:fu_hae();'><div class='header_bubble' style='float: left;'>"+fu_gmq("search")+"</div></a>"); if (su_alias!=null){ if (suc_notifications==0){ fu_pco("container_header", "<a href='/notifications'><div class='header_bubble' id='uiCheckupNotifications' style='float:right;margin-left:5px;'>"+fu_gmq("bell")+"</div></a>");}else{ fu_pco("container_header", "<a href='/notifications'><div class='header_bubble' id='uiCheckupNotifications' style='float:right;margin-left:5px;'>"+fu_gmq("bell-fill")+"</div></a>");} if (suc_messages==0){ fu_pco("container_header", "<a href='/messages'><div class='header_bubble' id='uiCheckupMessages' style='float:right;margin-left:5px;'>"+fu_gmq("envelope")+"</div></a>");}else{ fu_pco("container_header", "<a href='/messages'><div class='header_bubble' id='uiCheckupMessages' style='float:right;margin-left:5px;'>"+fu_gmq("envelope-fill")+"</div></a>");}} }} } function fu_qns(mode){ fu_mxp("container_menu"); if (mode=="full"){ if (su_alias!=null){ if (s_width>=700){ fu_tej("container_menu");}else{ fu_pco("container_menu", "<a href='/feed' title='Home'>"+fu_gmq("house")+"</a>"); fu_pco("container_menu", "<a href='/cafes' title='Cafes'>"+fu_gmq("cup-hot")+"</a>"); fu_pco("container_menu", "<a href='/explore' title='Explore'>"+fu_gmq("compass")+"</a>"); fu_pco("container_menu", "<a href='/@"+su_alias+"' title='Profile'>"+fu_gmq("person-badge")+"</a>");} if (s_width>=1100){ fu_gup("container_sidebar");}else{ if (s_width>=700){ fu_gup("container_menu");}} }else{ if (s_width>=700){ if (s_device!="NativeiOSApp"){ fu_pco("container_menu", "<a href='/' tabindex='0'>"+fu_gmq("house")+"&ensp;Main</a>");}
fu_pco("container_menu", "<a href='/explore' tabindex='0'>Explore</a>"); fu_pco("container_menu", "<a href='/login' tabindex='0'>Login</a>"); fu_pco("container_menu", "<a href='/register' tabindex='0'>Join</a>");}else{ if (s_device!="NativeiOSApp"){ fu_pco("container_menu", "<a href='/' title='Home'>"+fu_gmq("house")+"</a>");}
fu_pco("container_menu", "<a href='/explore' title='Explore'>Explore</a>"); fu_pco("container_menu", "<a href='/login' title='Login'>Login</a>"); fu_pco("container_menu", "<a href='/register' title='Join'>Join</a>");}} } if (mode=="splash"){ if (su_alias==null){ fu_pco("container_menu","<a href='/explore'><div class='tab' style='margin-left:0px;'>Explore</div></a><a href='/login'><div class='tab' style='margin-left:0px;'>Login</div></a><a href='/register'><div class='tab important' style='margin-left:0px;'>Join</div></a>");}} if (mode=="simple"){ if (su_alias==null){ if (s_device!="NativeiOSApp"){ fu_pco("container_menu","<a href='/'><div class='tab' style='margin-left:0px;'>Home</div></a><a href='/login'><div class='tab' style='margin-left:0px;'>Login</div></a><a href='/register'><div class='tab' style='margin-left:0px;'>Join</div></a>");}else{ fu_pco("container_menu","<a href='/login'><div class='tab' style='margin-left:0px;'>Login</div></a><a href='/register'><div class='tab' style='margin-left:0px;'>Join</div></a>");}} }} function fu_lsb(){ fu_pbr(); fu_pco("container_modl","<div id='mobile_popin_menu'></div><BR><BR><a href='/debug'>Go to debug menu</a>"); fu_tej("mobile_popin_menu"); fu_gup("mobile_popin_menu");} function fu_tej(container){ var menuid=fu_hmk(20); fu_pco(container, "<div class='sidemenu'><div class='section' style='padding:0px;'><div id='conmenu_a_"+menuid+"'></div></div><div class='section'><div id='conmenu_b_"+menuid+"'></div></div><div id='conmenu_c_"+menuid+"'></div></div>"); fu_pco("conmenu_a_"+menuid+"", "<a href='javascript:fu_dqi();' style='padding-left:10px;'><img src='"+s_imagecache+"?url="+su_avatar+"&size=88' class='avatar' style='margin-bottom: -24px;width: 44px;height: 44px;margin-top: -5px;' alt='Avatar image for account "+su_name+"'>&ensp;"+su_name+"<div style=\"margin-top: 5px; font-size: 0.5em; margin-left: 52px;\">Tap for other accounts</div></a>",true); if (sp=="/feed"){ fu_pco("conmenu_b_"+menuid+"", "<a tabindex='0' class='current' href='/feed'>"+fu_gmq("house")+"&ensp;<span>Conversations</span></a>",true);}else{ fu_pco("conmenu_b_"+menuid+"", "<a tabindex='0' href='/feed'>"+fu_gmq("house")+"&ensp;<span>Conversations</span></a>",true);} if (sp=="/cafes"){ fu_pco("conmenu_b_"+menuid+"", "<a tabindex='0' class='current' href='/cafes'>"+fu_gmq("cup-hot")+"&ensp;<span>Cafés</span></a>",true);}else{ fu_pco("conmenu_b_"+menuid+"", "<a tabindex='0' href='/cafes'>"+fu_gmq("cup-hot")+"&ensp;<span>Cafés</span></a>",true);} if (sp=="/tags"){ fu_pco("conmenu_b_"+menuid+"", "<a tabindex='0' class='current' href='/tags'>"+fu_gmq("tag")+"&ensp;<span>Discussions</span></a>",true);}else{ fu_pco("conmenu_b_"+menuid+"", "<a tabindex='0' href='/tags'>"+fu_gmq("tag")+"&ensp;<span>Discussions</span></a>",true);} if (sp.startsWith("/explore")){ fu_pco("conmenu_b_"+menuid+"", "<a tabindex='0' class='current' href='/explore'>"+fu_gmq("compass")+"&ensp;<span>Explore</span></a>",true);}else{ fu_pco("conmenu_b_"+menuid+"", "<a tabindex='0' href='/explore'>"+fu_gmq("compass")+"&ensp;<span>Explore</span></a>",true);} if (sp.startsWith("/videos")){ fu_pco("conmenu_b_"+menuid+"", "<a tabindex='0' class='current' href='/videos'>"+fu_gmq("camera-video")+"&ensp;<span>Videos</span></a>",true);}else{ fu_pco("conmenu_b_"+menuid+"", "<a tabindex='0' href='/videos'>"+fu_gmq("camera-video")+"&ensp;<span>Videos</span></a>",true);} if (sp.startsWith("/@"+su_alias+"")){ fu_pco("conmenu_b_"+menuid+"", "<a tabindex='0' class='current' href='/@"+su_alias+"'>"+fu_gmq("person-badge")+"&ensp;<span>My Profile</span></a>",true);}else{ fu_pco("conmenu_b_"+menuid+"", "<a tabindex='0' href='/@"+su_alias+"'>"+fu_gmq("person-badge")+"&ensp;<span>My Profile</span></a>",true);} if (sp.startsWith("/help") || sp.startsWith("/referral") || sp.startsWith("/home/personal_site") || sp.startsWith("/embed")){ fu_pco("conmenu_b_"+menuid+"", "<a tabindex='0' class='current' href='/help'>"+fu_gmq("life-preserver")+"&ensp;<span>Help</span></a>",true);}else{ fu_pco("conmenu_b_"+menuid+"", "<a tabindex='0' href='/help'>"+fu_gmq("life-preserver")+"&ensp;<span>Help</span></a>",true);} if (sp.startsWith("/settings")){ fu_pco("conmenu_b_"+menuid+"", "<a tabindex='0' class='current' href='/settings'>"+fu_gmq("sliders")+"&ensp;<span>Settings</span></a>",true);}else{ fu_pco("conmenu_b_"+menuid+"", "<a tabindex='0' href='/settings'>"+fu_gmq("sliders")+"&ensp;<span>Settings</span></a>",true);} if (su_admin=="1" || su_moderator=="1"){ if (sp.startsWith("/staff")){ fu_pco("conmenu_b_"+menuid+"", "<a tabindex='0' class='current' href='/staff'>"+fu_gmq("ui-checks")+"&ensp;<span>Staff Area</span></a>",true);}else{ fu_pco("conmenu_b_"+menuid+"", "<a tabindex='0' href='/staff'>"+fu_gmq("ui-checks")+"&ensp;<span>Staff Area</span></a>",true);}} if (s_app_hidesuggestions=="false"){ fu_pco("conmenu_c_"+menuid+"", "<div id='sect_c_suggest_account'></div>"); if (fu_unj('ui_generate_whotofollow')!=null){ var cachedata=fu_unj('ui_generate_whotofollow'); var newlist=""; fu_qeq(cachedata["accounts"], function(id){ var relation="you know"; if (cachedata["mutual"][""+id+""]==undefined){ cachedata["mutual"][""+id+""]="some"; relation="accounts";}
newlist=""+newlist+"<a href=\"javascript:fu_xlg('"+cachedata["accounts"][""+id+""]["alias"]+"');\" class='multiline'><img src='"+s_imagecache+"?url="+cachedata["accounts"][""+id+""]["avatar"]+"&size=88' class='avatar' alt='Avatar image for account "+cachedata["accounts"][""+id+""]["name"]+"'>&ensp;"+fu_cpd(cachedata["accounts"][""+id+""]["name"])+"<div class='subline'>Followed by "+cachedata["mutual"][""+id+""]+" "+relation+"</div></a>";}); fu_mxp("sect_c_suggest_account"); fu_pco("sect_c_suggest_account", "<div class='section'><h4 style='margin-top: 0px;'>Who to follow</h4><div id='gen_whotofollow_list'></div></div>",true); fu_pco("gen_whotofollow_list", newlist);}else{ var url="https://"+s_hostname+"/get_explore_accounts?count=3&suggest=true"; fu_npw(url,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["accounts"]!=false){ fu_ojv('ui_generate_whotofollow',response["response_data"]); var cachedata=response["response_data"]; var newlist=""; fu_qeq(cachedata["accounts"], function(id){ var relation="you know"; if (cachedata["mutual"][""+id+""]==undefined){ cachedata["mutual"][""+id+""]="some"; relation="accounts";}
newlist=""+newlist+"<a href=\"javascript:fu_xlg('"+cachedata["accounts"][""+id+""]["alias"]+"');\" class='multiline'><img src='"+s_imagecache+"?url="+cachedata["accounts"][""+id+""]["avatar"]+"&size=88' class='avatar' alt='Avatar image for account "+cachedata["accounts"][""+id+""]["name"]+"'>&ensp;"+fu_cpd(cachedata["accounts"][""+id+""]["name"])+"<div class='subline'>Followed by "+cachedata["mutual"][""+id+""]+" "+relation+"</div></a>";}); fu_mxp("sect_c_suggest_account"); fu_pco("sect_c_suggest_account", "<div class='section'><h4 style='margin-top: 0px;'>Who to follow</h4><div id='gen_whotofollow_list'></div></div>",true); fu_pco("gen_whotofollow_list", newlist);}} });}} } function fu_gup(container){ var menuid=fu_hmk(20); fu_pco(container, "<div class='sidemenu'><div id='container_friends_online_list'></div><div id='container_cafes_list'></div><div id='container_cafes_suggest_list'></div></div>"); if (fu_unj('ui_generate_menu_online')!=null){ if (fu_unj('ui_generate_menu_online')!=false){ var cachedata=fu_unj('ui_generate_menu_online'); var newlist=""; fu_qeq(cachedata, function(id){ var online='<text class="online_'+cachedata[""+id+""]["alias"]+'"><div class="badge" style="float: right;margin-right: -60px;font-size: 0.7em;"><div style="background:rgb(199, 82, 82);border-radius: 5px;width: 8px;height: 8px;display: inline-block;"></div> Offline</div></text>'; if (fu_gmr(cachedata[""+id+""]["seen"])<=60){ if (fu_gmr(cachedata[""+id+""]["active"])<=60){ var online='<text class="online_'+cachedata[""+id+""]["alias"]+'"><div class="badge online" style="float: right;margin-right: -60px;font-size: 0.7em;"><div style="background:rgb(82, 199, 135);border-radius: 5px;width: 8px;height: 8px;display: inline-block;"></div> Online</div></text>';}else{ var online='<text class="online_'+cachedata[""+id+""]["alias"]+'"><div class="badge idle" style="float: right;margin-right: -60px;font-size: 0.7em;"><div style="background:rgb(199, 144, 82);border-radius: 5px;width: 8px;height: 8px;display: inline-block;"></div> Idle</div></text>';}}
newlist=""+newlist+"<a href=\"javascript:fu_xlg('"+cachedata[""+id+""]["alias"]+"');\" class='multiline' style='padding-right: 70px;'><img src='"+s_imagecache+"?url="+cachedata[""+id+""]["avatar"]+"&size=88' class='avatar' alt='Avatar image for account "+cachedata[""+id+""]["name"]+"'>"+online+"&ensp;"+fu_cpd(cachedata[""+id+""]["name"])+"<div class='subline'>@"+cachedata[""+id+""]["alias"]+"</div></a>";}); fu_pco("container_friends_online_list", "<div class='section'><h4 style='margin-top: 0px;'>Online Friends</h4><div id='gen_myfriend_list'></div></div>",true); fu_pco("gen_myfriend_list", newlist);}else{ fu_pco("container_friends_online_list", "<div class='section'><h4 style='margin-top: 0px;'>Online Friends</h4><div style='text-align:center;'>No friends online</div></div>",true);}}else{ fu_pco("container_friends_online_list", "<div class='section'><h4 style='margin-top: 0px;'>Online Friends</h4><div style='text-align:center;'>No friends online</div></div>",true);} if (fu_unj('ui_generate_menu_cafes')!=null){ if (fu_unj('ui_generate_menu_cafes')!=false){ var cachedata=fu_unj('ui_generate_menu_cafes'); var newlist=""; fu_qeq(cachedata, function(id){ var time=fu_agm(cachedata[""+id+""]["activity"]); var timelocal=fu_sak(cachedata[""+id+""]["activity"]); newlist=""+newlist+"<a href='/!"+cachedata[""+id+""]["alias"]+"' class='multiline'><img src='"+s_imagecache+"?url="+cachedata[""+id+""]["avatar"]+"&size=88' class='avatar' alt='Avatar image for café "+cachedata[""+id+""]["name"]+"'>&ensp;"+fu_cpd(cachedata[""+id+""]["name"])+"<div class='subline'><timestamp time='"+cachedata[""+id+""]["activity"]+"' data-title='"+timelocal+"'>"+time+"</timestamp></div></a>";}); fu_pco("container_cafes_list", "<div class='section'><h4 style='margin-top: 0px;'>My Cafés</h4><div id='gen_mycafe_list'></div></div>",true); fu_pco("gen_mycafe_list", newlist);}else{ fu_pco("container_cafes_list", "<div class='section'><h4 style='margin-top: 0px;'>My Cafés</h4><div style='text-align:center;'>Not in any Cafés</div></div>",true);}}else{ fu_pco("container_cafes_list", "<div class='section'><h4 style='margin-top: 0px;'>My Cafés</h4><div style='text-align:center;'>Not in any Cafés</div></div>",true);} if (s_app_hidesuggestions=="false"){ if (fu_unj('ui_generate_cafetojoin')!=null){ var cachedata=fu_unj('ui_generate_cafetojoin'); var newlist=""; fu_qeq(cachedata["cafes"], function(id){ var relation="members you know"; if (cachedata["mutual"][""+id+""]==undefined){ cachedata["mutual"][""+id+""]="some"; relation="members";}
newlist=""+newlist+"<a href='/!"+cachedata["cafes"][""+id+""]["alias"]+"' class='multiline'><img src='"+s_imagecache+"?url="+cachedata["cafes"][""+id+""]["avatar"]+"&size=88' class='avatar' alt='Avatar image for café "+cachedata["cafes"][""+id+""]["name"]+"'>&ensp;"+fu_cpd(cachedata["cafes"][""+id+""]["name"])+"<div class='subline'>"+cachedata["mutual"][""+id+""]+" "+relation+"</div></a>";}); fu_mxp("container_cafes_suggest_list"); fu_pco("container_cafes_suggest_list", "<div class='section'><h4 style='margin-top: 0px;'>Cafés to join</h4><div id='gen_cafetojoin_list'></div></div>",true); fu_pco("gen_cafetojoin_list", newlist);}else{ var url="https://"+s_hostname+"/get_explore_cafes?count=3&suggest=true"; fu_npw(url,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["cafes"]!=false){ fu_ojv('ui_generate_cafetojoin',response["response_data"]); var cachedata=response["response_data"]; var newlist=""; fu_qeq(cachedata["cafes"], function(id){ var relation="members you know"; if (cachedata["mutual"][""+id+""]==undefined){ cachedata["mutual"][""+id+""]="some"; relation="members";}
newlist=""+newlist+"<a href='/!"+cachedata["cafes"][""+id+""]["alias"]+"' class='multiline'><img src='"+s_imagecache+"?url="+cachedata["cafes"][""+id+""]["avatar"]+"&size=88' class='avatar' alt='Avatar image for café "+cachedata["cafes"][""+id+""]["name"]+"'>&ensp;"+fu_cpd(cachedata["cafes"][""+id+""]["name"])+"<div class='subline'>"+cachedata["mutual"][""+id+""]+" "+relation+"</div></a>";}); fu_mxp("container_cafes_suggest_list"); fu_pco("container_cafes_suggest_list", "<div class='section'><h4 style='margin-top: 0px;'>Cafés to join</h4><div id='gen_cafetojoin_list'></div></div>",true); fu_pco("gen_cafetojoin_list", newlist);}} });}} } function fu_jsa(mode){ fu_mxp("container_footer"); if (mode=="full" || mode=="simple" || mode=="splash"){ if (s_pwa==false){ fu_pco("container_footer", "<div style='font-size:0.8em;'>Made with <text style='color:rgb(251, 130, 181);'>love</text> in British Columbia, Canada.<BR>Hey.Café a product of <a href=\"https://lammcs.ca\" target=\"_blank\">LAMM Creative Solutions</a> © 2021-2024.<BR>PO Box 22052 Penticton Plaza RPO, Penticton, BC V2A 8L1, Canada</div>");}} } function fu_tek(name){ var alias=""; var icon=""; if (sr[""+name+""]!=undefined){ icon=sr[""+name+""]["code"];} if (icon==""){ icon=sr["blank"]["code"];}
alias=name; alias=alias.replace("emoji-", ""); alias=alias.replace("-", " "); return '<img src="https://assets.heycafecdn.com/emoji/svg/'+icon+'.svg" alt="'+name+'" emoji="true" style="width: 1.2em;margin: 0px auto;vertical-align: middle;">';} function fu_msd(){ fu_wkn("special", "@-webkit-keyframes emojiflakes-fall", "0%{top:-10%} 100%{top:100%}"); fu_wkn("special", "@-webkit-keyframes emojiflakes-shake", "0%{-webkit-transform:translateX(0px);transform:translateX(0px)} 50%{-webkit-transform:translateX(80px);transform:translateX(80px)} 100%{-webkit-transform:translateX(0px);transform:translateX(0px)}"); fu_wkn("special", ".emojiflake", "position:fixed;z-index: -5;top:-10%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default;-webkit-animation-name:emojiflakes-fall,emojiflakes-shake;-webkit-animation-duration:10s,3s;-webkit-animation-timing-function:linear,ease-in-out;-webkit-animation-iteration-count:infinite,infinite;-webkit-animation-play-state:running,running;animation-name:emojiflakes-fall,emojiflakes-shake;animation-duration:10s,3s;animation-timing-function:linear,ease-in-out;animation-iteration-count:infinite,infinite;animation-play-state:running,running;"); fu_wkn("special", ".emojiflake:nth-of-type(0)", "left:1%;-webkit-animation-delay:0s,0s;animation-delay:0s,0s;"); fu_wkn("special", ".emojiflake:nth-of-type(1)", "left:10%;-webkit-animation-delay:1s,1s;animation-delay:1s,1s;"); fu_wkn("special", ".emojiflake:nth-of-type(2)", "left:20%;-webkit-animation-delay:6s,.5s;animation-delay:6s,.5s;"); fu_wkn("special", ".emojiflake:nth-of-type(3)", "left:30%;-webkit-animation-delay:4s,2s;animation-delay:4s,2s;"); fu_wkn("special", ".emojiflake:nth-of-type(4)", "left:40%;-webkit-animation-delay:2s,2s;animation-delay:2s,2s;"); fu_wkn("special", ".emojiflake:nth-of-type(5)", "left:50%;-webkit-animation-delay:8s,3s;animation-delay:8s,3s;"); fu_wkn("special", ".emojiflake:nth-of-type(6)", "left:60%;-webkit-animation-delay:6s,2s;animation-delay:6s,2s;"); fu_wkn("special", ".emojiflake:nth-of-type(7)", "left:70%;-webkit-animation-delay:2.5s,1s;animation-delay:2.5s,1s;"); fu_wkn("special", ".emojiflake:nth-of-type(8)", "left:80%;-webkit-animation-delay:1s,0s;animation-delay:1s,0s;"); fu_wkn("special", ".emojiflake:nth-of-type(9)", "left:90%;-webkit-animation-delay:3s,1.5s;animation-delay:3s,1.5s;"); fu_pco("container_content",'<div class="emojiflake"><img src="https://assets.heycafecdn.com/emoji/svg/1f60e.svg" style="width:70px;height:70px;"></div>'); fu_pco("container_content",'<div class="emojiflake"><img src="https://assets.heycafecdn.com/emoji/svg/1f974.svg" style="width:70px;height:70px;"></div>'); fu_pco("container_content",'<div class="emojiflake"><img src="https://assets.heycafecdn.com/emoji/svg/1f929.svg" style="width:70px;height:70px;"></div>'); fu_pco("container_content",'<div class="emojiflake"><img src="https://assets.heycafecdn.com/emoji/svg/1f923.svg" style="width:70px;height:70px;"></div>'); fu_pco("container_content",'<div class="emojiflake"><img src="https://assets.heycafecdn.com/emoji/svg/1f973.svg" style="width:70px;height:70px;"></div>'); fu_pco("container_content",'<div class="emojiflake"><img src="https://assets.heycafecdn.com/emoji/svg/1f629.svg" style="width:70px;height:70px;"></div>'); fu_pco("container_content",'<div class="emojiflake"><img src="https://assets.heycafecdn.com/emoji/svg/1f914.svg" style="width:70px;height:70px;"></div>'); fu_pco("container_content",'<div class="emojiflake"><img src="https://assets.heycafecdn.com/emoji/svg/1f633.svg" style="width:70px;height:70px;"></div>'); fu_pco("container_content",'<div class="emojiflake"><img src="https://assets.heycafecdn.com/emoji/svg/1f61c.svg" style="width:70px;height:70px;"></div>'); fu_pco("container_content",'<div class="emojiflake"><img src="https://assets.heycafecdn.com/emoji/svg/1f61c.svg" style="width:70px;height:70px;"></div>');} function fu_lsz(url,text){ var linktext = fu_aic(text); var buttons=""; buttons=""+buttons+"<div style='width:33.33%;display:inline-block;'><a href=\"https://www.facebook.com/sharer.php?u="+ae(url)+"\" target='_blank'><div class='minibubble' style='font-size:0.8em;margin:5px;text-align:center;background:rgb(72,116,226);color:#ffffff;'><div style='font-size:0.9;'>Facebook</div></div></a></div>"; buttons=""+buttons+"<div style='width:33.33%;display:inline-block;'><a href=\"https://mastodonshare.com/?text="+ae(linktext)+"&url="+ae(url)+"\" target='_blank'><div class='minibubble' style='font-size:0.8em;margin:5px;text-align:center;background:rgb(99,100,246);color:#ffffff;'><div style='font-size:0.9;'>Mastodon</div></div></a></div>"; buttons=""+buttons+"<div style='width:33.33%;display:inline-block;'><a href=\"https://publish.buffer.com/compose?url="+ae(url)+"&title="+ae(linktext)+"\" target='_blank'><div class='minibubble' style='font-size:0.8em;margin:5px;text-align:center;background:rgb(245,223,85);color:#000000;'><div style='font-size:0.9;'>Buffer</div></div></a></div>"; buttons=""+buttons+"<div style='width:33.33%;display:inline-block;'><a href=\"https://api.whatsapp.com/send?text="+ae(linktext)+"%20"+ae(url)+"\" target='_blank'><div class='minibubble' style='font-size:0.8em;margin:5px;text-align:center;background:rgb(64,138,126);color:#ffffff;'><div style='font-size:0.9;'>WhatsApp</div></div></a></div>"; buttons=""+buttons+"<div style='width:33.33%;display:inline-block;'><a href=\"https://www.linkedin.com/sharing/share-offsite/?url="+ae(url)+"\" target='_blank'><div class='minibubble' style='font-size:0.8em;margin:5px;text-align:center;background:rgb(45,100,188);color:#ffffff;'><div style='font-size:0.9;'>Linkedin</div></div></a></div>"; buttons=""+buttons+"<div style='width:33.33%;display:inline-block;'><a href=\"https://t.me/share?text="+ae(linktext)+"&url="+ae(url)+"\" target='_blank'><div class='minibubble' style='font-size:0.8em;margin:5px;text-align:center;background:rgb(65,127,198);color:#ffffff;'><div style='font-size:0.9;'>Telegram</div></div></a></div>"; buttons=""+buttons+"<div style='width:33.33%;display:inline-block;'><a href=\"https://www.tumblr.com/widgets/share/tool/preview?canonicalUrl="+ae(url)+"&content="+ae(url)+"&posttype=link&caption="+ae(linktext)+"\" target='_blank'><div class='minibubble' style='font-size:0.8em;margin:5px;text-align:center;background:rgb(0,25,53);color:#ffffff;'><div style='font-size:0.9;'>Tumblr</div></div></a></div>"; buttons=""+buttons+"<div style='width:33.33%;display:inline-block;'><a href=\"mailto:?to=&body="+ae(linktext)+"%20"+ae(url)+"&subject="+ae("Take a look at this on Hey.Café")+"\" target='_blank'><div class='minibubble' style='font-size:0.8em;margin:5px;text-align:center;background:rgb(195,85,70);color:#ffffff;'><div style='font-size:0.9;'>Email</div></div></a></div>"; buttons=""+buttons+"<div style='width:33.33%;display:inline-block;'><a href=\"sms:?body="+ae(linktext)+"%20"+ae(url)+"\" target='_blank'><div class='minibubble' style='font-size:0.8em;margin:5px;text-align:center;background:rgb(94,198,80);color:#000000;'><div style='font-size:0.9;'>SMS</div></div></a></div>"; return buttons;}
function fu_tmp(container,username){ fu_npw("https://"+s_hostname+"/get_account_info?query="+username+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp(container); fu_pco(container,"<a href='/@"+response["response_data"]["alias"]+"' "+fu_cnv(response["response_data"])+"><img source='"+response["response_data"]["avatar"]+"' class='avatar optimizer_img' alt='Avatar for "+response["response_data"]["name"]+"' style='display: inline-block;max-width: 16px !important;max-height: 16px !important;margin-bottom: -2px;'> "+fu_cpd(response["response_data"]["name"])+"</a>");}else{ fu_mxp(container); fu_pco(container,"<a class='' href='/@"+username+"'>@"+username+"</a>");}},false,true);} function fu_lyi(container,username){ fu_npw("https://"+s_hostname+"/get_cafe_info?query="+username+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp(container); fu_pco(container,"<a href='/!"+response["response_data"]["alias"]+"' "+fu_mwn(response["response_data"])+"><img source='"+response["response_data"]["avatar"]+"' class='avatar optimizer_img' alt='Avatar for café "+response["response_data"]["name"]+"' style='display: inline-block;max-width: 16px;max-height: 16px;margin-bottom: -2px;'> "+response["response_data"]["name"]+"</a>");}else{ fu_mxp(container); fu_pco(container,"<a href='/!"+username+"'>!"+username+"</a>");}},false,true);} function fu_zfg(container,text){ fu_npw("https://"+s_hostname+"/get_system_emoji_lookup?query="+text+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["emoji"]!=""){ fu_mxp(container); fu_pco(container,fu_cpd(response["response_data"]["emoji"]));}else{ fu_mxp(container); fu_pco(container,":"+text+":");}}else{ fu_mxp(container); fu_pco(container,":"+text+":");}},false,true);} function fu_cnv(data){ return "data-title=\"<img source='"+data["avatar"]+"' class='avatar optimizer_img' style='float:left;margin-right:10px;max-width:40px;'><div style='margin-bottom:10px;font-size:1.2em;'><strong>"+data["name"]+"</strong><BR><text>&#64;</text>"+data["alias"]+"</div>"+data["bio"]+"\"";} function fu_mwn(data){ return "data-title=\"<img source='"+data["avatar"]+"' class='avatar optimizer_img' style='float:left;margin-right:10px;max-width:40px;'><div style='margin-bottom:10px;font-size:1.2em;'><strong>"+data["name"]+"</strong><BR><text>&#33;</text>"+data["alias"]+"</div>"+data["bio"]+"\"";} function fu_xjg(element,url,light){ var meta_allowed=true; var render_inline_type=false; if (url.includes("/twitter.com/") || url.includes("/pic.twitter.com/") || url.includes("/t.co/")){ meta_allowed=false;} if (url.endsWith(".jpeg") || url.endsWith(".jpg") || url.endsWith(".png") || url.endsWith(".gif") || url.endsWith(".webp")){ render_inline_type="image"; meta_allowed=false;} if (url.endsWith(".mp4")){ render_inline_type="video"; meta_allowed=false;} if (render_inline_type=="image"){ fu_mxp(element); fu_pco(element,"<div class='media' style='display: inline-block;width: auto;max-width: 100%;'><a href=\"javascript:fu_ikg('"+url+"','image');\"><img style='max-width: 100%;max-height: 400px;height: auto;width: auto;' source='"+url+"' class='optimizer_img' alt='External linked image'></a></div>");} if (render_inline_type=="video"){ fu_mxp(element); fu_pco(element,"<div><a href=\""+url+"\" target='_blank' style='line-break: normal;'>"+url+"</a></div>");} if (meta_allowed==true){ fu_mxp(element); if (light==false){ fu_pco(element,"<div class='embed'><div class='loading'></div></div>");} if (aa(element)){ var randhostname=fu_rbw(); fu_npw("https://"+randhostname+"/get_bot_website_meta?query="+fu_csj(url)+"",function(result){ var response = fu_hdg(result); if (response["fail"]==undefined){ if (response["system_api_error"]==false){ fu_lmv(element,url,response["response_data"],light);}}else{ fu_mxp(element); setTimeout(function(){ fu_xjg(element,url);}, 3000);}},false,true);}} } function fu_lmv(element,url,data,light){ if (aa(element)){ fu_mxp(element); var trueurl=data["url"]; var view="preview"; var preview_noinfo=false; var org_description=data["description"]; var org_title=fu_cpd(data["title"]); if (url.includes("/t.co/")){ url=trueurl;}
url=url.replace("http://", "https://"); if (url.includes("twitch.tv")){ view="twitch";} if (url.includes("twitch.tv") && url.includes("/videos/")){ view="twitchvid";} if (url.includes("youtube.com") || url.includes("youtu.be")){ if (url.includes("/watch?") || url.includes("live/") || url.includes("embed/") || url.includes("youtu.be/")){ view="youtubevideo";}} if (url.includes("music.apple.com")){ if (url.includes("/album/")){ view="applemusic_album";}} if (url.includes("music.apple.com")){ if (url.includes("/album/")){ if (org_description.includes("/Song/")){ view="applemusic_song";}}} if (url.includes("music.apple.com")){ if (url.includes("/album/")){ if (url.includes("/\?i\=/")){ view="applemusic_song";}}} if (url.includes("music.apple.com")){ if (url.includes("/station/")){ view="applemusic_station";}} if (data["title"]!=undefined){ if (data["title"]=="false"){ if (data["description"]=="false"){ preview_noinfo=true;}} var url_preview_text=data["url"]; url_preview_text=url_preview_text.replace("https://", ""); url_preview_text=url_preview_text.replace("http://", ""); url_preview_text=url_preview_text.replace("www.", ""); if (data["title"]=="false"){ data["title"]="No title found...";}else{ data["title"]=fu_aic(Array.from(data["title"]).slice(0, 110).join('')); if (data["title"].length>=108){ data["title"]=""+data["title"]+"..." }} if (data["description"]=="false"){ data["description"]="No description...";}else{ data["description"]=fu_aic(Array.from(data["description"]).slice(0, 220).join('')); if (data["description"].length>=218){ data["description"]=""+data["description"]+"..." }}
data["title"]=fu_cpd(data["title"]); data["description"]=fu_dmf(data["description"]); data["description"]=fu_cpd(data["description"]); var image=""; if (data["image"]!="false"){ if (data["image"].includes("http")==false){ if (data["image"].includes("//")==false){ var hostname=fu_amb(url); if (data["image"].charAt(0)=="/"){ data["image"]="https://"+hostname+""+data["image"]+"";}else{ data["image"]="https://"+hostname+"/"+data["image"]+"";}} }} if (data["image"]!="false"){ image="<img source='"+data["image"]+"' class='optimizer_img' alt='Preview image provided by website'>";} if (light==true){ view="light";} if (view=="light"){ fu_pco(element,"<a href='"+url+"' tabindex=\"0\" target='_blank' rel='noreferrer' data-title='"+url+"'>"+data["title"]+"</a>");} if (view=="internal"){ fu_pco(element,"<div style='margin-top: 10px;margin-bottom:10px;'><div class='window'><a href='"+url+"' tabindex=\"0\" target='_blank' rel='noreferrer'><strong>"+data["title"]+"</strong></a><p>"+data["description"]+"</p><div style='font-weight: 500;font-size: 0.8em;overflow:hidden; white-space:nowrap;text-overflow: ellipsis;'>"+url_preview_text+"</div></div></div>");} if (view=="preview"){ if (preview_noinfo==false){ if (image!=""){ image="<div class='preview'>"+image+"</div>";}
fu_pco(element,"<div class='embed' tabindex=\"0\" onclick=\"javascript:fu_wrg('"+trueurl+"');\">"+image+"<strong style='font-size: 1.2em;'>"+data["title"]+"</strong><p>"+data["description"]+"</p><div style='font-weight: 500;font-size: 0.8em;overflow:hidden; white-space:nowrap;text-overflow: ellipsis;'><a href='"+trueurl+"' target='_blank' rel='noreferrer'>"+url_preview_text+"</a></div></div>");}else{ fu_pco(element,"<p><a href='"+url+"' tabindex=\"0\" target='_blank' rel='noreferrer'>"+url_preview_text+"</a></p>");}} if (view=="youtubevideo"){ var foundid =url.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/); var videoid=(foundid&&foundid[7].length==11)? foundid[7] : false; if (videoid==false){ var foundidtwo=url.match(/^.*youtu.be\/([^#&?]*).*/); var videoid=(foundidtwo&&foundidtwo[1].length==11)? foundidtwo[1] : false;} if (videoid==false){ var foundidtwo=url.match(/^.*youtube\.com\/live\/([^#&?]*).*/); var videoid=(foundidtwo&&foundidtwo[1].length==11)? foundidtwo[1] : false;} if (videoid!=false){ var playid="mediaplay_"+fu_hmk(30)+""; generated=true; fu_pco(element,"<div class='loading'></div>"); var randhostname=fu_rbw(); fu_npw("https://"+randhostname+"/get_bot_youtube_video_meta?query="+fu_csj(videoid)+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["title"]!="false"){ var emb_html=fu_csj("<div class='aspectcase sixteenbynine'><div class='content'><iframe allow=\"autoplay *; encrypted-media *; fullscreen *\" src=\"https://www.youtube.com/embed/"+videoid+"?autoplay=1\"></iframe></div></div>"); fu_mxp(element); fu_pco(element,"<div class='embed youtube'><div id='"+playid+"'><div class='media' style='position: relative;'><div class=\"aspectcase sixteenbynine\"><div class=\"content\"><a title='Play Youtube video' href=\"javascript:fu_jog('"+playid+"','external','Youtube','"+emb_html+"');\" tabindex=\"0\"><div class='playbuttoncase'><span class='playbutton'></span></div><div class='cover optimizer_bg content' source='https://img.youtube.com/vi/"+videoid+"/maxresdefault.jpg'></div></a></div></div></div></div><div style='margin-top:10px;' id='"+element+"_yt_userdata'><a href='"+url+"' target='_blank' rel='noreferrer'><strong style='font-size: 1.1em;'>"+response["response_data"]["title"]+"</strong></a></div></div>"); if (response["response_data"]["author_url"]!="false"){ fu_npw("https://"+s_hostname+"/get_bot_website_meta?query="+fu_csj(response["response_data"]["author_url"])+"",function(result){ var author = fu_hdg(result); if (author["system_api_error"]==false){ fu_mxp(""+element+"_yt_userdata"); fu_pco(""+element+"_yt_userdata","<div style='overflow:hidden;'><div style='display:inline-block;float:left;margin-right:10px;width:50px;padding-right: 10px;'><a href='"+response["response_data"]["author_url"]+"' target='_blank' rel='noreferrer'><img source='"+author["response_data"]["image"]+"' class='optimizer_img media' style='border-radius:100%;width:60px;height:60px;'></a></div><a href='"+url+"' target='_blank' rel='noreferrer'><strong style='font-size: 1.1em;'>"+response["response_data"]["title"]+"</strong></a><div style='margin-top:5px;'>"+response["response_data"]["author"]+": "+data["description"]+"</div></div>");}},false,true);}}else{ fu_mxp(element); var emb_html=fu_csj("<div class='aspectcase sixteenbynine'><div class='content'><iframe allow=\"autoplay *; encrypted-media *; fullscreen *\" src=\"https://www.youtube.com/embed/"+videoid+"?autoplay=1\"></iframe></div></div>"); fu_pco(element,"<div class='embed youtube'><div id='"+playid+"'><div class='media' style='position: relative;'><div class=\"aspectcase sixteenbynine\"><div class=\"content\"><a title='Play Youtube video' tabindex=\"0\" href=\"javascript:fu_jog('"+playid+"','external','Youtube','"+emb_html+"');\"><div class='playbuttoncase'><span class='playbutton'></span></div><div class='cover optimizer_bg content' source='https://img.youtube.com/vi/"+videoid+"/maxresdefault.jpg'></div></a></div></div></div></div><div style='margin-top:10px;' id='"+element+"_yt_userdata'></div></div>");}} },false,true);}} if (view=="applemusic_song"){ data["image"]=data["image"].replace("1200x1200bf", "1200x630wp"); data["image"]=data["image"].replace("-60.jpg", "-100.jpg"); var playid="mediaplay_"+fu_hmk(30)+""; generated=true; embedurl=url; embedurl=embedurl.replace("www.", ""); embedurl=embedurl.replace("embed.", ""); embedurl=embedurl.replace("http://", ""); embedurl=embedurl.replace("https://", ""); var emb_html=fu_csj('<iframe allow="autoplay *; encrypted-media *; fullscreen *" frameborder="0" height="150" style="width:100%;height: 150px;background:transparent;" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation" src="https://embed.'+embedurl+'"></iframe>'); fu_pco(element,"<div class='embed applemusic'><div id='"+playid+"'><div class='media' style='position: relative;'><a title='Play song from Apple Music' href=\"javascript:fu_jog('"+playid+"','external','Apple Music','"+emb_html+"');\"><div class='playbuttoncase'><span class='playbutton'></span></div><img source='"+data["image"]+"' src='"+s_blank_image+"' class='optimizer_img' alt='Preview image for song on Apple Music'></a></div></div><div style='margin-top:10px;'><a href='"+url+"' target='_blank' rel='noreferrer'><strong style='font-size: 1.1em;'>"+data["title"]+"</strong></a><div style='margin-top:5px;'>"+data["description"]+"</div></div></div>");} if (view=="applemusic_album"){ data["image"]=data["image"].replace("1200x1200bf", "1200x630wp"); data["image"]=data["image"].replace("-60.jpg", "-100.jpg"); var playid="mediaplay_"+fu_hmk(30)+""; generated=true; embedurl=url; embedurl=embedurl.replace("www.", ""); embedurl=embedurl.replace("embed.", ""); embedurl=embedurl.replace("http://", ""); embedurl=embedurl.replace("https://", ""); var emb_html=fu_csj('<iframe allow="autoplay *; encrypted-media *; fullscreen *" frameborder="0" height="450" style="width:100%;height: 450px;background:transparent;" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation" src="https://embed.'+embedurl+'"></iframe>'); fu_pco(element,"<div class='embed applemusic'><div id='"+playid+"'><div class='media' style='position: relative;'><a title='Play album from Apple Music' href=\"javascript:fu_jog('"+playid+"','external','Apple Music','"+emb_html+"');\"><div class='playbuttoncase'><span class='playbutton'></span></div><img source='"+data["image"]+"' src='"+s_blank_image+"' class='optimizer_img' alt='Preview image for song on Apple Music'></a></div></div><div style='margin-top:10px;'><a href='"+url+"' target='_blank' rel='noreferrer'><strong style='font-size: 1.1em;'>"+data["title"]+"</strong></a><div style='margin-top:5px;'>"+data["description"]+"</div></div></div>");} if (view=="applemusic_station"){ data["image"]=data["image"].replace("-60.jpg", "-100.jpg"); var playid="mediaplay_"+fu_hmk(30)+""; generated=true; embedurl=url; embedurl=embedurl.replace("www.", ""); embedurl=embedurl.replace("embed.", ""); embedurl=embedurl.replace("http://", ""); embedurl=embedurl.replace("https://", ""); var emb_html=fu_csj('<iframe allow="autoplay *; encrypted-media *; fullscreen *" frameborder="0" height="450" style="width:100%;height: 450px;background:transparent;" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation" src="https://embed.'+embedurl+'"></iframe>'); fu_pco(element,"<div class='embed applemusic'><div id='"+playid+"'><div class='media' style='position: relative;'><a title='Play station from Apple Music' href=\"javascript:fu_jog('"+playid+"','external','Apple Music','"+emb_html+"');\"><div class='playbuttoncase'><span class='playbutton'></span></div><img source='"+data["image"]+"' src='"+s_blank_image+"' class='optimizer_img' alt='Preview image for song on Apple Music'></a></div></div><div style='margin-top:10px;'><a href='"+url+"' target='_blank' rel='noreferrer'><strong style='font-size: 1.1em;'>"+data["title"]+"</strong></a><div style='margin-top:5px;'>"+data["description"]+"</div></div></div>");} if (view=="twitch"){ if (image!=""){ image="<div class='preview'>"+image+"</div>";}
fu_pco(element,"<div class='embed twitch'>"+image+"<a href='"+url+"' target='_blank' rel='noreferrer'><strong>"+data["title"]+"</strong></a><p>"+data["description"]+"</p><div style='font-weight: 500;font-size: 0.8em;overflow:hidden; white-space:nowrap;text-overflow: ellipsis;'><a href='"+trueurl+"' target='_blank' rel='noreferrer'>"+url_preview_text+"</a></div></div>");} if (view=="twitchvid"){ var playid="mediaplay_"+fu_hmk(30)+""; var foundid = url.match(/(\/videos\/)([^&\n?#\/]+)/); var videoid=foundid[2]; generated=true; var emb_html=fu_csj("<div class='aspectcase sixteenbynine'><div class='content'><iframe allow=\"autoplay *; encrypted-media *; fullscreen *\" src=\"https://player.twitch.tv/?video="+videoid+"&parent="+s_domain+"\"></iframe></div></div>"); fu_pco(element,"<div class='embed twitch'><div id='"+playid+"'><div class='media' style='position: relative;'><div class=\"aspectcase sixteenbynine\"><div class=\"content\"><a title='Play media from Twitch' href=\"javascript:fu_jog('"+playid+"','external','Twitch','"+emb_html+"');\"><div class='playbuttoncase'><span class='playbutton'></span></div><img source='"+data["image"]+"' src='"+s_blank_image+"' class='optimizer_img' alt='Preview image for Twitch'></a></div></div></div></div><div style='margin-top:10px;'><a href='"+url+"' target='_blank' rel='noreferrer'><strong style='font-size: 1.1em;'>"+data["title"]+"</strong></a><div style='margin-top:5px;'>"+data["description"]+"</div></div></div>");}} } if (aa(element)!=undefined){ if (aa(element).innerHTML==""){ fu_pco(element,"<p><a href='"+url+"' target='_blank' rel='noreferrer'>"+url_preview_text+"</a></p>");}} if (url.includes("twitch.tv") && url.includes("/videos/")){ if (url.includes("delayupdate=true")==false){ if (data["title"]=="Twitch"){ setTimeout(function(){ if (aa(element)){ if (url.includes("?")){ fu_xjg(element,""+url+"&delayupdate=true");}else{ fu_xjg(element,""+url+"?delayupdate=true");}} }, 1500);}} }} function fu_ocf(element,source,target,text,replace){ if (aa(element)){ var postdata={}; postdata["text"]=ae(fu_csj(fu_klh(text))); postdata["target"]=target; postdata["source"]=source; postdata=fu_ere(postdata); var hashsource=""+target+"_"+source+"_"+text+""; var hash=hashsource.hashCode(); fu_mxp(element); fu_pco(element,"<div style='margin-top:10px;margin-bottom:10px;'><div class='translatebubble'>Translating...<div style='margin-top:10px;font-size:0.7em;opacity: 0.6;'>From "+source+" to "+target+" (beta)</div></div></div></div>"); if (fu_mgo('translate_'+hash+'')==null){ fu_opn("https://"+s_hostname+"/get_bot_language_translate",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_hqt('translate_'+hash+'',response["response_data"]); fu_rqt(element,response["response_data"]);}else{ fu_mxp(element); fu_pco(element,"<div style='margin-top:10px;margin-bottom:10px;'><div class='translatebubble'>Unable to translate...<div style='margin-top:10px;font-size:0.7em;opacity: 0.6;'>Translated from "+source+" to "+target+" (beta)</div></div></div></div>");}
fu_nxk();},false);}else{ var response=fu_mgo('translate_'+hash+''); fu_rqt(element,response);}} } function fu_rqt(element,response){ fu_mxp(element); fu_pco(element,"<div style='margin-top:10px;margin-bottom:10px;'><div class='translatebubble'>"+response["text"]+"<div style='margin-top:10px;font-size:0.7em;opacity: 0.6;'>Translated from "+response["source"]+" to "+response["target"]+" (beta)</div></div></div>");}
function fu_wln(content,container,spoiler){ var spoilercss=""; var spoilermessage=false; if (spoiler==undefined){ spoiler=false;} if (spoiler==true){ spoilercss="spoiler";} var ammount=Object.keys(content).length; var imagecount=0; var onimage=0; var filecount=0; var onfile=0; fu_qeq(content, function(id){ var data=content[""+id+""]; if (data["type"]=="file"){ filecount=filecount+1;} if (data["type"]=="image"){ imagecount=imagecount+1;}}); fu_qeq(content, function(id){ var data=content[""+id+""]; var attachment_id=id; var alttext="false"; var alttext_image="No alt text provided"; if (data["alt"]!="false"){ alttext=data["alt"]; alttext_image=data["alt"];} if (data["type"]=="file"){ onfile=onfile+1; var preview=""; var previewtype="file"; if (data["preview"]!=false){ preview="<div class='media' style='max-width:200px;margin: 0px;margin-bottom: 10px;'><img source='"+data["preview"]["file"]+"' class='optimizer_img "+spoilercss+"' alt='"+alttext_image+"' title='"+alttext_image+"'></div>";} if (data["name"].endsWith(".png")==true || data["name"].endsWith(".jpeg")==true || data["name"].endsWith(".jpg")==true || data["name"].endsWith(".gif")==true){ previewtype="image"; preview="<div class='media' style='max-width:200px;margin: 0px;margin-bottom: 10px;'><img source='"+data["file"]+"' class='optimizer_img "+spoilercss+"' alt='"+alttext_image+"' title='"+alttext_image+"'></div>";} if (data["name"].endsWith(".md")==true || data["name"].endsWith(".txt")==true){ previewtype="content";} if (data["mime"]=="application/octet-stream" || data["mime"].startsWith("video")==true){ if (data["preview"]!=false){ preview=""+data["preview"]["file"]+""; previewtype="video";}} if (preview!=""){ if (spoiler==true && spoilermessage==false){ spoilermessage=true; fu_pco(container,"<bubble class=\"alt1\" style='margin-bottom: 0px;padding: 15px;'>Media preview is hidden as it contains spoilers.</bubble>");}} if (previewtype=="image"){ fu_pco(container,"<div id='attachment_"+attachment_id+"'><div onclick=\"javascript:fu_xoy('"+data["file"]+"','"+data["name"]+"')\" class='attachent'>"+preview+""+data["name"]+"</div>");} if (previewtype=="file"){ fu_pco(container,"<div id='attachment_"+attachment_id+"'><div onclick=\"javascript:fu_xoy('"+data["file"]+"','"+data["name"]+"')\" class='attachent'>"+preview+""+data["name"]+"</div>");} if (previewtype=="content"){ fu_pco(container,"<div id='attachment_"+attachment_id+"'><div id='loading'></div></div>"); fu_ayu(""+data["file"]+"",function(result){ var contents = fu_mtb(result); var title=fu_atw(contents); var description=fu_lsr(contents); if (title==false){ title="No title for content";} if (description==false){ description="No description preview for content";}
fu_mxp("attachment_"+attachment_id+""); fu_pco("attachment_"+attachment_id+"","<div onclick=\"javascript:fu_urq('"+attachment_id+"','attachment_"+attachment_id+"','"+data["file"]+"')\" class='attachent'><div style='font-size: 1.2em;margin-bottom: 10px;font-weight: 600;'>"+title+"</div>"+description+"</div>");},10000,false);} if (previewtype=="video"){ var playid="mediaplay_"+fu_hmk(30)+""; var emb_html=fu_csj("<div class='aspectcase sixteenbynine'><div class='content'><video style=\"width: 100%;height: 100%;\" controls=\"\" autoplay=\"\" poster=\""+preview+"\" playsinline><source src=\""+data["file"]+"\">Your browser does not support the video tag.</video></div></div>"); fu_pco(container,"<div id='"+playid+"'><div class='media'><div class='media_backing optimizer_bg aspectcase sixteenbynine' source='"+preview+"' size='6'><div class='content'><a title='Play video' href=\"javascript:fu_jog('"+playid+"','internal','false','"+emb_html+"');\"><div class='playbuttoncase'><span class='playbutton'></span></div><img source='"+preview+"' src='"+s_blank_image+"' class='optimizer_img "+spoilercss+"' alt='"+alttext_image+"' title='"+alttext_image+"'></a></div></div></div></div>");}} if (data["type"]=="image"){ onimage=onimage+1; if (spoiler==true && spoilermessage==false){ spoilermessage=true; fu_pco(container,"<bubble class=\"alt1\" style='margin-bottom: 0px;padding: 15px;'>Media preview is hidden as it contains spoilers.</bubble>");} if (aa("file_"+data["name"]+"")){ fu_pco("file_"+data["name"]+"","<div class='media' style='display: inline-block;width: auto;max-width: 100%;'><a href=\"javascript:fu_ikg('"+data["file"]+"','image',true,'"+fu_csj(alttext)+"');\"><img style='max-width: 100%;max-height: 400px;height: auto;width: auto;' source='"+data["file"]+"' class='optimizer_img' alt='"+alttext_image+"' title='"+alttext_image+"'></a></div>");}else{ if (imagecount<=1){ fu_pco(container,"<div class='media' style='display: inline-block;width: auto;max-width: 100%;'><a href=\"javascript:fu_ikg('"+data["file"]+"','image',true,'"+fu_csj(alttext)+"');\"><img style='max-width: 100%;max-height: 400px;height: auto;width: auto;' source='"+data["file"]+"' class='optimizer_img' alt='"+alttext_image+"' title='"+alttext_image+"'></a></div>");}else{ if (onimage==1){ fu_pco(container,"<div id='"+container+"_photoblock' class='collage'></div>"); fu_pco(""+container+"_photoblock","<div class='media' style='display: inline-block;width: auto;margin-right:10px;'><a href=\"javascript:fu_ikg('"+data["file"]+"','image',true,'"+fu_csj(alttext)+"');\"><img style='max-height: 400px;height: auto;width: auto;' source='"+data["file"]+"' class='optimizer_img' alt='"+alttext_image+"' title='"+alttext_image+"'></a></div>");}else{ if (imagecount==onimage){ fu_pco(""+container+"_photoblock","<div class='media' style='display: inline-block;width: auto;'><a href=\"javascript:fu_ikg('"+data["file"]+"','image',true,'"+fu_csj(alttext)+"');\"><img style='max-height: 400px;height: auto;width: auto;' source='"+data["file"]+"' class='optimizer_img' alt='"+alttext_image+"' title='"+alttext_image+"'></a></div>");}else{ fu_pco(""+container+"_photoblock","<div class='media' style='display: inline-block;width: auto;margin-right:10px;'><a href=\"javascript:fu_ikg('"+data["file"]+"','image',true,'"+fu_csj(alttext)+"');\"><img style='max-height: 400px;height: auto;width: auto;' source='"+data["file"]+"' class='optimizer_img' alt='"+alttext_image+"' title='"+alttext_image+"'></a></div>");}} }} }});} function fu_urq(id,container,url){ fu_mxp(container); fu_pco(container,"<hr></hr><div><div class='content' id='attachment_content_full_"+id+"'><div id='loading'></div></div></bubble>"); fu_ayu(""+url+"",function(result){ var contents = fu_mtb(result); contents=fu_uiv(contents); contents=fu_idd(contents); contents=fu_ibd(contents); contents=fu_cpd(contents); contents=fu_esd(contents); contents=fu_ebi(contents); fu_mxp("attachment_content_full_"+id+""); fu_pco("attachment_content_full_"+id+"",""+contents+"");},10000,false);} function fu_xoy(url,name){ fu_pbr(); fu_pco("container_modl","<h1>Open attachment</h1>"); fu_pco("container_modl","<bubble class='alt1'><strong>Warning!!</strong> Not all attachments are checked to be safe, only open files from accounts you trust. Files may open in a new tab if the file type cannot be previewed here.</bubble>"); fu_pco("container_modl","<bubble onclick=\"javascript:fu_etc('"+url+"','"+name+"');\"><strong style='display: inline-block;margin-bottom: 10px;'>Yes open "+name+"</strong><BR>Will open file in a new tab or show on page</bubble>");} function fu_etc(url,name){ fu_pbr(); fu_pco("container_modl","<h1>Attachment "+name+"</h1>"); var viewtype="newtab"; if (name.endsWith(".mov")==true){ viewtype="video";} if (name.endsWith(".mp4")==true){ viewtype="video";} if (name.endsWith(".gif")==true){ viewtype="image";} if (name.endsWith(".png")==true){ viewtype="image";} if (name.endsWith(".jpeg")==true){ viewtype="image";} if (name.endsWith(".md")==true){ viewtype="content";} if (name.endsWith(".txt")==true){ viewtype="content";} if (viewtype=="newtab"){ window.open(url, '_blank').focus(); fu_jwg();} if (viewtype=="video"){ fu_ikg(url,'video',true);} if (viewtype=="image"){ fu_ikg(url,'image',true);} if (viewtype=="content"){ fu_ikg(url,'content',true);}} function fu_ypd(content,container,pinned){ var refresh=false; var refresh_both=false; if (pinned==undefined){ pinned=false;} if (aa("comment_"+content["id"]+"")!=null){ refresh=true;} var time=fu_agm(content["date_created"]); var timelocal=fu_sak(content["date_created"]); var contents=content["contents"]; var originalcontent=""; if (content["comment"]!="false"){ }
contents=fu_uiv(contents); contents=fu_idd(contents); contents=fu_ibd(contents); contents=fu_cpd(contents); contents=fu_esd(contents); contents=fu_ebi(contents); var didreaction=""; if (content["count_you_reactions"]!="0"){ didreaction=" important";} var reactions=""; if (content["count_reactions"]>=1){ if (s_app_stats=="true"){ reactions="&ensp;"+content["count_reactions"]+"";}} var badges=""; var namebadge=""; if (content["info_pinned"]!="0"){ badges=""+badges+"<div class='badge pin'>"+fu_gmq("pin-angle-fill")+"</div>";} if (content["account"]["verified"]=="1"){ namebadge=" <span class='verified_badge'>"+fu_gmq("patch-check-fill")+"</span>";}else{ if (content["account"]["pro"]=="1"){ }} if (content["cafe"]!=false){ if (content["cafe"]["you_moderator"]==true && content["cafe"]["you_admin"]==false){ badges=""+badges+"<div class='badge moderator'>Mod</div>";} if (content["cafe"]["you_admin"]==true){ badges=""+badges+"<div class='badge admin'>Admin</div>";}} if (content["info_hidden_global"]=="0" && content["info_hidden_cafe"]=="0"){ var headercontrols=""; var actioncontrols=""; var translatecontrols=""; var reaction_icon=""+fu_gmq("hand-thumbs-up")+""; if (content["you_last_reaction"]!=false){ reaction_icon=fu_tek(content["you_last_reaction"]);} if (su_id!=null){ if (su_id==content["account"]["id"]){ headercontrols="<div class='action' onclick=\"javascript:fu_hde('"+content["conversation"]+"','"+content["id"]+"');\">Edit</div>";}else{ headercontrols="<div class='action' onclick=\"javascript:fu_hde('"+content["conversation"]+"','"+content["id"]+"');\">&#8943;</div>";}} if (su_id!=null){ actioncontrols="<div tabindex='0' class='action' onclick=\"javascript:fu_gbo('"+content["conversation"]+"','"+content["id"]+"');\">"+fu_gmq("chat")+"&ensp;Reply</div>&ensp;<div tabindex='0' class='action' onclick=\"javascript:fu_nhv('','"+ae(fu_csj("https://hey.cafe/conversation/"+content["conversation"]+":"+content["id"]+""))+"');\" data-title='Share'>"+fu_gmq("repeat")+"</div>&ensp;<div tabindex='0' class='action"+didreaction+"' onclick=\"javascript:fu_tqk('"+content["conversation"]+"','"+content["id"]+"');\" data-title='React'>"+reaction_icon+""+reactions+"</div>";} if (content["info_language"]!="check"){ if (content["info_language"]!="unk"){ if (content["info_language"]!=su_language){ if (su_language!=null){ translatecontrols="<action type='inview_load_translate' target='"+su_language+"' source='"+content["info_language"]+"' container='comment_translate_"+content["id"]+"' text='"+fu_csj(content["contents"])+"'></action><div class='loading'></div>";}} }} setTimeout(function(){ if (content["attachments"]!=false){ if (content["contents"].includes("{media_spoiler}")){ fu_wln(content["attachments"],"comment_attachments_"+content["id"]+"",true);}else{ fu_wln(content["attachments"],"comment_attachments_"+content["id"]+"",false);}} }, 200); if (content["reactions"]!=false){ setTimeout(function(){ if (s_width>=700){ fu_qeq(content["reactions"].slice(0, 5), function(id){ fu_nwz(content["reactions"][""+id+""],"comment_reactions_mini_"+content["id"]+"","mini");});}}, 200);} var structure="<div class='header'><a href=\"javascript:fu_xlg('"+content["account"]["alias"]+"');\"><img source=\""+content["account"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for "+content["account"]["name"]+"' "+fu_cnv(content["account"])+"></a>"+originalcontent+""+headercontrols+"<strong>"+fu_cpd(content["account"]["name"])+""+namebadge+"</text></strong><div class='meta'><span class='timestamp' onclick=\"javascript:fu_wrg('/conversation/"+content["conversation"]+":"+content["id"]+"')\"><timestamp time='"+content["date_created"]+"' data-title='"+timelocal+"'>"+time+"</timestamp></span>"+badges+"</div></div><div class='content_case'><div class='content' id='comment_content_"+content["id"]+"'>"+contents+"</div><div class='translate' id='comment_translate_"+content["id"]+"'>"+translatecontrols+"</div><div class='attachments' id='comment_attachments_"+content["id"]+"'></div></div><div class='footer'><div class='footer_mini' id='comment_footer_mini_"+content["id"]+"'></div>"+actioncontrols+"<div class='minireactions' id='comment_reactions_mini_"+content["id"]+"'></div></div>";}else{ var structure="<div class='header'><img source=\""+content["account"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for ----'><div class='action' onclick=\"javascript:fu_hde('"+content["conversation"]+"','"+content["id"]+"');\">&#8943;</div></div><strong>----</strong><span class='meta'> · <span onclick=\"javascript:fu_wrg('/conversation/"+content["conversation"]+":"+content["id"]+"')\">"+time+"</span></span><p>This comment has been hidden by moderators</p>";} var renderdone=false; if (content["comment"]!="false"){ if (refresh==false){ renderdone=true; setTimeout(function(){ fu_mym(container,"comment_"+content["id"]+"","comment_replys_"+content["comment"]+"",fu_csj("<div class='comment' id='comment_"+content["id"]+"'>"+structure+"</div><div class='comment_reply_case' id='comment_replys_"+content["id"]+"'></div>"),0);}, 10);}} if (renderdone==false){ if (refresh==false){ fu_pco(container,"<div class='comment' id='comment_"+content["id"]+"'>"+structure+"</div><div class='comment_reply_case' id='comment_replys_"+content["id"]+"'></div>");}else{ fu_mxp("comment_"+content["id"]+""); fu_pco("comment_"+content["id"]+"",""+structure+""); if (aa("comment_"+content["id"]+"_pinned")!=null){ fu_mxp("comment_"+content["id"]+"_pinned"); fu_pco("comment_"+content["id"]+"_pinned",""+structure+"");}} }} function fu_mym(container,mycase,replycase,content,retry){ if (retry==undefined){ retry=1;}else{ retry=retry+1;} if (aa(mycase)==null){ if (aa(replycase)!=null){ fu_fic(replycase,fu_xla(content));}else{ if (retry<=15){ setTimeout("fu_mym('"+container+"','"+mycase+"','"+replycase+"','"+content+"',"+retry+");", 10);}else{ fu_pco(container,fu_xla(content));}} }} function fu_cfz(comment){ var refresh=false; if (aa("comment_"+comment+"")!=null){ refresh=true;}
fu_npw("https://"+s_hostname+"/get_comment_info?query="+comment+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_ypd(response["response_data"],"comment_"+comment+"");}else{ if (aa("comment_"+comment+"")!=null){ aa("comment_"+comment+"").remove();}} });} function fu_xpq(convo,id,retry){ if (retry==undefined){ retry=1;}else{ retry=retry+1;} var clean = ac("highlight"); for (var i = 0; i < clean.length; i++){ clean.item(i).classList.remove("highlight");} if (aa("comment_"+id+"")){ aa("comment_"+id+"").classList.add("highlight"); var el = aa("comment_"+id+""); var bodyRect = document.body.getBoundingClientRect(); var elemRect = el.getBoundingClientRect(); var offset=elemRect.top - bodyRect.top; window.scroll({ top: (offset - 100), left: 0, behavior: 'smooth' });}else{ if (retry<=10){ setTimeout("fu_xpq('"+convo+"','"+id+"',"+retry+");", 200);}} } function fu_phq(conversation,count,comment){ fu_npw("https://"+s_hostname+"/get_conversation_comments?query="+conversation+"&count="+count+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ var firstcheckrender=true; var render_frame_id=fu_hmk(20); if (response["response_data"]["comments"]!=false){ var offset=count*3; fu_qeq(response["response_data"]["comments"], function(id){ offset=offset-3; if (firstcheckrender==true){ firstcheckrender=false; if (count>=5){ fu_fic("conversation_livecomments_"+conversation+"","<div id='checkup_item_canview'></div><action type=\"inview_item_checkup\" item_type=\"comments\" item_last=\""+id+"\" item_resource=\""+conversation+"\" item_resource_sub=\"false\" item_function=\"fu_phq('"+conversation+"','"+count+"','"+comment+"');\"></action>");} if (aa('conversation_comments_'+conversation+'_loaded')==undefined){ fu_mxp("conversation_comments_"+conversation+""); fu_pco("conversation_comments_"+conversation+"","<div id='conversation_comments_"+conversation+"_loaded'></div><div id='conversation_comments_render_"+render_frame_id+"'></div>");}else{ fu_fic("conversation_comments_"+conversation+"","<div id='conversation_comments_render_"+render_frame_id+"'></div>");}} if (aa('comment_'+id+'')==undefined){ if (response["response_data"]["comments"][""+id+""]["comment"]!="false"){ setTimeout(function(){ fu_ypd(response["response_data"]["comments"][""+id+""],"conversation_comments_render_"+render_frame_id+"");}, offset);}else{ fu_ypd(response["response_data"]["comments"][""+id+""],"conversation_comments_render_"+render_frame_id+"");}} if (comment==id){ if (aa("comment_"+comment+"")){ aa("comment_"+comment+"").classList.add("highlight");}}
fu_jsf(); setTimeout("fu_jsf();", 500);});}} });} function fu_pgp(container,conversation,comment,header){ if (header==undefined){ header=true;} if (fu_unj('generate_conversation_load_preview_comment_'+comment+'')==null){ fu_npw("https://"+s_hostname+"/get_comment_info?query="+comment+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_ojv('generate_conversation_load_preview_comment_'+comment+'',response["response_data"]); fu_wty(container,response["response_data"],header);}else{ fu_mxp(container); fu_pco(container,"<a href='https://hey.cafe/conversation/"+conversation+":"+comment+"' target='_blank' rel='noreferrer'>hey.cafe/conversation/"+conversation+":"+comment+"</a>");}});}else{ fu_wty(container,fu_unj('generate_conversation_load_preview_comment_'+comment+''),header);}} function fu_wty(container,content,header){ if (content["info_hidden_global"]=="0" && content["info_hidden_cafe"]=="0"){ var time=fu_agm(content["date_created"]); var timelocal=fu_sak(content["date_created"]); var contents=content["contents"]; contents=fu_uiv(contents); contents=fu_idd(contents); contents=fu_ibd(contents); contents=fu_cpd(contents); contents=fu_esd(contents); contents=fu_ebi(contents); var headermeta=""; fu_mxp(container); if (header==true){ fu_pco(container,"<div class=\"minibubble preview miniframe\" onclick=\"javascript:fu_wrg('/conversation/"+content["conversation"]+":"+content["id"]+"')\">"+headermeta+"<div class='header'><a href=\"javascript:fu_xlg('"+content["account"]["alias"]+"');\"><img source=\""+content["account"]["avatar"]+"\" class=\"avatar optimizer_img\" style='width:30px;height:30px;margin-left: 0px;' alt='Avatar for "+content["account"]["name"]+"' "+fu_cnv(content["account"])+"></a><div class='meta'><span class='timestamp' onclick=\"javascript:fu_wrg('/conversation/"+content["conversation"]+":"+content["id"]+"')\"><timestamp time='"+content["date_created"]+"' data-title='"+timelocal+"'>"+time+"</timestamp></span></div><strong>"+fu_cpd(content["account"]["name"])+"</strong></div><div class='content'>"+contents+"<div id='"+container+"_attachments'></div></div></div>");}else{ fu_pco(container,"<div class=\"minibubble preview miniframe\"><div class='content'>"+contents+"<div id='"+container+"_attachments'></div></div></div>");} if (content["attachments"]!=false){ fu_wln(content["attachments"],""+container+"_attachments");}}else{ fu_mxp(container); fu_pco(container,"Sorry this content has been hidden...");}} function fu_zyb(conversation){ fu_npw("https://"+s_hostname+"/get_conversation_comments?query="+conversation+"&pinned=true",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("conversation_comments_pinned_"+conversation+""); if (response["response_data"]["comments"]!=false){ fu_qeq(response["response_data"]["comments"], function(id){ fu_ypd(response["response_data"]["comments"][""+id+""],"conversation_comments_pinned_"+conversation+"",true);});}} });} var generateConversation_full_keepupdated=false; function fu_ndm(content,container,mode,comment){ var refresh=false; if (aa("conversation_"+content["id"]+"")!=null){ refresh=true;} if (mode==undefined){ mode="normal";} if (comment==undefined){ comment=null;} var time=fu_agm(content["date_created"]); var timelocal=fu_sak(content["date_created"]); var contents=content["contents"]; contents=fu_uiv(contents); contents=fu_idd(contents); contents=fu_ibd(contents); contents=fu_cpd(contents); contents=fu_esd(contents); contents=fu_ebi(contents); var headermeta=""; if (content["cafe"]!=false){ if (s_width>=700){ headermeta="<div tabindex='0' class='cafeheader' onclick=\"javascript:fu_wrg('/!"+content["cafe"]["alias"]+"');\"><img source=\""+content["cafe"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for café "+content["cafe"]["name"]+"'> Posted to <strong>"+fu_cpd(content["cafe"]["name"])+"</strong></div>";}else{ headermeta="<div tabindex='0' class='cafeheader' onclick=\"javascript:fu_wrg('/!"+content["cafe"]["alias"]+"');\"><img source=\""+content["cafe"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for café "+content["cafe"]["name"]+"'> <strong>"+fu_cpd(content["cafe"]["name"])+"</strong></div>";}} var didreaction=""; if (content["count_you_reactions"]!="0"){ didreaction=" important";} var hideiflocked=""; if (content["info_locked"]!="0"){ hideiflocked=" style='display:none;'"; headermeta=""+headermeta+"<div class='cafeheader'>This conversation has been "+fu_cpd("🔒")+" locked and can no longer be commented on</div>";} var comments=""; if (content["count_comments"]>=1){ if (s_app_stats=="true"){ comments="&ensp;"+content["count_comments"]+"";}} var reactions=""; if (content["count_reactions"]>=1){ if (s_app_stats=="true"){ reactions="&ensp;"+content["count_reactions"]+"";}} var badges=""; var namebadge=""; var tagdata=""; if (content["info_pinned"]!="0"){ badges=""+badges+"<div class='badge pin'>"+fu_gmq("pin-angle-fill")+"</div>";} if (content["account"]["verified"]=="1"){ namebadge=" <span class='verified_badge'>"+fu_gmq("patch-check-fill")+"</span>";}else{ if (content["account"]["pro"]=="1"){ }} if (content["cafe"]!=false){ if (content["cafe"]["you_moderator"]==true && content["cafe"]["you_admin"]==false){ badges=""+badges+"<div class='badge moderator'>Mod</div>";} if (content["cafe"]["you_admin"]==true){ badges=""+badges+"<div class='badge admin'>Admin</div>";}} if (content["tag"]!=false){ if (content["cafe"]!=false){ tagdata="<div class='tagged' onclick=\"javascript:fu_wrg('/!"+content["cafe"]["alias"]+"/tag/"+content["tag"]["id"]+"')\">"+fu_cpd(content["tag"]["emoji"])+" "+fu_cpd(content["tag"]["name"])+"</div>";}else{ tagdata="<div class='tagged' onclick=\"javascript:fu_wrg('/@"+content["account"]["alias"]+"/tag/"+content["tag"]["id"]+"')\">"+fu_cpd(content["tag"]["emoji"])+" "+fu_cpd(content["tag"]["name"])+"</div>";}} if (content["info_hidden_global"]=="0" && content["info_hidden_cafe"]=="0"){ var headercontrols=""; var actioncontrols=""; var reaction_icon=""+fu_gmq("hand-thumbs-up")+""; if (content["you_last_reaction"]!=false){ reaction_icon=fu_tek(content["you_last_reaction"]);} if (su_id!=null){ if (su_id==content["account"]["id"]){ headercontrols="<div class='action' onclick=\"javascript:fu_drd('"+content["id"]+"');\">Edit</div>";}else{ headercontrols="<div class='action' onclick=\"javascript:fu_drd('"+content["id"]+"');\">&#8943;</div>";}} if (su_id==null){ actioncontrols="<div tabindex='0' class='action' onclick=\"javascript:fu_qvh('conversation','"+content["id"]+"');\" data-title='Share External'>"+fu_gmq("box-arrow-up")+"</div>";}else{ actioncontrols="<div tabindex='0' class='action'"+hideiflocked+" onclick=\"javascript:fu_gbo('"+content["id"]+"',false);\" data-title='Comment'>"+fu_gmq("chat")+""+comments+"</div>&ensp;<div tabindex='0' class='action' onclick=\"javascript:fu_nhv('','"+ae(fu_csj("https://hey.cafe/conversation/"+content["id"]+""))+"');\" data-title='Share'>"+fu_gmq("repeat")+"</div>&ensp;<div tabindex='0' class='action"+didreaction+"'"+hideiflocked+" onclick=\"javascript:fu_hpa('"+content["id"]+"');\" data-title='React'>"+reaction_icon+""+reactions+"</div>&ensp;<div tabindex='0' class='action' onclick=\"javascript:fu_qvh('conversation','"+content["id"]+"');\" data-title='Share External'>"+fu_gmq("box-arrow-up")+"</div>";} if (mode!="clean"){ var structure=""+headermeta+"<div class='header'>"+headercontrols+""+tagdata+"<a href=\"javascript:fu_xlg('"+content["account"]["alias"]+"');\"><img source=\""+content["account"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for "+content["account"]["name"]+"' "+fu_cnv(content["account"])+"></a><strong>"+fu_cpd(content["account"]["name"])+""+namebadge+"</text></strong><div class='meta'><span class='timestamp' tabindex='0' onclick=\"javascript:fu_wrg('/conversation/"+content["id"]+"')\"><timestamp time='"+content["date_created"]+"' data-title='"+timelocal+"'>"+time+"</timestamp></span>"+badges+"</div></div><div class='content_case'><div class='content' id='conversation_content_"+content["id"]+"'>"+contents+"</div><div class='translate' id='conversation_translate_"+content["id"]+"'></div><div class='attachments' id='conversation_attachments_"+content["id"]+"'></div></div><div class='footer'><div class='footer_mini' id='conversation_footer_mini_"+content["id"]+"'></div>"+actioncontrols+"<div class='minireactions' id='conversation_reactions_mini_"+content["id"]+"'></div></div><div class='reactions' id='conversation_reactions_"+content["id"]+"'></div><div id='conversation_livecomments_"+content["id"]+"'></div><div class='footer_comments' id='conversation_comments_pinned_"+content["id"]+"'></div><div class='footer_comments' id='conversation_comments_"+content["id"]+"'></div><div class='section_extra' id='conversation_extra_"+content["id"]+"'></div>";}else{ var structure=""+headermeta+"<div class='content'><div id='conversation_content_"+content["id"]+"'>"+contents+"</div><div id='conversation_translate_"+content["id"]+"'></div><div id='conversation_attachments_"+content["id"]+"'></div></div>"+tagdata+"<span class='timestamp' onclick=\"javascript:fu_wrg('/conversation/"+content["id"]+"')\"><timestamp time='"+content["date_created"]+"' data-title='"+timelocal+"'>"+time+"</timestamp></span><div class='footer'><div class='footer_mini' id='conversation_footer_mini_"+content["id"]+"'></div>"+actioncontrols+"</div><div class='section_extra' id='conversation_extra_"+content["id"]+"'></div>";} if (refresh==false){ fu_pco(container,"<bubble class='conversation "+mode+"' mode='"+mode+"' id='conversation_"+content["id"]+"'>"+structure+"</bubble>");}else{ fu_mxp("conversation_"+content["id"]+""); fu_pco("conversation_"+content["id"]+"",""+structure+"");} if (content["info_language"]!="check"){ if (content["info_language"]!="unk"){ if (content["info_language"]!=su_language){ if (su_language!=null){ fu_pco("conversation_translate_"+content["id"]+"","<action type='inview_load_translate' target='"+su_language+"' source='"+content["info_language"]+"' container='conversation_translate_"+content["id"]+"' text='"+fu_csj(content["contents"])+"'></action><div class='loading'></div>");}} }} if (content["attachments"]!=false){ if (content["contents"].includes("{media_spoiler}")){ fu_wln(content["attachments"],"conversation_attachments_"+content["id"]+"",true);}else{ fu_wln(content["attachments"],"conversation_attachments_"+content["id"]+"",false);}} if (content["reactions"]!=false){ if (s_width>=700){ fu_qeq(content["reactions"].slice(0, 5), function(id){ fu_nwz(content["reactions"][""+id+""],"conversation_reactions_mini_"+content["id"]+"","mini");});}} if (mode=="full"){ if (content["reactions"]!=false){ fu_pco("conversation_reactions_"+content["id"]+"","<hr></hr><div id='conversation_reactions_"+content["id"]+"_list'></div>"); fu_qeq(content["reactions"], function(id){ fu_nwz(content["reactions"][""+id+""],"conversation_reactions_"+content["id"]+"_list","full");});}} if (content["count_comments"]>=1){ if (mode!="clean"){ if (mode=="full"){ fu_pco("conversation_comments_pinned_"+content["id"]+"","<action type='inview_load_comments_pinned' conversation='"+content["id"]+"'></action><div class='loading'></div>");} var loadcount=2; if (mode=="full"){ loadcount=200;}
fu_pco("conversation_comments_"+content["id"]+"","<action type='inview_load_comments' conversation='"+content["id"]+"' count='"+loadcount+"' comment='"+comment+"'></action><div class='loading'></div>"); if (content["count_comments"]>=3){ if (loadcount<=2){ fu_pco("conversation_extra_"+content["id"]+"","<div class='footer' style='margin-top:15px;'><div class='action' onclick=\"fu_wrg('/conversation/"+content["id"]+"');\">View more comments</div></div>");}} if (comment!=null){ fu_xpq(content["id"],comment);}} }}else{ var message="<div class='header'><div class='action' onclick=\"javascript:fu_drd('"+content["id"]+"');\">&#8943;</div><img source=\""+content["account"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for ----'></a><h4>----</h4><div class='meta'><span>shared "+time+"</span></div></div><p>This conversation has been hidden by moderators.</p>"; if (refresh==false){ fu_pco(container,"<bubble class='conversation "+mode+"' id='conversation_"+content["id"]+"'>"+message+"</bubble>");}else{ fu_mxp("conversation_"+content["id"]+""); fu_pco("conversation_"+content["id"]+"",""+message+"");}} } function fu_bjt(conversation){ var refresh=false; var mode="normal"; if (aa("conversation_"+conversation+"")!=null){ refresh=true; mode=aa("conversation_"+conversation+"").getAttribute('mode');}
fu_npw("https://"+s_hostname+"/get_conversation_info?query="+conversation+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_ndm(response["response_data"],"conversation_"+conversation+"",mode);}else{ if (aa("conversation_"+conversation+"")!=null){ aa("conversation_"+conversation+"").remove();}} });} function fu_uxt(container,conversation,header){ if (header==undefined){ header=true;} if (fu_unj('generate_conversation_load_preview_conversation_'+conversation+'')==null){ fu_npw("https://"+s_hostname+"/get_conversation_info?query="+conversation+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_ojv('generate_conversation_load_preview_conversation_'+conversation+'',response["response_data"]); fu_oqj(container,response["response_data"],header);}else{ fu_mxp(container); fu_pco(container,"<a href='https://hey.cafe/conversation/"+conversation+"' target='_blank' rel='noreferrer'>hey.cafe/conversation/"+conversation+"</a>");}});}else{ fu_oqj(container,fu_unj('generate_conversation_load_preview_conversation_'+conversation+''),header);}} function fu_oqj(container,content,header){ if (content["info_hidden_global"]=="0" && content["info_hidden_cafe"]=="0"){ var time=fu_agm(content["date_created"]); var timelocal=fu_sak(content["date_created"]); var contents=content["contents"]; contents=fu_uiv(contents); contents=fu_idd(contents); contents=fu_ibd(contents); contents=fu_cpd(contents); contents=fu_esd(contents); contents=fu_ebi(contents); var headermeta=""; if (content["cafe"]!=false){ }
fu_mxp(container); if (header==true){ fu_pco(container,"<div class=\"minibubble preview miniframe\" onclick=\"javascript:fu_wrg('/conversation/"+content["id"]+"')\">"+headermeta+"<div class='header'><a href=\"javascript:fu_xlg('"+content["account"]["alias"]+"');\"><img source=\""+content["account"]["avatar"]+"\" class=\"avatar optimizer_img\" style='width:30px;height:30px;margin-left: 0px;' alt='Avatar for "+content["account"]["name"]+"' "+fu_cnv(content["account"])+"></a><div class='meta'><span class='timestamp' onclick=\"javascript:fu_wrg('/conversation/"+content["id"]+"')\"><timestamp time='"+content["date_created"]+"' data-title='"+timelocal+"'>"+time+"</timestamp></span></div><strong>"+fu_cpd(content["account"]["name"])+"</text></strong></div><div class='content'>"+contents+"<div id='"+container+"_attachments'></div></div></div>");}else{ fu_pco(container,"<div class=\"minibubble preview miniframe\"><div class='content'>"+contents+"<div id='"+container+"_attachments'></div></div></div>");} if (content["attachments"]!=false){ fu_wln(content["attachments"],""+container+"_attachments");}}else{ fu_mxp(container); fu_pco(container,"Sorry this content has been hidden...");}}
function fu_vww(content,container){ var refresh=false; if (aa("message_"+content["id"]+"")!=null){ refresh=true;} var time=fu_agm(content["date_created"]); var timelocal=fu_sak(content["date_created"]); var contents=content["contents"]; var actioncontrols=""; var headermeta=""; var styletype="other"; var stylebackground="normal"; if (content["info_update"]=="1"){ stylebackground="update"; contents=fu_cpd(contents);}else{ contents=fu_uiv(contents); contents=fu_idd(contents); contents=fu_ibd(contents); contents=fu_cpd(contents); contents=fu_esd(contents);} if (content["account"]["alias"]==su_alias){ styletype="myself";} var structure=""+headermeta+"<div class='header'><a href=\"javascript:fu_xlg('"+content["account"]["alias"]+"');\"><img source=\""+content["account"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for "+content["account"]["name"]+"'></a></div><div class='content_case "+stylebackground+"'><div class='content' id='message_content_"+content["id"]+"'>"+contents+"</div><div class='translate' id='message_translate_"+content["id"]+"'></div><div class='attachments' id='message_attachments_"+content["id"]+"'></div></div><div class='footer'><div class='meta'><span class='timestamp' tabindex='0'><timestamp time='"+content["date_created"]+"' data-title='"+timelocal+"'>"+time+"</timestamp></span></div><div class='action' onclick=\"javascript:actionMessage('"+content["id"]+"');\">&#8943;</div>"+actioncontrols+"<div class='minireactions' id='messsage_reactions_mini_"+content["id"]+"'></div></div>"; if (refresh==false){ fu_pco(container,"<bubble class='conversation message "+styletype+"' id='message_"+content["id"]+"'>"+structure+"</bubble>");}else{ } if (refresh==false){ if (content["attachments"]!=false){ fu_wln(content["attachments"],"message_attachments_"+content["id"]+"",false);} if (content["reactions"]!=false){ fu_qeq(content["reactions"], function(id){ fu_nwz(content["reactions"][""+id+""],"message_reactions_mini_"+content["id"]+"","mini");});}} }
function fu_nwz(content,container,type){ if (type==undefined){ type="full";} if (type=="myown"){ fu_pco(container,"<div class='reaction'><div class='reactcontent' data-title='"+content["account_name"]+"'>"+fu_tek(content["reaction"])+"</div></div>");} if (type=="full"){ fu_pco(container,"<div class='reaction'><div class='reactcontent' data-title='"+content["account_name"]+"'>"+fu_tek(content["reaction"])+"</div><a href=\"javascript:fu_xlg('"+content["account_alias"]+"');\"><img source='"+content["account_avatar"]+"' class='optimizer_img avatar' alt='Profile image for "+content["account_name"]+"'></a></div>");} if (type=="mini"){ fu_pco(container,"<div class='reaction' style='margin: 0px;margin-left:5px;'><div class='reactcontent' data-title='"+content["account_name"]+"' style='width: 29px;height: 29px;font-size: 1em;line-height: 25px;'>"+fu_tek(content["reaction"])+"</div></div>");}} function fu_zsi(content,container,type){ if (content["status"]=="active"){ var memberstatus=""; var statusmode=false; if (content["you_member"]!=undefined){ if (content["you_member"]==false){ if (content["you_request"]==true){ statusmode="pending";}}else{ statusmode="member";}} if (content["self_member"]!=undefined){ if (content["self_member"]==false){ if (content["self_request"]==true){ statusmode="pending";}}else{ statusmode="member";}} if (statusmode!=false){ if (statusmode=="member"){ memberstatus="<div class=\"tab solidhover\" style=\"float:right;padding:5px;font-size:0.7em;padding-left: 10px;padding-right: 10px;margin-left: 5px;margin-right: 10px;margin-top: 10px;\"><trans>Member</trans></div>";} if (statusmode=="pending"){ memberstatus="<div class=\"tab solidhover\" style=\"float:right;padding:5px;font-size:0.7em;padding-left: 10px;padding-right: 10px;margin-left: 5px;margin-right: 10px;margin-top: 10px;\"><trans>Pending</trans></div>";}} var header=""; header="<div class=\"aspectcase thirtybyeight\"><div class=\"cover optimizer_bg content\" source=\""+content["header"]+"\">"+memberstatus+"</div></div>"; if (type=="halfsize"){ fu_pco(container,"<bubble class='halfsized profile' onclick=\"javascript:fu_wrg('/!"+content["alias"]+"');\">"+header+"<img source='"+content["avatar"]+"' class='optimizer_img avatar main' alt='Café image for "+content["name"]+"'><h1 style='max-width: calc(100% - 0px);'>"+fu_cpd(content["name"])+"</h1><h2>!"+content["alias"]+"</h2><div class='minibubble' style='font-size: 0.8em;font-weight: 400;'>"+fu_cpd(fu_dwb(fu_nwo(content["bio"])))+"</div></bubble>");} if (type=="list"){ fu_pco(container,"<bubble onclick=\"javascript:fu_wrg('/!"+content["alias"]+"');\" style='cursor: pointer;overflow:hidden;'><img source='"+content["avatar"]+"' class='optimizer_img avatar' style='width:40px;height:40px;margin-left: -5px;margin-top: -5px;margin-bottom: 15px;float:left;margin-right:15px;' alt='Avatar image for cafe "+content["name"]+"'><h3 style='margin-top: 0px;'>"+fu_cpd(content["name"])+"</h3><div class='minibubble' style='font-size: 0.8em;font-weight: 400;padding: 10px;'>"+fu_cpd(fu_dwb(fu_nwo(content["bio"])))+"</div></bubble>");}} } function fu_cyh(content,container,type){ if (content["status"]=="active"){ if (su_alias!=content["alias"]){ if (su_id!=null){ if (content["you_following"]==false){ var follow_control="";}else{ var follow_control="<div class=\"tab solidhover\" style=\"float:right;padding:5px;font-size:0.7em;padding-left: 10px;padding-right: 10px;margin-left: 5px;margin-right: 0px;margin-top: 0px;\"><trans>Following</trans></div>";}}else{ var follow_control="";}}else{ var follow_control="";} var verified=""; if (content["verified"]=="1"){ verified=" <span class='verified_badge'>"+fu_gmq("patch-check-fill")+"</span>";} if (type=="halfsize"){ fu_pco(container,"<bubble class='halfsized profile' onclick=\"javascript:fu_xlg('"+content["alias"]+"');\"><img source='"+content["avatar"]+"' class='optimizer_img avatar main' alt='Profile image for "+content["name"]+"'>"+follow_control+"<h1>"+fu_cpd(content["name"])+""+verified+"</h1><h2>@"+content["alias"]+"</h2><div class='minibubble' style='font-size: 0.8em;font-weight: 400;'>"+fu_cpd(fu_dwb(fu_nwo(content["bio"])))+"</div></bubble>");} if (type=="list"){ fu_pco(container,"<bubble onclick=\"javascript:fu_xlg('"+content["alias"]+"');\" style='cursor: pointer;overflow:hidden;'><img source='"+content["avatar"]+"' class='optimizer_img avatar' style='width:40px;height:40px;margin-left: -5px;margin-top: -5px;margin-bottom: 15px;float:left;margin-right:15px;' alt='Avatar image for cafe "+content["name"]+"'>"+follow_control+"<h3 style='margin-top: 0px;'>"+fu_cpd(content["name"])+""+verified+"</h3><div class='minibubble' style='font-size: 0.8em;font-weight: 400;padding: 10px;'>"+fu_cpd(fu_dwb(fu_nwo(content["bio"])))+"</div></bubble>");}} }
function fu_hde(conversation,comment){ fu_clu(); fu_pbr(); fu_pco("container_modl","<h1>Comment actions</h1>"); fu_npw("https://"+s_hostname+"/get_comment_info?query="+comment+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["account"]["alias"]==su_alias){ var options=""; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_bpe('"+conversation+"','"+comment+"');\"><strong style='display: inline-block;margin-bottom: 10px;'>Attach photo</strong><BR>Upload a photo to attach, you can have more than one.</div>"; if (su_pro==true){ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_udi('"+conversation+"','"+comment+"');\"><strong style='display: inline-block;margin-bottom: 10px;'>Edit</strong><BR>Edit the contents of this comment.</div>";}else{ if (s_device!="NativeiOSApp"){ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_emk(true);\"><strong style='display: inline-block;margin-bottom: 10px;'>"+fu_cpd("🔒")+" Edit</strong><BR>Edit the contents of this comment.</div>";}} if (response["response_data"]["info_pinned"]=="0"){ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_pip('"+conversation+"','"+comment+"','0');\"><strong style='display: inline-block;margin-bottom: 10px;'>Pin</strong><BR>Pin the comment to the top of the conversation.</div>";}else{ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_pip('"+conversation+"','"+comment+"','1');\"><strong style='display: inline-block;margin-bottom: 10px;'>Unpin</strong><BR>Unpin the comment.</div>";}
options=""+options+"<div class='minibubble' onclick=\"javascript:fu_hlb('"+conversation+"','"+comment+"');\"><strong style='display: inline-block;margin-bottom: 10px;'>Delete</strong><BR>When you delete something it will be gone forever!</div>"; fu_pco("container_modl","<bubble>"+options+"</bubble>"); if (response["response_data"]["attachments"]!=false){ fu_pco("container_modl","<h2>Attachments</h2>"); fu_qeq(response["response_data"]["attachments"], function(id){ var data=response["response_data"]["attachments"][""+id+""]; var preview=""; if (data["name"].endsWith(".png")==true){ preview="<div class='media' style='max-width:200px;margin: 10px;'><img source='"+data["file"]+"' class='optimizer_img' alt='Attachment preview'></div>";} if (data["name"].endsWith(".jpeg")==true){ preview="<div class='media' style='max-width:200px;margin: 10px;'><img source='"+data["file"]+"' class='optimizer_img' alt='Attachment preview'></div>";} if (data["name"].endsWith(".jpg")==true){ preview="<div class='media' style='max-width:200px;margin: 10px;'><img source='"+data["file"]+"' class='optimizer_img' alt='Attachment preview'></div>";} if (data["name"].endsWith(".gif")==true){ preview="<div class='media' style='max-width:200px;margin: 10px;'><img source='"+data["file"]+"' class='optimizer_img' alt='Attachment preview'></div>";} var alt=""; if (data["alt"]!="false"){ var alt="<div class='minibubble'>"+fu_cpd(fu_nwo(data["alt"]))+"</div>";}
fu_pco("container_modl","<bubble><strong style='display:block;margin-bottom:15px;'>"+data["name"]+"</strong>"+alt+""+preview+"<a href=\"javascript:fu_xoy('"+data["file"]+"','"+data["name"]+"')\"><div class='button'>View</div></a> <a href=\"javascript:fu_bvu('"+conversation+"','"+comment+"','"+data["id"]+"','"+fu_csj(preview)+"')\"><div class='button'>Edit Alt Text</div></a> <a href=\"javascript:fu_emr('"+conversation+"','"+comment+"','"+data["id"]+"')\"><div class='button'>Delete</div></a></bubble>");});}}else{ var options=""; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_qxc('comment','"+comment+"','spam');\"><strong style='display: inline-block;margin-bottom: 10px;'>Spam</strong><BR>Anything that can be seen as spam.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_qxc('comment','"+comment+"','abuse');\"><strong style='display: inline-block;margin-bottom: 10px;'>Abuse</strong><BR>Content that may be harmful to others.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_qxc('comment','"+comment+"','other');\"><strong style='display: inline-block;margin-bottom: 10px;'>Other</strong><BR>Anything that does not fall under the other options.</div>"; fu_pco("container_modl","<div id='action_main_mod_message'></div><div id='action_sub_options'></div><div id='action_main_mod'></div><bubble class='alt1'>You can report a comment by using the actions below. Pick the option that makes the most sense so that the correct person gets notified of this report.</bubble>"); fu_pco("container_modl","<bubble>"+options+"</bubble>"); fu_npw("https://"+s_hostname+"/get_conversation_info?query="+conversation+"",function(result){ var conversationresponse = fu_hdg(result); if (conversationresponse["system_api_error"]==false){ fu_npw("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var accountresponse = fu_hdg(result); if (accountresponse["system_api_error"]==false){ if (accountresponse["response_data"]["admin"]=="1" || accountresponse["response_data"]["moderator"]=="1"){ fu_pco("action_main_mod_message","<bubble class='alt1' style='margin-bottom:15px;' onclick=\"fu_wrg('/staff/comments/"+comment+"');\">View content in the staff moderation pannel</bubble>");}} },false,true); if (conversationresponse["response_data"]["account"]["alias"]==su_alias){ var options=""; if (response["response_data"]["info_pinned"]=="0"){ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_pip('"+conversation+"','"+comment+"','0');\"><strong style='display: inline-block;margin-bottom: 10px;'>Pin</strong><BR>Pin the comment to the top of the conversation.</div>";}else{ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_pip('"+conversation+"','"+comment+"','1');\"><strong style='display: inline-block;margin-bottom: 10px;'>Unpin</strong><BR>Unpin the comment.</div>";}
fu_pco("action_sub_options","<bubble>"+options+"</bubble><hr></hr>");} if (conversationresponse["response_data"]["cafe"]!=false){ fu_npw("https://"+s_hostname+"/get_cafe_info?query="+conversationresponse["response_data"]["cafe"]["alias"]+"",function(result){ var caferesponse = fu_hdg(result); if (caferesponse["system_api_error"]==false){ var options=""; if (caferesponse["response_data"]["you_admin"]=="1" || caferesponse["response_data"]["you_moderator"]=="1"){ if (response["response_data"]["info_hidden_global"]=="0"){ if (response["response_data"]["info_hidden_cafe"]=="0"){ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_smk('"+conversation+"','"+comment+"','cafe');\"><strong style='display: inline-block;margin-bottom: 10px;'>Hide</strong><BR>Hides the comment it if breaks your café rules.</div>";}else{ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_ibw('"+conversation+"','"+comment+"','cafe');\"><strong style='display: inline-block;margin-bottom: 10px;'>Show</strong><BR>Removes the hidden flag if the comment does not break your café rules.</div></bubble>";}}else{ fu_pco("action_main_mod_message","<bubble class='alt1'>This comment is hidden on the global level.</bubble>");}
fu_pco("action_main_mod","<h2>Café moderator menu</h2><bubble>"+options+"</bubble><hr></hr>");}}else{ fu_few("Not able to load your cafe data to generate the page...");}},false,true);}} },false,true);}
fu_nxk();}},false,true);} function fu_gbo(conversation,comment,content){ fu_pbr(); var rawcontent=""; if (content!=undefined && content!="undefined"){ if (content!=""){ rawcontent=fu_xla(decodeURIComponent(content));}}else{ rawcontent="";}
fu_fap(); fu_pco("container_modl","<h1>New comment</h1>"); var sizemax=s_char_reg; if (su_pro==true){ var sizemax=s_char_pro;}
fu_pco("container_modl",'<bubble class=\'conversation\'><form name="convo" onsubmit="return isValidForm()"><div style="text-align:center;"><div style=\'overflow: hidden;\'><livearea spellcheck="true" onpaste="javascript:fu_rke(this, event);" onfocusin="javascript:fu_mqk(false);" beforeinput="javscript:fu_jro(event);" oninput="javascript:fu_mqk(event)" id="livearea" placeholder="What is on your mind?" class="fullsize" contenteditable="true" contentcontainer="contentarea">'+rawcontent+'</livearea><textarea class="input fullsize hidden" name="content" size="50" maxlength="5000" placeholder="You have something to say?" id="contentarea" charcost="true" charcostcase="newcomm_costbox" maxsize="'+sizemax+'">'+rawcontent+'</textarea><div id="newcomm_costbox" class="tab nohover" style="float: right;margin-top: -25px;margin-right: 8px;font-size: 0.8em;opacity: 0.5;font-weight: 500;padding: 0px;"></div><div onclick="javascript:fu_hhi(\'editor_action_area\',\'livearea\');" class="tab" style="float: right;margin-top:5px;">'+fu_gmq("filetype-gif")+'</div><div onclick="javascript:fu_igq(\'editor_action_area\',\'contentarea\');" class="tab" style="display:none;float: right;margin-top:5px;">'+fu_gmq("eye")+'</div><div onclick="javascript:fu_njs(\'comment_attach_photo_area\');" class="tab" style="float: right;margin-top:5px;">'+fu_gmq("images")+'</div><input type="submit" name="submit" onclick="javascript:fu_mqk(true); fu_ebb(\''+conversation+'\',\''+comment+'\',this.form); return false;" value="Comment" style="float: left;width: 150px;padding-top:10px;padding-bottom:10px;"></div><div class="minibubble spacing" id="comment_attach_photo_area"></div></div></form><div class="minibubble spacing" id="editor_action_area"></div></bubble>'); if (s_width>=700){ setTimeout(function(){ aa("livearea").focus();},200);}} function fu_nww(rendercase,conversation,comment){ if (su_pro==true){ var sizemax=s_char_pro;}else{ var sizemax=s_char_reg;} var editor=""; fu_fap(); editor=''+editor+'<h2>New comment</h2>'; editor=''+editor+'<bubble class=\'conversation\'>'; editor=''+editor+'<form name="convo" onsubmit="return isValidForm()">'; editor=''+editor+'<div style="text-align:center;"><div style=\'overflow: hidden;\'>'; editor=''+editor+'<livearea spellcheck="true" onpaste="javascript:fu_rke(this, event);" onfocusin="javascript:fu_mqk(false);" beforeinput="javscript:fu_jro(event);" oninput="javascript:fu_mqk(event)" id="livearea" placeholder="What is on your mind?" class="fullsize" contenteditable="true" contentcontainer="contentarea"></livearea>'; editor=''+editor+'<textarea class="input fullsize hidden" name="content" size="50" maxlength="5000" placeholder="You have something to say?" id="contentarea" charcost="true" charcostcase="newcomm_costbox" maxsize="'+sizemax+'"></textarea>'; editor=''+editor+'<div id="newcomm_costbox" class="tab nohover" style="float: right;margin-top: -25px;margin-right: 8px;font-size: 0.8em;opacity: 0.5;font-weight: 500;padding: 0px;"></div>'; editor=''+editor+'<div onclick="javascript:fu_hhi(\'editor_action_area\',\'livearea\');" class="tab" style="float: right;margin-top:5px;">'+fu_gmq("filetype-gif")+'</div>'; editor=''+editor+'<div onclick="javascript:fu_igq(\'editor_action_area\',\'contentarea\');" class="tab" style="display:none;float: right;margin-top:5px;">'+fu_gmq("eye")+'</div>'; editor=''+editor+'<div onclick="javascript:fu_njs(\'comment_attach_photo_area\');" class="tab" style="float: right;margin-top:5px;">'+fu_gmq("images")+'</div>'; editor=''+editor+'<input type="submit" name="submit" onclick="javascript:fu_mqk(true); fu_ebb(\''+conversation+'\',\''+comment+'\',this.form); return false;" value="Comment" style="float: left;width: 150px;padding-top:10px;padding-bottom:10px;">'; editor=''+editor+'</div><div class="minibubble spacing" id="comment_attach_photo_area"></div></div>'; editor=''+editor+'</form>'; editor=''+editor+'<div class="minibubble spacing" id="editor_action_area"></div>'; editor=''+editor+'</bubble>'; if (s_width>=700){ setTimeout(function(){ aa("livearea").focus();},200);}} function fu_ebb(conversation,comment,form){ fu_clu(); fu_jwg(); fu_mqk(false); var data=fu_uwq(form); var postdata={}; var sendurl=""; postdata["content"]=ae(fu_csj(data["content"])); postdata["conversation"]=conversation; if (comment!=false){ postdata["comment"]=comment;} if (data["photo"]!=undefined){ postdata["file"]=ae(data["photo"]);}
postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_comment_create"; fu_opn(sendurl,postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (!sp.startsWith("/share")){ fu_bjt(response["response_data"]["conversation"]); fu_xpq(response["response_data"]["conversation"],response["response_data"]["id"]);}
fu_hrr("Your comment has been shared");}else{ if (response["system_api_error"]=="notpro"){ fu_gbo(conversation,comment,ae(fu_csj(data["content"]))); fu_hrr("You not pro so you can't create a comment of this size");}else{ fu_gbo(conversation,comment,ae(fu_csj(data["content"]))); fu_hrr(response["system_api_error"]);}}
fu_nxk();},true);} function fu_tqk(conversation,comment){ fu_mxp("comment_footer_mini_"+comment+""); fu_pco("comment_footer_mini_"+comment+"","<div id='comm_reaction_bag_"+comment+"' class='horizontalscroll' style='margin-bottom:5px;padding: 0px;'></div>"); fu_qeq(sr, function(id){ var canuse=true; if (su_pro==false && sr[""+id+""]["pro"]==true){ canuse=false;} if (sr[""+id+""]["canpick"]==false){ canuse=false;} if (canuse==true){ fu_pco("comm_reaction_bag_"+comment+"","<div tabindex='0' class='action' onclick=\"javascript:fu_ayq('"+conversation+"','"+comment+"','"+id+"');\" style='margin-right:5px;text-align:center;'>"+fu_tek(id)+"</div>");}}); fu_pco("comm_reaction_bag_"+comment+"","<div tabindex='0' class='action' onclick=\"javascript:fu_okf('"+conversation+"','"+comment+"');\" style='margin-right:5px;text-align:center;font-size: 1em;'>Clear Reactions</div>");} function fu_pip(conversation,comment,current){ fu_clu(); fu_jwg(); var postdata={}; if (current=="1"){ var level="off";}else{ var level="on";}
postdata["comment"]=comment; postdata["mode"]=level; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_comment_pin",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_bjt(conversation); if (level=="on"){ fu_hrr("Comment has been pinned");}else{ fu_hrr("Comment pin has been remove");}}else{ fu_hrr(response["system_api_error"]);}
fu_nxk();},true);} function fu_ayq(conversation,comment,reaction){ fu_clu(); var postdata={}; postdata["comment"]=comment; postdata["conversation"]=conversation; postdata["reaction"]=reaction; postdata=fu_ere(postdata); fu_mxp("comment_footer_mini_"+comment+""); fu_opn("https://"+s_hostname+"/post_comment_react",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_cfz(comment); fu_hrr("Reaction has been sent");}else{ fu_cfz(comment); fu_hrr(response["system_api_error"]);}
fu_nxk();},true);} function fu_okf(conversation,comment){ fu_clu(); var postdata={}; postdata["comment"]=comment; postdata["conversation"]=conversation; postdata=fu_ere(postdata); fu_mxp("comment_footer_mini_"+comment+""); fu_opn("https://"+s_hostname+"/post_comment_delete_react",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_cfz(comment); fu_hrr("Your reactions have been removed");}else{ fu_cfz(comment); fu_hrr(response["system_api_error"]);}
fu_nxk();},true);} function fu_smk(conversation,comment,level){ fu_clu(); fu_jwg(); var postdata={}; postdata["comment"]=comment; postdata["conversation"]=conversation; postdata["level"]=level; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_comment_hide",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_cfz(comment); fu_hrr("Comment has been hidden");}else{ fu_cfz(comment); fu_hrr(response["system_api_error"]);}
fu_nxk();},true);} function fu_ibw(conversation,comment,level){ fu_clu(); fu_jwg(); var postdata={}; postdata["comment"]=comment; postdata["conversation"]=conversation; postdata["level"]=level; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_comment_show",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_cfz(comment); fu_hrr("Comment is now not hidden");}else{ fu_cfz(comment); fu_hrr(response["system_api_error"]);}
fu_nxk();},true);} function fu_hlb(conversation,comment){ fu_clu(); fu_jwg(); var postdata={}; postdata["comment"]=comment; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_comment_delete",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_cfz(comment); fu_hrr("Your comment has been deleted");}else{ fu_hrr(response["system_api_error"]);}
fu_nxk();},true);} function fu_emr(conversation,comment,attachment){ fu_clu(); fu_jwg(); var postdata={}; postdata["comment"]=comment; postdata["attachment"]=attachment; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_comment_delete_attachment",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_cfz(comment); fu_hrr("Your comment attachment has been deleted");}else{ fu_hrr(response["system_api_error"]);}
fu_nxk();},true);} function fu_bvu(conversation,comment,attachment,preview){ fu_clu(); fu_pbr(); preview=fu_xla(preview); fu_npw("https://"+s_hostname+"/get_comment_info?query="+comment+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_pco("container_modl","<h1>Edit attachment alt</h1>"); var contentstoedit=response["response_data"]["attachments"][""+attachment+""]["alt"]; contentstoedit=contentstoedit.replace(/\s\s/g, "\n"); contentstoedit=contentstoedit.replace(/~~/g, "\t"); if (contentstoedit=="false"){ contentstoedit="";} var sizemax=200; fu_pco("container_modl","<bubble class='alt1'>Once you are done and happy with the changes you can tap update.</bubble>"); fu_pco("container_modl",'<bubble><form name="edit" onsubmit="return isValidForm()"><div style="text-align:center;"><div>'+preview+'</div><textarea class="input fullsize" name="content" size="50" maxlength="5000" placeholder="Describe what the file content looks like" charcost="true" charcostcase="edit_costbox" maxsize="'+sizemax+'">'+contentstoedit+'</textarea><BR><BR><div id="edit_costbox" class="tab nohover" style="float: right;margin-top: 5px;"></div><input type="submit" name="submit" onclick="fu_vpm(\''+comment+'\',\''+attachment+'\',this.form); return false;" style="float: left;width: 150px;padding-top:10px;padding-bottom:10px;" value="Update"></div></form></bubble>'); fu_nxk();}},false,true);} function fu_vpm(comment,attachment,form){ fu_clu(); fu_jwg(); var data=fu_uwq(form); var postdata={}; postdata["comment"]=comment; postdata["attachment"]=attachment; postdata["content"]=ae(fu_csj(data["content"])); postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_comment_edit_alt_attachment",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_cfz(comment); fu_hrr("Your attachment alt text has been edited");}else{ fu_hrr(response["system_api_error"]);}
fu_nxk();},true);} function fu_udi(conversation,comment){ fu_clu(); fu_pbr(); fu_npw("https://"+s_hostname+"/get_comment_info?query="+comment+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_pco("container_modl","<h1>Edit content</h1>"); var contentstoedit=response["response_data"]["contents"]; contentstoedit=contentstoedit.replace(/\s\s/g, "\n"); contentstoedit=contentstoedit.replace(/~~/g, "\t"); var sizemax=s_char_reg; if (su_pro==true){ var sizemax=s_char_pro;}
fu_pco("container_modl",'<bubble class=\'conversation\'><form name="edit" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea class="input fullsize" name="content" size="50" maxlength="5000" placeholder="You will need some content..." charcost="true" charcostcase="edit_costbox" maxsize="'+sizemax+'">'+contentstoedit+'</textarea><BR><BR><div id="edit_costbox" class="tab nohover" style="float: right;margin-top: 5px;"></div><input type="submit" name="submit" onclick="fu_igx(\''+conversation+'\',\''+comment+'\',this.form); return false;" style="float: left;width: 200px;" value="Update Comment"></div></form></bubble>'); fu_nxk();}},false,true);} function fu_igx(conversation,comment,form){ fu_clu(); fu_jwg(); var data=fu_uwq(form); var postdata={}; postdata["comment"]=comment; postdata["content"]=ae(fu_csj(data["content"])); postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_comment_edit",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_cfz(comment); fu_hrr("Your comment has been edited");}else{ if (response["system_api_error"]=="notpro"){ fu_hrr("You are not pro so are unable to use this action");}else{ fu_hrr(response["system_api_error"]);}}
fu_nxk();},true);} function fu_bpe(conversation,comment){ fu_clu(); fu_pbr(); fu_npw("https://"+s_hostname+"/get_comment_info?query="+comment+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_pco("container_modl","<h1>Attach photo</h1>"); fu_pco("container_modl",'<bubble><form name="edit" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea id="imagedata_source" activated="true" style="position:fixed;left:0px;top:-200px;" name="photo"></textarea><div id="uploader_previewarea"></div><input type="file" onchange="fu_pxf(this,\'imagedata_source\',\'uploader_previewarea\',false,\'images\')" /><BR><BR><input type="submit" name="submit" onclick="fu_bxc(\''+conversation+'\',\''+comment+'\',this.form); return false;" value="Attach"></div></form></bubble>'); fu_nxk();}},false,true);} function fu_bxc(conversation,comment,form){ fu_clu(); fu_jwg(); var data=fu_uwq(form); var postdata={}; postdata["comment"]=comment; postdata["file"]=ae(data["photo"]); postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_comment_attach_photo",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_cfz(comment); fu_hrr("The photo has been attached to the comment");}else{ fu_cfz(comment); fu_hrr("The photo failed to get attached");}}else{ fu_hrr(response["system_api_error"]);}
fu_nxk();},true);}
function fu_nhv(cafe,content,tag){ if (tag==undefined){ tag="false";} if (cafe==undefined){ cafe="false";} if (cafe==""){ cafe="false";}
fu_pbr(); var rawcontent=""; if (content!=undefined && content!="undefined"){ if (content!=""){ rawcontent=fu_xla(decodeURIComponent(content));}}else{ rawcontent="";}
fu_fap(); fu_pco("container_modl","<h1>New conversation</h1>"); if (su_pro==true){ var sizemax=s_char_pro;}else{ var sizemax=s_char_reg;} var editor=''; editor=''+editor+'<bubble class="conversation"><form name="convo" onsubmit="return isValidForm()"><div style="text-align:center;">'; editor=''+editor+'<div id="modl_newconvo_cafearea"></div>'; editor=''+editor+'<div style=\'overflow: hidden;\'>'; editor=''+editor+'<livearea spellcheck="true" onpaste="javascript:fu_rke(this, event);" onfocusin="javascript:fu_mqk(false);" beforeinput="javscript:fu_jro(event);" oninput="javascript:fu_mqk(event)" id="livearea" placeholder="What is on your mind?" class="fullsize" contenteditable="true" contentcontainer="contentarea">'+rawcontent+'</livearea>'; editor=''+editor+'<textarea class="input fullsize hidden" name="content" size="50" maxlength="5000" placeholder="What is on your mind?" id="contentarea" charcost="true" charcostcase="newconv_costbox" maxsize="'+sizemax+'">'+rawcontent+'</textarea>'; editor=''+editor+'<div id="newconv_costbox" class="tab" style="float: right;margin-top: -25px;margin-right: 8px;font-size: 0.8em;opacity: 0.5;font-weight: 500;padding: 0px;"></div>'; editor=''+editor+'<div onclick="javascript:fu_hhi(\'editor_action_area\',\'livearea\');" class="tab" style="float: right;margin-top:5px;" data-title="Find GIF">'+fu_gmq("filetype-gif")+'</div>'; editor=''+editor+'<div onclick="javascript:fu_njs(\'conversation_attach_photo_area\');" class="tab" style="float: right;margin-top:5px;" data-title="Attach Photo">'+fu_gmq("images")+'</div>'; editor=''+editor+'<div id="modl_newconvo_submit"><input type="submit" name="submit" onclick="javascript:fu_mqk(true); fu_dei(this.form,\''+cafe+'\'); return false;" value="Share" style="float: left;width: 150px;padding-top:10px;padding-bottom:10px;"></div>'; editor=''+editor+'</div></div>'; editor=''+editor+'<div class="minibubble spacing" id="conversation_attach_photo_area"></div>'; editor=''+editor+'</form>'; editor=''+editor+'<div class="minibubble spacing" id="editor_action_area"></div>'; editor=''+editor+'</bubble>'; fu_pco("container_modl",editor); fu_tdg("modl_newconvo_cafearea",cafe,"javascript:fu_jrn('modl_newconvo_cafearea','modl_newconvo_submit');"); if (s_width>=700){ setTimeout(function(){ aa("livearea").focus();},200);}} function fu_bin(rendercase,cafe,tag){ if (tag==undefined){ tag="false";} if (su_pro==true){ var sizemax=s_char_pro;}else{ var sizemax=s_char_reg;} var editor=''; editor=''+editor+'<bubble class=\'conversation\'><form name="inlineconvo" onsubmit="return isValidForm()"><div style="text-align:center;">'; editor=''+editor+'<div id="modl_newconvo_cafearea_inline"></div>'; editor=''+editor+'<div style=\'overflow: hidden;\'>'; editor=''+editor+'<livearea spellcheck="true" onpaste="javascript:fu_rke(this, event);" onfocusin="javascript:fu_mqk(false);" beforeinput="javscript:fu_jro(event);" oninput="javascript:fu_mqk(event)" id="liveareainline" placeholder="What is on your mind?" class="fullsize" contenteditable="true" contentcontainer="contentarealive"></livearea>'; editor=''+editor+'<textarea class="input fullsize hidden" name="content" size="50" maxlength="5000" placeholder="What is on your mind?" id="contentarealive" charcost="true" charcostcase="newconv_inline_costbox" maxsize="'+sizemax+'"></textarea>'; editor=''+editor+'<div id="newconv_inline_costbox" class="tab nohover" style="float: right;margin-top: -25px;margin-right: 8px;font-size: 0.8em;opacity: 0.5;font-weight: 500;padding: 0px;" data-title="Characters Left"></div>'; editor=''+editor+'<div onclick="javascript:fu_hhi(\'editor_action_area_inline\',\'liveareainline\');" class="tab" style="float: right;margin-top: 5px;" data-title="Find GIF">'+fu_gmq("filetype-gif")+'</div>'; editor=''+editor+'<div onclick="javascript:fu_njs(\'conversation_attach_photo_area_inline\');" class="tab" style="float: right;margin-top: 5px;" data-title="Attach Photo">'+fu_gmq("images")+'</div>'; editor=''+editor+'<div id="modl_newconvo_submit_inline"><input type="submit" name="submit" onclick="javascript:fu_mqk(true); fu_dei(this.form,\''+cafe+'\'); return false;" value="Share" style="float: left;width: 150px;padding-top:10px;padding-bottom:10px;"></div>'; editor=''+editor+'</div></div>'; editor=''+editor+'<div class="minibubble spacing" id="conversation_attach_photo_area_inline"></div>'; editor=''+editor+'</form>'; editor=''+editor+'<div class="minibubble spacing" id="editor_action_area_inline"></div>'; editor=''+editor+'</bubble>'; fu_pco(rendercase,editor); fu_tdg("modl_newconvo_cafearea_inline",cafe,"javascript:fu_jrn('modl_newconvo_cafearea_inline','modl_newconvo_submit_inline');");} function fu_clh(cafe,previewcase,submit){ fu_mxp(submit); fu_pco(submit,'<input type="submit" name="submit" onclick="javascript:fu_mqk(true); fu_dei(this.form,\''+cafe+'\'); return false;" value="Share" style="float: left;width: 150px;padding-top:10px;padding-bottom:10px;">'); fu_tdg(previewcase,cafe,"javascript:fu_jrn('"+previewcase+"','"+submit+"');");} function fu_jrn(previewcase,submit){ fu_mxp(previewcase); fu_pco(previewcase,"<div class='loading'></div>"); fu_npw("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ var options=""; options=""+options +"<div class='cafeheader' style='text-align:left;' onclick=\"javascript:fu_clh('false','"+previewcase+"','"+submit+"')\"><img source=\""+response["response_data"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for account "+response["response_data"]["name"]+"'> Post to <strong>"+fu_cpd(response["response_data"]["name"])+"</strong> @"+response["response_data"]["alias"]+"</div>"; fu_npw("https://"+s_hostname+"/get_account_cafes?query="+su_id+"&count=1000",function(result){ var caferesponse = fu_hdg(result); if (caferesponse["system_api_error"]==false){ if (caferesponse["response_data"]["cafes"]!=false){ fu_qeq(caferesponse["response_data"]["cafes"], function(id){ if (caferesponse["response_data"]["cafes"][""+id+""]["you_member"]==true){ if (caferesponse["response_data"]["cafes"][""+id+""]["member_create"]=="1"){ options=""+options +"<div class='cafeheader' style='text-align:left;' onclick=\"javascript:fu_clh('"+id+"','"+previewcase+"','"+submit+"')\"><img source=\""+caferesponse["response_data"]["cafes"][""+id+""]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for café "+caferesponse["response_data"]["cafes"][""+id+""]["name"]+"'> Post to <strong>"+fu_cpd(caferesponse["response_data"]["cafes"][""+id+""]["name"])+"</strong> !"+caferesponse["response_data"]["cafes"][""+id+""]["alias"]+"</div>";}else{ if (caferesponse["response_data"]["cafes"][""+id+""]["you_admin"]==true){ options=""+options +"<div class='cafeheader' style='text-align:left;' onclick=\"javascript:fu_clh('"+id+"','"+previewcase+"','"+submit+"')\"><img source=\""+caferesponse["response_data"]["cafes"][""+id+""]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for café "+caferesponse["response_data"]["cafes"][""+id+""]["name"]+"'> Post to <strong>"+fu_cpd(caferesponse["response_data"]["cafes"][""+id+""]["name"])+"</strong> !"+caferesponse["response_data"]["cafes"][""+id+""]["alias"]+"</div>";}} }});}
fu_nxk(); fu_mxp(previewcase); fu_pco(previewcase,options);}},false,true);}},false,true);} function fu_tdg(previewcase,cafe,link){ fu_pco(previewcase,"<div class='cafeheader' style='text-align:left;'>Loading...</div>"); if (cafe!="false"){ fu_npw("https://"+s_hostname+"/get_cafe_info?query="+cafe+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp(previewcase); fu_pco(previewcase,"<div class='cafeheader' style='text-align:left;' onclick=\""+link+"\"><img source=\""+response["response_data"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for café "+response["response_data"]["name"]+"'> Post to <strong>"+fu_cpd(response["response_data"]["name"])+"</strong> !"+response["response_data"]["alias"]+"</div>");}},false,true);}else{ fu_npw("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp(previewcase); fu_pco(previewcase,"<div class='cafeheader' style='text-align:left;' onclick=\""+link+"\"><img source=\""+response["response_data"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for account "+response["response_data"]["name"]+"'> Post to <strong>"+fu_cpd(response["response_data"]["name"])+"</strong> @"+response["response_data"]["alias"]+"</div>");}},false,true);}} function fu_dei(form,cafe){ fu_clu(); fu_jwg(); fu_mqk(false); var data=fu_uwq(form); var postdata={}; var sendurl=""; postdata["cafe"]=cafe; postdata["content"]=ae(fu_csj(data["content"])); if (data["photo"]!=undefined){ postdata["file"]=ae(data["photo"]);}
postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_conversation_create"; fu_opn(sendurl,postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (!sp.startsWith("/share")){ if (s_width<=799){ fu_wrg("/conversation/"+response["response_data"]["id"]+"");}else{ window.scrollTo({ top: 0, behavior: 'smooth' }); fu_zng();}}
fu_hrr("Your conversation has been shared");}else{ if (response["system_api_error"]=="notpro"){ fu_nhv(cafe,ae(fu_csj(data["content"]))); fu_hrr("You are not Pro so you can't create a conversation of this size");}else{ fu_nhv(cafe,ae(fu_csj(data["content"]))); fu_hrr(response["system_api_error"]);}}
fu_nxk();},true);} function fu_drd(conversation){ fu_clu(); fu_pbr(); fu_pco("container_modl","<h1>Conversation actions</h1>"); fu_npw("https://"+s_hostname+"/get_conversation_info?query="+conversation+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ var options=""; if (response["response_data"]["account"]["alias"]==su_alias){ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_jqv('"+conversation+"');\"><strong style='display: inline-block;margin-bottom: 10px;'>Attach photo</strong><BR>Upload a photo to attach, you can have more than one.</div>"; if (su_pro==true){ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_suk('"+conversation+"');\"><strong style='display: inline-block;margin-bottom: 10px;'>Attach file</strong><BR>Can attach any file type.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_bzw('"+conversation+"');\"><strong style='display: inline-block;margin-bottom: 10px;'>Edit</strong><BR>Edit the contents of this conversation.</div>";}else{ if (s_device!="NativeiOSApp"){ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_emk(true);\"><strong style='display: inline-block;margin-bottom: 10px;'>"+fu_cpd("🔒")+" Attach file</strong><BR>Can attach any file type.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_emk(true);\"><strong style='display: inline-block;margin-bottom: 10px;'>"+fu_cpd("🔒")+" Edit</strong><BR>Edit the contents of this conversation.</div>";}} if (response["response_data"]["info_pinned"]=="0"){ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_kew('"+conversation+"','0');\"><strong style='display: inline-block;margin-bottom: 10px;'>Pin</strong><BR>Pin the conversation to the top of your profile or café.</div>";}else{ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_kew('"+conversation+"','1');\"><strong style='display: inline-block;margin-bottom: 10px;'>Unpin</strong><BR>Unpin the conversation.</div>";} if (response["response_data"]["info_locked"]=="0"){ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_zsq('"+conversation+"','0');\"><strong style='display: inline-block;margin-bottom: 10px;'>Lock</strong><BR>Lock the conversation from reactions and comments.</div>";}else{ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_zsq('"+conversation+"','1');\"><strong style='display: inline-block;margin-bottom: 10px;'>Unlock</strong><BR>Unlock the conversation and allow reactions and comments.</div>";}
options=""+options+"<div class='minibubble' onclick=\"javascript:fu_xsu('"+conversation+"');\"><strong style='display: inline-block;margin-bottom: 10px;'>Delete</strong><BR>When you delete something it will be gone forever!</div>"; fu_pco("container_modl","<bubble>"+options+"</bubble>"); fu_pco("container_modl","<h2>Tags</h2> <bubble id='ActionMainTags'></bubble>"); if (response["response_data"]["cafe"]==false){ fu_npw("https://"+s_hostname+"/get_account_info?query="+response["response_data"]["account"]["id"]+"",function(result){ var response_tags = fu_hdg(result); if (response_tags["system_api_error"]==false){ var contentstags=""; if (response_tags["response_data"]["tags"]==false){ contentstags="<bubble class='alt1'>No tags have been created yet</bubble>";}else{ if (response["response_data"]["tag"]!=false){ contentstags=""+contentstags+"<div class='minibubble' onclick=\"javascript:fu_vol('"+conversation+"','false');\"><strong style='display: inline-block;margin-bottom: 10px;'>Remove Tag \""+fu_cpd(response["response_data"]["tag"]["emoji"])+" "+fu_cpd(response["response_data"]["tag"]["name"])+"\"</strong><BR>Will remove the current tag from the conversation.</div>";}
fu_qeq(response_tags["response_data"]["tags"], function(select){ contentstags=""+contentstags+"<div class='minibubble' onclick=\"javascript:fu_vol('"+conversation+"','"+response_tags["response_data"]["tags"][""+select+""]["id"]+"');\"><strong style='display: inline-block;margin-bottom: 10px;'>"+fu_cpd(response_tags["response_data"]["tags"][""+select+""]["emoji"])+" "+fu_cpd(response_tags["response_data"]["tags"][""+select+""]["name"])+"</strong><BR>Set the tag on the conversation.</div>";});}
fu_pco("ActionMainTags",""+contentstags+"");}},false,true);}else{ fu_npw("https://"+s_hostname+"/get_cafe_info?query="+response["response_data"]["cafe"]["id"]+"",function(result){ var response_tags = fu_hdg(result); if (response_tags["system_api_error"]==false){ var contentstags=""; if (response_tags["response_data"]["tags"]==false){ contentstags="<bubble class='alt1'>No tags have been created yet</bubble>";}else{ if (response["response_data"]["tag"]!=false){ contentstags=""+contentstags+"<div class='minibubble' onclick=\"javascript:fu_vol('"+conversation+"','false');\"><strong style='display: inline-block;margin-bottom: 10px;'>Remove Tag \""+fu_cpd(response["response_data"]["tag"]["emoji"])+" "+fu_cpd(response["response_data"]["tag"]["name"])+"\"</strong><BR>Will remove the current tag from the conversation.</div>";}
fu_qeq(response_tags["response_data"]["tags"], function(select){ if (response_tags["response_data"]["tags"][""+select+""]["staff"]=="false" || response_tags["response_data"]["you_admin"]=="1" || response_tags["response_data"]["you_moderator"]=="1"){ contentstags=""+contentstags+"<div class='minibubble' onclick=\"javascript:fu_vol('"+conversation+"','"+response_tags["response_data"]["tags"][""+select+""]["id"]+"');\"><strong style='display: inline-block;margin-bottom: 10px;'>"+fu_cpd(response_tags["response_data"]["tags"][""+select+""]["emoji"])+" "+fu_cpd(response_tags["response_data"]["tags"][""+select+""]["name"])+"</strong><BR>Set the tag on the conversation.</div>";}});}
fu_pco("ActionMainTags",""+contentstags+"");}},false,true);} if (response["response_data"]["attachments"]!=false){ fu_pco("container_modl","<h2>Attachments</h2>"); fu_qeq(response["response_data"]["attachments"], function(id){ var data=response["response_data"]["attachments"][""+id+""]; var preview=""; if (data["name"].endsWith(".png")==true){ preview="<div class='media' style='max-width:200px;margin: 10px;'><img source='"+data["file"]+"' class='optimizer_img' alt='Attachment preview'></div>";} if (data["name"].endsWith(".jpeg")==true){ preview="<div class='media' style='max-width:200px;margin: 10px;'><img source='"+data["file"]+"' class='optimizer_img' alt='Attachment preview'></div>";} if (data["name"].endsWith(".jpg")==true){ preview="<div class='media' style='max-width:200px;margin: 10px;'><img source='"+data["file"]+"' class='optimizer_img' alt='Attachment preview'></div>";} if (data["name"].endsWith(".gif")==true){ preview="<div class='media' style='max-width:200px;margin: 10px;'><img source='"+data["file"]+"' class='optimizer_img' alt='Attachment preview'></div>";} var primary=""; if (data["primary"]=="1"){ primary=""+fu_cpd("⭐️")+"";} var alt=""; if (data["alt"]!="false"){ var alt="<div class='minibubble'>"+fu_cpd(fu_nwo(data["alt"]))+"</div>";}
fu_pco("container_modl","<bubble><strong style='display:block;margin-bottom:15px;'>"+data["name"]+" "+primary+"</strong>"+alt+""+preview+"<a href=\"javascript:fu_xoy('"+data["file"]+"','"+data["name"]+"')\"><div class='button'>View</div></a> <a href=\"javascript:fu_vze('"+conversation+"','"+data["id"]+"','"+fu_csj(preview)+"')\"><div class='button'>Edit Alt Text</div></a> <a href=\"javascript:fu_udo('"+conversation+"','"+data["id"]+"')\"><div class='button'>Make Primary</div></a> <a href=\"javascript:fu_ocb('"+conversation+"','"+data["id"]+"')\"><div class='button'>Delete</div></a></bubble>");});}}else{ var options=""; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_qxc('conversation','"+conversation+"','spam');\"><strong style='display: inline-block;margin-bottom: 10px;'>Spam</strong><BR>Anything that can be seen as spam.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_qxc('conversation','"+conversation+"','abuse');\"><strong style='display: inline-block;margin-bottom: 10px;'>Abuse</strong><BR>Content that may be harmful to others.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_qxc('conversation','"+conversation+"','other');\"><strong style='display: inline-block;margin-bottom: 10px;'>Other</strong><BR>Anything that does not fall under the other options.</div>"; fu_pco("container_modl","<div id='action_main_mod_message'></div><div id='action_main_mod'></div><bubble class='alt1'>You can report a conversation by using the actions below. Pick the option that makes the most sense so that the correct person gets notified of this report.</bubble><bubble>"+options+"</bubble>"); fu_npw("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var accountresponse = fu_hdg(result); if (accountresponse["system_api_error"]==false){ if (accountresponse["response_data"]["admin"]=="1" || accountresponse["response_data"]["moderator"]=="1"){ fu_pco("action_main_mod_message","<bubble class='alt1' style='margin-bottom:15px;' onclick=\"fu_wrg('/staff/conversations/"+conversation+"');\">View content in the staff moderation pannel</bubble>");}} },false,true); if (response["response_data"]["cafe"]!=false){ fu_npw("https://"+s_hostname+"/get_cafe_info?query="+response["response_data"]["cafe"]["alias"]+"",function(result){ var caferesponse = fu_hdg(result); if (caferesponse["system_api_error"]==false){ if (caferesponse["response_data"]["you_admin"]=="1" || caferesponse["response_data"]["you_moderator"]=="1"){ var options=""; if (response["response_data"]["info_pinned"]=="0"){ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_kew('"+conversation+"','0');\"><strong style='display: inline-block;margin-bottom: 10px;'>Pin</strong><BR>Pin the conversation to the top of your profile or café.</div>";}else{ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_kew('"+conversation+"','1');\"><strong style='display: inline-block;margin-bottom: 10px;'>Unpin</strong><BR>Unpin the conversation.</div>";} if (response["response_data"]["info_hidden_global"]=="0"){ if (response["response_data"]["info_hidden_cafe"]=="0"){ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_kpj('"+conversation+"','cafe');\"><strong style='display: inline-block;margin-bottom: 10px;'>Hide</strong><BR>Hides the conversation it if breaks your café rules.</div>";}else{ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_fej('"+conversation+"','cafe');\"><strong style='display: inline-block;margin-bottom: 10px;'>Show</strong><BR>Removes the hidden flag if the conversation does not break your café rules.</div></bubble>";}}else{ fu_pco("action_main_mod_message","<bubble class='alt1'>This conversation is hidden on the global level.</bubble>");}
fu_pco("action_main_mod","<h2>Café moderator menu</h2><bubble>"+options+"</bubble><bubble id='ActionMainTags'></bubble><hr></hr>"); fu_pco("ActionMainTags","<h2 style='margin-top:0px;'>Tags</h2>"); var contentstags=""; if (caferesponse["response_data"]["tags"]==false){ contentstags="<bubble class='alt1'>No tags have been created yet</bubble>";}else{ if (response["response_data"]["tag"]!=false){ contentstags=""+contentstags+"<div class='minibubble' onclick=\"javascript:fu_vol('"+conversation+"','false');\"><strong style='display: inline-block;margin-bottom: 10px;'>Remove Tag \""+fu_cpd(response["response_data"]["tag"]["emoji"])+" "+fu_cpd(response["response_data"]["tag"]["name"])+"\"</strong><BR>Will remove the current tag from the conversation.</div>";}
fu_qeq(caferesponse["response_data"]["tags"], function(select){ contentstags=""+contentstags+"<div class='minibubble' onclick=\"javascript:fu_vol('"+conversation+"','"+caferesponse["response_data"]["tags"][""+select+""]["id"]+"');\"><strong style='display: inline-block;margin-bottom: 10px;'>"+fu_cpd(caferesponse["response_data"]["tags"][""+select+""]["emoji"])+" "+fu_cpd(caferesponse["response_data"]["tags"][""+select+""]["name"])+"</strong><BR>Set the tag on the conversation.</div>";});}
fu_pco("ActionMainTags",""+contentstags+"");}}else{ fu_few("Not able to load your cafe data to generate the page...");}},false,true);}}
fu_nxk();}},false,true);} function fu_vol(conversation,tag){ fu_clu(); fu_jwg(); var postdata={}; postdata["conversation"]=conversation; postdata["tag"]=tag; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_conversation_tag",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_bjt(conversation); fu_hrr("The tag has been updated on the conversation");}else{ fu_bjt(conversation); fu_hrr(response["system_api_error"]);}
fu_nxk();},true);} function fu_hpa(conversation){ fu_mxp("conversation_footer_mini_"+conversation+""); fu_pco("conversation_footer_mini_"+conversation+"","<div id='conv_reaction_bag_"+conversation+"' class='horizontalscroll' style='margin-bottom:5px;padding: 0px;'></div>"); fu_qeq(sr, function(id){ var canuse=true; if (su_pro==false && sr[""+id+""]["pro"]==true){ canuse=false;} if (sr[""+id+""]["canpick"]==false){ canuse=false;} if (canuse==true){ fu_pco("conv_reaction_bag_"+conversation+"","<div tabindex='0' class='action' onclick=\"javascript:fu_byp('"+conversation+"','"+id+"');\" style='margin-right:5px;text-align:center;'>"+fu_tek(id)+"</div>");}}); fu_pco("conv_reaction_bag_"+conversation+"","<div tabindex='0' class='action' onclick=\"javascript:fu_wvo('"+conversation+"');\" style='margin-right:5px;text-align:center;font-size: 1em;'>Clear Reactions</div>");} function fu_byp(conversation,reaction){ fu_clu(); var postdata={}; postdata["conversation"]=conversation; postdata["reaction"]=reaction; postdata=fu_ere(postdata); fu_mxp("conversation_footer_mini_"+conversation+""); fu_opn("https://"+s_hostname+"/post_conversation_react",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_bjt(conversation); fu_hrr("Your reaction has been sent");}else{ fu_bjt(conversation); fu_hrr(response["system_api_error"]);}
fu_nxk();},true);} function fu_wvo(conversation){ fu_clu(); var postdata={}; postdata["conversation"]=conversation; postdata=fu_ere(postdata); fu_mxp("conversation_footer_mini_"+conversation+""); fu_opn("https://"+s_hostname+"/post_conversation_delete_react",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_bjt(conversation); fu_hrr("Your reactions have been removed");}else{ fu_bjt(conversation); fu_hrr(response["system_api_error"]);}
fu_nxk();},true);} function fu_kew(conversation,current){ fu_clu(); fu_jwg(); var postdata={}; if (current=="1"){ var level="off";}else{ var level="on";}
postdata["conversation"]=conversation; postdata["mode"]=level; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_conversation_pin",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_bjt(conversation); if (level=="on"){ fu_hrr("Conversation has been pinned");}else{ fu_hrr("Conversation pin has been remove");}}else{ fu_hrr(response["system_api_error"]);}
fu_nxk();},true);} function fu_zsq(conversation,current){ fu_clu(); fu_jwg(); var postdata={}; if (current=="1"){ var level="off";}else{ var level="on";}
postdata["conversation"]=conversation; postdata["mode"]=level; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_conversation_lock",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_bjt(conversation); if (level=="on"){ fu_hrr("Conversation has been locked");}else{ fu_hrr("Conversation lock has been remove");}}else{ fu_hrr(response["system_api_error"]);}
fu_nxk();},true);} function fu_kpj(conversation,level){ fu_clu(); fu_jwg(); var postdata={}; postdata["conversation"]=conversation; postdata["level"]=level; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_conversation_hide",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_bjt(conversation); fu_hrr("Conversation has been hidden");}else{ fu_bjt(conversation); fu_hrr(response["system_api_error"]);}
fu_nxk();},true);} function fu_fej(conversation,level){ fu_clu(); fu_jwg(); var postdata={}; postdata["conversation"]=conversation; postdata["level"]=level; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_conversation_show",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_bjt(conversation); fu_hrr("Conversation is now not hidden");}else{ fu_bjt(conversation); fu_hrr(response["system_api_error"]);}
fu_nxk();},true);} function fu_xsu(conversation){ fu_clu(); fu_jwg(); var postdata={}; postdata["conversation"]=conversation; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_conversation_delete",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_wrg("/"); fu_hrr("Your conversation has been deleted");}else{ fu_hrr(response["system_api_error"]);}
fu_nxk();},true);} function fu_ocb(conversation,attachment){ fu_clu(); fu_jwg(); var postdata={}; postdata["conversation"]=conversation; postdata["attachment"]=attachment; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_conversation_delete_attachment",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_bjt(conversation); fu_hrr("Your conversation attachment has been deleted");}else{ fu_hrr(response["system_api_error"]);}
fu_nxk();},true);} function fu_udo(conversation,attachment){ fu_clu(); fu_jwg(); var postdata={}; postdata["conversation"]=conversation; postdata["attachment"]=attachment; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_conversation_primary_attachment",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_bjt(conversation); fu_hrr("Your conversation attachment has been made primary");}else{ fu_hrr(response["system_api_error"]);}
fu_nxk();},true);} function fu_vze(conversation,attachment,preview){ fu_clu(); fu_pbr(); preview=fu_xla(preview); fu_npw("https://"+s_hostname+"/get_conversation_info?query="+conversation+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_pco("container_modl","<h1>Edit attachment alt</h1>"); var contentstoedit=response["response_data"]["attachments"][""+attachment+""]["alt"]; contentstoedit=contentstoedit.replace(/\s\s/g, "\n"); contentstoedit=contentstoedit.replace(/~~/g, "\t"); if (contentstoedit=="false"){ contentstoedit="";} var sizemax=200; fu_pco("container_modl","<bubble class='alt1'>Once you are done and happy with the changes you can tap update.</bubble>"); fu_pco("container_modl",'<bubble><form name="edit" onsubmit="return isValidForm()"><div style="text-align:center;"><div>'+preview+'</div><textarea class="input fullsize" name="content" size="50" maxlength="5000" placeholder="Describe what the file content looks like" charcost="true" charcostcase="edit_costbox" maxsize="'+sizemax+'">'+contentstoedit+'</textarea><BR><BR><div id="edit_costbox" class="tab nohover" style="float: right;margin-top: 5px;"></div><input type="submit" name="submit" onclick="fu_scx(\''+conversation+'\',\''+attachment+'\',this.form); return false;" style="float: left;width: 150px;padding-top:10px;padding-bottom:10px;" value="Update"></div></form></bubble>'); fu_nxk();}},false,true);} function fu_scx(conversation,attachment,form){ fu_clu(); fu_jwg(); var data=fu_uwq(form); var postdata={}; postdata["conversation"]=conversation; postdata["attachment"]=attachment; postdata["content"]=ae(fu_csj(data["content"])); postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_conversation_edit_alt_attachment",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_bjt(conversation); fu_hrr("Your attachment alt text has been edited");}else{ fu_hrr(response["system_api_error"]);}
fu_nxk();},true);} function fu_bzw(conversation){ fu_clu(); fu_pbr(); fu_npw("https://"+s_hostname+"/get_conversation_info?query="+conversation+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_pco("container_modl","<h1>Edit content</h1>"); var contentstoedit=response["response_data"]["contents"]; contentstoedit=contentstoedit.replace(/\s\s/g, "\n"); contentstoedit=contentstoedit.replace(/~~/g, "\t"); var sizemax=s_char_reg; if (su_pro==true){ var sizemax=s_char_pro;}
fu_pco("container_modl","<bubble class='alt1'>Once you are done and happy with the changes you can tap update.</bubble>"); fu_pco("container_modl",'<bubble><form name="edit" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea class="input fullsize" name="content" size="50" maxlength="5000" placeholder="You will need some content..." charcost="true" charcostcase="edit_costbox" maxsize="'+sizemax+'">'+contentstoedit+'</textarea><BR><BR><div id="edit_costbox" class="tab nohover" style="float: right;margin-top: 5px;"></div><input type="submit" name="submit" onclick="fu_pja(\''+conversation+'\',this.form); return false;" style="float: left;width: 150px;padding-top:10px;padding-bottom:10px;" value="Update"></div></form></bubble>'); fu_nxk();}},false,true);} function fu_pja(conversation,form){ fu_clu(); fu_jwg(); var data=fu_uwq(form); var postdata={}; postdata["conversation"]=conversation; postdata["content"]=ae(fu_csj(data["content"])); postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_conversation_edit",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_bjt(conversation); fu_hrr("Your conversation has been edited");}else{ if (response["system_api_error"]=="notpro"){ fu_hrr("You are not pro so are unable to use this action");}else{ fu_hrr(response["system_api_error"]);}}
fu_nxk();},true);} function fu_jqv(conversation){ fu_clu(); fu_pbr(); fu_npw("https://"+s_hostname+"/get_conversation_info?query="+conversation+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_pco("container_modl","<h1>Attach photo</h1>"); fu_pco("container_modl",'<bubble><form name="edit" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea id="imagedata_source" activated="true" style="position:fixed;left:0px;top:-2000px;" name="photo"></textarea><div id="uploader_previewarea"></div><input type="file" onchange="fu_pxf(this,\'imagedata_source\',\'uploader_previewarea\',\'uploader_readytosend\',\'images\')" /><BR><BR><input type="submit" name="submit" id="uploader_readytosend" onclick="fu_hap(\''+conversation+'\',this.form); return false;" value="Attach" disabled></div></form></bubble>'); fu_nxk();}},false,true);} function fu_hap(conversation,form){ fu_clu("Attaching Photo..."); fu_jwg(); var data=fu_uwq(form); var postdata={}; postdata["conversation"]=conversation; postdata["file"]=ae(data["photo"]); postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_conversation_attach_photo",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_bjt(conversation); fu_hrr("The photo has been attached to the conversation");}else{ fu_bjt(conversation); fu_hrr("The photo failed to get attached");}}else{ fu_hrr(response["system_api_error"]);}
fu_nxk();},true);} function fu_suk(conversation){ fu_clu(); fu_pbr(); fu_npw("https://"+s_hostname+"/get_conversation_info?query="+conversation+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_pco("container_modl","<h1>Attach file</h1>"); fu_pco("container_modl",'<bubble><form name="edit" onsubmit="return isValidForm()"><div style="text-align:center;">If you upload a video file it will take a second after to make the thumbnail.<BR><BR><textarea id="imagedata_source" activated="true" style="position:fixed;left:0px;top:-200px;" name="file"></textarea><div id="uploader_previewarea"></div><input type="file" onchange="fu_pxf(this,\'imagedata_source\',\'uploader_previewarea\',\'uploader_readytosend\')" /><BR><BR><input type="submit" name="submit" id="uploader_readytosend" onclick="fu_bws(\''+conversation+'\',this.form); return false;" value="Attach" disabled></div></form></bubble>'); fu_nxk();}},false,true);} function fu_bws(conversation,form){ fu_clu("Attaching File..."); fu_jwg(); var data=fu_uwq(form); var postdata={}; postdata["conversation"]=conversation; postdata["file"]=ae(data["file"]); postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_conversation_attach_file",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_bjt(conversation); fu_hrr("The file has been attached to the conversation");}else{ fu_bjt(conversation); fu_hrr("The file failed to get attached, it might be a file type not allowed");}}else{ fu_hrr(response["system_api_error"]);}
fu_nxk();},true);}
function fu_igq(container,textarea){ if (aa("action_editor_preview_results")){ fu_mxp(container);}else{ fu_mxp(container); var contents=aa(textarea).value; contents=fu_uiv(contents); contents=fu_idd(contents); contents=fu_ibd(contents); contents=fu_cpd(contents); contents=fu_esd(contents); contents=fu_ebi(contents); fu_pco(container,'<a style="float:right;" href="javascript:fu_mxp(\''+container+'\');">Close</a><h3 style="margin-top:0px;text-align: left;">Preview</h3><bubble class="conversation" style="padding:0px;margin:0px;" id="action_editor_preview_results">'+contents+'</bubble>');}} function fu_njs(container){ fu_mxp(container); fu_pco(container,'<a style="float:right;" href="javascript:fu_mxp(\''+container+'\');">Close</a><h3 style="margin-top:0px;text-align: left;">Attach Photo</h3><bubble class="alt1" style="padding: 10px !important;">Tip: Once posted you can attach more photos and edit the alt text by tapping [edit] on the conversation/comment.</bubble><textarea id="imagedata_source" activated="true" style="position:fixed;left:0px;top:-2000px;" name="photo"></textarea><div id="uploader_previewarea"></div><input type="file" onchange="fu_pxf(this,\'imagedata_source\',\'uploader_previewarea\',false,\'images\')" />');} function fu_hhi(container,textarea){ if (aa("action_editor_gif_results")){ fu_mxp(container);}else{ fu_mxp(container); fu_pco(container,'<a style="float:right;" href="javascript:fu_mxp(\''+container+'\');">Close</a><h3 style="margin-top:0px;text-align: left;">Search for GIF</h3><form action="#" onsubmit="javascript:fu_kfg(this,\''+container+'\',\''+textarea+'\');"><input type="text" name="search" style="max-width: calc(100% - 24px);" placeholder="Search for a GIF..."></form></div><div style="line-height: 0px;" id="action_editor_gif_results"></div>');}} function fu_kfg(form,container,textarea){ event.preventDefault(); var data=fu_uwq(form); fu_mxp("action_editor_gif_results"); fu_pco("action_editor_gif_results","<div class='loading'></div>"); var giflimit=12; fu_npw("https://"+s_hostname+"/get_bot_giphy_search?query="+ae(fu_csj(data["search"]))+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("action_editor_gif_results"); fu_pco("action_editor_gif_results","<div style='margin-top:20px;'></div>"); fu_qeq(response["response_data"], function(id){ if (giflimit>=1){ giflimit=giflimit-1; var content=response["response_data"][""+id+""]; fu_pco("action_editor_gif_results",'<div style="display:inline-block;width:25%;"><div style="padding:2px;"><bubble style="padding:0px;margin:0px;cursor: pointer;" onclick="javascript:fu_ahv(\''+content["image_large"]+'\',\''+container+'\',\''+textarea+'\');"><div style="position: absolute; width: 100%; top: 20px;"><div class="loading"></div></div><div class="aspectcase eightbyfive"><div class="media_bg content" style="background-repeat: no-repeat;background-size: contain;background-position-x: center;background-position-y: center;background-image: url(\'https://proxy.heycafecdn.com/ext_image/gif/?url='+content["image_preview"]+'&quality=raw\');"></div></div></bubble></div></div>');}});}else{ fu_few("Not able to load any gifs...");}},false,true);} function fu_ahv(url,container,textarea){ fu_mxp(container); aa(textarea).innerHTML=""+aa(textarea).innerHTML+" "+url+""; fu_mqk(true);} function fu_qxc(type,resource,level){ fu_clu(); fu_jwg(); var postdata={}; postdata["type"]=type; postdata["resource"]=resource; postdata["level"]=level; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_account_report",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_hrr("The report has been sent in, we may or may not update you on the outcome");}else{ fu_hrr(response["system_api_error"]);}
fu_nxk();});}
function fu_fpd(account){ fu_clu(); fu_pbr(); fu_pco("container_modl","<h1>Staff Menu</h1>"); fu_npw("https://"+s_hostname+"/get_account_info?query="+account+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_npw("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var accountresponse = fu_hdg(result); if (accountresponse["system_api_error"]==false){ if (accountresponse["response_data"]["admin"]=="1"){ fu_pco("container_modl","<h2>Admin Level</h2>"); fu_pco("container_modl","<bubble><div class='minibubble' onclick=\"javascript:fu_qie('account_ban','"+account+"','false');\"><strong style='display: inline-block;margin-bottom: 10px;'>Ban</strong><BR>Ban account if it breaks the rules.</div></bubble>");} if (accountresponse["response_data"]["moderator"]=="1"){ fu_pco("container_modl","<h2>Moderator Level</h2>"); fu_pco("container_modl","<bubble><div class='minibubble' onclick=\"javascript:fu_qie('account_ban','"+account+"','false');\"><strong style='display: inline-block;margin-bottom: 10px;'>Ban</strong><BR>Ban account if it breaks the rules.</div></bubble>");}} });}
fu_nxk();});} function fu_kvu(cafe){ fu_clu(); fu_pbr(); fu_pco("container_modl","<h1>Staff Menu</h1>"); fu_npw("https://"+s_hostname+"/get_cafe_info?query="+cafe+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_npw("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var accountresponse = fu_hdg(result); if (accountresponse["system_api_error"]==false){ if (accountresponse["response_data"]["admin"]=="1"){ fu_pco("container_modl","<h2>Admin Level</h2>"); fu_pco("container_modl","<bubble><div class='minibubble' onclick=\"javascript:fu_qie('cafe_ban','"+account+"','false');\"><strong style='display: inline-block;margin-bottom: 10px;'>Ban</strong><BR>Ban café if it breaks the rules.</div></bubble>");} if (accountresponse["response_data"]["moderator"]=="1"){ fu_pco("container_modl","<h2>Moderator Level</h2>"); fu_pco("container_modl","<bubble><div class='minibubble' onclick=\"javascript:fu_qie('cafe_ban','"+account+"','false');\"><strong style='display: inline-block;margin-bottom: 10px;'>Ban</strong><BR>Ban café if it breaks the rules.</div></bubble>");}} });}
fu_nxk();});}
function fu_ewy(msg, url, lineNo, columnNo, error){ var cancrash=false; var isvalid=true; if (typeof value=="string" && value.indexOf('Invalid regular expression') > -1){ if (typeof value=="string" && value.indexOf('Emoji') > -1){ isvalid=false;}} if (isvalid==true){ if (s_domain=="beta.hey.cafe"){ }} } function fu_ftg(msg, url, lineNo, columnNo, error){ var id=fu_hmk(20); var body="Here is the report ID "+id+".\n"; body=body+"\nsp: "+sp+""; body=body+"\ns_width: "+s_width+""; body=body+"\ns_mode: "+s_mode+""; body=body+"\ns_pwa: "+s_pwa+""; body=body+"\nendpoint: "+s_hostname+""; body=body+"\nuseragent: "+navigator.userAgent+""; body=body+"\nerror_line: "+lineNo+""; body=body+"\nerror_column: "+columnNo+""; body=body+"\nerror: "+error+""; var xhr = new XMLHttpRequest(); xhr.onreadystatechange = function(){ if(xhr.readyState==4 && xhr.status==200){ }}
let reportbody = fu_ere({"event": "Application Crash","project": "heycafe","channel": "radar","icon": "🔥","description": body}); xhr.open("POST", "https://api.logsnag.com/v1/log", true); xhr.setRequestHeader('Authorization', 'Bearer c9cd6fbc431c66d3e378298e931f162a'); xhr.setRequestHeader("Content-Type","application/json"); xhr.send(reportbody);} function fu_drb(){ s_reloadkill=true; location.reload();} function fu_wlm(){ if (su_id==null){ fu_wrg("/"); return false;}else{ return true;}} function fu_llf(){ window.scrollTo(0,0); var pagefound=false; fu_vbf(""); fu_qyp(""); fu_bgt(""); fu_uyr(""); sic=false; sic_type="false"; sic_last="false"; sic_resource="false"; sic_resource_sub="false"; sic_function=""; if (sprender!=sp){ sprender=sp; fu_mxp("js_content");} if (sp=="/"){ pagefound=true; fu_plx();} if (sp=="/debug"){ pagefound=true; fu_nkz();} if (sp=="/login"){ pagefound=true; fu_qhg();} if (sp=="/register"){ pagefound=true; fu_hhh();} if (sp=="/logout"){ pagefound=true; fu_xqd();} if (sp.startsWith("/feed")){ pagefound=true; fu_jnu();} if (sp.startsWith("/cafes")){ pagefound=true; fu_dpi();} if (sp.startsWith("/tags")){ pagefound=true; fu_vhd();} if (sp.startsWith("/explore")){ pagefound=true; fu_wzc();} if (sp.startsWith("/messages")){ pagefound=true; fu_iqy();} if (sp.startsWith("/settings")){ pagefound=true; fu_tct();} if (sp.startsWith("/notifications")){ pagefound=true; fu_wsd();} if (sp.startsWith("/home")){ pagefound=true; fu_plx();} if (sp.startsWith("/help")){ pagefound=true; fu_lxi();} if (sp.startsWith("/delete")){ pagefound=true; fu_gtl();} if (sp.startsWith("/@")){ pagefound=true; fu_agq();} if (sp.startsWith("/!")){ pagefound=true; fu_erm();} if (sp.startsWith("/e/")){ pagefound=true; fu_tww();} if (sp.startsWith("/r/")){ pagefound=true; fu_tay();} if (sp.startsWith("/share")){ pagefound=true; fu_sde();} if (sp.startsWith("/videos")){ pagefound=true; fu_iqi();} if (sp.startsWith("/conversation")){ pagefound=true; fu_uej();} if (sp.startsWith("/referral")){ pagefound=true; fu_tay();} if (sp.startsWith("/embed")){ pagefound=true; fu_ewk();} if (sp.startsWith("/request")){ pagefound=true; fu_ovb();} if (sp.startsWith("/search")){ pagefound=true; fu_hae();} if (sp.startsWith("/p/")){ pagefound=true; fu_mof();} if (sp.startsWith("/c/")){ pagefound=true; fu_mof();} if (sp.startsWith("/#")){ pagefound=true; fu_mof();} if (sp.startsWith("/staff")){ pagefound=true; fu_tds();} if (pagefound==false){ fu_wrg("/e/404");}} function fu_wrg(url){ if (s_embed==false){ if (!url.match(/https:/)){ fu_jwg(); if (shl_url!=url){ if (url!=sp){ if (aa("container_content")){ shl_url=sp; shl_contents=aa("container_content").innerHTML; shl_structure=s_structure; shl_scroll=window.scrollY; shl_meta_title=sp_title; shl_meta_description=sp_description; shl_meta_url=sp_url; shl_meta_image=sp_image;}} }
sp=url; if (s_pwa==false){ history.pushState(null, null, sp);}
sh.push(url); fu_llf();}else{ var openSafari = aa('uiOpenSafari'); openSafari.setAttribute('href', url); openSafari.click();}}else{ window.open(url, '_blank').focus();}} function fu_zng(){ if (s_embed==false){ var refreshscrollposition=window.scrollY; fu_jwg(); fu_wrg(sp); setTimeout(function(){ window.scrollTo(0, refreshscrollposition);}, 550);}} function fu_ixc(){ var count=sh.length; if (count>=2){ var url=sh[count-2]; sh.splice((count-1), 1); sh.splice((count-2), 1); sh.push(url); sp=url; if (s_pwa==false){ history.pushState(null, null, url);} if (shl_url!=sp){ fu_llf();}else{ shl_url=sp; fu_wta(shl_structure); aa("container_content").innerHTML=shl_contents; setTimeout(function(){ window.scrollTo(0, shl_scroll);}, 5); fu_vbf(shl_meta_title); fu_qyp(shl_meta_description); fu_uyr(shl_meta_url); fu_bgt(shl_meta_image); fu_jsf(); setTimeout(function(){ fu_jsf();}, 500); setTimeout(function(){ shl_url=false; shl_contents=false; shl_structure=false; shl_scroll=false; shl_meta_title=""; shl_meta_description=""; shl_meta_url=""; shl_meta_image="";}, 10);}} }
Element.prototype.remove = function(){ if (this!=null){ if (this.parentElement!=null){ this.parentElement.removeChild(this);}} }
NodeList.prototype.remove = HTMLCollection.prototype.remove = function(){ for(var i = this.length - 1; i >= 0; i--){ if(this[i] && this[i].parentElement){ this[i].parentElement.removeChild(this[i]);}} }
String.prototype.escapeSpecialChars = function(){ return this.replace(/\\n/g, "\\n")
.replace(/\\'/g, "\\'")
.replace(/\\"/g, '\\"')
.replace(/\\&/g, "\\&")
.replace(/\\r/g, "\\r")
.replace(/\\t/g, "\\t")
.replace(/\\b/g, "\\b")
.replace(/\\f/g, "\\f");}; String.prototype.hashCode = function(){ var hash = 0, i, chr; if (this.length === 0) return hash; for (i = 0; i < this.length; i++){ chr = this.charCodeAt(i); hash = ((hash << 5) - hash) + chr; hash |= 0;} return hash;}; Array.prototype.remove = function(from, to){ var rest = this.slice((to || from) + 1 || this.length); this.length = from < 0 ? this.length + from : from; return this.push.apply(this, rest);}; function fu_twy(el){ var _x = 0; var _y = 0; while( el && !isNaN( el.offsetLeft ) && !isNaN( el.offsetTop ) ){ _x += el.offsetLeft - el.scrollLeft; _y += el.offsetTop - el.scrollTop; el = el.offsetParent;} return { top: _y, left: _x };} function fu_wid(text,string){ text=text.replaceAll(string, "__RTGMATCH__"); var count = (text.match(/__RTGMATCH__/g) || []).length; return count;} function fu_cxk(parent, child){ var node = child.parentNode; while (node != null){ if (node==parent){ return true;}
node = node.parentNode;} return false;} function fu_amb(url){ var matches=url.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i); return matches && matches[1];} function fu_mtb(contents){ contents = contents.replaceAll("\t","~~"); contents = contents.replaceAll("\r",""); contents = contents.replaceAll("\n","\xa0\xa0"); contents = contents.replaceAll("|","&#124;"); contents = contents.replaceAll("\\","&#92;"); contents = contents.replaceAll("(c)","&#169;"); contents = contents.replaceAll("(r)","&#174;"); contents = contents.replaceAll("\"","&#34;"); contents = contents.replaceAll("'","&#39;"); contents = contents.replaceAll("<","&#60;"); contents = contents.replaceAll(">","&#62;"); contents = contents.replaceAll("+","&#43;"); contents = contents.replaceAll("`","&#96;"); return contents;} function fu_csj(str){ return btoa(ae(str).replace(/%([0-9A-F]{2})/g,
function fu_pcq(match, p1){ return String.fromCharCode('0x'+p1);}));} function fu_aic(str){ return str.replace(/&#([0-9]{1,3});/gi, function(match, numStr){ var num = parseInt(numStr, 10); return String.fromCharCode(num);});} function fu_zxq(x){ return (decodeURI(x) !== decodeURIComponent(x));} function fu_xla(str){ if (str!=null){ return decodeURIComponent(atob(str).split('').map(function(c){ return '%'+('00'+c.charCodeAt(0).toString(16)).slice(-2);}).join(''));}else{ return str;}} function fu_bkq(parent, child){ let node = child.parentNode; while (node){ if (node === parent){ return true;}
node = node.parentNode;} return false;} function fu_urc(node, chars, range){ if (!range){ range = document.createRange()
range.selectNode(node); range.setStart(node, 0);} if (chars.count === 0){ range.setEnd(node, chars.count);} else if (node && chars.count >0){ if (node.nodeType === Node.TEXT_NODE){ if (node.textContent.length < chars.count){ chars.count -= node.textContent.length;}else{ range.setEnd(node, chars.count); chars.count = 0;}}else{ for (var lp = 0; lp < node.childNodes.length; lp++){ range = fu_urc(node.childNodes[lp], chars, range); if (chars.count === 0){ break;}} }} return range;} function fu_iyi(element,chars){ if (chars >= 0){ var selection = window.getSelection(); range = fu_urc(element.parentNode, { count: chars }); if (range){ range.collapse(false); selection.removeAllRanges(); selection.addRange(range);}} } function fu_cpl(element){ var caretOffset = 0; var doc = element.ownerDocument || element.document; var win = doc.defaultView || doc.parentWindow; var sel; if (typeof win.getSelection != "undefined"){ sel = win.getSelection(); if (sel.rangeCount > 0){ var range = win.getSelection().getRangeAt(0); var preCaretRange = range.cloneRange(); preCaretRange.selectNodeContents(element); preCaretRange.setEnd(range.endContainer, range.endOffset); caretOffset = preCaretRange.toString().length;}} else if ( (sel = doc.selection) && sel.type != "Control"){ var textRange = sel.createRange(); var preCaretTextRange = doc.body.createTextRange(); preCaretTextRange.moveToElementText(element); preCaretTextRange.setEndPoint("EndToEnd", textRange); caretOffset = preCaretTextRange.text.length;} return caretOffset;} function fu_yxq(element){ return element.textContent.length;} function fu_atf(x){ return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");} function fu_dmf(text){ var urlmatches = text.match(/\bhttps?:\/\/([^\<\>\"\'\n\s]+)\b/gi); fu_qeq(urlmatches, function(id){ var data=urlmatches[""+id+""]; data=data.replaceAll("&#34;", ""); data=data.replaceAll("&#39;", ""); data=data.replaceAll("&gt;", ""); data=data.replaceAll("&lt;", ""); text=text.replace(data, "");}); return text;} function fu_ojk(text,size){ var size=parseInt(size); var textinbox=text; var count=text.length; var urlmatches = textinbox.match(/\bhttps?:\/\/([^\<\>\"\'\n\s]+)\b/gi); fu_qeq(urlmatches, function(id){ var data=urlmatches[""+id+""]; data=data.replaceAll("&#34;", ""); data=data.replaceAll("&#39;", ""); data=data.replaceAll("&gt;", ""); data=data.replaceAll("&lt;", ""); textinbox=textinbox.replace(data, "1234567890123456789012345678901234567890");}); var newcount=textinbox.length; var calcdiff=Math.round(count-newcount); if (calcdiff<=0){ calcdiff=0;} var calcnewmax=Math.round(size+calcdiff); return text.substring(0, calcnewmax);} function fu_xkk(x){ if (x>=1000){ return ""+(Math.round((x/1000) * 10) / 10)+"k";}else{ return x;}} function fu_qeq(object, callback){ for(var prop in object){ if(object.hasOwnProperty(prop)){ callback(prop, object[prop]);}} } function fu_zlw(text, limit){ if (text.length > limit){ for (let i = limit; i > 0; i--){ if(text.charAt(i) === ' ' && (text.charAt(i-1) != ','||text.charAt(i-1) != '.'||text.charAt(i-1) != ';')){ return text.substring(0, i)+'...';}} return text.substring(0, limit)+'...';} else return text;}; function fu_ccj(sname, svalue){ if (svalue!=""){ window.localStorage.setItem(sname, svalue);}} function fu_rpz(sname){ if (window.localStorage){ if (window.localStorage.getItem(sname)!=null){ return window.localStorage.getItem(sname);}else{ return "";}}else{ return "";}} function fu_ymy(sname){ if (window.localStorage){ if (window.localStorage.getItem(sname)!=null){ window.localStorage.removeItem(sname);}} } function fu_gxi(cname, cvalue, exdays){ var d = new Date(); d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000)); var expires = "expires="+d.toUTCString(); document.cookie = cname+"="+cvalue+";"+expires+";domain=.hey.cafe;path=/";} function fu_pkg(cname){ var name = cname+"="; var decodedCookie = decodeURIComponent(document.cookie); var ca = decodedCookie.split(';'); for (var i = 0; i <= (ca.length-1); i++){ var c = ca[i]; while (c.charAt(0)==' '){ c = c.substring(1);} if (c.indexOf(name)==0){ return c.substring(name.length, c.length);}} return "";} function fu_cxt(){ var cookies = document.cookie.split("; "); for (var c = 0; c < cookies.length; c++){ var d = window.location.hostname.split("."); while (d.length > 0){ var cookieBase = ae(cookies[c].split(";")[0].split("=")[0])+'=; expires=Thu, 01-Jan-1970 00:00:01 GMT; domain='+d.join('.')+' ;path='; var p = location.pathname.split('/'); document.cookie = cookieBase+'/'; while (p.length > 0){ document.cookie = cookieBase + p.join('/'); p.pop();}; d.shift();}} } function fu_rzh(cname){ document.cookie = cname+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT;domain=.hey.cafe;path=/";} function fu_csj(str){ return btoa(ae(str).replace(/%([0-9A-F]{2})/g, function(match, p1){ return String.fromCharCode('0x'+p1);}));} function fu_hmk(len, charSet){ charSet = charSet || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'; var randomString = ''; for (var i = 0; i < len; i++){ var randomPoz = Math.floor(Math.random() * charSet.length); randomString += charSet.substring(randomPoz,randomPoz+1);} return randomString;} function fu_hdg(data){ let datanew=JSON.parse(data); return datanew;} function fu_ere(data){ let datanew=JSON.stringify(data); return datanew;} function fu_uwq(form){ var sarray=new Array(); for ( var i = 0; i < form.elements.length; i++ ){ var fieldName = form.elements[i].name; var fieldValue = form.elements[i].value; sarray[""+fieldName+""]=fieldValue;} return sarray;}
function fu_cpd(string){ var stringnew=string; if (stringnew!=undefined){ var matches = stringnew.match(/\p{RI}\p{RI}|\p{Emoji}(\p{EMod}+|\u{FE0F}\u{20E3}?|[\u{E0020}-\u{E007E}]+\u{E007F})?(\u{200D}\p{Emoji}(\p{EMod}+|\u{FE0F}\u{20E3}?|[\u{E0020}-\u{E007E}]+\u{E007F})?)+|\p{EPres}(\p{EMod}+|\u{FE0F}\u{20E3}?|[\u{E0020}-\u{E007E}]+\u{E007F})?|\p{Emoji}(\p{EMod}+|\u{FE0F}\u{20E3}?|[\u{E0020}-\u{E007E}]+\u{E007F})/gu); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var replace=""; for (var ch of data){ if (ch!=""){ emo=ch.codePointAt(0).toString(16); if (replace==""){ replace=""+emo+"";}else{ replace=""+replace+"-"+emo+"";}} } if (replace.length==9){ if (replace.includes("fe0f")){ replace=replace.replace("-fe0f", "");}} if (replace.length==10){ if (replace.includes("fe0f")){ replace=replace.replace("-fe0f", "");}} if (replace!="" && replace!="200d" && replace!="ea00"){ stringnew=stringnew.replace(data, "<img alt='"+fu_csj(data)+"' emojidata='"+fu_csj(data)+"' emoji='true' class='emojiconvert' src='https://assets.heycafecdn.com/emoji/svg/"+replace+".svg' style='width: 1.2em;margin-left: 2px;margin-right: 2px;display: inline;vertical-align: text-top;'>");}}); var matches = stringnew.match(/([\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2694-\u2697]|\uD83E[\uDD10-\uDD5D])/g); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var replace=""; emo=data.codePointAt(0).toString(16); replace=""+emo+""; if (replace!="" && replace!="200d" && replace!="ea00"){ stringnew=stringnew.replace(data, "<img alt='"+fu_csj(data)+"' emoji='true' class='emojiconvert' src='https://assets.heycafecdn.com/emoji/svg/"+replace+".svg' style='width: 1.2em;margin-left: 2px;margin-right: 2px;display: inline;vertical-align: text-top;'>");}});} return stringnew;}
function fu_klh(contents){ var urlmatches = contents.match(/\bhttps?:\/\/([^\<\>\"\'\n\s]+)\b/gi); fu_qeq(urlmatches, function(id){ var data=urlmatches[""+id+""]; contents=contents.replace(""+data+"/", data); data=data.replaceAll("&#34;", ""); data=data.replaceAll("&#39;", ""); data=data.replaceAll("&gt;", ""); data=data.replaceAll("&lt;", ""); data=data.replace("http://", "https://"); var previewurl=data; previewurl=previewurl.replace("https://", ""); previewurl=previewurl.replace("http://", ""); previewurl=previewurl.replace("www.", ""); contents=contents.replace(data, "");}); return contents;} function fu_nwo(contents,newlines){ contents=contents.trim(); contents=" "+contents+" "; if (newlines==undefined){ newlines=false;} if (newlines==true){ contents=contents.replace(/\s\s\s\s/g, "<br><br>"); contents=contents.replace(/\s\s/g, "<br>"); contents=contents.replace(/\<br\>\s\s/g, "<br>"); contents=contents.replace(/\<br\>\s/g, "<br>"); contents=contents.replace(/~~/g, "\t"); contents=contents.replace(/\<br\>\<br\>\<br\>/g, "<br><br>"); contents=contents.replace(/\<br\>\<br\>\<br\>/g, "<br><br>"); contents=contents.replace(/\<br\>\<br\>\<br\>/g, "<br><br>");} var matches = contents.match(/(\*\*\s)([^\n\*]+)(\s\*\*)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\*\*\s)([^\n\*]+)(\s\*\*)/); contents=contents.replace(result[0], "<strong>"+result[2]+"</strong>");}); var matches = contents.match(/(\`\s)([^\n\`]+)(\s\`)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\`\s)([^\n\`]+)(\s\`)/); contents=contents.replaceAll(result[0], "<code>"+result[2]+"</code>");}); var matches = contents.match(/(\*\_\s)([^\n\*]+)(\s\_\*)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\*\_\s)([^\n\*]+)(\s\_\*)/); contents=contents.replace(result[0], "<rainbow>"+result[2]+"</rainbow>");}); var matches = contents.match(/(\_\_\s)([^\n\_]+)(\s\_\_)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\_\_\s)([^\n\_]+)(\s\_\_)/); contents=contents.replace(result[0], "<i>"+result[2]+"</i>");}); var matches = contents.match(/([^&a-z0-9A-Z\/]\@)([a-z0-9A-Z\-\_]+)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\@)([a-z0-9A-Z\-\_]+)/); var id=fu_hmk(20); if (fu_wid(contents,result[0])<=1){ contents=contents.replace(result[0], "<action type='inview_load_mention' element='mention_"+id+"' alias='"+result[2]+"'></action><text class='mention' id='mention_"+id+"'><a href='/@"+result[2]+"'>@"+result[2]+"</a></text>");}}); var matches = contents.match(/([^&a-z0-9A-Z\/]\!)([a-z0-9A-Z\-\_]+)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/([^&]\!)([a-z0-9A-Z\-\_]+)/); var id=fu_hmk(20); if (fu_wid(contents,result[0].substring(1))<=1){ contents=contents.replace(result[0].substring(1), "<action type='inview_load_cafe' element='cafe_"+id+"' alias='"+result[2]+"'></action><text class='mention' id='cafe_"+id+"'><a href='/!"+result[2]+"'>!"+result[2]+"</a></text>");}}); var matches = contents.match(/([^&a-z0-9A-Z\/]\#)([a-z0-9A-Z\-\_]+)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/([^&]\#)([a-z0-9A-Z\-\_]+)/); var id=fu_hmk(20); if (fu_wid(contents,result[0].substring(1))<=1){ contents=contents.replace(result[0].substring(1), "<action type='inview_load_tag' element='tag_"+id+"' alias='"+result[2]+"'></action><text class='hashtag' id='tag_"+id+"'><a href='/search/"+result[2]+"'>#"+result[2]+"</a></text>");}}); contents=contents.trim(); return contents;} function fu_dwb(contents){ var urlmatches = contents.match(/\bhttps?:\/\/([^\<\>\"\'\n\s]+)\b/gi); fu_qeq(urlmatches, function(id){ var data=urlmatches[""+id+""]; contents=contents.replace(""+data+"/", data); data=data.replaceAll("&#34;", ""); data=data.replaceAll("&#39;", ""); data=data.replaceAll("&gt;", ""); data=data.replaceAll("&lt;", ""); data=data.replace("http://", "https://"); var previewurl=data; previewurl=previewurl.replace("https://", ""); previewurl=previewurl.replace("http://", ""); previewurl=previewurl.replace("www.", ""); contents=contents.replace(data, "<a href='"+data+"' target='_blank' rel='noreferrer'>"+previewurl+"</a>");}); return contents;} function fu_uiv(contents){ contents=contents.trim(); contents="<p>"+contents+"</p>"; contents=contents.replace(/\&\#124\;/g, "|"); contents=contents.replace(/\&\#96\;/g, "`"); if (contents.includes("{media_spoiler}")){ contents=contents.replace("{media_spoiler}", "");} var matches = contents.match(/\&\#60\;script(.*?)script\&\#62\;/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\&\#60\;script(.*?)script\&\#62\;/); if (result[0]!=""){ contents=contents.replace(result[0], "[["+fu_csj(result[0])+"]]");}}); var matches = contents.match(/\&lt\;script(.*?)script\&gt\;/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\&lt\;script(.*?)script\&gt\;/); if (result[0]!=""){ contents=contents.replace(result[0], "[["+fu_csj(result[0])+"]]");}}); var matches = contents.match(/\&\#60\;style(.*?)style\&\#62\;/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\&\#60\;style(.*?)style\&\#62\;/); if (result[0]!=""){ contents=contents.replace(result[0], "[["+fu_csj(result[0])+"]]");}}); var matches = contents.match(/\&lt\;style(.*?)style\&gt\;/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\&lt\;style(.*?)style\&gt\;/); if (result[0]!=""){ contents=contents.replace(result[0], "[["+fu_csj(result[0])+"]]");}}); var matches = contents.match(/(\`\`\`\s)(.*?[^\`])(\s\`\`\`)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\`\`\`\s)(.*?[^\`])(\s\`\`\`)/); var newcontent=result[2].trim(); var encodematches = newcontent.match(/\[\[(.*?)\]\]/gi); fu_qeq(encodematches, function(id){ var encdata=encodematches[""+id+""]; var encresult = newcontent.match(/\[\[(.*?)\]\]/); newcontent=newcontent.replace(encresult[0], fu_xla(encresult[1]));}); newcontent=newcontent.replace(/\s\s/g, "\n"); newcontent=newcontent.replace(/\:tick\:/g, "&#96;"); newcontent=newcontent.replace(/\:hashtag\:/g, "&#35;"); newcontent=newcontent.replace(/\:tab\:/g, "&#9;"); newcontent=newcontent.replace(/\//g, "&#47;"); newcontent=newcontent.replace(/\-/g, "&#45;"); newcontent=newcontent.replace(/~~/g, "\t"); newcontent=newcontent.replace(/\-/g, "&#45;"); newcontent=newcontent.replace(/\*/g, "&#42;"); newcontent=newcontent.replace(/\_/g, "&#95;"); newcontent=newcontent.replace(/\|/g, "&#124;"); newcontent=newcontent.replace(/\{/g, "&#123;"); newcontent=newcontent.replace(/\}/g, "&#125;"); newcontent=newcontent.replace(/\!/g, "&#33;"); newcontent=newcontent.replace(/\@/g, "&#64;"); newcontent=newcontent.replace(/:/g, "&#58;"); contents=contents.replace(result[0], "<pre><code>"+newcontent+"</pre></code>");}); var matches = contents.match(/(\`\`\s)(.*?[^\`])(\s\`\`)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\`\`\s)(.*?[^\`])(\s\`\`)/); var newcontent=result[2].trim(); var encodematches = newcontent.match(/\[\[(.*?)\]\]/gi); fu_qeq(encodematches, function(id){ var encdata=encodematches[""+id+""]; var encresult = newcontent.match(/\[\[(.*?)\]\]/); newcontent=newcontent.replace(encresult[0], fu_xla(encresult[1]));}); newcontent=newcontent.replace(/\s\s/g, "\n"); newcontent=newcontent.replace(/\:tick\:/g, "&#96;"); newcontent=newcontent.replace(/\:hashtag\:/g, "&#35;"); newcontent=newcontent.replace(/\:tab\:/g, "&#9;"); newcontent=newcontent.replace(/\//g, "&#47;"); newcontent=newcontent.replace(/\-/g, "&#45;"); newcontent=newcontent.replace(/~~/g, "\t"); newcontent=newcontent.replace(/\-/g, "&#45;"); newcontent=newcontent.replace(/\*/g, "&#42;"); newcontent=newcontent.replace(/\_/g, "&#95;"); newcontent=newcontent.replace(/\|/g, "&#124;"); newcontent=newcontent.replace(/\{/g, "&#123;"); newcontent=newcontent.replace(/\}/g, "&#125;"); newcontent=newcontent.replace(/\!/g, "&#33;"); newcontent=newcontent.replace(/\@/g, "&#64;"); newcontent=newcontent.replace(/:/g, "&#58;"); contents=contents.replace(result[0], "<pre><code>"+newcontent+"</pre></code>");}); var matches = contents.match(/(\-\-\-\-\s)(.*?[^\-])(\s\-\-\-\-)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\-\-\-\-\s)(.*?[^\-])(\s\-\-\-\-)/); var newcontent=result[2].trim(); contents=contents.replace(result[0], "<details><summary>Reveal Content / Spoilers</summary>"+newcontent+"</pre></details>");}); contents=contents.replace(/\s\s\s\s/g, "</p><p>"); contents=contents.replace(/\s\s/g, "<br>"); contents=contents.replace(/\<p\>\s\s/g, "<p>"); contents=contents.replace(/\<p\>\s/g, "<p>"); contents=contents.replace(/\<p\>\<br\>/g, "<p>"); contents=contents.replace(/\<br\>\<p\>/g, "<p>"); contents=contents.replace(/~~/g, "\t"); var matches = contents.match(/(\#\#\#\s)([^\n\<\>]+)(\s\#\#\#)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\#\#\#\s)([^\n\<\>]+)(\s\#\#\#)/); contents=contents.replace(result[0], "<subheading>"+result[2].trim()+"</subheading>");}); var matches = contents.match(/(\#\#\s)([^\n\<\>]+)(\s\#\#)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\#\#\s)([^\n\<\>]+)(\s\#\#)/); contents=contents.replace(result[0], "<heading>"+result[2].trim()+"</heading>");}); var matches = contents.match(/(\*\*\s)([^\n\*]+)(\s\*\*)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\*\*\s)([^\n\*]+)(\s\*\*)/); contents=contents.replaceAll(result[0], "<strong>"+result[2]+"</strong>");}); var matches = contents.match(/(\`\s)([^\n\`]+)(\s\`)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\`\s)([^\n\`]+)(\s\`)/); contents=contents.replaceAll(result[0], "<code>"+result[2]+"</code>");}); var matches = contents.match(/(\*\_\s)([^\n\*]+)(\s\_\*)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\*\_\s)([^\n\*]+)(\s\_\*)/); contents=contents.replaceAll(result[0], "<rainbow>"+result[2]+"</rainbow>");}); var matches = contents.match(/(\!\_\s)([^\n\*]+)(\s\_\!)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\!\_\s)([^\n\*]+)(\s\_\!)/); var value=result[2]; value=value.substring(0, 25); contents=contents.replace(result[0], "<div><span class=\"sticker sticker\" data-text=\""+value+"\"><span>"+value+"</span></span></div>");}); var matches = contents.match(/(\_\_\s)([^\n\_]+)(\s\_\_)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\_\_\s)([^\n\_]+)(\s\_\_)/); contents=contents.replaceAll(result[0], "<i>"+result[2]+"</i>");}); var matches = contents.match(/(\|\|\s)(.*?[^\|])(\s\|\|)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\|\|\s)(.*?[^\|])(\s\|\|)/); contents=contents.replaceAll("<p>"+result[0]+"</p>", "<quote><p>"+result[2]+"</p></quote>"); contents=contents.replaceAll(result[0], "<quote><p>"+result[2]+"</p></quote>");}); var matches = contents.match(/(\<p\>\*\s)(.*?)(\<\/p\>)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\<p\>\*\s)(.*?)(\<\/p\>)/); contents=contents.replace(result[0], "<ul><li>"+result[2]+"</li></ul>");}); var matches = contents.match(/([^&a-z0-9A-Z\/]\@)([a-z0-9A-Z\-\_]+)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\@)([a-z0-9A-Z\-\_]+)/); var id=fu_hmk(20); if (fu_wid(contents,result[0])<=1){ if (result[2]!="everyone"){ contents=contents.replace(result[0], "<action type='inview_load_mention' element='mention_"+id+"' alias='"+result[2]+"'></action><text class='mention' id='mention_"+id+"'><a href='/@"+result[2]+"'>@"+result[2]+"</a></text>");}} }); var matches = contents.match(/([^&a-z0-9A-Z\/]\!)([a-z0-9A-Z\-\_]+)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/([^&]\!)([a-z0-9A-Z\-\_]+)/); var id=fu_hmk(20); if (fu_wid(contents,result[0].substring(1))<=1){ contents=contents.replace(result[0].substring(1), "<action type='inview_load_cafe' element='cafe_"+id+"' alias='"+result[2]+"'></action><text class='mention' id='cafe_"+id+"'><a href='/!"+result[2]+"'>!"+result[2]+"</a></text>");}}); var matches = contents.match(/([^&a-z0-9A-Z\/]\#)([a-z0-9A-Z\-\_]+)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/([^&]\#)([a-z0-9A-Z\-\_]+)/); var id=fu_hmk(20); if (fu_wid(contents,result[0].substring(1))<=1){ contents=contents.replace(result[0].substring(1), "<action type='inview_load_tag' element='tag_"+id+"' alias='"+result[2]+"'></action><text class='hashtag' id='tag_"+id+"'><a href='/search/"+result[2]+"'>#"+result[2]+"</a></text>");}}); var matches = contents.match(/(\{)file:([^\n\}\{]+)(\})/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\{)file:([^\n\}\{]+)(\})/); contents=contents.replace(result[0], "<attachment id='file_"+result[2].trim()+"'></attachment>");}); var matches = contents.match(/([^&a-z0-9A-Z\/]\:)([^\n\s\:\<\>\/]+)(\:)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\:)([^\n\s\:\<\>\/]+)(\:)/); var lookup_id="emojilookup_"+fu_hmk(30)+""; contents=contents.replace(result[0], "<action type='inview_load_emoji' element='"+lookup_id+"' text='"+result[2]+"'></action><text id='"+lookup_id+"'></text>");}); contents=contents.replace(/\<p\>/g, "<p dir=\"auto\">"); contents=contents.trim(); return contents;} function fu_ibd(contents){ var urlmatches = contents.match(/\bhttps?:\/\/([^\<\>\"\'\n\s]+)\b/gi); fu_qeq(urlmatches, function(id){ var data=urlmatches[""+id+""]; var generated=false; var meta_id="metadata_"+fu_hmk(30)+""; contents=contents.replace(""+data+"/", data); data=data.replaceAll("&#34;", ""); data=data.replaceAll("&#39;", ""); data=data.replaceAll("&gt;", ""); data=data.replaceAll("&lt;", ""); data=data.replace("http://", "https://"); var previewurl=data; previewurl=previewurl.replace("https://", ""); previewurl=previewurl.replace("http://", ""); previewurl=previewurl.replace("www.", ""); if (fu_wid(contents,data)<=1){ if (data.includes("hey.cafe")){ if (data.includes("/conversation/")){ var foundid = data.match(/(\/conversation\/)([^&\n?#\s\/]+)/); var conversationid=foundid[2]; if (conversationid!=undefined){ if (conversationid.includes("/")==false){ if (conversationid.includes(":")==false){ generated=true; contents=contents.replace(data, "<div><action type='inview_load_preview_conversation' element='"+meta_id+"' conversation='"+conversationid+"'></action><div id='"+meta_id+"'><p><a href='"+data+"' target='_blank' rel='noreferrer'>"+previewurl+"</a></p></div></div>");}else{ var commentid=false; var comm_arr = conversationid.split(':'); if (comm_arr!=null){ conversationid=comm_arr[0]; if (comm_arr[1]!=undefined){ commentid=comm_arr[1];}} if (commentid!=false){ generated=true; contents=contents.replace(data, "<div><action type='inview_load_preview_comment' element='"+meta_id+"' conversation='"+conversationid+"' comment='"+commentid+"'></action><div id='"+meta_id+"'><p><a href='"+data+"' target='_blank' rel='noreferrer'>"+previewurl+"</a></p></div></div>");}} }} }} if (data.includes("giphy.com")){ if (data.includes("/media/")){ var foundid = data.match(/(\/media\/|\/1\/)([^&\n?#]+)/); var imageid=foundid[2]; if (imageid!=undefined){ generated=true; contents=contents.replace(data, "<div class='media' style='display: inline-block;width: auto;max-width: 100%;'><a href=\"javascript:fu_ikg('https://proxy.heycafecdn.com/ext_image/gif/?url=https://media.giphy.com/media/"+imageid+"&quality=raw','image',true);\"><img style='max-width: 100%;max-height: 400px;height: auto;width: auto;' original='true' source='https://proxy.heycafecdn.com/ext_image/gif/?url=https://media.giphy.com/media/"+imageid+"&quality=raw' class='optimizer_img' alt='External linked image'></a></div>");}} } if (data.includes("c.tenor.com") && data.includes(".gif")){ var foundid = data.match(/c\.tenor\.com([^&\n?#]+)/); var imageid=foundid[1]; if (imageid!=undefined){ generated=true; contents=contents.replace(data, "<div class='media' style='display: inline-block;width: auto;max-width: 100%;'><a href=\"javascript:fu_ikg('https://proxy.heycafecdn.com/ext_image/gif/?url=https://c.tenor.com/"+imageid+"&quality=raw','image',true);\"><img style='max-width: 100%;max-height: 400px;height: auto;width: auto;' original='true' source='https://proxy.heycafecdn.com/ext_image/gif/?url=https://c.tenor.com/"+imageid+"&quality=raw' class='optimizer_img' alt='External linked image'></a></div>");}} if (generated==false){ if (contents.includes("("+data+")")==true || contents.includes("( "+data+" )")==true || contents.includes("("+data+" )")==true || contents.includes("( "+data+")")==true){ var foundandcustom=false; var tomatchagainst=data; var tomatchagainst=tomatchagainst.replace("http://", ""); var tomatchagainst=tomatchagainst.replace("https://", ""); var newgenmatch = contents.match(/\[([^\<\>\[\]]+)\]\(\bhttps?:\/\/([^\<\>\"\'\n\s]+)\b\)/gi); fu_qeq(newgenmatch, function(id){ var datanew=newgenmatch[""+id+""]; var newresult = datanew.match(/\[([^\<\>\[\]]+)\]\(\bhttps?:\/\/([^\<\>\"\'\n\s]+)\b\)/); var realurl=newresult[2]; var aliasname=newresult[1]; if (realurl==tomatchagainst){ foundandcustom=true; contents=contents.replace(datanew, "<a href='"+data+"' target='_blank' rel='noreferrer' data-title='"+data+"'>"+aliasname+"</a>");}}); var newgenmatch = contents.match(/\(\bhttps?:\/\/([^\<\>\"\'\n\s]+)\b\)/gi); fu_qeq(newgenmatch, function(id){ var datanew=newgenmatch[""+id+""]; var newresult = datanew.match(/\(\bhttps?:\/\/([^\<\>\"\'\n\s]+)\b\)/); var realurl=newresult[1]; if (realurl==tomatchagainst){ foundandcustom=true; contents=contents.replace(datanew, "<action type='inview_load_metadata_light' element='"+meta_id+"' url='"+data+"'></action><text id='"+meta_id+"'><a href='"+data+"' target='_blank' rel='noreferrer' data-title='"+data+"'>"+previewurl+"</a></text>");}}); if (foundandcustom==false){ contents=contents.replace(data, "<a href='"+data+"' target='_blank' rel='noreferrer'>"+previewurl+"</a>");}}else{ contents=contents.replace(data, "<div><action type='inview_load_metadata' element='"+meta_id+"' url='"+data+"'></action><div id='"+meta_id+"'><p><a href='"+data+"' target='_blank' rel='noreferrer'>"+previewurl+"</a></p></div></div>");}} }}); return contents;} function fu_esd(contents){ var matches = contents.match(/(\<p dir\=\"auto\"\>)(.*?)(\<\/p\>)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\<p dir\=\"auto\"\>)(.*?)(\<\/p\>)/); var conresult=result[0]; var emojifound=false; var emojmatches = conresult.match(/\<img alt='([^\<\>]+)' emojidata='([^\<\>]+)' emoji='true' ([^\<\>]+)\>/gi); fu_qeq(emojmatches, function(id){ emojifound=true; var emojdata=emojmatches[""+id+""]; var emojresult = emojdata.match(/\<img alt='([^\<\>]+)' emojidata='([^\<\>]+)' emoji='true' ([^\<\>]+)\>/); conresult=conresult.replace(emojresult[0], "");}); if (emojifound==true){ if (conresult=="<p dir=\"auto\"></p>"){ contents=contents.replace(result[0], "<p dir=\"auto\"><text style=\"font-size:2em;\">"+result[2]+"</text></p>");}} }); return contents;} function fu_ebi(contents){ var matches = contents.match(/Wordle (.*?)\<\/p\>(\<p dir\=\"auto\"\>)(.*?)(\<\/p\>)/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/Wordle (.*?)\<\/p\>(\<p dir\=\"auto\"\>)(.*?)(\<\/p\>)/); var wordlebubbles=result[3]; var wordlebubblesfixed=wordlebubbles.replaceAll(/>\s\s<img/g, "></p><p style=\"margin-top: -10px;\" dir=\"auto\"><img"); contents=contents.replace(wordlebubbles, wordlebubblesfixed);}); return contents;} function fu_idd(contents){ var matches = contents.match(/\[\[(.*?)\]\]/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\[\[(.*?)\]\]/); contents=contents.replace(result[0], "");}); return contents;} function fu_fei(contents){ var matches = contents.match(/href\=\'\/([^\<\n\s\']+)\'/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/href\=\'\/([^\<\n\s\']+)\'/); var link=result[1]; contents=contents.replace("/"+link, "https://hey.cafe/"+link);}); var matches = contents.match(/href\=\"\/([^\<\n\s\"]+)\"/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/href\=\"\/([^\<\n\s\"]+)\"/); var link=result[1]; contents=contents.replace("/"+link, "https://hey.cafe/"+link);}); return contents;} function fu_atw(contents){ var sendback=false; contents=contents.replace(/\s\s/g, "\n"); contents=contents.trim(); var matches = contents.match(/(\#\#\s)([^\n\<\>]+)(\s\#\#)/gi); fu_qeq(matches, function(id){ if (sendback==false){ var data=matches[""+id+""]; var result = data.match(/(\#\#\s)([^\n\<\>]+)(\s\#\#)/); sendback=result[2].trim();}}); return sendback;} function fu_lsr(contents){ var sendback=false; var urlmatches = contents.match(/\bhttps?:\/\/([^\<\>\"\'\n\s]+)\b/gi); fu_qeq(urlmatches, function(id){ var data=urlmatches[""+id+""]; data=data.replaceAll("&#34;", ""); data=data.replaceAll("&#39;", ""); data=data.replaceAll("&gt;", ""); data=data.replaceAll("&lt;", ""); contents=contents.replace(""+data+"/", data); contents=contents.replace(data, "");}); var title=fu_atw(contents); if (title!=false){ contents=contents.replace("## "+title+" ##", "");}
contents=contents.replace(/\s\s/g, "\n"); contents=contents.trim(); var matches = contents.match(/(.[^\n\t]+)/gi); fu_qeq(matches, function(id){ if (sendback==false){ var data=matches[""+id+""]; var result = data.match(/(.[^\n\t]+)/); sendback=result[0].trim();}}); return sendback;} function fu_qkz(contents){ var contents=fu_aic(contents); var title=fu_atw(contents); var description=fu_lsr(contents); var urltitle=""; if (title==false){ if (description==false){ var urltitle=fu_aic(Array.from(contents).slice(0, 70).join(''));}else{ urltitle=description;}}else{ urltitle=title;} var pretrim=fu_aic(urltitle); urltitle=fu_aic(Array.from(urltitle).slice(0, 70).join('')); urltitle=fu_aic(urltitle); if (pretrim!=urltitle){ urltitle=urltitle.replace(/\s([^\s]*)$/,"");}
urltitle=urltitle.toLowerCase(); urltitle=urltitle.replace(/[^a-z0-9]+/gi, "-"); urltitle=urltitle.replace("--", "-"); urltitle=urltitle.replace(/\-$/,""); if (urltitle!=""){ return urltitle;}else{ return false;}} function fu_rke(elem, e){ if (e.originalEvent && e.originalEvent.clipboardData && e.originalEvent.clipboardData.getData){ e.preventDefault(); var text = e.originalEvent.clipboardData.getData('text/plain'); window.document.execCommand('insertText', false, text);} else if (e.clipboardData && e.clipboardData.getData){ e.preventDefault(); var text = e.clipboardData.getData('text/plain'); window.document.execCommand('insertText', false, text);}} function fu_kwe(contents){ var matches = contents.match(/\<div([^\<\>]+)\>([^\<\>]+)\<\/div\>/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<div([^\<\>]+)\>([^\<\>]+)\<\/div\>/); contents=contents.replace(result[0], ""+fu_kwe(result[2])+"");}); var matches = contents.match(/\<span([^\<\>]+)\>([^\<\>]+)\<\/span\>/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<span([^\<\>]+)\>([^\<\>]+)\<\/span\>/); contents=contents.replace(result[0], ""+fu_kwe(result[2])+"");}); var matches = contents.match(/\<strong([^\<\>]+)\>([^\<\>]+)\<\/strong\>/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<strong([^\<\>]+)\>([^\<\>]+)\<\/strong\>/); contents=contents.replace(result[0], ""+fu_kwe(result[2])+"");}); var matches = contents.match(/\<i([^\<\>]+)\>([^\<\>]+)\<\/i\>/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<i([^\<\>]+)\>([^\<\>]+)\<\/i\>/); contents=contents.replace(result[0], ""+fu_kwe(result[2])+"");}); var matches = contents.match(/\<font([^\<\>]+)\>([^\<\>]+)\<\/font\>/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<font([^\<\>]+)\>([^\<\>]+)\<\/font\>/); contents=contents.replace(result[0], ""+fu_kwe(result[2])+"");}); var matches = contents.match(/\<text([^\<\>]+)\>([^\<\>]+)\<\/text\>/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<text([^\<\>]+)\>([^\<\>]+)\<\/text\>/); contents=contents.replace(result[0], ""+fu_kwe(result[2])+"");}); return contents;} function fu_jca(contents){ var matches = contents.match(/\<img alt="([^\<\>]+)" emojidata="([^\<\>]+)" emoji="true" ([^\<\>]+)\>/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<img alt="([^\<\>]+)" emojidata="([^\<\>]+)" emoji="true" ([^\<\>]+)\>/); contents=contents.replace(result[0], ""+fu_xla(result[2])+"");}); var matches = contents.match(/\<text class="mention([^\<\>]+)" id="([^\<\>]+)" data="([^\<\>]+)">([^\<\>]+)\<\/text\>/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<text class="mention([^\<\>]+)" id="([^\<\>]+)" data="([^\<\>]+)">([^\<\>]+)\<\/text\>/); contents=contents.replace(result[0], ""+result[4]+"");}); var matches = contents.match(/\<text class="cafe([^\<\>]+)" id="([^\<\>]+)" data="([^\<\>]+)">([^\<\>]+)\<\/text\>/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<text class="cafe([^\<\>]+)" id="([^\<\>]+)" data="([^\<\>]+)">([^\<\>]+)\<\/text\>/); contents=contents.replace(result[0], ""+result[4]+"");}); var matches = contents.match(/\<text class="tag([^\<\>]+)" id="([^\<\>]+)" data="([^\<\>]+)">([^\<\>]+)\<\/text\>/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<text class="tag([^\<\>]+)" id="([^\<\>]+)" data="([^\<\>]+)">([^\<\>]+)\<\/text\>/); contents=contents.replace(result[0], ""+result[4]+"");}); var matches = contents.match(/\<text class="emoji([^\<\>]+)" id="([^\<\>]+)" data="([^\<\>]+)">([^\<\>]+)\<\/text\>/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<text class="emoji([^\<\>]+)" id="([^\<\>]+)" data="([^\<\>]+)">([^\<\>]+)\<\/text\>/); contents=contents.replace(result[0], ""+result[4]+"");}); var matches = contents.match(/\<text class="([^\<\>]+)" data="([^\<\>]+)">(.+)\<\/text\>/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<text class="([^\<\>]+)" data="([^\<\>]+)">(.+)\<\/text\>/); contents=contents.replace(result[0], " ");}); return contents;}var s_webp=null; var s_imagecache="https://proxy.heycafecdn.com/ext_image/webp/"; var s_blank_image="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="; var s_blank_colour="rgb(240,240,240)"; function fu_jsf(){ fu_oiv(); var elements = ac("optimizer_img"); for (var i = 0, len = elements.length; i < len; i++){ if (elements[i]!=undefined){ if (fu_qoh(elements[i])){ if (elements[i].getAttribute("optimizer_preview")!=undefined){ if (elements[i].getAttribute("optimizer_preview")=="done"){ var source=elements[i].getAttribute("source"); fu_rez("image",elements[i], source); elements[i].classList.remove("optimizer_img");}} }} } var elements = ac("optimizer_bg"); for (var i = 0, len = elements.length; i < len; i++){ if (elements[i]!=undefined){ if (fu_qoh(elements[i])){ if (elements[i].getAttribute("optimizer_preview")!=undefined){ if (elements[i].getAttribute("optimizer_preview")=="done"){ var source=elements[i].getAttribute("source"); fu_rez("background",elements[i], source); elements[i].classList.remove("optimizer_bg");}} }} }} function fu_aqw(){ if (s_webp==null){ var elem = document.createElement('canvas'); if (!!(elem.getContext && elem.getContext('2d'))){ var velem=elem.toDataURL('image/webp').indexOf('data:image/webp')==0; s_webp=velem;}else{ s_webp=false;} if (s_webp==false){ s_imagecache="https://proxy.heycafecdn.com/ext_image/jpeg/";} return s_webp;}else{ return s_webp;}} function fu_rez(type, element, source){ fu_aqw(); var size = fu_hdf(element); if (element.getAttribute("size")!=undefined){ size=element.getAttribute("size");} if (element.getAttribute("original")!=undefined){ var content = source;}else{ var content = ""+s_imagecache+"?url="+ae(source)+"&size="+size+"";} if (element!=null){ fu_rqn(type,element,source,content);}} function fu_rqn(type,element,source,image){ var preloadimage = new Image(); preloadimage.onload = function(){ if (element!=null){ if (type=="background"){ element.setAttribute("style", "background-image: url('"+preloadimage.src+"');");} if (type=="image"){ element.setAttribute("src", ""+preloadimage.src+""); fu_frq(element);}} }; preloadimage.src = image;} function fu_frq(element){ if (element!=null){ element.setAttribute("width", "auto"); element.setAttribute("height", "auto"); setTimeout(function(){ element.setAttribute("width", fu_ije(element)); element.setAttribute("height", fu_rda(element));}, 350);}} function fu_hdf(element){ var size = fu_dzp(element); if (size <= 24){ size = 24;} var desn = window.devicePixelRatio; if (desn >= 1){ return size * desn;}else{ return size;}} function fu_spt(element){ if (element.parentElement!=undefined){ if (element.parentElement.clientWidth!=0){ return element.parentElement.clientWidth;}else{ return fu_spt(element.parentElement);}}else{ return 0;}} function fu_njg(element){ if (element.parentElement!=undefined){ if (element.parentElement.clientHeight!=0){ return element.parentElement.clientHeight;}else{ return fu_njg(element.parentElement);}}else{ return 0;}} function fu_dzp(element,whatiwant){ var widthsize=1; var heightsize=1; if (element.hasAttribute("useparent")==false){ var widthsize = element.clientWidth; var heightsize = element.clientHeight;} if (element.style.maxWidth!=""){ if (element.style.maxWidth=="100%"){ widthsize=fu_spt(element);}else{ if (element.style.maxWidth.includes("px")==true){ widthsize=element.style.maxWidth; widthsize=widthsize.replace("px", "");} if (element.style.maxWidth.includes("%")==true){ widthsize=fu_spt(element); widthsize=(widthsize * (element.style.maxWidth.replace("%", "") / 100));}} } if (element.style.maxHeight!=""){ if (element.style.maxHeight=="100%"){ heightsize=fu_njg(element);}else{ if (element.style.maxHeight.includes("px")==true){ heightsize=element.style.maxHeight; heightsize=heightsize.replace("px", "");} if (element.style.maxHeight.includes("%")==true){ heightsize=fu_njg(element); heightsize=(heightsize * (element.style.maxHeight.replace("%", "") / 100));}} } if (widthsize <= 30){ widthsize = fu_spt(element);} if (heightsize <= 30){ heightsize = fu_njg(element);} if (isNaN(heightsize)){ heightsize=400;} if (isNaN(widthsize)){ widthsize=400;} if (whatiwant==undefined){ if (widthsize <= heightsize){ return heightsize;}else{ return widthsize;}}else{ if (whatiwant=="width"){ return widthsize;} if (whatiwant=="height"){ return heightsize;}} } function fu_ije(element){ return fu_dzp(element,"width");} function fu_rda(element){ return fu_dzp(element,"height");} function fu_fph(){ window.scrollBy(0, 1); window.scrollBy(0, 0); fu_jsf();} function fu_oiv(){ var elements = ac("optimizer_img"); for (var i = 0, len = elements.length; i < len; i++){ if (elements[i]!=undefined){ if (fu_qoh(elements[i])){ if (elements[i].getAttribute("optimizer_preview")==undefined){ var maxsize=fu_hdf(elements[i]); elements[i].setAttribute("optimizer_preview", "loading"); if (maxsize<=700){ maxsize=(maxsize*3);}
fu_vhn(maxsize,maxsize,s_blank_colour,function(preview){ if (elements[i]!=undefined){ if (elements[i].getAttribute("optimizer_preview")=="loading"){ elements[i].setAttribute("src", preview); elements[i].setAttribute("optimizer_preview", "set"); elements[i].setAttribute("optimizer_size", maxsize); setTimeout(function(element){ element.setAttribute("optimizer_preview", "done"); fu_jsf();}, 50, elements[i]);}} });}} }} var elements = ac("optimizer_bg"); for (var i = 0, len = elements.length; i < len; i++){ if (elements[i]!=undefined){ if (fu_qoh(elements[i])){ if (elements[i].getAttribute("optimizer_preview")==undefined){ var width=fu_ije(elements[i]); var height=fu_rda(elements[i]); elements[i].setAttribute("optimizer_preview", "loading"); fu_vhn(width,height,s_blank_colour,function(preview){ if (elements[i]!=undefined){ if (elements[i].getAttribute("optimizer_preview")=="loading"){ elements[i].setAttribute("style", "background-image: url('"+preview+"');"); elements[i].setAttribute("optimizer_preview", "set"); setTimeout(function(element){ element.setAttribute("optimizer_preview", "done"); fu_jsf();}, 50, elements[i]);}} });}} }} } function fu_qoh(el,topcheck){ if (topcheck==undefined){ topcheck=true;} var offset=window.innerHeight; var overridescroll=false; if (el.hasAttribute("nowait")){ var inviewcheck=el.getAttribute("nowait"); if (inviewcheck=="true"){ overridescroll=true;}} if (aa("container_modl")){ var isinmodl=fu_bkq(aa("container_modl"),el); if (isinmodl==true){ overridescroll=true;}} if (overridescroll==false){ var top = el.offsetTop; var left = el.offsetLeft; var width = el.offsetWidth; var height = el.offsetHeight; while(el.offsetParent){ el = el.offsetParent; top += el.offsetTop; left += el.offsetLeft;} if (topcheck==true){ if (top < window.pageYOffset + (window.innerHeight+offset)){ return true;}} if (top < (window.pageYOffset + (window.innerHeight+offset)) && left < (window.pageXOffset + window.innerWidth) && (top + height) > window.pageYOffset && (left + width) > window.pageXOffset){ return true;}}else{ return true;}} function fu_vhn(width,height,colour,callback){ var canvas = document.createElement('canvas'); canvas.height = height; canvas.width = width; canvas.style.backgroundColor = colour; var ctx = canvas.getContext('2d'); ctx.beginPath(); ctx.rect(0, 0, width, height); ctx.fillStyle = colour; ctx.fill(); callback(canvas.toDataURL());}function fu_erm(){ fu_clu(); fu_wta("full"); var alias=null; var page=null; var subpage=null; var arr = sp.split('/'); if (arr!=null){ if (arr[1]!=undefined){ alias=arr[1].replace("!", "");} if (arr[2]!=undefined){ page=arr[2];} if (arr[3]!=undefined){ subpage=arr[3];}} if (alias!=null){ var defaultheader="<div class='aspectcase thirtybyeight'><div class='cover optimizer_bg content' source='https://cdn.hey.cafe/file/HeyCafe/defaults/header_cafe.jpg'></div></div><img source='https://cdn.hey.cafe/file/HeyCafe/defaults/avatar_cafe.png' class='optimizer_img avatar main' alt='Default image'><h1>Loading...</h1><h2>!"+alias+"</h2><div class='loading'></div></div>"; fu_pco("container_content","<bubble class='profile'><div id='PageCafeHeader'>"+defaultheader+"</div></bubble><div class='horizontalscroll' id='PageCafeMenu'></div><div id='PageCafeTagMenu'></div>"); fu_npw("https://"+s_hostname+"/get_cafe_info?query="+alias+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("PageCafeHeader"); var specialboxes=""; if (response["response_data"]["you_banned"]==true){ fu_hrr("Sorry you are not allowed to view this café"); fu_wrg("/");} if (su_id!=null){ if (response["response_data"]["you_member"]==false){ if (response["response_data"]["you_request"]==false){ if (response["response_data"]["mode"]=="private"){ var member_control="<a href=\"javascript:fu_bgp('"+alias+"');\"><div class='button'>+&ensp;Request To Join</div></a>";}else{ var member_control="<a href=\"javascript:fu_bgp('"+alias+"');\"><div class='button'>+&ensp;Join</div></a>";}}else{ var member_control="";}}else{ var member_control="<a href=\"javascript:fu_rod('"+alias+"');\"><div class='button'>-&ensp;Leave</div></a>";}}else{ var member_control="";} if (su_alias!=response["response_data"]["alias"]){ if (su_id!=null){ if (response["response_data"]["you_member"]==true){ if (response["response_data"]["you_request"]==false){ if (response["response_data"]["you_subscribed"]==false){ specialboxes=specialboxes+"<div onclick=\"javascript:fu_xiy('"+alias+"');\" class='specialbox'>"+fu_gmq("send-check")+" Subscribe</div>";}else{ specialboxes=specialboxes+"<div onclick=\"javascript:fu_dlw('"+alias+"');\" class='specialbox'>"+fu_gmq("send-slash")+" Unsubscribe</div>";}} }} }
specialboxes=specialboxes+"<div class='specialbox' onclick=\"javascript:fu_dfd('"+alias+"');\">"+fu_cpd("📋")+" <trans>RSS</trans></div>"; var settings=""; if (response["response_data"]["you_admin"]){ if (response["response_data"]["you_admin"]==true){ settings="<a href=\"javascript:fu_wrg('/settings/"+response["response_data"]["id"]+"/members');\"><div class=\"tab\">"+fu_cpd("🙋🏽")+"&ensp;Members</div></a><a href=\"javascript:fu_wrg('/settings/"+response["response_data"]["id"]+"');\"><div class=\"tab\">"+fu_cpd("⚙️")+"&ensp;Edit Café</div></a>";}}
fu_vbf(""+response["response_data"]["name"]+" (!"+response["response_data"]["alias"]+")"); fu_qyp(response["response_data"]["bio"]); fu_bgt(response["response_data"]["avatar"]); var staff=""; if (su_admin=="1" || su_moderator=="1"){ staff="<a href=\"/staff/cafes/"+alias+"\"><div class=\"tab important alt3\">Inspect</div></a>";} if (response["response_data"]["you_member"]==false){ staff=""+staff+"<a href=\"javascript:fu_lbu('"+response["response_data"]["id"]+"');\"><div class=\"tab important alt1\">Report</div></a>";} if (specialboxes!=""){ specialboxes="<div style='padding-top:10px;'>"+specialboxes+"</div>";} var bioextras=""; if (response["response_data"]["member_feed"]=="0"){ bioextras=fu_cpd('<div class="extra">⚠️ This Café has member feeds turned off, this means that no conversations will show on your profile or on the main feed.</div>');} if (response["response_data"]["you_member"]==false){ if (response["response_data"]["you_request"]==true){ var bioextras=""+bioextras+"<div class=\"extra\"><strong>Your member request is pending</strong></div>";}}
fu_pco("PageCafeHeader","<div class='aspectcase thirtybyeight'><div class='cover optimizer_bg content' source='"+response["response_data"]["header"]+"'>"+staff+""+settings+"</div></div><a href=\"javascript:fu_ikg('"+response["response_data"]["avatar"]+"','image',true,'"+fu_csj("Café image for "+response["response_data"]["name"]+"")+"');\"><img source='"+response["response_data"]["avatar"]+"' class='optimizer_img avatar main' alt='Café image for "+response["response_data"]["name"]+"'></a><h1>"+fu_cpd(response["response_data"]["name"])+"</h1><h2>!"+response["response_data"]["alias"]+"</h2>"+member_control+"<div class='minibubble'>"+fu_cpd(fu_dwb(fu_nwo(response["response_data"]["bio"],true)))+""+bioextras+""+specialboxes+"</div>"); fu_nxk(); if (response["response_data"]["you_member"]==false){ if (response["response_data"]["mode"]=="private"){ if (response["response_data"]["you_request"]==false){ fu_pco("PageCafeMenu","<bubble class='alt1'>This is a private café and you will need make a request to join. You will need to wait for a moderator to approve the request.</bubble>");}}else{ fu_pco("PageCafeMenu","<bubble class='alt1'>This is a public café and will cost nothing to join. Even public cafés are moderated so remember to post content that is appropriate to the this community.</bubble>");}}
fu_mxp("PageCafeMenu"); fu_pco("PageCafeMenu","<a href='/!"+alias+"'><div class='tab'>Conversations</div></a>"); if (response["response_data"]["about"]!=false){ fu_pco("PageCafeMenu","<a href='/!"+alias+"/about'><div class='tab'>About</div></a>");}
fu_pco("PageCafeMenu","<a href='/!"+alias+"/pinned'><div class='tab'>Pins</div></a>"); fu_pco("PageCafeMenu","<a href='/!"+alias+"/members'><div class='tab'>Members</div></a>"); fu_pco("PageCafeMenu","<a href='/!"+alias+"/admins'><div class='tab'>Admins</div></a>"); fu_pco("PageCafeMenu","<a href='/!"+alias+"/moderators'><div class='tab'>Moderators</div></a>"); if (page==null || page=="tag" || page=="pinned"){ if (response["response_data"]["tags"]!=false){ fu_mxp("PageCafeTagMenu"); fu_pco("PageCafeTagMenu","<div class='horizontalscroll' id='PageCafeTagMenu_contents'></div>"); fu_qeq(response["response_data"]["tags"], function(select){ fu_pco("PageCafeTagMenu_contents","<a href='/!"+alias+"/tag/"+response["response_data"]["tags"][""+select+""]["id"]+"'><div class='tab'>"+fu_cpd(response["response_data"]["tags"][""+select+""]["emoji"])+" "+fu_cpd(response["response_data"]["tags"][""+select+""]["name"])+"</div></a>");});}} if (page==null){ fu_pco("container_content","<h2>Conversations</h2>"); if (response["response_data"]["you_member"]==true){ fu_pco("container_content","<div></div>"); fu_pco("container_content","<div id='inline_convo_genrate_case'></div>"); fu_bin("inline_convo_genrate_case",response["response_data"]["id"]); fu_pco("container_content","<div style='margin-top:20px;'></div>");} if (response["response_data"]["you_member"]==false && response["response_data"]["public_view"]=="0"){ fu_pco("container_content","<bubble class='alt1'>We can only show conversations to members for this café.</bubble>");}else{ fu_pco("container_content","<div id='PageCafeConvoMainPin_"+alias+"'></div>"); fu_pco("container_content","<div id='PageCafeConvoGenerateCase_"+alias+"'></div>"); fu_pco("container_content","<div id='PageCafeConvo_"+alias+"'><div class='loading'></div></div>"); fu_wsi(0,alias,"false","false"); fu_npw("https://"+s_hostname+"/get_cafe_conversations?query="+alias+"&count=1&pinned=true",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["conversations"]!=false){ fu_qeq(response["response_data"]["conversations"], function(id){ fu_ndm(response["response_data"]["conversations"][""+id+""],"PageCafeConvoMainPin_"+alias+"");});}} });}} if (page=="pinned"){ fu_pco("container_content","<h2>Pins</h2>"); if (response["response_data"]["you_member"]==false && response["response_data"]["public_view"]=="0"){ fu_pco("container_content","<bubble class='alt1'>We can only show conversations to members for this café.</bubble>");}else{ fu_pco("container_content","<div id='PageCafeConvoGenerateCase_"+alias+"'></div>"); fu_pco("container_content","<div id='PageCafeConvo_"+alias+"'><div class='loading'></div></div>"); fu_wsi(0,alias,"true","false");}} if (page=="tag"){ if (response["response_data"]["tags"]!=false){ if (response["response_data"]["tags"][""+subpage+""]!=undefined){ fu_pco("container_content","<h2>"+fu_cpd(response["response_data"]["tags"][""+subpage+""]["emoji"])+" "+fu_cpd(response["response_data"]["tags"][""+subpage+""]["name"])+"</h2>"); if (response["response_data"]["you_member"]==false && response["response_data"]["public_view"]=="0"){ fu_pco("container_content","<bubble class='alt1'>We can only show conversations to members for this café.</bubble>");}else{ fu_pco("container_content","<div id='PageCafeConvoGenerateCase_"+alias+"'></div>"); fu_pco("container_content","<div id='PageCafeConvo_"+alias+"'><div class='loading'></div></div>"); fu_wsi(0,alias,"false",subpage);}}else{ fu_wrg("/e/404");}}else{ fu_wrg("/e/404");}} if (page=="about"){ fu_pco("container_content","<h2>About</h2><div id='PageCafeAbout'><div class='loading'></div></div>"); fu_npw("https://"+s_hostname+"/get_cafe_info?query="+alias+"",function(result){ var response = fu_hdg(result); fu_mxp("PageCafeAbout"); if (response["system_api_error"]==false){ if (response["response_data"]["about"]==false){ var contsabout="No about page content set.";}else{ var contsabout=response["response_data"]["about"]; contsabout=fu_uiv(contsabout); contsabout=fu_idd(contsabout); contsabout=fu_ibd(contsabout); contsabout=fu_cpd(contsabout); contsabout=fu_esd(contsabout); contsabout=fu_ebi(contsabout);}
fu_pco("PageCafeAbout","<bubble class='conversation' style='padding-top:0px;padding-bottom:0px;'><div class='content'>"+contsabout+"</div></bubble>");}});} if (page=="members"){ fu_pco("container_content","<div id='PageCafeMembers'><div class='loading'></div></div>"); fu_npw("https://"+s_hostname+"/get_cafe_members?query="+alias+"&status=active&count=200",function(result){ var responmem = fu_hdg(result); if (responmem["system_api_error"]==false){ fu_mxp("PageCafeMembers"); fu_pco("PageCafeMembers","<h2>Members</h2>"); if (responmem["response_data"]["members"]!=false){ fu_qeq(responmem["response_data"]["members"], function(id){ fu_cyh(responmem["response_data"]["members"][""+id+""],"PageCafeMembers","halfsize");});}else{ fu_pco("container_content","<bubble class='alt1'>This café has no members.</bubble>");}} });} if (page=="admins"){ fu_pco("container_content","<div id='PageCafeMembers'><div class='loading'></div></div>"); fu_npw("https://"+s_hostname+"/get_cafe_members?query="+alias+"&type=admin&status=active&count=200",function(result){ var responmem = fu_hdg(result); if (responmem["system_api_error"]==false){ fu_mxp("PageCafeMembers"); fu_pco("PageCafeMembers","<h2>Admins</h2>"); if (responmem["response_data"]["members"]!=false){ fu_qeq(responmem["response_data"]["members"], function(id){ fu_cyh(responmem["response_data"]["members"][""+id+""],"PageCafeMembers","halfsize");});}else{ fu_pco("container_content","<bubble class='alt1'>This café has no admins... That can't happen, how did you do that?</bubble>");}} });} if (page=="moderators"){ fu_pco("container_content","<div id='PageCafeMembers'><div class='loading'></div></div>"); fu_npw("https://"+s_hostname+"/get_cafe_members?query="+alias+"&type=moderator&status=active&count=200",function(result){ var responmem = fu_hdg(result); if (responmem["system_api_error"]==false){ fu_mxp("PageCafeMembers"); fu_pco("PageCafeMembers","<h2>Moderators</h2>"); if (responmem["response_data"]["members"]!=false){ fu_qeq(responmem["response_data"]["members"], function(id){ fu_cyh(responmem["response_data"]["members"][""+id+""],"PageCafeMembers","halfsize");});}else{ fu_pco("container_content","<bubble class='alt1'>This café has no moderators.</bubble>");}} });}}else{ if (response["system_api_error"]=="notfound"){ fu_bqc();}else{ fu_few("Network error");}} },false,true);}else{ fu_bqc();}} function fu_bqc(){ fu_mxp("container_content"); fu_nxk(); if (su_id!=null){ var alias=false; var arr = sp.split('/'); if (arr!=null){ if (arr[1]!=undefined){ alias=arr[1].replace("@", "");}}
fu_vbf("No "+alias+" café"); fu_pco("container_content","<h1>No "+alias+" café</h1>"); fu_pco("container_content","<a href=\"javascript:fu_vfk('"+alias+"');\"><div class='tab' style='margin-left:0px;'>Create new café</div></a>"); fu_pco("container_content","<div style='margin-top:20px;'></div>"); fu_pco("container_content","<bubble>This is your chance to make the café for "+alias+"! Cafés are one of the main ways to find users with similar interests, and members can post directly into the café. Cafés can also be private if that is a better fit for it's use, and can be moderated by the creator and can have staff.</bubble>");}else{ fu_wrg("/e/404");}} function fu_bgp(alias){ var postdata={}; postdata["cafe"]=alias; postdata=fu_ere(postdata); fu_clu(); fu_opn("https://"+s_hostname+"/post_cafe_join",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]=="wait"){ fu_hrr("The request to join the café !"+alias+" has been made"); fu_zng();}else{ fu_hrr("You have joined the café !"+alias+""); fu_zng();}}else{ if (response["system_api_error"]=="notfound"){ fu_hrr("We can't find that café");}}
fu_nxk();});} function fu_rod(alias){ var postdata={}; postdata["cafe"]=alias; postdata=fu_ere(postdata); fu_clu(); fu_opn("https://"+s_hostname+"/post_cafe_leave",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_hrr("You have left the café !"+alias+""); fu_zng();}else{ if (response["system_api_error"]=="notfound"){ fu_hrr("We can't find that café");}}
fu_nxk();});} function fu_wsi(offset,alias,pinned,tagged){ fu_mxp("PageCafeConvo_"+alias+""); fu_pco("PageCafeConvo_"+alias+"","<div class='loading'></div>"); fu_pco("PageCafeConvoGenerateCase_"+alias+"","<div id='PageCafeConvoGenerate_"+alias+"_"+offset+"'></div>"); var pinnedlink=""; if (pinned=="true"){ pinnedlink="&pinned=true";}else{ pinnedlink="&pinned=false";} var taggedlink=""; if (tagged!="false"){ taggedlink="&tag="+tagged+"";}
fu_npw("https://"+s_hostname+"/get_cafe_conversations?query="+alias+"&count=40&start="+offset+""+pinnedlink+""+taggedlink+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["conversations"]!=false){ fu_qeq(response["response_data"]["conversations"], function(id){ fu_ndm(response["response_data"]["conversations"][""+id+""],"PageCafeConvoGenerate_"+alias+"_"+offset+"");}); setTimeout(function(){ fu_mxp("PageCafeConvo_"+alias+""); fu_pco("PageCafeConvo_"+alias+"","<action type='inview_loadmore_pagecafe' offset='"+(parseInt(offset)+40)+"' alias='"+alias+"' pinned='"+pinned+"' tagged='"+tagged+"'></action>");}, 400);}else{ fu_mxp("PageCafeConvo_"+alias+""); if (offset==0){ fu_pco("PageCafeConvo_"+alias+"","<bubble class='alt1'>Sorry we can't find any conversations.</bubble>");}} }});} function fu_lbu(alias){ fu_pbr(); var options=""; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_qxc('cafe','"+alias+"','spam');\"><strong style='display: inline-block;margin-bottom: 10px;'>Spam</strong><BR>Anything that can be seen as spam.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_qxc('cafe','"+alias+"','abuse');\"><strong style='display: inline-block;margin-bottom: 10px;'>Abuse</strong><BR>Content that may be harmful to others.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_qxc('cafe','"+alias+"','impersonation');\"><strong style='display: inline-block;margin-bottom: 10px;'>Impersonation</strong><BR>If trying to pass or act like someone else.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_qxc('cafe','"+alias+"','other');\"><strong style='display: inline-block;margin-bottom: 10px;'>Other</strong><BR>Anything that does not fall under the other options.</div>"; fu_pco("container_modl","<bubble class='alt1'>You can report a café by using the actions below. Pick the option that makes the most sense so that the correct person gets notified of this report.</bubble>"); fu_pco("container_modl","<bubble>"+options+"</bubble>");} function fu_xiy(alias){ var postdata={}; postdata["cafe"]=alias; postdata=fu_ere(postdata); fu_clu(); fu_opn("https://"+s_hostname+"/post_cafe_subscribe",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_hrr("You are now subscribed to !"+alias+""); fu_zng();}else{ if (response["system_api_error"]=="notfound"){ fu_hrr("We can't find that café");} if (response["system_api_error"]=="notmember"){ fu_hrr("You are not a member of the café !"+alias+"");}}
fu_nxk();});} function fu_dlw(alias){ var postdata={}; postdata["cafe"]=alias; postdata=fu_ere(postdata); fu_clu(); fu_opn("https://"+s_hostname+"/post_cafe_unsubscribe",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_hrr("You are now not subscribed to !"+alias+""); fu_zng();}else{ if (response["system_api_error"]=="notfound"){ fu_hrr("We can't find that café");}}
fu_nxk();});} function fu_dfd(alias){ fu_pbr(); fu_pco("container_modl","<h1><trans>RSS Feed</trans></h1><bubble><trans>You can use the RSS feed in any RSS reader or in tools like IFTTT to auto share to other services when new conversations are posted. You can click the link below to copy to clipbard.</trans><pre style=\"white-space: pre-wrap;white-space: -moz-pre-wrap;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;margin-bottom: 0px;\" onclick=\"fu_fqw('CopyContentClickURL');\"><code id='CopyContentClickURL'>https://endpoint.hey.cafe/rss/cafe?query="+alias+"</code></pre></bubble>");}function fu_dpi(){ if (fu_wlm()==true){ fu_clu(); fu_wta("full"); fu_vbf("Cafés"); fu_pco("container_content","<a href='javascript:fu_vfk();'><div class='tab' style='float:right;margin-left:0px;'>Create Café</div></a>",true); fu_pco("container_content","<a href='/explore/cafes'><div class='tab' style='float:right;margin-left:0px;'>Find</div></a>",true); fu_pco("container_content","<h1>Cafés</h1>",true); fu_pco("container_content","<div class='horizontalscroll' style='margin-bottom:20px;' id='MenuFeed'></div>"); fu_pco("MenuFeed","<a href='/feed'><div class='tab'>Conversations</div></a>",true); fu_pco("MenuFeed","<a href='/cafes'><div class='tab current'>Cafés</div></a>",true); fu_pco("MenuFeed","<a href='/tags'><div class='tab'>Discussions</div></a>",true); fu_pco("container_content","<div></div>"); fu_pco("container_content","<div style='margin-top:20px;'></div>"); fu_pco("container_content","<div id='PageCafesConversationsGenerateCase'></div>"); fu_pco("container_content","<div id='PageCafesBottomLoader'></div>"); fu_ket(0); fu_nxk();}} function fu_ket(offset){ fu_mxp("PageCafesBottomLoader"); fu_pco("PageCafesBottomLoader","<div class='loading'></div>"); fu_npw("https://"+s_hostname+"/get_feed_conversations?count=40&rule=cafe&start="+offset+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["conversations"]!=false){ var firstcheckrender=true; if (aa('conversations_loaded')==undefined){ var render_frame_id=fu_hmk(20); fu_pco("PageCafesConversationsGenerateCase","<div id='conversations_loaded'></div><div id='conversations_render_"+render_frame_id+"'></div>");}else{ var render_frame_id=fu_hmk(20); if (offset==0){ fu_fic("PageCafesConversationsGenerateCase","<div id='conversations_render_"+render_frame_id+"'></div>");}else{ fu_pco("PageCafesConversationsGenerateCase","<div id='conversations_render_"+render_frame_id+"'></div>");}}
fu_qeq(response["response_data"]["conversations"], function(id){ if (offset==0){ if (firstcheckrender==true){ firstcheckrender=false; if (aa('checkup_item_canview')!=undefined){ aa('checkup_item_canview').remove();}
fu_fic("PageCafesConversationsGenerateCase","<div id='checkup_item_canview'></div><action type=\"inview_item_checkup\" item_type=\"conversations\" item_last=\""+id+"\" item_resource=\"cafes\" item_resource_sub=\"false\" item_function=\"fu_ket('"+offset+"');\"></action>");}}
fu_ndm(response["response_data"]["conversations"][""+id+""],"conversations_render_"+render_frame_id+"");}); setTimeout(function(){ fu_mxp("PageCafesBottomLoader"); fu_pco("PageCafesBottomLoader","<action type='inview_loadmore_pagecafes' offset='"+(parseInt(offset)+40)+"'></action>");}, 400);}else{ fu_mxp("PageCafesBottomLoader"); if (offset==0){ fu_pco("PageCafesBottomLoader","<bubble class='alt1'>Sorry we can't find any café conversations to share with you.</bubble>",true);}} }else{ fu_few("Not able to load");}});} function fu_vfk(alias){ fu_pbr(); if (alias==undefined){ alias="";}
fu_pco("container_modl","<h1>Create café</h1>"); fu_pco("container_modl",'<bubble>Cafés can private or public, and once your new café is ready it will be private by default. You can change any details at any time.<BR><BR><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="name" size="50" maxlength="50" placeholder="Name"><BR><input type="text" class="input" name="alias" size="50" maxlength="50" placeholder="Alias" value="'+alias+'"><BR><BR><input type="submit" name="submit" onclick="fu_tqb(this.form); return false;" value="Create"></div></form></bubble>');} function fu_tqb(form){ fu_clu(); fu_jwg(); var data=fu_uwq(form); var postdata={}; postdata["alias"]=data["alias"]; postdata["name"]=data["name"]; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_cafe_create",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_jom("Your café has been created! It's private by default so you will need to make public or invite only before anyone can see it."); fu_wrg("/!"+data["alias"]);}else{ fu_jom(response["system_api_error"]);}
fu_nxk();});} function fu_uej(){ fu_clu(); fu_wta("full"); var id=null; var comment=null; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ id=arr[2];} if (id.includes(":")){ var comm_arr = id.split(':'); if (comm_arr!=null){ id=comm_arr[0]; if (comm_arr[1]!=undefined){ comment=comm_arr[1];}} }} if (id!=null){ fu_pco("container_content","<h1>Conversation</h1>"); fu_pco("container_content","<div id='PageConversationCase'><div class='loading'></div></div>"); fu_npw("https://"+s_hostname+"/get_conversation_info?query="+id+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("PageConversationCase"); var title=fu_atw(response["response_data"]["contents"]); var description=fu_lsr(response["response_data"]["contents"]); if (title==false){ if (description==false){ var text=fu_aic(Array.from(response["response_data"]["contents"]).slice(0, 70).join('')); fu_vbf(""+response["response_data"]["account"]["name"]+": "+text+"");}else{ fu_vbf(""+response["response_data"]["account"]["name"]+": "+description+"");}}else{ fu_vbf(""+response["response_data"]["account"]["name"]+": "+title+"");} if (description==false){ fu_qyp(response["response_data"]["contents"]);}else{ fu_qyp(description);}
fu_bgt(response["response_data"]["account"]["avatar"]); if (comment==null){ fu_uyr("/conversation/"+response["response_data"]["id"]+"",true);}else{ fu_uyr("/conversation/"+response["response_data"]["id"]+":"+comment+"",true);} var urlspace=fu_qkz(response["response_data"]["contents"]); if (urlspace!=false){ if (comment==null){ fu_uyr("/conversation/"+response["response_data"]["id"]+"/"+urlspace+"",true);}else{ fu_uyr("/conversation/"+response["response_data"]["id"]+":"+comment+"/"+urlspace+"",true);}} var imagefound=false; if (response["response_data"]["attachments"]!=false){ fu_qeq(response["response_data"]["attachments"], function(id){ if (imagefound==false){ if (response["response_data"]["attachments"][id]["type"]=="image"){ fu_bgt(response["response_data"]["attachments"][id]["file"]);}} });} if (su_id==null){ fu_pco("PageConversationCase","<div style='margin-bottom:15px;'><bubble class=\"alt1\">"+fu_cpd('👋')+" Hello! You can <a tabindex='0' href=\"javascript:s_loginrestore='/conversation/"+response["response_data"]["id"]+"'; fu_wrg('/login');\">login</a> or <a tabindex='0' href=\"javascript:s_loginrestore='/conversation/"+response["response_data"]["id"]+"'; fu_wrg('/register');\">join</a> to interact with this conversation.</bubble></div>");} if (response["response_data"]["account"]["id"]==su_id){ fu_pco("PageConversationCase","<div class='horizontalscroll' id='ConversationMenu'></div>"); fu_pco("ConversationMenu","<a href=\"javascript:fu_jqv('"+response["response_data"]["id"]+"');\"><div class='tab'>Attach photo</div></a>"); if (su_pro==true){ fu_pco("ConversationMenu","<a href=\"javascript:fu_suk('"+response["response_data"]["id"]+"');\"><div class='tab'>Attach file</div></a>"); fu_pco("ConversationMenu","<a href=\"javascript:fu_bzw('"+response["response_data"]["id"]+"');\"><div class='tab'>Edit Content</div></a>");}else{ if (s_device!="NativeiOSApp"){ fu_pco("ConversationMenu","<a href=\"javascript:fu_emk(true);\"><div class='tab'>"+fu_cpd("🔒")+" Attach file</div></a>"); fu_pco("ConversationMenu","<a href=\"javascript:fu_emk(true);\"><div class='tab'>"+fu_cpd("🔒")+" Edit Content</div></a>");}}
fu_pco("ConversationMenu","<a href=\"javascript:fu_drd('"+response["response_data"]["id"]+"');\"><div class='tab'>More Options</div></a>"); fu_pco("PageConversationCase","<div style='margin-top:20px;'></div>");}
fu_ndm(response["response_data"],"PageConversationCase","full",comment);}else{ if (response["system_api_error"]=="notfound"){ fu_wrg("/e/404");}else{ fu_few("Network connection failed");}} });}
fu_nxk();}
function fu_nkz(){ fu_wta("simple"); fu_vbf("Debug"); fu_pco("container_content","<h1>Debug & Help</h1>"); fu_pco("container_content","<bubble>The debug menu allows you access to some tools and developer services allowing you to enable advanced features. Everything here is only on this session and will revert if the page is reloaded.</bubble>"); var debug_controls=""; debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:fu_jom('Test notification, hello how are you?','🔔');\">"+fu_cpd('🔔')+" Show a test notification</div>"; debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:fu_hrr('Test alert, hello how are you?');\">"+fu_cpd('🚨')+" Show a test alert</div>"; if (s_domain=="beta.hey.cafe"){ debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:fu_rzh('ses_s_beta'); fu_hrr('Going to STABLE mode'); window.location.replace('https://hey.cafe/');\">"+fu_cpd('🔥')+" Switch to STABLE app<div style='margin-top: 5px;font-size: 0.8em;'>Are you having bugs? Go to the STABLE version!</div></div>";}else{ debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:fu_gxi('ses_s_beta', 'true', 60); fu_hrr('Going to BETA mode'); window.location.replace('https://beta.hey.cafe/');\">"+fu_cpd('😎')+" Switch to BETA app<div style='margin-top: 5px;font-size: 0.8em;'>Warning the BETA version may have bugs!</div></div>";} if (s_debug==false){ debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:s_debug=true; fu_hrr('Debugging turned ON'); fu_wrg('/');\">"+fu_cpd('🪵')+" Turn ON debugging<div style='margin-top: 5px;font-size: 0.8em;'>Will send some important into into console for debuging reasons.</div></div>";}else{ debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:s_debug=false; fu_hrr('Debugging turned OFF'); fu_wrg('/');\">"+fu_cpd('🔥')+" Turn OFF debugging<div style='margin-top: 5px;font-size: 0.8em;'>Don't like the slowdown with console logging on? Turn it off!</div></div>";} if (s_gestures=="on"){ debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:fu_ccj('ses_s_gestures', 'off'); s_gestures='off'; fu_hrr('Gestures turned OFF'); fu_wrg('/');\">"+fu_cpd('👎')+" Turn OFF gestures<div style='margin-top: 5px;font-size: 0.8em;'>Are the gestures messing with your device? You can turn them off, this is a debug option as it's stored as a cookie per device only.</div></div>";}else{ debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:fu_ymy('ses_s_gestures'); s_gestures='on'; fu_hrr('Gestures turned ON'); fu_wrg('/');\">"+fu_cpd('👍')+" Turn ON gestures<div style='margin-top: 5px;font-size: 0.8em;'>Want to have the swipe to go back gesture? Turn them back on!</div></div>";} if (s_lowpowerdevice==false){ debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:s_lowpowerdevice=true; fu_jom('Low power mode turned on','🔋');\">"+fu_cpd('🔋')+" Low powermode on<div style='margin-top: 5px;font-size: 0.8em;'>Turns off some high render features like our input suggestions.</div></div>";}else{ debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:s_lowpowerdevice=false; fu_jom('Low power mode turned off','🔋');\">"+fu_cpd('🔋')+" Low powermode off<div style='margin-top: 5px;font-size: 0.8em;'>Turns on some high render features like our input suggestions.</div></div>";}
debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:fu_cxt(); fu_wrg('/logout'); fu_jom('All cookies have been removed, might need to refresh','🍪');\">"+fu_cpd('🍪')+" Clear all cookies<div style='margin-top: 5px;font-size: 0.8em;'>Will require a reload and will log out but should clear any cookie related problems.</div></div>"; debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:fu_bhd(); fu_jom('Removing workers...','🤖');\">"+fu_cpd('🤖')+" Clear all workers<div style='margin-top: 5px;font-size: 0.8em;'>This will uninstall the service worker.</div></div>"; fu_pco("container_content","<bubble style='margin-top:50px;'><h2 style='margin-top:0px;'>Controls</h2>"+debug_controls+"</div>"); var debug_data=""; debug_data=fu_ffo(debug_data,"Main -> Domain",s_domain); debug_data=fu_ffo(debug_data,"Main -> Endpoint",s_hostname); debug_data=fu_ffo(debug_data,"Main -> Timestamp",s_timestamp); debug_data=fu_ffo(debug_data,"Main -> Referral",s_referral); debug_data=fu_ffo(debug_data,"Main -> Login Restore",s_loginrestore); debug_data=fu_ffo(debug_data,"Main -> Login Message",s_loginmessage); debug_data=fu_ffo(debug_data,"Main -> Debug",s_debug); debug_data=fu_ffo(debug_data,"Main -> Auth Session",s_authsession); debug_data=fu_ffo(debug_data,"Main -> iFrame Source",s_iframesource); debug_data=fu_ffo(debug_data,"Main -> PWA",s_pwa); debug_data=fu_ffo(debug_data,"Main -> PWA Can",s_pwa_can); debug_data=fu_ffo(debug_data,"Main -> Embed",s_embed); debug_data=fu_ffo(debug_data,"Main -> Mode",s_mode); debug_data=fu_ffo(debug_data,"Main -> Version",s_version); debug_data=fu_ffo(debug_data,"Browser -> Width",s_width); debug_data=fu_ffo(debug_data,"Browser -> Page",sp); debug_data=fu_ffo(debug_data,"Browser -> Low Power",s_lowpowerdevice); debug_data=fu_ffo(debug_data,"User -> Session",su_session); debug_data=fu_ffo(debug_data,"User -> Alias",su_alias); debug_data=fu_ffo(debug_data,"User -> ID",su_id); debug_data=fu_ffo(debug_data,"User -> Name",su_name); debug_data=fu_ffo(debug_data,"User -> Language",su_language); debug_data=fu_ffo(debug_data,"User -> Header",su_header); debug_data=fu_ffo(debug_data,"User -> Avatar",su_avatar); debug_data=fu_ffo(debug_data,"User -> Pro",su_pro); debug_data=fu_ffo(debug_data,"User -> Admin",su_admin); debug_data=fu_ffo(debug_data,"User -> Moderator",su_moderator); debug_data=fu_ffo(debug_data,"Device -> Useragent",window.navigator.userAgent.toLowerCase()); debug_data=fu_ffo(debug_data,"Device -> Type",s_device); fu_pco("container_content","<bubble style='margin-top:50px;'><h2 style='margin-top:0px;'>Debug Data</h2>This data can be sent to staff for help if you are having application problems, or just used for your own use or if you are a curious developer.<div style='margin-top: 15px;font-size: 0.8em;'>"+debug_data+"</div><BR><BR><a href='/'>Exit debug mode</a></div>");} function fu_ffo(current,title,data){ var returnstring=current; if (data==true){ data="true";} if (data==false){ data="false";} if (data==null){ data="null";} if (data==undefined){ data="undefined";} returnstring=""+returnstring+"<div>"+title+": "+data+"</div>"; return returnstring;} function fu_bhd(){ navigator.serviceWorker.getRegistrations().then(function(registrations){ for(let registration of registrations){ registration.unregister(); fu_hrr("We removed a worker from your system!");}});}function fu_gtl(){ if (fu_wlm()==true){ fu_clu(); fu_ehb(); if (su_id!=null){ fu_wta("simple"); fu_vbf("Delete Account"); fu_pco("container_header","<h1>Hey.Café</h1>"); fu_pco("container_content",'<bubble class="alt1" style="text-align: center;font-weight: 600;">'+fu_cpd(fu_nwo("We are so sorry to see you go @"+su_alias+", once you delete your account it can NOT be recovered."))+'</bubble>'); fu_pco("container_content",'<bubble><h2 style="text-align:center;margin-top:0px;">Delete Account</h2><form name="delete" onsubmit="return isValidForm()"><div style="text-align:center;padding-top:50px;"><input type="password" class="input" name="password" size="30" autocomplete="current-password" placeholder="Password"><BR><BR><input type="submit" name="submit" onclick="fu_dac(this.form); return false;" value="Delete Account"></div></form><BR><BR><div style="text-align:center;"><a href="/">Oh! I want to keep my account!</a></div></bubble>');}else{ fu_wrg("/");}
fu_nxk();}} function fu_dac(form){ fu_clu(); var data=fu_uwq(form); var postdata={}; postdata["password"]=ae(fu_csj(data["password"])); postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_account_delete",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_hrr("Your account is now gone"); fu_wrg("/logout");}else{ fu_hrr("Details did not work, try again");}
fu_nxk();});}function fu_ewk(){ var type=null; var resource=null; var design=null; var tag=null; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ type=arr[2];} if (arr[3]!=undefined){ resource=arr[3];} if (arr[4]!=undefined){ if (arr[4]!=""){ design=arr[4];}} if (arr[5]!=undefined){ if (arr[5]!=""){ tag=arr[5];}} } if (type=="builder"){ fu_gla();}else{ fu_wta("embed"); s_embed=true;} if (design=="screenshot"){ fu_wkn("screenshot", "body", "background:"+cpc_background+" !important;"); fu_wkn("screenshot", "#container_contentcase", "max-width: 750px;"); fu_wkn("screenshot", ".conversation .header .meta", "display:none !important;"); fu_wkn("screenshot", ".conversation .header strong", "padding-top: 15px;display: block;font-size: 1.2em;margin-left: 77px;"); fu_wkn("screenshot", ".conversation", "margin-top: max(calc(50vh - calc(50% - 30px)),0px);margin-bottom:0px !important;");} if (design=="clean"){ fu_wkn("clean", ".conversation:last-of-type", "margin-bottom:0px;"); fu_wkn("clean", ".conversation .timestamp", "padding-left: 10px;padding-right: 10px;font-size:0.8em;background:"+cpc_alt_background+";"); fu_wkn("clean", ".conversation .tagged", "float: none;display:inline-block;padding: 3px;padding-left: 10px;padding-right: 10px;font-size:0.8em;background:"+cpc_alt_background+";"); fu_wkn("clean", ".conversation .header", "display:none;"); fu_wkn("clean", ".conversation .cafeheader", "font-size: 0.8em;"); fu_wkn("clean", ".conversation .cafeheader .avatar", "margin-top: -3px;"); fu_wkn("clean", ".conversation .content", "padding-top: 0px;"); fu_wkn("clean", ".conversation .content p:first-of-type", "margin-top: 0px;"); fu_wkn("clean", ".conversation .cafe", "display:none;"); fu_wkn("clean", ".conversation .footer", "display:none;"); fu_wkn("clean", ".conversation .footer_comments", "display:none;"); fu_wkn("clean", ".conversation .section_extra", "display:none;"); fu_wkn("clean", ".conversation .reactions", "display:none;");} if (type=="cafe_feed_pinned"){ fu_wkn("clean", ".conversation .cafeheader", "display:none;");} if (type=="cafe_feed"){ fu_wkn("clean", ".conversation .cafeheader", "display:none;");} if (type=="conversation"){ fu_pco("container_content","<div class='loading'></div>"); fu_npw("https://"+s_hostname+"/get_conversation_info?query="+resource+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["conversations"]!=false){ fu_mxp("container_content"); fu_ndm(response["response_data"],"container_content");}else{ fu_mxp("container_content"); fu_pco("container_content","<bubble class='alt1'>Sorry we can't find this conversation.</bubble>");}} });} if (type=="conversation_full"){ fu_pco("container_content","<div class='loading'></div>"); fu_npw("https://"+s_hostname+"/get_conversation_info?query="+resource+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["conversations"]!=false){ fu_mxp("container_content"); fu_ndm(response["response_data"],"container_content","full");}else{ fu_mxp("container_content"); fu_pco("container_content","<bubble class='alt1'>Sorry we can't find this conversation.</bubble>");}} });} if (type=="profile"){ fu_pco("container_content","<div class='loading'></div>"); fu_npw("https://"+s_hostname+"/get_account_info?query="+resource+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("container_content"); fu_pco("container_content","<bubble class='profile'><div class='aspectcase twentyonebynine'><div class='cover optimizer_bg content' source='"+response["response_data"]["header"]+"'></div></div><img source='"+response["response_data"]["avatar"]+"' class='optimizer_img avatar main' alt='Profile image for "+response["response_data"]["name"]+"'><h1>"+response["response_data"]["name"]+"</h1><h2>@"+response["response_data"]["alias"]+"</h2><div class='minibubble' style='margin-top:10px;'>"+fu_nwo(response["response_data"]["bio"])+"</div></div></bubble>");}else{ fu_mxp("container_content"); fu_pco("container_content","<bubble class='alt1'>Sorry we can't find this profile</bubble>");}});} if (type=="profile_feed"){ fu_pco("container_content","<div class='loading'></div>"); if (tag!=null){ var taggedlink="&tag="+tag+"";}else{ var taggedlink="";}
fu_npw("https://"+s_hostname+"/get_account_conversations?query="+resource+"&count=20&start=0&pinned=false"+taggedlink+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["conversations"]!=false){ fu_mxp("container_content"); fu_qeq(response["response_data"]["conversations"], function(id){ if (design=="clean"){ fu_ndm(response["response_data"]["conversations"][""+id+""],"container_content","clean");}else{ fu_ndm(response["response_data"]["conversations"][""+id+""],"container_content");}});}else{ fu_mxp("container_content"); fu_pco("container_content","<bubble class='alt1'>Sorry we can't find any conversations.</bubble>");}} });} if (type=="profile_feed_pinned"){ fu_pco("container_content","<div class='loading'></div>"); if (tag!=null){ var taggedlink="&tag="+tag+"";}else{ var taggedlink="";}
fu_npw("https://"+s_hostname+"/get_account_conversations?query="+resource+"&count=20&start=0&pinned=true"+taggedlink+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["conversations"]!=false){ fu_mxp("container_content"); fu_qeq(response["response_data"]["conversations"], function(id){ if (design=="clean"){ fu_ndm(response["response_data"]["conversations"][""+id+""],"container_content","clean");}else{ fu_ndm(response["response_data"]["conversations"][""+id+""],"container_content");}});}else{ fu_mxp("container_content"); fu_pco("container_content","<bubble class='alt1'>Sorry we can't find any conversations.</bubble>");}} });} if (type=="cafe_feed"){ fu_pco("container_content","<div class='loading'></div>"); if (tag!=null){ var taggedlink="&tag="+tag+"";}else{ var taggedlink="";}
fu_npw("https://"+s_hostname+"/get_cafe_conversations?query="+resource+"&count=20&start=0&pinned=false"+taggedlink+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["conversations"]!=false){ fu_mxp("container_content"); fu_qeq(response["response_data"]["conversations"], function(id){ if (design=="clean"){ fu_ndm(response["response_data"]["conversations"][""+id+""],"container_content","clean");}else{ fu_ndm(response["response_data"]["conversations"][""+id+""],"container_content");}});}else{ fu_mxp("container_content"); fu_pco("container_content","<bubble class='alt1'>Sorry we can't find any conversations.</bubble>");}} });} if (type=="cafe_feed_pinned"){ fu_pco("container_content","<div class='loading'></div>"); if (tag!=null){ var taggedlink="&tag="+tag+"";}else{ var taggedlink="";}
fu_npw("https://"+s_hostname+"/get_cafe_conversations?query="+resource+"&count=20&start=0&pinned=true"+taggedlink+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["conversations"]!=false){ fu_mxp("container_content"); fu_qeq(response["response_data"]["conversations"], function(id){ if (design=="clean"){ fu_ndm(response["response_data"]["conversations"][""+id+""],"container_content","clean");}else{ fu_ndm(response["response_data"]["conversations"][""+id+""],"container_content");}});}else{ fu_mxp("container_content"); fu_pco("container_content","<bubble class='alt1'>Sorry we can't find any conversations.</bubble>");}} });}} function fu_gla(){ fu_wta("full"); fu_vbf("Embed Builder"); fu_pco("container_content","<h1>Embed Builder</h1>",true); fu_pco("container_content","<div class='horizontalscroll' style='margin-bottom:20px;' id='MenuEmbed'></div>"); fu_pco("MenuEmbed","<a href=\"/embed/builder\"><div class='tab'>Info</div></a>",true); fu_pco("MenuEmbed","<a href=\"javascript:fu_idr();\"><div class='tab'>Full Embed</div></a>",true); fu_pco("MenuEmbed","<a href=\"javascript:fu_aoq();\"><div class='tab'>Badge Embed</div></a>",true); fu_pco("container_content","<bubble><trans>The Embed Builder is a simple tool that allows you to generate simple embeds you can place on your own website. We beleve everyone should build a website to show off your own personality. If you need a place to build a site you can do so over on our other service NodeHost for free.</trans><BR><BR><div id='options_embedmaker'></div></bubble>"); fu_pco("options_embedmaker","<div class='minibubble' onclick='javascript:fu_idr();'><h3 style='margin-top: 0px;margin-bottom:10px;'><trans>Full Embed</trans></h3><trans>This embed type is more dynamic and can show content like conversations and profile previews.</trans></div>"); fu_pco("options_embedmaker","<div class='minibubble' onclick='javascript:fu_aoq();'><h3 style='margin-top: 0px;margin-bottom:10px;'><trans>Badge Embed</trans></h3><trans>Badges are small embeds that can be simple like displaying follower count.</trans></div>");} function fu_aoq(){ fu_wta("full"); fu_vbf("Badge Embed"); fu_pco("container_content","<h1>Badge Embed</h1>",true); fu_pco("container_content","<div class='horizontalscroll' style='margin-bottom:20px;' id='MenuEmbed'></div>"); fu_pco("MenuEmbed","<a href=\"/embed/builder\"><div class='tab'>Info</div></a>",true); fu_pco("MenuEmbed","<a href=\"javascript:fu_idr();\"><div class='tab'>Full Embed</div></a>",true); fu_pco("MenuEmbed","<a href=\"javascript:fu_aoq();\"><div class='tab'>Badge Embed</div></a>",true); fu_pco("container_content",'<bubble><div id="builder_options"></div><div id="builder_values"></div><div id="builder_code"></div></bubble>'); fu_pco("container_content","<bubble style='text-align:center;'><div id='embed_preview'>No embed selected...</div></bubble>"); fu_ryn(false);} function fu_ryn(resourcetype){ fu_mxp("builder_options"); fu_mxp("builder_values"); fu_mxp("builder_code"); if (resourcetype==false){ fu_pco("builder_options","<trans>Select from the options below to generate a preview and see more options.</trans><BR><BR>"); fu_pco("builder_options","<div class='minibubble' onclick=\"javascript:fu_ryn('account');\"><h3 style='margin-top: 0px;margin-bottom:10px;'><trans>Account</trans></h3><trans>Badges generated based on a profile like the number of followers.</trans></div>"); fu_pco("builder_options","<div class='minibubble' onclick=\"javascript:fu_ryn('cafe');\"><h3 style='margin-top: 0px;margin-bottom:10px;'><trans>Café</trans></h3><trans>Badges generated based on the info around a café like number of members.</trans></div>");} if (resourcetype!=false){ fu_pco("builder_code",'<HR></HR>You can put this on your website to embed this content directly. You can click the box below to copy to clipboard.<pre style="white-space: pre-wrap;white-space: -moz-pre-wrap;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;" onclick="fu_fqw(\'CopyContentClickEmbed\');"><code id="CopyContentClickEmbed"></code></pre>'); if (resourcetype=="account"){ var default_resource="hey"; if (su_alias!=null){ default_resource=su_alias;} var types="<select name=\"type\">"; types=""+types+"<option value=\"name\" selected=\"selected\">Name</option>"; types=""+types+"<option value=\"follow\">Follow</option>"; types=""+types+"<option value=\"info_followers\">Info / Followers</option>"; types=""+types+"<option value=\"info_conversations\">Info / Conversations</option>"; types=""+types+"<option value=\"info_following\">Info / Following</option>"; types=""+types+"</select>"; fu_pco("builder_values",'<form name="login" onsubmit="return isValidForm()"><div style="text-align:center;">'+types+'<BR><input type="text" class="input" name="resource" size="50" maxlength="50" placeholder="Resource" value="'+default_resource+'"><BR><BR><input type="submit" name="submit" onclick="fu_vtq(\'account\',this.form); return false;" value="Update"></div></form>'); fu_vtq("account");} if (resourcetype=="cafe"){ var default_resource="cats"; var types="<select name=\"type\">"; types=""+types+"<option value=\"name\" selected=\"selected\">Name</option>"; types=""+types+"<option value=\"join\">Join</option>"; types=""+types+"<option value=\"info_members\">Info / Members</option>"; types=""+types+"</select>"; fu_pco("builder_values",'<form name="login" onsubmit="return isValidForm()"><div style="text-align:center;">'+types+'<BR><input type="text" class="input" name="resource" size="50" maxlength="50" placeholder="Resource" value="'+default_resource+'"><BR><BR><input type="submit" name="submit" onclick="fu_vtq(\'cafe\',this.form); return false;" value="Update"></div></form>'); fu_vtq("cafe");}} } function fu_vtq(resourcetype,form){ var data=false; var code='unknown...'; if (form!=undefined){ data=fu_uwq(form);}else{ if (resourcetype=="account"){ data=[]; data["type"]="name"; data["resource"]="hey"; if (su_alias!=null){ data["resource"]=su_alias;}} if (resourcetype=="cafe"){ data=[]; data["type"]="name"; data["resource"]="cats";}} if (resourcetype=="account"){ var code='&#60;script src="https://hey.cafe/application/external/badge.js" content="'+data["type"]+'" account="'+data["resource"]+'"&#62;&#60;/script&#62;'; fu_mxp("CopyContentClickEmbed"); fu_pco("CopyContentClickEmbed",code); var newelem=document.createElement('script'); newelem.src='https://hey.cafe/application/external/badge.js?v='+fu_hmk(10); newelem.setAttribute('content',data["type"]); newelem.setAttribute('account',data["resource"]); fu_mxp("embed_preview"); aa("embed_preview").appendChild(newelem);} if (resourcetype=="cafe"){ var code='&#60;script src="https://hey.cafe/application/external/badge.js" content="'+data["type"]+'" cafe="'+data["resource"]+'"&#62;&#60;/script&#62;'; fu_mxp("CopyContentClickEmbed"); fu_pco("CopyContentClickEmbed",code); var newelem=document.createElement('script'); newelem.src='https://hey.cafe/application/external/badge.js?v='+fu_hmk(10); newelem.setAttribute('content',data["type"]); newelem.setAttribute('cafe',data["resource"]); fu_mxp("embed_preview"); aa("embed_preview").appendChild(newelem);}} function fu_idr(){ fu_wta("full"); fu_vbf("Full Embed"); fu_pco("container_content","<h1>Full Embed</h1>",true); fu_pco("container_content","<div class='horizontalscroll' style='margin-bottom:20px;' id='MenuEmbed'></div>"); fu_pco("MenuEmbed","<a href=\"/embed/builder\"><div class='tab'>Info</div></a>",true); fu_pco("MenuEmbed","<a href=\"javascript:fu_idr();\"><div class='tab'>Full Embed</div></a>",true); fu_pco("MenuEmbed","<a href=\"javascript:fu_aoq();\"><div class='tab'>Badge Embed</div></a>",true); fu_pco("container_content",'<bubble><div id="builder_options"></div><div id="builder_values"></div><div id="builder_code"></div></bubble>'); fu_pco("container_content","<bubble style='text-align:center;'><div id='embed_preview'>No embed selected...</div></bubble>"); fu_nnz(false);} function fu_nnz(resourcetype){ fu_mxp("builder_options"); fu_mxp("builder_values"); fu_mxp("builder_code"); if (resourcetype==false){ fu_pco("builder_options","<trans>Select from the options below to generate a preview and see more options.</trans><BR><BR>"); fu_pco("builder_options","<div class='minibubble' onclick=\"javascript:fu_nnz('account');\"><h3 style='margin-top: 0px;margin-bottom:10px;'><trans>Account</trans></h3><trans>Embeds generated based on a profile like a list of conversations, pins, and more.</trans></div>"); fu_pco("builder_options","<div class='minibubble' onclick=\"javascript:fu_nnz('cafe');\"><h3 style='margin-top: 0px;margin-bottom:10px;'><trans>Café</trans></h3><trans>Embeds generated based on a café like a list of conversations, pins, and more.</trans></div>"); fu_pco("builder_options","<div class='minibubble' onclick=\"javascript:fu_nnz('conversation');\"><h3 style='margin-top: 0px;margin-bottom:10px;'><trans>Conversation</trans></h3><trans>Embeds generated based on a conversation.</trans></div>");} if (resourcetype!=false){ fu_pco("builder_code",'<HR></HR>You can put this on your website to embed this content directly. You can click the box below to copy to clipboard.<pre style="white-space: pre-wrap;white-space: -moz-pre-wrap;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;" onclick="fu_fqw(\'CopyContentClickEmbed\');"><code id="CopyContentClickEmbed"></code></pre>'); if (resourcetype=="account"){ var default_resource="hey"; if (su_alias!=null){ default_resource=su_alias;} var types="<select name=\"type\">"; types=""+types+"<option value=\"profile\" selected=\"selected\">Profile</option>"; types=""+types+"<option value=\"profile_feed\">Feed</option>"; types=""+types+"<option value=\"profile_feed_pinned\">Feed / Pinned</option>"; types=""+types+"<option value=\"profile_feed_clean\">Feed (Clean)</option>"; types=""+types+"<option value=\"profile_feed_pinned_clean\">Feed / Pinned (Clean)</option>"; types=""+types+"</select>"; fu_pco("builder_values",'<form name="login" onsubmit="return isValidForm()"><div style="text-align:center;">'+types+'<BR><input type="text" class="input" name="resource" size="50" maxlength="50" placeholder="Resource" value="'+default_resource+'"><BR><BR><input type="submit" name="submit" onclick="fu_qre(\'account\',this.form); return false;" value="Update"></div></form>'); fu_qre("account");} if (resourcetype=="cafe"){ var default_resource="cats"; var types="<select name=\"type\">"; types=""+types+"<option value=\"cafe_feed\" selected=\"selected\">Feed</option>"; types=""+types+"<option value=\"cafe_feed_pinned\">Feed / Pinned</option>"; types=""+types+"<option value=\"cafe_feed_clean\">Feed (clean)</option>"; types=""+types+"<option value=\"cafe_feed_pinned_clean\">Feed / Pinned (clean)</option>"; types=""+types+"</select>"; fu_pco("builder_values",'<form name="login" onsubmit="return isValidForm()"><div style="text-align:center;">'+types+'<BR><input type="text" class="input" name="resource" size="50" maxlength="50" placeholder="Resource" value="'+default_resource+'"><BR><BR><input type="submit" name="submit" onclick="fu_qre(\'cafe\',this.form); return false;" value="Update"></div></form>'); fu_qre("cafe");} if (resourcetype=="conversation"){ var default_resource="n0jw4b8mdgwavxzvqiu175zvg"; var types="<select name=\"type\">"; types=""+types+"<option value=\"conversation\" selected=\"selected\">Feed Style</option>"; types=""+types+"<option value=\"conversation_full\">Full Style</option>"; types=""+types+"<option value=\"conversation_clean\">Feed Style (Clean)</option>"; types=""+types+"</select>"; fu_pco("builder_values",'<form name="login" onsubmit="return isValidForm()"><div style="text-align:center;">'+types+'<BR><input type="text" class="input" name="resource" size="50" maxlength="50" placeholder="Resource" value="'+default_resource+'"><BR><BR><input type="submit" name="submit" onclick="fu_qre(\'conversation\',this.form); return false;" value="Update"></div></form>'); fu_qre("conversation");}} } function fu_qre(resourcetype,form){ var data=false; var code='unknown...'; var design=false; if (form!=undefined){ data=fu_uwq(form);}else{ if (resourcetype=="account"){ data=[]; data["type"]="profile"; data["resource"]="hey"; if (su_alias!=null){ data["resource"]=su_alias;}} if (resourcetype=="cafe"){ data=[]; data["type"]="cafe_feed"; data["resource"]="cats";} if (resourcetype=="conversation"){ data=[]; data["type"]="conversation"; data["resource"]="n0jw4b8mdgwavxzvqiu175zvg";}} if (data["type"]=="profile_feed_clean"){ data["type"]="profile_feed"; design="clean";} if (data["type"]=="profile_feed_pinned_clean"){ data["type"]="profile_feed_pinned"; design="clean";} if (data["type"]=="cafe_feed_clean"){ data["type"]="cafe_feed"; design="clean";} if (data["type"]=="cafe_feed_pinned_clean"){ data["type"]="cafe_feed_pinned"; design="clean";} if (data["type"]=="conversation_clean"){ data["type"]="conversation"; design="clean";} if (design!=false){ var codedesign=" design=\""+design+"\"";}else{ var codedesign="";} if (resourcetype=="account"){ var code='&#60;script src="https://hey.cafe/application/external/embed.js" content="'+data["type"]+'" resource="'+data["resource"]+'"'+codedesign+'&#62;&#60;/script&#62;'; fu_mxp("CopyContentClickEmbed"); fu_pco("CopyContentClickEmbed",code); var newelem=document.createElement('script'); newelem.src='https://hey.cafe/application/external/embed.js?v='+fu_hmk(10); newelem.setAttribute('content',data["type"]); newelem.setAttribute('resource',data["resource"]); if (design!=false){ newelem.setAttribute('design',design);}
fu_mxp("embed_preview"); aa("embed_preview").appendChild(newelem);} if (resourcetype=="cafe"){ var code='&#60;script src="https://hey.cafe/application/external/embed.js" content="'+data["type"]+'" resource="'+data["resource"]+'"'+codedesign+'&#62;&#60;/script&#62;'; fu_mxp("CopyContentClickEmbed"); fu_pco("CopyContentClickEmbed",code); var newelem=document.createElement('script'); newelem.src='https://hey.cafe/application/external/embed.js?v='+fu_hmk(10); newelem.setAttribute('content',data["type"]); newelem.setAttribute('resource',data["resource"]); if (design!=false){ newelem.setAttribute('design',design);}
fu_mxp("embed_preview"); aa("embed_preview").appendChild(newelem);} if (resourcetype=="conversation"){ var code='&#60;script src="https://hey.cafe/application/external/embed.js" content="'+data["type"]+'" resource="'+data["resource"]+'"'+codedesign+'&#62;&#60;/script&#62;'; fu_mxp("CopyContentClickEmbed"); fu_pco("CopyContentClickEmbed",code); var newelem=document.createElement('script'); newelem.src='https://hey.cafe/application/external/embed.js?v='+fu_hmk(10); newelem.setAttribute('content',data["type"]); newelem.setAttribute('resource',data["resource"]); if (design!=false){ newelem.setAttribute('design',design);}
fu_mxp("embed_preview"); aa("embed_preview").appendChild(newelem);}}function fu_tww(){ fu_clu(); fu_wta("simple"); s_checkups=false; var error_code="000"; var error_title="Fail!"; var error_emoji="⚠️"; var error_message="Sorry but we don't know what the error is that sent you to this page..."; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ error_code=arr[2];}} if (error_code=="404"){ error_title="Content not found!"; error_emoji="🙀"; error_message="Sorry but this page or content can not be found at this time.";} if (error_code=="500"){ error_title="Server error"; error_emoji="🔥"; error_message="We had a full system meltdown for some reason and the application is not able to make server reqests.";}
fu_vbf("Oh no! "+error_title+""); fu_pco("container_header","<h1>Oh no! "+error_title+"</h1>"); fu_pco("container_header","<div style='text-align:center;'><a href=\"javascript: fu_wrg('/'); fu_drb();\"><div class='tab' style='margin-left:0px;'>"+fu_cpd("👈")+" Back to Hey.Café Application</div></a></div>"); fu_pco("container_content",'<bubble style="text-align:center;">'+error_message+'<BR><div style="font-size:6em;margin-bottom:30px;margin-top:40px;">'+fu_cpd(error_emoji)+'</div><BR><code>'+shl_url+'</code></bubble>'); fu_msd(); fu_nxk();}function fu_wzc(){ fu_clu(); fu_wta("full"); var page="all"; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ page=arr[2];}}
fu_vbf("Explore"); fu_pco("container_content","<h1>Explore</h1><div id='PageExploreMenuTextSpace'></div>",true); fu_pco("container_content","<div class='horizontalscroll' id='PageExploreMenu'></div>"); if (su_id!=null){ fu_pco("PageExploreMenu","<a href='/explore/accounts'><div class='tab'>Accounts</div></a>",true); fu_pco("PageExploreMenu","<a href='/explore/cafes'><div class='tab'>Cafés</div></a>",true); fu_pco("PageExploreMenu","<a href='/explore/suggested_accounts'><div class='tab'>Suggested Accounts</div></a>",true); fu_pco("PageExploreMenu","<a href='/explore/suggested_cafes'><div class='tab'>Suggested Cafés</div></a>",true); fu_pco("PageExploreMenu","<a href='/explore/conversations'><div class='tab'>Conversations</div></a>",true);}else{ fu_pco("PageExploreMenu","<a href='/explore'><div class='tab'>Recent</div></a>",true); fu_pco("PageExploreMenu","<a href='/explore/accounts'><div class='tab'>Accounts</div></a>",true); fu_pco("PageExploreMenu","<a href='/explore/cafes'><div class='tab'>Cafés</div></a>",true); fu_pco("PageExploreMenu","<a href='/explore/conversations'><div class='tab'>Conversations</div></a>",true);} if (page=="all"){ if (su_id!=null){ fu_wrg("/explore/accounts");}else{ fu_pco("container_content","<h2>Recent Active Accounts</h2><div id='PageExploreListAccounts'><div class='loading'></div></div>",true); fu_pco("container_content","<h2>Recent Active Cafés</h2><div id='PageExploreListCafes'><div class='loading'></div></div>",true); fu_pco("container_content","<h2>Recent Conversations</h2><div id='PageExploreConversations'></div><div id='PageExploreConversationsGenerateCase'></div>",true); fu_lpl(false,4); fu_tbl(false,4); fu_wrm(false,20,0);}} if (page=="accounts"){ fu_pco("container_content","<h2>Accounts</h2><div id='PageExploreListAccounts'><div class='loading'></div></div>",true); fu_lpl(false,80);} if (page=="suggested_accounts"){ fu_pco("container_content","<h2>Suggested Accounts</h2><div id='PageExploreListAccounts'><div class='loading'></div></div>",true); fu_lpl("suggest",80);} if (page=="cafes"){ fu_pco("container_content","<h2>Cafés</h2><div id='PageExploreListCafes'><div class='loading'></div></div>",true); fu_tbl(false,80);} if (page=="suggested_cafes"){ fu_pco("container_content","<h2>Suggested Cafés</h2><div id='PageExploreListCafes'><div class='loading'></div></div>",true); fu_tbl("suggest",80);} if (page=="conversations"){ fu_pco("container_content","<h2>Conversations</h2><div id='PageExploreConversations'></div><div id='PageExploreConversationsGenerateCase'></div>",true); if (su_id!=null){ fu_wrm(true,80,0);}else{ fu_wrm(true,40,0);}}
fu_nxk();} function fu_tbl(mode,count){ var url="https://"+s_hostname+"/get_explore_cafes?count="+count+""; if (mode=="all"){ url="https://"+s_hostname+"/get_explore_cafes?all=true&count="+count+"";} if (mode=="suggest"){ url="https://"+s_hostname+"/get_explore_cafes?suggest=true&count="+count+"";}
fu_npw(url,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["cafes"]!=false){ fu_mxp("PageExploreListCafes"); fu_qeq(response["response_data"]["cafes"], function(id){ fu_zsi(response["response_data"]["cafes"][""+id+""],"PageExploreListCafes","halfsize");});}} });} function fu_lpl(mode,count){ var url="https://"+s_hostname+"/get_explore_accounts?count="+count+""; if (mode=="all"){ url="https://"+s_hostname+"/get_explore_accounts?all=true&count="+count+"";} if (mode=="suggest"){ url="https://"+s_hostname+"/get_explore_accounts?suggest=true&count="+count+"";}
fu_npw(url,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["accounts"]!=false){ fu_mxp("PageExploreListAccounts"); fu_qeq(response["response_data"]["accounts"], function(id){ fu_cyh(response["response_data"]["accounts"][""+id+""],"PageExploreListAccounts","halfsize");});}} });} function fu_wrm(loadmore,count,start){ if (start==0){ fu_pco("PageExploreConversationsGenerateCase","<div id='PageExploreConversationsGenerate_"+start+"'><div class='loading'></div></div>");}else{ fu_mxp("PageExploreConversationsGenerate_"+start+""); fu_pco("PageExploreConversationsGenerate_"+start+"","<div class='loading'></div>");}
fu_npw("https://"+s_hostname+"/get_explore_conversations?count="+count+"&start="+start+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("PageExploreConversationsGenerate_"+start+""); if (response["response_data"]["conversations"]!=false){ var bounce=1; fu_qeq(response["response_data"]["conversations"], function(id){ fu_ndm(response["response_data"]["conversations"][""+id+""],"PageExploreConversationsGenerate_"+start+"");}); if (loadmore==true){ fu_pco("PageExploreConversationsGenerateCase","<div id='PageExploreConversationsGenerate_"+(start+count)+"'><input type=\"submit\" name=\"submit\" onclick=\"fu_wrm(true,"+count+","+(start+count)+"); return false;\" value=\"Load More\" style=\"margin:0px;padding: 10px;\"></div>");}}else{ fu_mxp("PageExploreConversations"); fu_pco("PageExploreConversationsGenerateCase","<bubble class='alt1'>Sorry we can't find any conversations to show you.</bubble>",true);}} });}function fu_jnu(){ if (fu_wlm()==true){ fu_clu(); fu_wta("full"); fu_vbf("Conversations"); fu_pco("container_content","<a href='javascript:fu_bjv(\"feed\",\""+fu_csj("false")+"\");'><div class='tab' style='float:right;margin-left:0px;'>"+fu_gmq("view-list")+"</div></a>"); fu_pco("container_content","<h1>Conversations</h1>",true); fu_pco("container_content","<div class='horizontalscroll' style='margin-bottom:20px;' id='MenuFeed'></div>"); fu_pco("MenuFeed","<a href='/feed'><div class='tab current'>Conversations</div></a>",true); fu_pco("MenuFeed","<a href='/cafes'><div class='tab'>Cafés</div></a>",true); fu_pco("MenuFeed","<a href='/tags'><div class='tab'>Discussions</div></a>",true); fu_pco("container_content","<div></div>"); fu_pco("container_content","<div id='inline_convo_genrate_case'></div>"); fu_bin("inline_convo_genrate_case","false"); if (s_pwa_can==true && s_pwa==false){ fu_pco("container_content","<a href='javascript:fu_mut();'><div class='tab' style='margin-left:0px;'>Install APP</div></a>",true);}
fu_pco("container_content","<div style='margin-top:20px;'></div>"); fu_pco("container_content","<div id='PageFeedConversationsGenerateCase'></div>"); fu_pco("container_content","<div id='PageFeedBottomLoader'></div>"); fu_aac(0); fu_nxk();}} function fu_aac(offset){ fu_mxp("PageFeedBottomLoader"); fu_pco("PageFeedBottomLoader","<div class='loading'></div>"); fu_npw("https://"+s_hostname+"/get_feed_conversations?count=40&start="+offset+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["conversations"]!=false){ var firstcheckrender=true; if (aa('conversations_loaded')==undefined){ var render_frame_id=fu_hmk(20); fu_pco("PageFeedConversationsGenerateCase","<div id='conversations_loaded'></div><div id='conversations_render_"+render_frame_id+"'></div>");}else{ var render_frame_id=fu_hmk(20); if (offset==0){ fu_fic("PageFeedConversationsGenerateCase","<div id='conversations_render_"+render_frame_id+"'></div>");}else{ fu_pco("PageFeedConversationsGenerateCase","<div id='conversations_render_"+render_frame_id+"'></div>");}}
fu_qeq(response["response_data"]["conversations"], function(id){ if (offset==0){ if (firstcheckrender==true){ firstcheckrender=false; if (aa('checkup_item_canview')!=undefined){ aa('checkup_item_canview').remove();}
fu_fic("PageFeedConversationsGenerateCase","<div id='checkup_item_canview'></div><action type=\"inview_item_checkup\" item_type=\"conversations\" item_last=\""+id+"\" item_resource=\"feed\" item_resource_sub=\"false\" item_function=\"fu_aac('"+offset+"');\"></action>");}}
fu_ndm(response["response_data"]["conversations"][""+id+""],"conversations_render_"+render_frame_id+"");}); setTimeout(function(){ fu_mxp("PageFeedBottomLoader"); fu_pco("PageFeedBottomLoader","<action type='inview_loadmore_pagefeed' offset='"+(parseInt(offset)+40)+"'></action>");}, 400);}else{ fu_mxp("PageFeedBottomLoader"); if (offset==0){ fu_ckf();}} }else{ fu_few("Not able to load");}});} function fu_ckf(){ fu_npw("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("PageFeedConversationsGenerateCase"); if (response["response_data"]["email_verified"]=="0"){ fu_pco("PageFeedConversationsGenerateCase","<bubble onclick='javascript:fu_bjv(\"verify\",\""+fu_csj(response["response_data"]["email_verified"])+"\")' class='alt1'><strong>Tap here to verify email address</strong><BR><BR>Verify your email to get started, once your email is verified you will have access to the settings area to finish setting up your account.</bubble>",true);}else{ fu_pco("PageFeedConversationsGenerateCase","<bubble class='alt1'>Sorry we can't find any conversations to share with you.</bubble>",true);} if (response["response_data"]["email_updates"]=="0"){ fu_pco("PageFeedConversationsGenerateCase","<bubble class='alt3' onclick='javascript:fu_xqf(\"email_updates\",[\"on\"])'>"+fu_cpd('📧')+" <span>Email updates are turned off, you can tap here to turn them on. (not required)</span></bubble>",true);}}else{ fu_few("Not able to load your user data to generate page...");}});} function fu_mut(){ fu_jwg(); fu_pbr(); fu_pco("container_modl","<h1>Install App</h1>",true); fu_pco("container_modl","<bubble>Hey welcome to our site, but did you know you can install on your device (iOS, iPadOS and Android) just in a few taps. This entire site is one minified app. Here is the information on how to install for both iOS/iPadOS and Android</bubble>",true); fu_pco("container_modl","<bubble><h2 style='margin-top:0px;'>iOS / iPadOS</h2><span>Install is simple, in Safari on the bottom or top of the screen you will see a icon of an arrow leaving a box (share). If you tap on share you will find an option called Add to Home Screen. Just tap this and tap Add on the top right of the window and the app will be installed.</span></bubble>",true); fu_pco("container_modl","<bubble><h2 style='margin-top:0px;'>Android</h2><span>In Chrome tap the menu icon in the top right (3 dots) and tap Add to homescreen.</span></bubble>",true);}function fu_lxi(){ fu_wta("full"); var page=""; var subpage=""; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ page=arr[2];} if (arr[3]!=undefined){ subpage=arr[3];}}
fu_vbf("Help"); fu_pco("container_content","<h1>Help</h1><div id='PageHelpMenuTextSpace'></div>",true); if (page==""){ fu_pco("container_content","<bubble id='PageHelpTags'><div class='loading'></div></bubble>");}else{ fu_pco("container_content","<div class='horizontalscroll' id='PageHelpTags'></div>");}
fu_npw("https://"+s_hostname+"/get_cafe_info?query=heycafedocs",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["tags"]!=false){ fu_mxp("PageHelpTags"); fu_qeq(response["response_data"]["tags"], function(select){ if (page==""){ fu_pco("PageHelpTags","<div class='minibubble' onclick=\"javascript:fu_wrg('/help/tag/"+response["response_data"]["tags"][""+select+""]["id"]+"');\"><div style=\"font-size:2.3em;float:left;margin-right:15px;\">"+fu_cpd(response["response_data"]["tags"][""+select+""]["emoji"])+"</div><h3 style=\"margin-top: 0px;margin-bottom: 5px;font-weight:400;\">"+fu_cpd(response["response_data"]["tags"][""+select+""]["name"])+"</h3><div style=\"font-size:0.8em;font-weight:400;\">...</div></div>");}else{ fu_pco("PageHelpTags","<a href='/help/tag/"+response["response_data"]["tags"][""+select+""]["id"]+"'><div class='tab'>"+fu_cpd(response["response_data"]["tags"][""+select+""]["emoji"])+" "+fu_cpd(response["response_data"]["tags"][""+select+""]["name"])+"</div></a>");}});}} },false,true); if (page=="tag"){ fu_pco("container_content","<div id='PageHelpHeaderTags'><div class='loading'></div></div><bubble id='PageHelpContents'><div class='loading'></div></bubble>"); fu_npw("https://"+s_hostname+"/get_cafe_info?query=heycafedocs",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("PageHelpHeaderTags"); if (response["response_data"]["tags"]!=false){ if (response["response_data"]["tags"][""+subpage+""]!=undefined){ fu_pco("PageHelpHeaderTags","<h2>"+fu_cpd(response["response_data"]["tags"][""+subpage+""]["emoji"])+" "+fu_cpd(response["response_data"]["tags"][""+subpage+""]["name"])+"</h2>");}} }},false,true); fu_npw("https://"+s_hostname+"/get_cafe_conversations?query=heycafedocs&count=40&tag="+subpage+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("PageHelpContents"); if (response["response_data"]["conversations"]!=false){ fu_qeq(response["response_data"]["conversations"], function(id){ var title=fu_atw(response["response_data"]["conversations"][""+id+""]["contents"]); var description=fu_lsr(response["response_data"]["conversations"][""+id+""]["contents"]); fu_pco("PageHelpContents","<div class='minibubble' onclick=\"javascript:fu_wrg('/help/article/"+response["response_data"]["conversations"][""+id+""]["id"]+"');\"><h3 style=\"margin-top: 0px;margin-bottom: 5px;font-weight:400;\">"+fu_cpd(title)+"</h3><div style=\"font-size:0.8em;font-weight:400;\">"+fu_cpd(description)+"</div></div>");});}else{ fu_pco("PageHelpContents","<bubble class='alt1'><trans>Sorry we can't find any articles.</trans></bubble>");}} });} if (page=="article"){ if (subpage!=""){ fu_nhe(subpage);}} if (page=="goto"){ if (subpage=="pro"){ fu_wrg('/help/article/i31mr2u08iq9ry0');} if (subpage=="rules"){ fu_wrg('/help/article/y7ejainr9ooj5gv');} if (subpage=="dmca"){ fu_wrg('/help/article/qoxd9jd1fgd7qmw');} if (subpage=="privacy"){ fu_wrg('/help/article/st33pz17no5q8j4');} if (subpage=="use"){ fu_wrg('/help/article/jw5d1jgd33dtldi');} if (subpage=="terms"){ fu_wrg('/help/article/f67qys1j59m1zwo');} if (subpage=="refunds"){ fu_wrg('/help/article/t90b7e9dxiwib1n');}} if (page==""){ fu_pco("container_content","<bubble id='PageHelpOther'></bubble>"); fu_pco("PageHelpOther","<div class='minibubble' onclick=\"javascript:fu_wrg('/referral');\"><div style=\"font-size:2.3em;float:left;margin-right:15px;\">"+fu_cpd("👋")+"</div><h3 style=\"margin-top: 0px;margin-bottom: 5px;font-weight:400;\"><trans>Invite Friends</trans></h3><div style=\"font-size:0.8em;font-weight:400;\"><trans>Invite and bring your friends over to the better social network.</trans></div></div>"); fu_pco("PageHelpOther","<div class='minibubble' onclick=\"javascript:fu_wrg('/home/personal_site');\"><div style=\"font-size:2.3em;float:left;margin-right:15px;\">"+fu_cpd("🧑🏽‍💻")+"</div><h3 style=\"margin-top: 0px;margin-bottom: 5px;font-weight:400;\"><trans>Personal Site</trans></h3><div style=\"font-size:0.8em;font-weight:400;\"><trans>All users get a free linkshare site that uses your bio or about page content.</trans></div></div>"); fu_pco("PageHelpOther","<div class='minibubble' onclick=\"javascript:fu_wrg('/embed/builder');\"><div style=\"font-size:2.3em;float:left;margin-right:15px;\">"+fu_cpd("🧱")+"</div><h3 style=\"margin-top: 0px;margin-bottom: 5px;font-weight:400;\"><trans>Embed Builder</trans></h3><div style=\"font-size:0.8em;font-weight:400;\"><trans>If you have a website and want to embed a conversation, profile info, or even just a badge with followers we have that.</trans></div></div>");}} function fu_nhe(id){ fu_pco("container_content","<div id='PageConversationCase_"+id+"'><div class='loading'></div></div>"); fu_npw("https://"+s_hostname+"/get_conversation_info?query="+id+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["cafe"]["alias"]=="heycafedocs"){ fu_mxp("PageConversationCase_"+id+""); var title=fu_atw(response["response_data"]["contents"]); var description=fu_lsr(response["response_data"]["contents"]); if (title!=false){ fu_vbf(""+title+" / Help");}else{ title="Missing title"; fu_vbf("Help");} if (description==false){ fu_qyp(response["response_data"]["contents"]);}else{ fu_qyp(description);} var imagefound=false; if (response["response_data"]["attachments"]!=false){ fu_qeq(response["response_data"]["attachments"], function(id){ if (imagefound==false){ if (response["response_data"]["attachments"][id]["type"]=="image"){ fu_bgt(response["response_data"]["attachments"][id]["file"]);}} });} var contents=response["response_data"]["contents"]; contents=fu_uiv(contents); contents=fu_idd(contents); contents=fu_ibd(contents); contents=fu_cpd(contents); contents=fu_esd(contents); contents=fu_ebi(contents); contents=contents.replace("<p dir=\"auto\"><heading>"+title+"</heading></p>", ""); fu_pco("PageConversationCase_"+id+"","<h2>"+title+"</h2><bubble class='conversation normal' mode='normal' id='conversation_"+response["response_data"]["id"]+"'><div class='content' id='conversation_content_"+response["response_data"]["id"]+"'>"+contents+"</div><div class='attachments' id='conversation_attachments_"+response["response_data"]["id"]+"'></div></bubble>"); if (response["response_data"]["attachments"]!=false){ fu_wln(response["response_data"]["attachments"],"conversation_attachments_"+response["response_data"]["id"]+"",false);}}else{ fu_mxp("PageConversationCase_"+id+""); fu_pco("PageConversationCase_"+id+"","<bubble class='alt1'>Error loading page contents</bubble>");}} });}function fu_plx(){ fu_clu(); if (s_logout_reload==true){ fu_drb();} if (sp.startsWith("/home")){ fu_sch();}else{ if (su_id==null){ fu_cvr();}else{ fu_wrg("/feed");}}
fu_nxk();} function fu_cvr(){ if (s_device!="NativeiOSApp"){ fu_wta("splash"); fu_pco("container_header","<h1 style='font-size: 1.6em;margin-top: 5px;'>Hey.Café</h1>"); if (s_referral!=false){ fu_pco("container_content","<bubble class=\"alt1\" style='padding: 15px;font-weight: 500;text-align: center;margin-bottom:30px;'>Hey it's amazing to see you here, @"+s_referral+" sent you an invite. Join our community and hang out with us.</bubble>",true);}
fu_pco("container_content",'<bubble class="hero_bubble"><h2 class="herotext_large">A better social network</h2><h3 class="herotext_medium">Hey.Café is a new social network designed to be easy to use. When you join you can create new conversations and join communities that we call cafés based on your interests, and it\'s free to use.</h3><a href="/register"><div class="tab important" style="margin-left:0px;font-size: 1.5em;">Join Now '+fu_gmq("arrow-right")+'</div></a></bubble>',true); fu_pco("container_content",'<div class="floatbox"><div id="float_content3" class="floatbox_b"></div><div id="float_content4" class="floatbox_a ml"></div></div>'); fu_pco("container_content",'<div class="floatbox"><div id="float_content1" class="floatbox_a mr"></div><div id="float_content2" class="floatbox_b"></div></div>'); fu_pco("container_content",'<div class="floatbox"><div id="float_content5" class="floatbox_d mr"></div><div id="float_content6" class="floatbox_c"></div></div>'); fu_pco("container_content",'<div style="margin-top:40px;margin-bottom:30px;"><h2 style="font-size: 2.5em;margin-bottom: 10px;">More features</h2><h3>We have so many different amazing features that we can\'t share them all in one page.</h3></div>'); fu_pco("container_content",'<bubble><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_cpd("🏡")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">Free personal site</h2>Keep people up to date on you all from one place, and it\'s 100% free. One link to rule them all and we make it easy and fast to keep it updated with all the links to your other networks, media, and anything else.<BR><BR><a href="/home/personal_site"><div class="button">Learn more</div></a></div></bubble>'); fu_pco("float_content1",'<bubble class="subhero_bubble alt6"><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_cpd("☕️")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">Social networking for everyone</h2>Hey.Café is a safe space with rules aginst spam, abuse, and hate against race or sexual identity. You can view our <a href="/help/goto/rules">rules here</a>.</div></bubble>'); fu_pco("float_content2",'<bubble class="subhero_bubble alt2"><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_cpd("🔒")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">No ads</h2>We want everyone to feel safe and in control of your data, and that is why everything has been built from the ground up.<BR><BR>The service contains <strong>no ads</strong> at all. Your data is your data and we don\'t want it, and we don\'t sell it.</div></bubble>'); fu_pco("float_content4",'<bubble class="subhero_bubble alt3"><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_cpd("🌎")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">Communities</h2>Relax and join local groups that we call cafés. We have groups for developers, photographers and just about everything else.<BR><BR>Maybe even you will create a new café to share content with others who share the same interests.</div></bubble>'); fu_pco("float_content3",'<bubble class="subhero_bubble alt4"><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_cpd("😎")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">Funded by cool users we call Pros</h2>That is correct, we are fully user funded, and no you don\'t need to pay anything to use Hey.Café. Users who purchase Pro keep the service ad free for everyone and get a few extra perks.<BR><BR>Some of the Pro perks include larger conversations, larger comments, and more reactions like '+fu_cpd("😎🎉🔥🤯🌹🖖💡🕹🌈🏆")+'.</div></bubble>'); fu_pco("float_content6",'<bubble class="subhero_bubble alt5"><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_cpd("👩🏽‍💻")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">Built for developers</h2>We are still growing and expanding our API but it is 100% free with no limits for anyone to use. View the resources we provide over on the <a href="/help/">help section</a>.<BR><div class="minibubble" style="background: rgba(255,255,255,0.5);border: 0px solid #ffffff;margin-top:15px;"><div style="margin-bottom:5px;"><strong>Sign in with Hey.Café</strong></div>Ability to allow users to login to your service using a Hey.Café account. Learn how to use and setup by visiting <a href="/help/article/f831jy8674jize1">the docs</a>.</div><div class="minibubble" style="background: rgba(255,255,255,0.5);border: 0px solid #ffffff;margin-top:10px;"><div style="margin-bottom:5px;"><strong>Open & public API calls</strong></div>Easily fetch some basic public information about accounts or conversations that can use it to generate custom views or applications. Learn more via <a href="/help/tag/4mqqq4xl3a4ir0t">the docs</a>.</div></div></bubble>'); fu_pco("float_content5",'<bubble class="subhero_bubble alt7"><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_cpd("🔗")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">Embed on your website</h2>You can embed content, profiles and more on your own website with our easy embed system. On any conversation just tap share and you will see an embed code.<BR><BR>You can learn more about the format and the other ways to embed on our <a href="/help/article/wosrhx8c8cpypuw">documentation</a>.<BR><BR>We have a free self hosted blogging system using our API coming soon.</div></bubble>');}else{ fu_qhg();}} function fu_sch(){ if (su_id==null){ fu_wta("splash"); fu_pco("container_header","<h1 style='font-size: 1.6em;margin-top: 5px;'>Hey.Café</h1>");}else{ fu_wta("full");} var page=null; var pagefound=false; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ page=arr[2];}} if (page=="personal_site"){ pagefound=true; fu_vbf("Personal Site"); if (su_id!=null){ fu_pco("container_content",'<h1>Personal Site</h1>');}
fu_pco("container_content",'<bubble class="hero_bubble"><h2 class="herotext_large">Your own little homepage on the internet</h2><h3 class="herotext_medium">All users get free access to a free personal site that you can customize with content like links, videos, images and more all from your Hey.Café profile.</h3></bubble>'); if (su_id==null){ fu_pco("container_content","<div style='text-align:left;margin-bottom: 30px;'><a href=\"javascript: fu_wrg('/');\"><div class='tab' style='margin-left:0px;'>"+fu_cpd("👈")+" Learn more about Hey.Café</div></a></div>");}else{ fu_pco("container_content","<bubble class='alt1'><h2 style=\"margin-top:0px;\">Your site is all setup</h2>Here is the link to your personal page you can share <a href='https://"+su_alias+".myhey.cafe'>"+su_alias+".myhey.cafe</a>.<BR><BR>You can manage your page in a few different ways, by default we use your profile bio and website link if you have one, but if you update your about page content we will use that. Your About page content will also show on your profile.<BR><BR><a href='/settings/me/about'><div class='button'>Update my About Page</div></a></bubble>"); fu_pco("container_content","<hr></hr>");} if (su_id==null){ fu_pco("container_content",'<bubble class="subhero_bubble alt0"><div style="font-size: 0.7em;margin: -15px;margin-bottom: 15px;padding: 5px;"><div style="float: left;background: rgb(236,106,94);padding: 5px;border-radius: 100%;margin-top: 7px;margin-left: 5px;"></div><div style="float: left;background: rgb(244,191,79);padding: 5px;border-radius: 100%;margin-top: 7px;margin-left: 5px;"></div><div style="float: left;background: rgb(97,197,84);padding: 5px;border-radius: 100%;margin-top: 7px;margin-left: 5px;"></div><div style="background: rgba(208, 208, 208, 0.5);padding: 5px;border-radius: 8px;display: inline-block;margin-left: 15px;width: calc(100% - 70px);">'+fu_gmq("lock-fill")+'&ensp;https://anthony.myhey.cafe</div></div><div class="aspectcase sixteenbynine"><div class="content" style="overflow:hidden;margin: -15px;width: calc(100% + 30px);height: calc(100% + 30px);"><iframe src="https://anthony.myhey.cafe" scrolling="no" style="overflow:hidden;width: calc(100% + 54%);height: calc(100% + 54%);transform: scale(0.65);transform-origin: 0 0;"></iframe></div></div></bubble>');}else{ fu_pco("container_content",'<bubble class="alt0"><div class="aspectcase sixteenbynine"><div class="content" style="overflow:hidden;margin: -15px;width: calc(100% + 30px);height: calc(100% + 30px);"><iframe src="https://'+su_alias+'.myhey.cafe" scrolling="no" style="overflow:hidden;width: calc(100% + 54%);height: calc(100% + 54%);transform: scale(0.65);transform-origin: 0 0;"></iframe></div></div></bubble>'); fu_pco("container_content","<hr></hr>");}
fu_pco("container_content",'<bubble><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_cpd("😎")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">Free to use</h2>Yes it\'s free to use, and you can use it how you like without paying a cent.</div></bubble>'); fu_pco("container_content",'<bubble><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_cpd("🫵")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">More about you</h2>You can put in lots of text and content, so you can easily share a bit about yourself along with links, videos, images and more.</div></bubble>'); fu_pco("container_content",'<bubble><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_cpd("🏡")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">Where to find you</h2>Make it your one link you give people that you can keep updated with all your social media links and other important information.</div></bubble>'); fu_pco("container_content",'<bubble><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_cpd("😌")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">Clean and simple</h2>With a clean and simple design that is both mobile and dark mode ready, you don\'t need to know anything about making websites to use. We generate the way it looks based on your account avatar and banner with a clean and simple look.</div></bubble>'); fu_pco("container_content",'<bubble><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_cpd("⚡️")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">Formatting</h2>With formatting you can create lists, titles, code blocks, drop downs, and even embed a video or image with just a link. You can learn more about our formatting by <a href="/help/article/zfsjvyi0jg7m1gb">tapping here</a>.</div></bubble>'); if (su_id!=null){ fu_pco("container_content","<hr></hr><h2 style='margin-top:40px;'>Share to social</h2>"); var urlcontent="https://"+su_alias+".myhey.cafe"; var conversationcontent="You can find out more about me and what I do by visiting my homepage"; fu_pco("container_content","<bubble class='alt3'>"+conversationcontent+" https://"+su_alias+".myhey.cafe</bubble>"); var buttons=fu_lsz(urlcontent,conversationcontent); fu_pco("container_content","<bubble>"+buttons+"</bubble>");}} if (pagefound==false){ fu_wrg("/e/404");}}function fu_qhg(){ fu_clu(); fu_ehb(); fu_wta("simple"); fu_vbf("Login"); fu_pco("container_header","<h1>Hey.Café</h1>"); if (s_loginmessage!=false){ fu_pco("container_content",'<bubble class="alt1" style="text-align: center;font-weight: 600;">'+s_loginmessage+'</bubble>');}
fu_pco("container_content",'<bubble><h2 style="text-align:center;margin-top:0px;">Login</h2><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;padding-top:50px;"><input type="text" class="input" name="username" size="30" maxlength="30" placeholder="Alias / Username" autocomplete="username" value=""><BR><input type="password" class="input" name="password" size="30" autocomplete="current-password" placeholder="Password"><BR><BR><input type="submit" name="submit" onclick="fu_dgv(this.form); return false;" value="Login"></div></form><BR><BR><div style="text-align:center;"><a href="/register">Oh! I need to create an account</a><BR><BR><a href="javascript:fu_bvd();">I forgot my details</a></div></bubble>'); fu_nxk();} function fu_heh(how,alias,password){ fu_clu(); var message=""; if (how=="app"){ message="Open your 2FA app and enter the code in the box below and tap login, this code is time limited.";} if (how=="email"){ message="We just sent you an email with a 2FA login code, enter the code in the box below and tap login.";}
fu_wta("simple"); fu_vbf("Login"); fu_pco("container_header","<h1>Hey.Café</h1>"); if (s_loginmessage!=false){ fu_pco("container_content",'<bubble class=\'alt1\'>'+s_loginmessage+'</bubble>');}
fu_pco("container_content",'<bubble class=\'alt0\'>'+message+'</bubble><bubble><h2 style="text-align:center;margin-top:0px;">Login (2FA)</h2><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;padding-top:50px;"><div style="display:none;"><input type="text" class="input" name="username" size="30" maxlength="30" placeholder="Alias / Username" autocomplete="username" value="'+alias+'"><BR><input type="password" class="input" name="password" autocomplete="current-password" size="30" placeholder="Password" value="'+password+'"><BR><BR></div><input type="text" class="input" name="code" size="30" maxlength="30" placeholder="2FA Code" autocomplete="one-time-code"><BR><BR><input type="submit" name="submit" onclick="fu_dgv(this.form); return false;" value="Login"></div></form><BR><BR><div style="text-align:center;"><a href="/register">Oh! I need to create an account</a><BR><BR><a href="javascript:fu_bvd();">I forgot my login</a></div></bubble>'); fu_nxk();} function fu_dgv(form){ fu_clu(); var data=fu_uwq(form); var postdata={}; postdata["alias"]=data["username"]; postdata["password"]=ae(fu_csj(data["password"])); if (data["code"]!=undefined){ postdata["code"]=data["code"];}
postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_account_login",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ su_id=response["response_data"]["id"]; su_alias=response["response_data"]["alias"]; su_name=response["response_data"]["name"]; su_language=response["response_data"]["language"]; su_session=response["response_data"]["session"]; fu_ymy("ses_su_session"); fu_ymy("ses_su_alias"); fu_ymy("ses_su_id"); fu_ymy("ses_su_name"); fu_ymy("ses_su_language"); fu_ccj("ses_su_session", su_session); fu_ccj("ses_su_alias", su_alias); fu_ccj("ses_su_id", su_id); fu_ccj("ses_su_name", su_name); fu_ccj("ses_su_language", su_language); if (fu_rpz("ses_s_sessions")!=""){ var sessionstorage=fu_hdg(fu_rpz("ses_s_sessions")); sessionstorage[""+su_id+""]={}; sessionstorage[""+su_id+""]["session"]=su_session; sessionstorage[""+su_id+""]["alias"]=su_alias; sessionstorage[""+su_id+""]["id"]=su_id; sessionstorage[""+su_id+""]["name"]=su_name; sessionstorage[""+su_id+""]["language"]=su_language; fu_ymy("ses_s_sessions"); fu_ccj("ses_s_sessions", fu_ere(sessionstorage));}
su_avatar=response["response_data"]["account_avatar"]; su_header=response["response_data"]["account_header"]; su_pro=response["response_data"]["account_pro"]; su_admin=response["response_data"]["account_admin"]; su_moderator=["response_data"]["account_moderator"]; s_app_colour=response["response_data"]["app_colour"]; s_app_stats=response["response_data"]["app_stats"]; s_app_reducemotion=response["response_data"]["app_reducemotion"]; s_app_hidesuggestions=response["response_data"]["app_hidesuggestions"]; s_app_forcedisplay=response["response_data"]["app_forcedisplay"]; s_app_scaledisplay=response["response_data"]["app_scaledisplay"]; fu_hrr("Hey welcome "+response["response_data"]["name"]+"!"); fu_azs(s_mode); fu_hxc(); sh=[]; if (s_loginrestore==false){ fu_wrg("/feed");}else{ fu_wrg(s_loginrestore); s_loginrestore=false;}}else{ if (response["system_api_error"]=="failed"){ fu_hrr("Login failed, the details given are not correct");} if (response["system_api_error"]=="notfound"){ fu_hrr("Login failed, the details given are not correct");} if (response["system_api_error"]=="banned"){ fu_hrr("Sorry but this account has been banned for not following the rules");} if (response["system_api_error"]=="2faapp_failed"){ fu_hrr("The app 2FA code was not valid");} if (response["system_api_error"]=="2faemail_failed"){ fu_hrr("The email 2FA code was not valid");} if (response["system_api_error"]=="2faapp_needed"){ fu_heh("app",data["username"],data["password"]);} if (response["system_api_error"]=="2faemail_needed"){ fu_heh("email",data["username"],data["password"]);}}
fu_nxk();});} function fu_bvd(){ fu_clu(); fu_wta("simple"); fu_vbf("Password Reset"); fu_pco("container_header","<h1>Hey.Café</h1>"); fu_pco("container_content",'<bubble><h2 style="text-align:center;margin-top:0px;">Password Reset</h2>Oh no, did you forget your login? That is alright because we will help you get it reset. Enter in your email and a new password and we will send you a code for any accounts you have if we find any.<BR><BR><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;padding-top:50px;"><input type="text" class="input" name="email" size="30" maxlength="100" placeholder="Email" value=""><BR><input type="password" class="input" name="password" size="30" placeholder="New Password"><BR><BR><input type="submit" name="submit" onclick="fu_mie(this.form); return false;" value="Send Reset"></div></form><BR><BR><div style="text-align:center;"><a href="/register">Oh! I need to create an account</a><BR><BR><a href="/login">I know my login</a></div></bubble>'); fu_nxk();} function fu_mie(form){ fu_clu(); var data=fu_uwq(form); var postdata={}; postdata["email"]=ae(fu_csj(data["email"])); postdata["password"]=ae(fu_csj(data["password"])); postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_account_forgot",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_wta("simple"); fu_vbf("Password Reset"); fu_pco("container_header","<h1>Hey.Café</h1>"); if (s_device!="NativeiOSApp"){ fu_pco("container_header","<div style='text-align:center;'><a href='/'><div class='tab' style='margin-left:0px;'>Home</div></a><a href='/login'><div class='tab' style='margin-left:0px;'>Login</div></a><a href='/register'><div class='tab' style='margin-left:0px;'>Join</div></a></div>");}else{ fu_pco("container_header","<div style='text-align:center;'><a href='/login'><div class='tab' style='margin-left:0px;'>Login</div></a><a href='/register'><div class='tab' style='margin-left:0px;'>Join</div></a></div>");}
fu_pco("container_content",'<bubble><h2 style="text-align:center;margin-top:0px;">Password Reset</h2>Alright we sent you some codes if we found an account with the email address you gave us, check your email and you can enter one of the reset codes in the box below. Keep this page open.<BR><BR><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;padding-top:50px;"><input type="text" class="input" name="code" size="30" maxlength="100" placeholder="Code" value=""><BR><BR><input type="submit" name="submit" onclick="fu_zrd(this.form); return false;" value="Reset"></div></form></div></bubble>');}else{ fu_hrr("Sorry we had a problem with this reset request");}
fu_nxk();});} function fu_zrd(form){ fu_clu(); var data=fu_uwq(form); var postdata={}; postdata["code"]=data["code"]; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_account_forgot",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_hrr("Password has been reset, you can now login"); fu_wrg("/login"); fu_drb();}else{ fu_hrr("Reset failed, the details given are not correct");}
fu_nxk();});}function fu_xqd(){ fu_clu(); fu_ehb(); fu_npw("https://"+s_hostname+"/post_account_logout",function(result){ var response = fu_hdg(result); if (fu_rpz("ses_s_sessions")!=""){ sessionstorage=fu_hdg(fu_rpz("ses_s_sessions")); sessionstorage[""+su_id+""]=null; fu_ccj("ses_s_sessions", fu_ere(sessionstorage));}
su_session=null; su_alias=null; su_id=null; su_name=null; su_language="en"; su_avatar=null; su_header=null; su_admin=false; su_moderator=false; s_loginrestore=false; s_app_colour="false"; s_app_stats="false"; s_app_reducemotion="false"; s_app_hidesuggestions="false"; s_app_forcedisplay="false"; s_app_scaledisplay="false"; fu_ymy("ses_su_session"); fu_ymy("ses_su_alias"); fu_ymy("ses_su_id"); fu_ymy("ses_su_name"); fu_ymy("ses_su_language"); s_logout_reload=true; fu_wrg("/"); fu_nxk(); if (fu_rpz("ses_s_sessions")!=""){ fu_dqi();}});}
function fu_iqy(){ if (fu_wlm()==true){ fu_wta("full"); fu_clu(); var chat=null; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ chat=arr[2];}} if (chat==null){ fu_vbf("Messages"); fu_pco("container_content","<h1>Messages</h1>",true); fu_pco("container_content","<div id='PageChatsList'><div class='loading'></div></div>"); fu_azo();}else{ fu_loz(chat);}
fu_nxk();}} function fu_cae(chat,name,account_name,account_alias){ fu_pbr(); fu_pco("container_modl","<h1><trans>Join chat</trans></h1><bubble><p>Do you want to join the chat room <strong>"+fu_xla(name)+"</strong> created by "+fu_cpd(fu_xla(account_name))+" @"+fu_cpd(fu_xla(account_alias))+"? We wont show you any content from a chat room unless you accept.</trans></p></bubble>"); fu_pco("container_modl","<bubble onclick=\"javascript:fu_nzm('"+chat+"');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("👍")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'><trans>Accept</trans></h3><trans>Accept and join the chat room.</trans></bubble>"); fu_pco("container_modl","<bubble onclick=\"javascript:fu_vcw('"+chat+"');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("👎")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'><trans>Leave</trans></h3><trans>Leave this chat room.</trans></bubble>");} function fu_azo(){ fu_npw("https://"+s_hostname+"/get_chat_list?query="+su_alias+"&count=100",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("PageChatsList"); if (response["response_data"]["chats"]!=false){ fu_pco("PageChatsList","<div id='list_gen_chats'></div>"); fu_qeq(response["response_data"]["chats"], function(id){ fu_bre(response["response_data"]["chats"][""+id+""],'list_gen_chats');});}else{ fu_pco("PageChatsList","<bubble class='alt1'>You have no active chats.</bubble>",true);}} });} function fu_bre(chat,container,invite,bubble){ var status=""; var icon=""; var weight=400; var subtext="<trans>This chat room has no messages...</trans>"; var memberavatars=""; var clickevent="javascript:fu_wrg('/messages/"+chat["id"]+"');"; if (chat["info_emoji"]=="false"){ icon=fu_cpd("😀");}else{ icon=fu_cpd(chat["info_emoji"]);} if (chat["info_status"]=="waiting"){ icon=fu_cpd("👋"); status="<div class=\"tab solidhover\" style=\"float:right;padding:5px;font-size:0.8em;padding-left: 10px;padding-right: 10px;margin-left: 5px;margin-right: 0px;margin-top: 0px;\"><trans>Request</trans></div>"; subtext="Invite to chat room created by "+chat["account"]["name"]+" @"+chat["account"]["alias"]+"."; clickevent="javascript:fu_cae('"+chat["id"]+"','"+fu_csj(chat["info_name"])+"','"+fu_csj(chat["account"]["name"])+"','"+fu_csj(chat["account"]["alias"])+"');"; weight=600;} if (chat["info_status"]=="active"){ if (chat["date_lastseen"]<=chat["date_activity"]){ status="<div class=\"tab solidhover\" style=\"float:right;padding:5px;font-size:0.8em;padding-left: 10px;padding-right: 10px;margin-left: 5px;margin-right: 0px;margin-top: 0px;\"><trans>New Message</trans></div>"; weight=600;}} if (chat["info_status"]=="active"){ if (chat["recent_message"]!=false){ var smallstring=fu_aic(Array.from(chat["recent_message"]["contents"]).slice(0, 120).join(''))+"..."; subtext=""+chat["recent_message"]["account"]["name"]+": "+smallstring+"";}}
fu_qeq(chat["members"], function(id){ if (chat["members"][""+id+""]["info_status"]=="active"){ memberavatars=""+memberavatars+"<a href=\"javascript:fu_xlg('"+chat["members"][""+id+""]["account_alias"]+"');\" data-title='"+chat["members"][""+id+""]["account_name"]+"'><img source='"+chat["members"][""+id+""]["account_avatar"]+"' class='optimizer_img avatar' style='width:20px;height:20px;margin-right:5px;margin-top:5px;' alt='Profile image for "+chat["members"][""+id+""]["account_name"]+"'></a>";}}); if (invite!=undefined){ clickevent="javascript:fu_ahc('"+chat["id"]+"','"+invite+"');";}
fu_pco(container,"<bubble onclick=\""+clickevent+"\">"+status+"<div style='font-size:2.3em;float:left;margin-right:15px;'>"+icon+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;font-weight:"+weight+";'>"+fu_cpd(chat["info_name"])+"</h3><div style='font-size:0.8em;font-weight:"+weight+";'>"+fu_cpd(subtext)+"</div><div style='margin-top:3px;'>"+memberavatars+"</div></bubble>");} function fu_loz(chat){ fu_npw("https://"+s_hostname+"/get_chat_info?query="+chat+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_vbf(""+response["response_data"]["info_name"]+""); if (response["response_data"]["info_emoji"]=="false"){ icon=fu_cpd("😀");}else{ icon=fu_cpd(response["response_data"]["info_emoji"]);}
fu_pco("container_content","<div id='ChatHeaderArea' class='hide_if_active_livearea' style='max-height:200px;'>"); fu_pco("ChatHeaderArea","<a href=\"javascript:fu_ngv('"+chat+"');\"><div class='tab' style='float:right;margin-left:0px;'><trans>Settings</trans></div></a>"); fu_pco("ChatHeaderArea","<h1>"+icon+" "+fu_cpd(response["response_data"]["info_name"])+"</h1>"); if (response["response_data"]["info_description"]!="false"){ fu_pco("ChatHeaderArea","<bubble>"+fu_cpd(response["response_data"]["info_description"])+"</bubble>");}
fu_pco("container_content","<div id='PageChatHeader'></div><div id='PageChatControls'></div><div id='PageChatMessagesGenerateCase'></div><div id='PageChatMessages'><div class='loading'></div></div>"); fu_pco("PageChatControls",'<div id="PageChatControlsInput"></div>'); fu_gjb(chat); fu_lmr(0,chat);}else{ fu_wrg("/messages");}});} function fu_gjb(chat){ fu_mxp("PageChatControlsInput"); var editor=''; if (su_pro==true){ var sizemax=s_char_pro;}else{ var sizemax=s_char_reg;}
editor=''+editor+'<bubble class="conversation messageinput noanimation"><form name="messa" onsubmit="return isValidForm()"><div style="text-align:center;">'; editor=''+editor+'<div style=\'overflow: hidden;\'>'; editor=''+editor+'<livearea spellcheck="true" style="margin-top:0px;" onpaste="javascript:fu_rke(this, event);" onfocusin="javascript:fu_mqk(false);" beforeinput="javscript:fu_jro(event);" oninput="javascript:fu_mqk(event)" id="livearea" placeholder="Message..." class="fullsize" contenteditable="true" contentcontainer="contentarea" entersend="click_me_send"></livearea>'; editor=''+editor+'<textarea class="input fullsize hidden" name="content" size="50" maxlength="5000" placeholder="Message..." id="contentarea" charcost="true" charcostcase="newconv_costbox" maxsize="'+sizemax+'"></textarea>'; editor=''+editor+'<div id="newconv_costbox" class="tab" style="float: right;margin-top:5px;"></div>'; editor=''+editor+'<div onclick="javascript:fu_njs(\'attach_photo_area_inline\');" class="tab" style="float: right;margin-top:5px;" data-title="Attach Photo">'+fu_gmq("images")+'</div>'; editor=''+editor+'<div id="modl_newmessa_submit"><input type="submit" id="click_me_send" name="submit" onclick="javascript:fu_mqk(true); fu_ajb(\''+chat+'\',this.form); return false;" value="Send" style="float: left;width: 110px;padding-top:10px;padding-bottom:10px;"></div>'; editor=''+editor+'</div></div>'; editor=''+editor+'<div class="minibubble spacing" id="attach_photo_area_inline"></div>'; editor=''+editor+'</form>'; editor=''+editor+'<div class="minibubble spacing" id="editor_action_area_inline"></div>'; editor=''+editor+'</bubble>'; fu_pco("PageChatControlsInput",editor);} function fu_lmr(offset,chat,noloader){ fu_mxp("PageChatMessages"); if (noloader==undefined){ fu_pco("PageChatMessages","<div class='loading'></div>");}
fu_pco("PageChatMessagesGenerateCase","<div id='PageChatMessagesGenerate_"+offset+"'></div>"); fu_npw("https://"+s_hostname+"/get_chat_messages?query="+chat+"&count=40&start="+offset+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["messages"]!=false){ var firstcheckrender=true; if (aa('messages_loaded')==undefined){ var render_frame_id=fu_hmk(20); fu_pco("PageChatMessagesGenerateCase","<div id='messages_loaded'></div><div id='messages_render_"+render_frame_id+"'></div>");}else{ var render_frame_id=fu_hmk(20); if (offset==0){ fu_fic("PageChatMessagesGenerateCase","<div id='messages_render_"+render_frame_id+"'></div>");}else{ fu_pco("PageChatMessagesGenerateCase","<div id='messages_render_"+render_frame_id+"'></div>");}}
fu_qeq(response["response_data"]["messages"], function(id){ if (offset==0){ if (firstcheckrender==true){ firstcheckrender=false; if (aa('checkup_item_canview')!=undefined){ aa('checkup_item_canview').remove();}
fu_fic("PageChatMessagesGenerateCase","<div id='checkup_item_canview'></div><action type=\"inview_item_checkup\" item_type=\"messages\" item_last=\""+id+"\" item_resource=\""+chat+"\" item_resource_sub=\"false\" item_function=\"fu_lmr('"+offset+"','"+chat+"','yes');\"></action>");}}
fu_vww(response["response_data"]["messages"][""+id+""],"messages_render_"+render_frame_id+"");}); setTimeout(function(){ fu_mxp("PageChatMessages"); fu_pco("PageChatMessages","<action type='inview_loadmore_pagechat' offset='"+(parseInt(offset)+40)+"' chat='"+chat+"'></action>");}, 400);}else{ fu_mxp("PageChatMessages"); if (offset==0){ fu_pco("PageChatMessages","<div id='ChatNoMessageReload'></div><bubble class='alt1'><trans>Sorry! We can't find any messages.</trans></bubble>");}} }});} function fu_nzm(chat){ var postdata={}; postdata["chat"]=chat; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_chat_accept",postdata,function(result){ var response = fu_hdg(result); if (response["response_data"]=="ok"){ fu_hrr("You have joined the chat room"); fu_wrg("/messages/"+chat+"");}else{ fu_hrr("Unable to join chat room"); fu_zng();}
fu_nxk();});} function fu_vcw(chat){ var postdata={}; postdata["chat"]=chat; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_chat_leave",postdata,function(result){ var response = fu_hdg(result); if (response["response_data"]=="ok"){ fu_hrr("You have left the chat room"); fu_wrg("/messages");}else{ fu_hrr("Unable to leave chat room"); fu_zng();}
fu_nxk();});} var appPageMessages_message_sending=false; function fu_ajb(chat,form){ if (appPageMessages_message_sending==false){ appPageMessages_message_sending=true; fu_clu(); fu_jwg(); if (Array.isArray(form)==false){ var data=fu_uwq(form);}else{ var data=form;} var postdata={}; var sendurl=""; data["content"] = data["content"].replace(/(\r\n|\n|\r)/gm, ""); postdata["chat"]=chat; postdata["content"]=ae(fu_csj(data["content"])); if (data["photo"]!=undefined){ postdata["file"]=ae(data["photo"]);}
postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_chat_message_create",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ appPageMessages_message_sending=false; if (aa("ChatNoMessageReload")){ fu_wrg("/messages/"+chat+"");}else{ aa("livearea").blur(); fu_gjb(chat); aa("livearea").setAttribute('autofocus', 'autofocus'); aa("livearea").focus();}}else{ appPageMessages_message_sending=false; var message="Unable to send message"; fu_hrr(message); fu_zng();}
fu_nxk();});}} function fu_ows(alias,form){ fu_clu(); fu_jwg(); if (Array.isArray(form)==false){ var data=fu_uwq(form);}else{ var data=form;} var postdata={}; var sendurl=""; postdata["account"]=alias; postdata["name"]=ae(fu_csj(data["name"])); postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_chat_create",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_hrr("Chat has been created"); fu_wrg("/messages/"+response["response_data"]+"");}else{ var message="Unable to create the chat room"; if (response["system_api_error"]=="waitingonchat"){ var message="You already are in a pending chat with this person";}
fu_hrr(message); fu_zng();}
fu_nxk();});} function fu_ahc(chat,account){ fu_clu(); fu_jwg(); var postdata={}; postdata["chat"]=chat; postdata["account"]=account; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_chat_invite",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_hrr("Invite has been sent"); fu_wrg("/messages/"+chat+"");}else{ fu_hrr("Not able to invite"); fu_zng();}
fu_nxk();});} function fu_ngv(chat){ fu_pbr(); fu_pco("container_modl","<div class='loading'></div>"); fu_npw("https://"+s_hostname+"/get_chat_info?query="+chat+"",function(result){ var response = fu_hdg(result); fu_mxp("container_modl"); if (response["system_api_error"]==false){ fu_pco("container_modl","<h1><trans>Chat settings</trans></h1><bubble id='ChatSettingsItems'></bubble>"); if (response["response_data"]["info_description"]=="false"){ response["response_data"]["info_description"]="No description...";} if (response["response_data"]["info_emoji"]=="false"){ response["response_data"]["info_emoji"]="😀";}
fu_pco("ChatSettingsItems","<div class=\"minibubble\" onclick=\"javascript:fu_iaj('"+response["response_data"]["id"]+"','"+fu_csj(response["response_data"]["info_name"])+"');\"><h3 style='margin-top: 0px;margin-bottom: 5px;'><trans>Name</trans></h3>"+fu_cpd(response["response_data"]["info_name"])+"</div>"); fu_pco("ChatSettingsItems","<div class=\"minibubble\" onclick=\"javascript:fu_xlo('"+response["response_data"]["id"]+"','"+fu_csj(response["response_data"]["info_description"])+"');\"><h3 style='margin-top: 0px;margin-bottom: 5px;'><trans>Description</trans></h3>"+fu_cpd(response["response_data"]["info_description"])+"</div>"); fu_pco("ChatSettingsItems","<div class=\"minibubble\" onclick=\"javascript:fu_bem('"+response["response_data"]["id"]+"','"+response["response_data"]["info_emoji"]+"');\"><h3 style='margin-top: 0px;margin-bottom: 5px;'><trans>Emoji</trans></h3>"+fu_cpd(response["response_data"]["info_emoji"])+"</div>"); fu_pco("ChatSettingsItems","<h2>Members</h2>",true); fu_qeq(response["response_data"]["members"], function(id){ fu_pco("ChatSettingsItems","<div class=\"minibubble\" onclick=\"javascript:fu_wrg('/@"+response["response_data"]["members"][""+id+""]["account_alias"]+"');\"><img source=\""+response["response_data"]["members"][""+id+""]["account_avatar"]+"\" class=\"avatar optimizer_img\" style=\"float:left;margin-right:15px;width:44px;height:44px;\" alt='Avatar for account "+response["response_data"]["members"][""+id+""]["account_alias"]+"'><h3 style='margin-top: 0px;margin-bottom: 5px;'>"+fu_cpd(response["response_data"]["members"][""+id+""]["account_name"])+" @"+response["response_data"]["members"][""+id+""]["account_alias"]+"</h3>Last active "+fu_agm(response["response_data"]["members"][""+id+""]["date_lastseen"])+" & status is <strong>"+response["response_data"]["members"][""+id+""]["info_status"]+"</strong>.</div>");}); fu_pco("ChatSettingsItems","<h2>Personal</h2>",true); fu_pco("ChatSettingsItems","<div class=\"minibubble\" onclick=\"javascript:fu_vcw('"+response["response_data"]["id"]+"');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("💨")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'><trans>Leave</trans></h3><trans>Taping this will remove you without delay, poof.</trans></div>");}else{ fu_wrg("/messages");}});} function fu_iaj(chat,current){ fu_pbr(); fu_pco("container_modl","<h1>Chat name</h1>",true); fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;margin-top:20px;"><input type="text" class="input" name="name" size="120" maxlength="120" placeholder="Name" value="'+fu_xla(current)+'"><BR><BR><input type="submit" name="submit" onclick="fu_qrm(\''+chat+'\',this.form); return false;" value="Update"></div></form></bubble>');} function fu_xlo(chat,current){ fu_pbr(); if (current=="No description..."){ current="";}
fu_pco("container_modl","<h1>Chat description</h1>",true); fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;margin-top:20px;"><textarea class="input fullsize" name="description" size="200" maxlength="200" placeholder="Description">'+fu_xla(current)+'</textarea><BR><BR><input type="submit" name="submit" onclick="fu_mcy(\''+chat+'\',this.form); return false;" value="Update"></div></form></bubble>');} function fu_bem(chat,current){ fu_pbr(); fu_pco("container_modl","<h1>Chat emoji</h1>",true); fu_pco("container_modl","<div style='text-align:center;font-size:4em;padding-bottom:35px;'>"+fu_cpd(current)+"</div><div id='emoji_load_in_case'></div>"); fu_pco("container_modl","<bubble onclick=\"javascript:fu_ggk('"+chat+"','Activities');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("🏀")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Activities</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("container_modl","<bubble onclick=\"javascript:fu_ggk('"+chat+"','Animals & Nature');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("🦊")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Animals & Nature</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("container_modl","<bubble onclick=\"javascript:fu_ggk('"+chat+"','Flags');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("🇨🇦")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Flags</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("container_modl","<bubble onclick=\"javascript:fu_ggk('"+chat+"','Food & Drink');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("🥤")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Food & Drink</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("container_modl","<bubble onclick=\"javascript:fu_ggk('"+chat+"','Objects');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("💡")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Objects</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("container_modl","<bubble onclick=\"javascript:fu_ggk('"+chat+"','People & Body');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("🤷‍♂️")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>People & Body</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("container_modl","<bubble onclick=\"javascript:fu_ggk('"+chat+"','Smileys & Emotion');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("🫣")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Smileys & Emotion</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("container_modl","<bubble onclick=\"javascript:fu_ggk('"+chat+"','Symbols');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("❤️")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Symbols</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("container_modl","<bubble onclick=\"javascript:fu_ggk('"+chat+"','Travel & Places');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("🚲")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Travel & Places</h3>Tap to load emojis you can pick from</bubble>");} function fu_ggk(chat,search){ fu_mxp("emoji_load_in_case"); fu_pco("emoji_load_in_case","<div class='loading'></div>"); fu_npw("https://"+s_hostname+"/get_system_emoji_category?category="+ae(search)+"&count=800",function(result){ var response = fu_hdg(result); fu_mxp("emoji_load_in_case"); fu_pco("emoji_load_in_case","<div id='emoji_actual_placement' style='text-align: center;margin-bottom:20px;'></div>"); if (response["system_api_error"]==false){ fu_qeq(response["response_data"], function(id){ fu_pco("emoji_actual_placement","<div style='display:inline-block;font-size:2em;padding:5px;'><bubble onclick=\"javascript:fu_jhw('"+chat+"','"+response["response_data"][""+id+""]["emoji"]+"');\">"+fu_cpd(response["response_data"][""+id+""]["emoji"])+"</bubble></div>");});}});} function fu_qrm(chat,form){ fu_clu(); fu_jwg(); if (Array.isArray(form)==false){ var data=fu_uwq(form);}else{ var data=form;} var postdata={}; var sendurl=""; postdata["chat"]=chat; postdata["name"]=ae(fu_csj(data["name"])); postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_chat_update_name",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_hrr("Chat name has been updated"); fu_wrg("/messages/"+chat+"");}else{ fu_hrr("Not able to update name"); fu_zng();}
fu_nxk();});} function fu_jhw(chat,emoji){ fu_clu(); fu_jwg(); var postdata={}; postdata["chat"]=chat; postdata["emoji"]=ae(fu_csj(emoji)); postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_chat_update_emoji",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_hrr("Chat emoji been updated"); fu_wrg("/messages/"+chat+"");}else{ fu_hrr("Not able to update emoji"); fu_zng();}
fu_nxk();});} function fu_mcy(chat,form){ fu_clu(); fu_jwg(); if (Array.isArray(form)==false){ var data=fu_uwq(form);}else{ var data=form;} var postdata={}; var sendurl=""; postdata["chat"]=chat; postdata["description"]=ae(fu_csj(data["description"])); postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_chat_update_description",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_hrr("Chat description has been updated"); fu_wrg("/messages/"+chat+"");}else{ fu_hrr("Not able to update description"); fu_zng();}
fu_nxk();});}
function fu_wsd(){ if (fu_wlm()==true){ var rule="new"; var rulename="New"; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ rule=arr[2];}} if (su_id!=null){ fu_wta("full"); var moreurl=""; if (rule=="old"){ moreurl="?seen=yes"; rulename="Old";} if (rule=="new"){ moreurl="?seen=no"; rulename="New";} if (rule=="reaction"){ moreurl="?type=reaction"; rulename="Reaction";} if (rule=="reaction"){ moreurl="?type=reaction"; rulename="Reaction";} if (rule=="comment_reply"){ moreurl="?type=comment_reply"; rulename="Comment & Reply";} if (rule=="account"){ moreurl="?type=account"; rulename="Accounts";} if (rule=="mention"){ moreurl="?type=mention"; rulename="Mention";} if (rule=="share"){ moreurl="?type=share"; rulename="Share";} if (rule=="edit"){ moreurl="?type=edit"; rulename="Edit";}
fu_vbf(""+rulename+" Notifications"); fu_pco("container_content","<h1>"+rulename+" Notifications</h1>",true); fu_pco("container_content","<div class='horizontalscroll' id='MenuNotifications'></div>"); fu_pco("MenuNotifications","<a href=\"javascript:fu_imb('all');\"><div class='tab important'>Mark all seen</div></a>",true); fu_pco("MenuNotifications","<a href=\"/notifications\"><div class='tab'>New</div></a>",true); fu_pco("MenuNotifications","<a href=\"/notifications/old\"><div class='tab'>Old</div></a>",true); fu_pco("MenuNotifications","<a href=\"/notifications/reaction\"><div class='tab'>Reactions</div></a>",true); fu_pco("MenuNotifications","<a href=\"/notifications/comment_reply\"><div class='tab'>Comments & Replies</div></a>",true); fu_pco("MenuNotifications","<a href=\"/notifications/mention\"><div class='tab'>Mentions</div></a>",true); fu_pco("MenuNotifications","<a href=\"/notifications/account\"><div class='tab'>Accounts</div></a>",true); fu_pco("MenuNotifications","<a href=\"/notifications/share\"><div class='tab'>Shares</div></a>",true); fu_pco("MenuNotifications","<a href=\"/notifications/edit\"><div class='tab'>Edits</div></a>",true); fu_pco("container_content","<div style='margin-top:20px;'><div id='PageNotificationContent'><div class='loading'></div></div></div>"); fu_npw("https://"+s_hostname+"/get_account_notifications"+moreurl+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("PageNotificationContent"); if (response["response_data"]["notifications"]!=false){ fu_pco("PageNotificationContent","<div id='list_gen_notifi'></div>"); fu_qeq(response["response_data"]["notifications"], function(id){ var notification=response["response_data"]["notifications"][""+id+""]; var time=fu_agm(notification["date_created"]); var activealert=""; var link=false; var runfunction=""; var content=notification["content"]; var matches = content.match(/(\[)([^\n\s\!\@\#\$\%\&\.\,\<\>]+)(\])/gi); fu_qeq(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\[)([^\n\s\!\@\#\$\%\&\.\,\<\>]+)(\])/); if (result[2].includes("emoji")){ content=content.replace(result[0], ""+fu_tek(result[2])+"");}else{ content=content.replace(result[0], "[unknown]");}}); if (notification["seen"]=="0"){ activealert="<div style='float:right;margin-left:10px;'>"+fu_cpd("🔔")+"</div>";} if (notification["type"]=="comment" || notification["type"]=="reply"){ link="/conversation/"+notification["resource"]+":"+notification["resource_sub"]+""; content="<strong>"+notification["from"]["name"]+"</strong> "+content+".";} if (notification["type"]=="reaction"){ if (notification["resource_sub"]!="false"){ link="/conversation/"+notification["resource"]+":"+notification["resource_sub"]+"";}else{ link="/conversation/"+notification["resource"]+"";}
content="<strong>"+notification["from"]["name"]+"</strong> "+content+".";} if (notification["type"]=="share"){ if (notification["resource_sub"]!="false"){ link="/conversation/"+notification["resource"]+":"+notification["resource_sub"]+"";}else{ link="/conversation/"+notification["resource"]+"";}
content="<strong>"+notification["from"]["name"]+"</strong> "+content+".";} if (notification["type"]=="edit"){ if (notification["resource_sub"]!="false"){ link="/conversation/"+notification["resource"]+":"+notification["resource_sub"]+"";}else{ link="/conversation/"+notification["resource"]+"";}
content="<strong>"+notification["from"]["name"]+"</strong> "+content+".";} if (notification["type"]=="mention"){ if (notification["resource_sub"]!="false"){ link="/conversation/"+notification["resource"]+":"+notification["resource_sub"]+"";}else{ link="/conversation/"+notification["resource"]+"";}
content="<strong>"+notification["from"]["name"]+"</strong> "+content+".";} if (notification["type"]=="conversation"){ link="/conversation/"+notification["resource"]+""; content="<strong>"+notification["from"]["name"]+"</strong> "+content+".";} if (notification["type"]=="global"){ if (notification["resource_sub"]!="false"){ link="/conversation/"+notification["resource"]+":"+notification["resource_sub"]+"";}else{ link="/conversation/"+notification["resource"]+"";}
content="<strong>"+notification["from"]["name"]+"</strong> "+content+".";} if (notification["type"]=="account"){ runfunction="fu_xlg('"+notification["from"]["alias"]+"');"; content="<strong>"+notification["from"]["name"]+"</strong> "+content+".";} if (notification["type"]=="gift"){ runfunction="fu_xlg('"+notification["from"]["alias"]+"');"; content="<strong>"+notification["from"]["name"]+"</strong> "+content+".";} if (notification["type"]=="cafe"){ link="/!"+notification["resource"]+""; content="<strong>"+notification["from"]["name"]+"</strong> "+content+".";} if (notification["type"]=="moderation"){ content="<strong>Moderator action</strong>: Hey, "+content+".";} if (notification["type"]=="report"){ content="<strong>Report</strong>: Hey, "+su_name+". "+content+".";}
content=content.replace("..", "."); if (link!=false){ fu_pco("list_gen_notifi","<bubble class='notification' onclick=\"javascript:fu_wrg('"+link+"');fu_imb('"+notification["id"]+"');"+runfunction+"\">"+activealert+"<img source='"+notification["from"]["avatar"]+"' class='avatar optimizer_img' style='float:left;height:50px;width:50px;margin-right:10px;' alt='Avatar for "+notification["from"]["name"]+"'>"+content+"<div class='conversation' id='notification_content_preview_"+id+"'></div><div class='meta'>Tap to view · "+time+"</div></bubble>");}else{ fu_pco("list_gen_notifi","<bubble class='notification' onclick=\"javascript:fu_zng();fu_imb('"+notification["id"]+"');"+runfunction+"\">"+activealert+"<img source='"+notification["from"]["avatar"]+"' class='avatar optimizer_img' style='float:left;height:50px;width:50px;margin-right:10px;' alt='Avatar for "+notification["from"]["name"]+"'>"+content+"<div class='conversation' id='notification_content_preview_"+id+"'></div><div class='meta'>Tap to view · "+time+"</div></bubble>");} if (notification["type"]=="share" || notification["type"]=="conversation" || notification["type"]=="reaction" || notification["type"]=="mention" || notification["type"]=="global" || notification["type"]=="comment" || notification["type"]=="reply"){ if (notification["resource_sub"]!="false"){ fu_pco("notification_content_preview_"+id+"","<div><action type='inview_load_preview_comment' header='false' element='notification_content_preview_"+id+"' conversation='"+notification["resource"]+"' comment='"+notification["resource_sub"]+"'></action><div class='loading'></div></div>");}else{ fu_pco("notification_content_preview_"+id+"","<div><action type='inview_load_preview_conversation' header='false' element='notification_content_preview_"+id+"' conversation='"+notification["resource"]+"'></action><div class='loading'></div></div>");}} });}else{ fu_pco("PageNotificationContent","<bubble class='alt1'>You have no notifications waiting for you in this section.</bubble>",true);}}else{ fu_few("Not able to load your notifications to generate the page...");}});}} } function fu_imb(id){ var postdata={}; var sendurl=""; postdata["notification"]=ae(id); postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_notification_seen"; fu_opn(sendurl,postdata,function(result){ var response = fu_hdg(result); if (id=="all"){ fu_wrg('/notifications');} if (response["system_api_error"]!=false){ fu_jom("We had a problem marking the notification as seen.");}
fu_nxk();});} function fu_agq(){ fu_clu(); fu_wta("full"); var alias=null; var page=null; var subpage=null; var arr = sp.split('/'); if (arr!=null){ if (arr[1]!=undefined){ alias=arr[1].replace("@", "");} if (arr[2]!=undefined){ page=arr[2];} if (arr[3]!=undefined){ subpage=arr[3];}} if (alias=="everyone"){ fu_wrg("/@"+su_alias+"");} if (alias!=null){ var defaultheader="<div class='aspectcase twentyonebynine'><div class='cover optimizer_bg content' source='https://cdn.hey.cafe/file/HeyCafe/defaults/header_account.jpg'></div></div><img source='https://cdn.hey.cafe/file/HeyCafe/defaults/avatar_account.png' class='optimizer_img avatar main' alt='Default image'><h1>Loading...</h1><h2>@"+alias+"</h2><div class='loading'></div></div>"; fu_pco("container_content","<bubble class='profile'><div id='PageProfileHeader'>"+defaultheader+"</div></bubble><div class='horizontalscroll' id='PageProfileMenu'></div><div id='PageProfileTagMenu'></div>"); if (alias=="an"){ fu_wkn("special", "body", "background: #FFCC99;"); fu_wkn("special", "*", "border-radius:0px !important;"); fu_wkn("special", "#container_headercase", "background: rgb(42,77,208);"); fu_wkn("special", ".minibubble", "border:2px solid rgb(112,163,243);"); fu_wkn("special", "#container_menu", "color:#ffffff;background: rgb(112,163,243);"); fu_wkn("special", ".header_logo, .header_bubble", "color:#ffffff !important;background: rgb(112,163,243);"); fu_wkn("special", ".header_logo:hover, .header_bubble:hover", "color:#ffffff !important;background: rgb(112,163,243);"); fu_wkn("special", ".tab, .tab:hover", "color:#ffffff !important;background: rgb(112,163,243);");}
fu_npw("https://"+s_hostname+"/get_account_info?query="+alias+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("PageProfileHeader"); var specialboxes=""; if (response["response_data"]["website"]!="false"){ var previewurl=response["response_data"]["website"]; previewurl=previewurl.replace("https://", ""); previewurl=previewurl.replace("http://", ""); var previewurl_text=fu_amb("https://"+previewurl+""); previewurl_text=previewurl_text.replace("www.", ""); specialboxes=specialboxes+"<a href='https://"+previewurl+"'><div class='specialbox'>"+fu_cpd("🌎")+" "+previewurl_text+"</div></a>";} if (response["response_data"]["pronouns"]!="false"){ specialboxes=specialboxes+"<div class='specialbox' onclick=\"javascript:fu_mfr('"+alias+"');\">"+fu_cpd("☝️")+" "+fu_cpd(response["response_data"]["pronouns"])+"</div>";} if (response["response_data"]["following_you"]==true){ var follows_you_block="<div class=\"tab solidhover\"><trans>Follows You</trans></div>";}else{ var follows_you_block="";} if (response["response_data"]["admin"]=="1" || response["response_data"]["moderator"]=="1"){ var staff="<div class=\"tab solidhover important alt2\"><trans>Staff</trans></div>";}else{ var staff="";} if (su_admin=="1" || su_moderator=="1"){ staff=""+staff+"<a href=\"/staff/accounts/"+alias+"\"><div class=\"tab important alt3\"><trans>Inspect</trans></div></a>";} if (response["response_data"]["you_following"]==false){ staff=""+staff+"<a href=\"javascript:fu_ukh('"+response["response_data"]["id"]+"');\"><div class=\"tab important alt1\"><trans>Report</trans></div></a>";} if (su_id!=null){ if (su_alias!=response["response_data"]["alias"]){ if (response["response_data"]["you_muted"]==false){ staff=""+staff+"<a href=\"javascript:fu_uul('"+alias+"');\"><div class=\"tab important alt1\"><trans>Block</trans></div></a>";}else{ staff=""+staff+"<a href=\"javascript:fu_vjg('"+response["response_data"]["you_muted_id"]+"','"+alias+"');\"><div class=\"tab important alt1\"><trans>Unblock</trans></div></a>";}} } if (response["response_data"]["pro"]=="1"){ var pro="<div class=\"tab solidhover\"><trans>Pro</trans> <img alt=\"😎\" emoji=\"true\" class=\"\" src=\"https://assets.heycafecdn.com/emoji/svg/1f60e.svg\" style=\"width: 1.2em;margin-left: 2px;margin-right: 2px;display: inline;vertical-align: text-top;\"></div>";}else{ var pro="";} if (su_alias!=response["response_data"]["alias"]){ if (su_id!=null){ if (response["response_data"]["you_following"]==false){ var follow_control="<a href=\"javascript:fu_kvq('"+alias+"');\"><div class='button'>+&ensp;<trans>Follow</trans></div></a>";}else{ var follow_control="<a href=\"javascript:fu_ibg('"+alias+"');\"><div class='button'>-&ensp;<trans>Unfollow</trans></div></a>";}}else{ var follow_control="";}}else{ var follow_control="";} if (su_alias!=response["response_data"]["alias"]){ if (su_id!=null){ if (response["response_data"]["you_following"]==true){ if (response["response_data"]["you_subscribed"]==false){ specialboxes=specialboxes+"<div onclick=\"javascript:fu_vvo('"+alias+"');\" class='specialbox'>"+fu_gmq("send-check")+" <trans>Subscribe</trans></div>";}else{ specialboxes=specialboxes+"<div onclick=\"javascript:fu_icw('"+alias+"');\" class='specialbox'>"+fu_gmq("send-slash")+" <trans>Unsubscribe</trans></div>";}}
specialboxes=specialboxes+"<div onclick=\"javascript:fu_mga('"+alias+"');\" class='specialbox important'>"+fu_gmq("envelope")+" <trans>Message</trans></div>"; if (s_device!="NativeiOSApp"){ specialboxes=specialboxes+"<div onclick=\"javascript:fu_afe('"+alias+"');\" class='specialbox important'>"+fu_cpd("😎")+" <trans>Gift Pro</trans></div>";}} }
specialboxes=specialboxes+"<div class='specialbox' onclick=\"javascript:fu_ywc('"+alias+"');\">"+fu_cpd("📋")+" <trans>RSS</trans></div>"; var settings=""; if (su_alias==response["response_data"]["alias"]){ settings="<a href=\"javascript:fu_wrg('/settings/me');\"><div class=\"tab\">"+fu_gmq("gear")+"&ensp;<trans>Edit</trans></div></a>";} var verified=""; if (response["response_data"]["verified"]=="1"){ verified=" <span class='verified_badge'>"+fu_gmq("patch-check-fill")+"</span>";}
fu_vbf(""+response["response_data"]["name"]+" (@"+response["response_data"]["alias"]+")"); fu_qyp(response["response_data"]["bio"]); fu_bgt(response["response_data"]["avatar"]); if (page=="about"){ fu_vbf("About / "+response["response_data"]["name"]+" (@"+response["response_data"]["alias"]+")");} if (page=="pinned"){ fu_vbf("Pinned Conversations / "+response["response_data"]["name"]+" (@"+response["response_data"]["alias"]+")");} if (page=="cafes"){ fu_vbf("Cafes / "+response["response_data"]["name"]+" (@"+response["response_data"]["alias"]+")");} if (page=="following"){ fu_vbf("Following / "+response["response_data"]["name"]+" (@"+response["response_data"]["alias"]+")");} if (page=="followers"){ fu_vbf("Followers / "+response["response_data"]["name"]+" (@"+response["response_data"]["alias"]+")");} if (specialboxes!=""){ specialboxes="<div style='padding-top:10px;'>"+specialboxes+"</div>";}
fu_pco("PageProfileHeader","<div class='aspectcase twentyonebynine'><div class='cover optimizer_bg content' source='"+response["response_data"]["header"]+"'>"+pro+""+follows_you_block+""+staff+""+settings+"</div></div><a href=\"javascript:fu_ikg('"+response["response_data"]["avatar"]+"','image',true,'"+fu_csj("Profile image for "+response["response_data"]["name"]+"")+"');\"><img source='"+response["response_data"]["avatar"]+"' class='optimizer_img avatar main' alt='Profile image for "+response["response_data"]["name"]+"'></a><h1>"+fu_cpd(response["response_data"]["name"])+""+verified+"</h1><h2>@"+response["response_data"]["alias"]+"</h2>"+follow_control+"<div class='minibubble'>"+fu_cpd(fu_dwb(fu_nwo(response["response_data"]["bio"],true)))+""+specialboxes+"</div></div>"); fu_nxk(); var count_conversations=""; var count_cafes_member=""; var count_following=""; var count_followers=""; if (s_app_stats=="true"){ count_conversations="&ensp;"+response["response_data"]["count_conversations"]+""; count_cafes_member="&ensp;"+response["response_data"]["count_cafes_member"]+""; count_following="&ensp;"+response["response_data"]["count_following"]+""; count_followers="&ensp;"+response["response_data"]["count_followers"]+"";}
fu_mxp("PageProfileMenu"); fu_pco("PageProfileMenu","<a href='/@"+alias+"'><div class='tab'>Conversations</div></a>",true); if (response["response_data"]["about"]!=false){ fu_pco("PageProfileMenu","<a href='/@"+alias+"/about'><div class='tab'>About</div></a>",true);}
fu_pco("PageProfileMenu","<a href='/@"+alias+"/pinned'><div class='tab'>Pins</div></a>",true); fu_pco("PageProfileMenu","<a href='/@"+alias+"/cafes'><div class='tab'>Cafés</div></a>",true); fu_pco("PageProfileMenu","<a href='/@"+alias+"/following'><div class='tab'>Following</div></a>",true); fu_pco("PageProfileMenu","<a href='/@"+alias+"/followers'><div class='tab'>Followers</div></a>",true); if (page==null || page=="tag" || page=="pinned"){ if (response["response_data"]["tags"]!=false){ fu_mxp("PageProfileTagMenu"); fu_pco("PageProfileTagMenu","<div class='horizontalscroll' id='PageProfileTagMenu_contents'></div>"); fu_qeq(response["response_data"]["tags"], function(select){ fu_pco("PageProfileTagMenu_contents","<a href='/@"+alias+"/tag/"+response["response_data"]["tags"][""+select+""]["id"]+"'><div class='tab'>"+fu_cpd(response["response_data"]["tags"][""+select+""]["emoji"])+" "+fu_cpd(response["response_data"]["tags"][""+select+""]["name"])+"</div></a>");});}} if (page==null){ fu_pco("container_content","<h2>Conversations</h2>",true); if (su_alias==alias){ fu_pco("container_content","<div></div>"); fu_pco("container_content","<div id='inline_convo_genrate_case'></div>"); fu_bin("inline_convo_genrate_case","false"); fu_pco("container_content","<div style='margin-top:20px;'></div>");}
fu_pco("container_content","<div id='PageProfileConvoMainPin_"+alias+"'></div>"); fu_pco("container_content","<div id='PageProfileConvoGenerateCase_"+alias+"'></div>"); fu_pco("container_content","<div id='PageProfileConvo_"+alias+"'><div class='loading'></div></div>"); fu_wjv(0,alias,"false","false"); fu_npw("https://"+s_hostname+"/get_account_conversations?query="+alias+"&count=1&pinned=true",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["conversations"]!=false){ fu_qeq(response["response_data"]["conversations"], function(id){ fu_ndm(response["response_data"]["conversations"][""+id+""],"PageProfileConvoMainPin_"+alias+"");});}} });} if (page=="pinned"){ fu_pco("container_content","<h2>Pins</h2>",true); fu_pco("container_content","<div id='PageProfileConvoGenerateCase_"+alias+"'></div>"); fu_pco("container_content","<div id='PageProfileConvo_"+alias+"'><div class='loading'></div></div>"); fu_wjv(0,alias,"true","false");} if (page=="tag"){ if (response["response_data"]["tags"]!=false){ if (response["response_data"]["tags"][""+subpage+""]!=undefined){ fu_pco("container_content","<h2>"+fu_cpd(response["response_data"]["tags"][""+subpage+""]["emoji"])+" "+fu_cpd(response["response_data"]["tags"][""+subpage+""]["name"])+"</h2>"); fu_pco("container_content","<div id='PageProfileConvoGenerateCase_"+alias+"'></div>"); fu_pco("container_content","<div id='PageProfileConvo_"+alias+"'><div class='loading'></div></div>"); fu_wjv(0,alias,"false",subpage);}else{ fu_wrg("/e/404");}}else{ fu_wrg("/e/404");}} if (page=="about"){ fu_pco("container_content","<h2>About</h2><div id='PageProfileAbout'><div class='loading'></div></div>",true); fu_npw("https://"+s_hostname+"/get_account_info?query="+alias+"",function(result){ var response = fu_hdg(result); fu_mxp("PageProfileAbout"); if (response["system_api_error"]==false){ if (response["response_data"]["about"]==false){ var contsabout="No about page content set.";}else{ var contsabout=response["response_data"]["about"]; contsabout=fu_uiv(contsabout); contsabout=fu_idd(contsabout); contsabout=fu_ibd(contsabout); contsabout=fu_cpd(contsabout); contsabout=fu_esd(contsabout); contsabout=fu_ebi(contsabout);}
fu_pco("PageProfileAbout","<bubble class='conversation' style='padding-top:0px;padding-bottom:0px;'><div class='content'>"+contsabout+"</div></bubble>");}},false,true);} if (page=="cafes"){ fu_pco("container_content","<div id='PageProfileCafes'><div class='loading'></div></div>"); fu_npw("https://"+s_hostname+"/get_account_cafes?query="+alias+"&count=1000",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("PageProfileCafes"); fu_pco("PageProfileCafes","<h2>Café's</h2>",true); if (response["response_data"]["cafes"]!=false){ fu_qeq(response["response_data"]["cafes"], function(id){ fu_zsi(response["response_data"]["cafes"][""+id+""],"PageProfileCafes","halfsize");});}else{ fu_pco("container_content","<bubble class='alt1'>This account is not a member in any cafés.</bubble>",true);}} });} if (page=="following"){ fu_pco("container_content","<div id='PageProfileFollowing'><div class='loading'></div></div>"); fu_npw("https://"+s_hostname+"/get_account_following?query="+alias+"&count=100",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("PageProfileFollowing"); fu_pco("PageProfileFollowing","<h2>Following</h2>",true); if (response["response_data"]["accounts"]!=false){ fu_qeq(response["response_data"]["accounts"], function(id){ fu_cyh(response["response_data"]["accounts"][""+id+""],"PageProfileFollowing","halfsize");});}else{ fu_pco("container_content","<bubble class='alt1'>This account is not following anyone.</bubble>",true);}} });} if (page=="followers"){ fu_pco("container_content","<div id='PageProfileFollowers'><div class='loading'></div></div>"); fu_npw("https://"+s_hostname+"/get_account_followers?query="+alias+"&count=100",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("PageProfileFollowers"); fu_pco("PageProfileFollowers","<h2>Followers</h2>",true); if (response["response_data"]["accounts"]!=false){ fu_qeq(response["response_data"]["accounts"], function(id){ fu_cyh(response["response_data"]["accounts"][""+id+""],"PageProfileFollowers","halfsize");});}else{ fu_pco("container_content","<bubble class='alt1'>This account has no followers.</bubble>",true);}} });}}else{ if (response["system_api_error"]=="notfound"){ fu_vxc();}else{ fu_few("Network error");}} },false,true);}else{ fu_vxc();}} function fu_vxc(){ fu_mxp("container_content"); fu_nxk(); if (su_id!=null){ var alias=false; var arr = sp.split('/'); if (arr!=null){ if (arr[1]!=undefined){ alias=arr[1].replace("@", "");}}
fu_vbf("No "+alias+" account"); fu_pco("container_content","<h1>No "+alias+" account</h1>"); fu_pco("container_content","<bubble>Hey this person can't be found... But maybe you can invite someone who can use this alias/username.</bubble>"); fu_pco("container_content","<bubble class='alt1' onclick='javascript:fu_wrg(\"/referral\");'>Tap here to see your referral link, and options to invite friends.</bubble>");}else{ fu_wrg("/e/404");}} function fu_wjv(offset,alias,pinned,tagged){ fu_mxp("PageProfileConvo_"+alias+""); fu_pco("PageProfileConvo_"+alias+"","<div class='loading'></div>"); fu_pco("PageProfileConvoGenerateCase_"+alias+"","<div id='PageProfileConvoGenerate_"+alias+"_"+offset+"'></div>"); var pinnedlink=""; if (pinned=="true"){ pinnedlink="&pinned=true";}else{ pinnedlink="&pinned=false";} var taggedlink=""; if (tagged!="false"){ taggedlink="&tag="+tagged+"";}
fu_npw("https://"+s_hostname+"/get_account_conversations?query="+alias+"&count=40&start="+offset+""+pinnedlink+""+taggedlink+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["conversations"]!=false){ fu_qeq(response["response_data"]["conversations"], function(id){ fu_ndm(response["response_data"]["conversations"][""+id+""],"PageProfileConvoGenerate_"+alias+"_"+offset+"");}); setTimeout(function(){ fu_mxp("PageProfileConvo_"+alias+""); fu_pco("PageProfileConvo_"+alias+"","<action type='inview_loadmore_pageprofile' offset='"+(parseInt(offset)+40)+"' alias='"+alias+"' pinned='"+pinned+"' tagged='"+tagged+"'></action>");}, 400);}else{ fu_mxp("PageProfileConvo_"+alias+""); if (offset==0){ fu_pco("PageProfileConvo_"+alias+"","<bubble class='alt1'>Sorry! We can't find any conversations.</bubble>");}} }});} function fu_kvq(alias){ var postdata={}; postdata["account"]=alias; postdata=fu_ere(postdata); fu_clu(); fu_opn("https://"+s_hostname+"/post_account_follow",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_hrr("You are now following @"+alias+""); fu_zng();}else{ if (response["system_api_error"]=="notfound"){ fu_hrr("We can't find that account");}}
fu_nxk();});} function fu_ibg(alias){ var postdata={}; postdata["account"]=alias; postdata=fu_ere(postdata); fu_clu(); fu_opn("https://"+s_hostname+"/post_account_unfollow",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_hrr("You are now not following @"+alias+""); fu_zng();}else{ if (response["system_api_error"]=="notfound"){ fu_hrr("We can't find that account");}}
fu_nxk();});} function fu_afe(alias){ fu_pbr(); fu_clu(); if (su_id!=null){ fu_pco("container_modl","<h1>Gift Pro</h1>",true); fu_npw("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ var supporterbuttons=""; if (response["response_data"]["country"]!="false" && response["response_data"]["country"]!="Russia" && response["response_data"]["state"]!="false"){ supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_cpd("☕️")+"<BR>1 Month</div>$2.48 USD</div><div class='minibubble' style='margin:5px;text-align:center;' onclick=\"javascript:fu_jwg(); window.open('https://lammcs.ca/service_purchase/?service=heycafe&country="+response["response_data"]["country"]+"&state="+response["response_data"]["state"]+"&amount=2.48&username="+response["response_data"]["alias"]+"&giftuser="+alias+"&good=true', '_blank');\">Purchase & Gift</div></div>"; supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_cpd("☕️")+"<BR>2 Months</div>$4.98 USD</div><div class='minibubble' style='margin:5px;text-align:center;' onclick=\"javascript:fu_jwg(); window.open('https://lammcs.ca/service_purchase/?service=heycafe&country="+response["response_data"]["country"]+"&state="+response["response_data"]["state"]+"&amount=4.98&username="+response["response_data"]["alias"]+"&giftuser="+alias+"&good=true', '_blank');\">Purchase & Gift</div></div>"; supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_cpd("☕️")+"<BR>6 Months</div>$12.48 USD</div><div class='minibubble' style='margin:5px;text-align:center;' onclick=\"javascript:fu_jwg(); window.open('https://lammcs.ca/service_purchase/?service=heycafe&country="+response["response_data"]["country"]+"&state="+response["response_data"]["state"]+"&amount=12.48&username="+response["response_data"]["alias"]+"&giftuser="+alias+"&good=true', '_blank');\">Purchase & Gift</div></div>"; supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_cpd("☕️")+"<BR>1 Year</div>$24.98 USD</div><div class='minibubble' style='margin:5px;text-align:center;' onclick=\"javascript:fu_jwg(); window.open('https://lammcs.ca/service_purchase/?service=heycafe&country="+response["response_data"]["country"]+"&state="+response["response_data"]["state"]+"&amount=24.98&username="+response["response_data"]["alias"]+"&giftuser="+alias+"&good=true', '_blank');\">Purchase & Gift</div></div>";}else{ supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_cpd("☕️")+"<BR>1 Month</div>$2.48 USD</div><div class='minibubble' style='margin:5px;text-align:center;'>"+fu_cpd("🔒")+" Purchase & Gift</div></div>"; supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_cpd("☕️")+"<BR>2 Months</div>$4.98 USD</div><div class='minibubble' style='margin:5px;text-align:center;'>"+fu_cpd("🔒")+" Purchase & Gift</div></div>"; supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_cpd("☕️")+"<BR>6 Months</div>$12.48 USD</div><div class='minibubble' style='margin:5px;text-align:center;'>"+fu_cpd("🔒")+" Purchase & Gift</div></div>"; supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_cpd("☕️")+"<BR>1 Year</div>$24.98 USD</div><div class='minibubble' style='margin:5px;text-align:center;'>"+fu_cpd("🔒")+" Purchase & Gift</div></div>"; supporterbuttons=""+supporterbuttons+"<BR><BR><bubble class=\"alt1\">You have one more step, you need to first set your Country and State/Province in settings for tax reasons before you can make any purchases. <a href='/settings/me'>Visit settings</a> to change your information, this info will NOT display on your profile.</bubble>";}
fu_pco("container_modl","<bubble><h2 style='margin-top:0px;'>Why gift Pro and help support Hey.Café?</h2>When you or others go Pro you also gain more features like larger conversations, better quality photos, ability to edit conversations and comments, a fancy profile badge, and more. You can learn more about what you get with Pro <a href='/help/goto/pro'>here</a>, and you can read our refund policy <a href='/help/goto/refunds'>here</a>. If a user already has Pro the time will be added to any current Pro they have.<BR><BR>"+supporterbuttons+"</bubble>"); fu_nxk();}else{ fu_few("Not able to load profile data");}},false,true);}} function fu_ukh(alias){ fu_pbr(); var options=""; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_qxc('account','"+alias+"','spam');\"><strong style='display: inline-block;margin-bottom: 10px;'>Spam</strong><BR>Anything that can be seen as spam.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_qxc('account','"+alias+"','abuse');\"><strong style='display: inline-block;margin-bottom: 10px;'>Abuse</strong><BR>Content that may be harmful to others.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_qxc('account','"+alias+"','impersonation');\"><strong style='display: inline-block;margin-bottom: 10px;'>Impersonation</strong><BR>If trying to pass or act like someone else.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_qxc('account','"+alias+"','other');\"><strong style='display: inline-block;margin-bottom: 10px;'>Other</strong><BR>Anything that does not fall under the other options.</div>"; fu_pco("container_modl","<bubble class='alt1'>You can report a account by using the actions below. Pick the option that makes the most sense so that the correct person gets notified of this report.</bubble>"); fu_pco("container_modl","<bubble>"+options+"</bubble>");} function fu_vvo(alias){ var postdata={}; postdata["account"]=alias; postdata=fu_ere(postdata); fu_clu(); fu_opn("https://"+s_hostname+"/post_account_subscribe",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_hrr("You are now subscribed to @"+alias+""); fu_zng();}else{ if (response["system_api_error"]=="notfound"){ fu_hrr("We can't find that account");} if (response["system_api_error"]=="notfollow"){ fu_hrr("You are not following @"+alias+"");}}
fu_nxk();});} function fu_icw(alias){ var postdata={}; postdata["account"]=alias; postdata=fu_ere(postdata); fu_clu(); fu_opn("https://"+s_hostname+"/post_account_unsubscribe",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_hrr("You are now not subscribed to @"+alias+""); fu_zng();}else{ if (response["system_api_error"]=="notfound"){ fu_hrr("We can't find that account");}}
fu_nxk();});} function fu_uul(alias){ var postdata={}; postdata["type"]="account"; postdata["resource"]=ae(fu_csj(alias)); postdata=fu_ere(postdata); fu_clu(); fu_opn("https://"+s_hostname+"/post_account_update_mute_create",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_hrr("You have blocked @"+alias+""); fu_zng();}else{ fu_hrr("We had a problem creating this filter rule");}
fu_nxk();});} function fu_vjg(id,alias){ var postdata={}; postdata["id"]=id; postdata=fu_ere(postdata); fu_clu(); fu_opn("https://"+s_hostname+"/post_account_update_mute_delete",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_hrr("You have unblocked @"+alias+""); fu_zng();}else{ fu_hrr("We had a problem removing this filter rule");}
fu_nxk();});} function fu_nmx(alias){ fu_pbr(); fu_pco("container_modl","<div class='loading'></div>"); fu_npw("https://"+s_hostname+"/get_account_info?query="+alias+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("container_modl"); if (response["response_data"]["website"]!="false"){ var previewurl=response["response_data"]["website"]; previewurl=previewurl.replace("https://", ""); previewurl=previewurl.replace("http://", ""); window.open("https://"+previewurl+"", '_blank').focus(); fu_jwg();}else{ fu_pco("container_modl","<bubble class='alt1'>This account has no linked website</bubble>");}} },false,true);} function fu_ywc(alias){ fu_pbr(); fu_pco("container_modl","<h1><trans>RSS Feed</trans></h1><bubble><trans>You can use the RSS feed in any RSS reader or in tools like IFTTT to auto share to other services when new conversations are posted. You can click the link below to copy to clipbard.</trans><pre style=\"white-space: pre-wrap;white-space: -moz-pre-wrap;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;margin-bottom: 0px;\" onclick=\"fu_fqw('CopyContentClickURL');\"><code id='CopyContentClickURL'>https://endpoint.hey.cafe/rss/account?query="+alias+"</code></pre></bubble>");} function fu_mfr(alias){ fu_pbr(); fu_pco("container_modl","<div class='loading'></div>"); fu_npw("https://"+s_hostname+"/get_account_info?query="+alias+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("container_modl"); if (response["response_data"]["pronouns"]!="false"){ fu_pco("container_modl","<h1><trans>Pronouns</trans></h1><bubble><p>"+fu_cpd(response["response_data"]["name"])+" has provided the pronouns <strong>"+response["response_data"]["pronouns"]+"</strong> to be used.</p><p>You can also set your own in settings.</p></bubble>");}else{ fu_pco("container_modl","<bubble class='alt1'>This account has not specified any pronouns</bubble>",true);}} },false,true);} function fu_mga(alias){ fu_pbr(); fu_pco("container_modl","<div class='loading'></div>"); fu_npw("https://"+s_hostname+"/get_account_info?query="+alias+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("container_modl"); fu_pco("container_modl","<h1>Message</h1>"); fu_pco("container_modl","<bubble class='alt3'>Keep in mind they must accept the request, until then they wont see any of the message contents.</bubble><bubble><div id='modl_chats_makenew'></div></bubble><div id='modl_chats_list'><div class='loading'></div></div><div id='modl_chats_list_invite'><div class='loading'></div></div>"); fu_npw("https://"+s_hostname+"/get_chat_account?query="+alias+"",function(result_c){ var response_chats = fu_hdg(result_c); if (response_chats["system_api_error"]==false){ fu_mxp("modl_chats_list"); fu_pco("modl_chats_makenew",'<form name="login" onsubmit="return isValidForm()"><div style="text-align:center;margin-top:20px;"><input type="text" class="input" name="name" size="120" maxlength="120" placeholder="Subject for new chat room" value=""><BR><input type="submit" name="submit" onclick="fu_ows(\''+alias+'\',this.form); return false;" value="Start Messaging"></div></form>'); fu_pco("modl_chats_list","<h2>Current</h2>"); if (response_chats["response_data"]["chats"]==false){ fu_pco("modl_chats_list","<bubble class='alt1'>You do not have any active messages with "+fu_cpd(response["response_data"]["name"])+".</bubble>");}else{ fu_qeq(response_chats["response_data"]["chats"], function(id){ fu_bre(response_chats["response_data"]["chats"][""+id+""],'modl_chats_list');});}} }); fu_npw("https://"+s_hostname+"/get_chat_list?query="+su_alias+"&count=10",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("modl_chats_list_invite"); if (response["response_data"]["chats"]!=false){ fu_pco("modl_chats_list_invite","<h2>Invite to chat</h2>"); fu_qeq(response["response_data"]["chats"], function(id){ var caninvite=true; fu_qeq(response["response_data"]["chats"][""+id+""]["members"], function(subid){ if (response["response_data"]["chats"][""+id+""]["members"][""+subid+""]["account_alias"]==alias){ caninvite=false;}}); if (caninvite==true){ fu_bre(response["response_data"]["chats"][""+id+""],'modl_chats_list_invite',alias);}});}} });}},false,true);} function fu_xlg(alias){ fu_pbr(); fu_pco("container_modl","<div class='loading'></div>"); fu_npw("https://"+s_hostname+"/get_account_info?query="+alias+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("container_modl"); var specialboxes=""; if (response["response_data"]["website"]!="false"){ var previewurl=response["response_data"]["website"]; previewurl=previewurl.replace("https://", ""); previewurl=previewurl.replace("http://", ""); previewurl=previewurl.replace("www.", ""); var previewurl_text=fu_amb("https://"+previewurl+""); specialboxes=specialboxes+"<a href='https://"+previewurl+"'><div class='specialbox'>"+fu_cpd("🌎")+" "+previewurl_text+"</div></a>";} if (response["response_data"]["pronouns"]!="false"){ specialboxes=specialboxes+"<div class='specialbox' onclick=\"javascript:fu_mfr('"+alias+"');\">"+fu_cpd("☝️")+" "+fu_cpd(response["response_data"]["pronouns"])+"</div>";} if (response["response_data"]["following_you"]==true){ var follows_you_block="<div class=\"tab solidhover\"><trans>Follows You</trans></div>";}else{ var follows_you_block="";} if (response["response_data"]["admin"]=="1" || response["response_data"]["moderator"]=="1"){ var staff="<div class=\"tab solidhover important alt2\"><trans>Staff</trans></div>";}else{ var staff="";} if (response["response_data"]["pro"]=="1"){ var pro="<div class=\"tab solidhover\"><trans>Pro</trans> <img alt=\"😎\" emoji=\"true\" class=\"\" src=\"https://assets.heycafecdn.com/emoji/svg/1f60e.svg\" style=\"width: 1.2em;margin-left: 2px;margin-right: 2px;display: inline;vertical-align: text-top;\"></div>";}else{ var pro="";} if (su_alias!=response["response_data"]["alias"]){ if (su_id!=null){ if (response["response_data"]["you_following"]==false){ var follow_control="<a href=\"javascript:fu_kvq('"+alias+"');\"><div class='button'>+&ensp;<trans>Follow</trans></div></a>";}else{ var follow_control="<a href=\"javascript:fu_ibg('"+alias+"');\"><div class='button'>-&ensp;<trans>Unfollow</trans></div></a>";}}else{ var follow_control="";}}else{ var follow_control="";} if (su_alias!=response["response_data"]["alias"]){ if (su_id!=null){ if (response["response_data"]["you_following"]==true){ if (response["response_data"]["you_subscribed"]==false){ specialboxes=specialboxes+"<div onclick=\"javascript:fu_vvo('"+alias+"');\" class='specialbox'>"+fu_gmq("send-check")+" <trans>Subscribe</trans></div>";}else{ specialboxes=specialboxes+"<div onclick=\"javascript:fu_icw('"+alias+"');\" class='specialbox'>"+fu_gmq("send-slash")+" <trans>Unsubscribe</trans></div>";}}
specialboxes=specialboxes+"<div onclick=\"javascript:fu_mga('"+alias+"');\" class='specialbox important'>"+fu_gmq("envelope")+" <trans>Message</trans></div>";}} var verified=""; if (response["response_data"]["verified"]=="1"){ verified=" <span class='verified_badge'>"+fu_gmq("patch-check-fill")+"</span>";} if (specialboxes!=""){ specialboxes="<div style='padding-top:10px;'>"+specialboxes+"</div>";}
fu_pco("container_modl","<bubble class='profile'><div class='aspectcase thirtybyeight'><div class='cover optimizer_bg content' source='"+response["response_data"]["header"]+"'>"+pro+""+follows_you_block+""+staff+"</div></div><a href=\"javascript:fu_ikg('"+response["response_data"]["avatar"]+"','image',true,'"+fu_csj("Profile image for "+response["response_data"]["name"]+"")+"');\"><img source='"+response["response_data"]["avatar"]+"' class='optimizer_img avatar main' alt='Profile image for "+response["response_data"]["name"]+"'></a><h1>"+fu_cpd(response["response_data"]["name"])+""+verified+"</h1><h2>@"+response["response_data"]["alias"]+"</h2>"+follow_control+"<div class='minibubble'>"+fu_cpd(fu_dwb(fu_nwo(response["response_data"]["bio"],true)))+""+specialboxes+"</div></div><div style='padding: 15px;'><div style='width:50%;'><input type=\"submit\" name=\"submit\" onclick=\"fu_wrg('/@"+response["response_data"]["alias"]+"'); return false;\" value=\"View Profile\" style='margin:0px;padding: 10px;'></div></div></bubble>");}},false,true);}function fu_mof(){ if (sp.startsWith("/p/")){ var newpage=sp.replace("/p/", "/@");} if (sp.startsWith("/c/")){ var newpage=sp.replace("/c/", "/!");}
fu_wrg(newpage);}function fu_tay(){ if (su_id==null){ fu_wta("full"); var alias=false; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ alias=arr[2];}}
s_referral=alias; fu_ccj("ses_s_referral", s_referral); fu_wrg("/");}else{ var canshow=true; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ alias=arr[2]; canshow=false; fu_wrg("/@"+alias+"");}} if (canshow==true){ fu_wta("full"); fu_vbf("Referral"); fu_pco("container_content","<h1>Invite Friends</h1>",true); fu_pco("container_content","<bubble>Hey with user help we can grow, and help protect the privacy of more people. You can find your link below to share and it will show your account to follow once they join.</bubble>",true); fu_pco("container_content","<bubble class='alt3'><h3 style='text-align:center;'>https://hey.cafe/r/"+su_alias+"</h3></bubble>"); fu_pco("container_content","<h2 style='margin-top:40px;'>Share to social</h2>",true); var urlcontent="https://hey.cafe/r/"+su_alias+""; var conversationcontent="Hey I am now on a new social network that is privacy focused, ad free, and a safe space to share."; fu_pco("container_content","<bubble class='alt3'>"+conversationcontent+" https://hey.cafe/r/"+su_alias+"</bubble>"); var buttons=fu_lsz(urlcontent,conversationcontent); fu_pco("container_content","<bubble>"+buttons+"</bubble>"); fu_pco("container_content","<div id='PageProfileReferrals'><div class='loading'></div></div>"); fu_npw("https://"+s_hostname+"/get_account_referrals?query="+su_id+"&count=50",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("PageProfileReferrals"); fu_pco("PageProfileReferrals","<h2 style='margin-top:40px;'>Recent Referrals</h2>",true); if (response["response_data"]["accounts"]!=false){ fu_qeq(response["response_data"]["accounts"], function(id){ fu_cyh(response["response_data"]["accounts"][""+id+""],"PageProfileReferrals","halfsize");});}else{ fu_pco("PageProfileReferrals","<bubble class='alt1'>You have no referrals yet.</bubble>",true);}} });}} } function fu_hhh(){ fu_clu(); fu_wta("simple"); fu_vbf("Create your account"); fu_pco("container_header","<h1>Hey.Café</h1>"); if (s_loginmessage!=false){ fu_pco("container_content",'<bubble class="alt1" style="text-align: center;font-weight: 600;">'+s_loginmessage+'</bubble>');}
fu_pco("container_content",'<bubble><h2 style="text-align:center;margin-top:0px;">Create your account</h2><form name="register" onsubmit="return isValidForm()"><div style="text-align:center;padding-top:50px;"><input type="text" class="input" name="username" size="30" maxlength="30" placeholder="Alias / Username" value=""><BR><input type="text" class="input" name="name" size="30" placeholder="Name" value=""><BR><input type="text" class="input" name="email" size="30" placeholder="Email" value=""><BR><input type="password" class="input" name="password" size="30" autocomplete="new-password" placeholder="Password"><BR><BR><input type="submit" name="submit" onclick="fu_ocr(this.form); return false;" value="Join"></div></form></div></bubble>'); fu_pco("container_content",'<bubble>'+fu_cpd('👋')+' By creating an account you agree to our <a href="/help/goto/privacy">privacy policy</a>, <a href="/help/goto/use">appropriate use policy</a>, <a href="/help/goto/terms">terms and conditions</a>, <a href="/help/goto/refunds">refund policy</a> and our <a href="/help/goto/rules">content rules</a>.<BR><BR>'+fu_cpd('📧')+' Once your account is setup and verified we will only send important account emails. This will only be direct event alerts like if someone mentions you, and you can control this in settings any time.<BR><BR>'+fu_cpd('⚠️')+' We wont send junk messages or non important emails at any point for any reason.<BR><BR>'+fu_cpd('⏰')+' To register you need to be 13 years of age or older.</bubble>'); fu_nxk();} function fu_ocr(form){ fu_clu(); var data=fu_uwq(form); var postdata={}; postdata["alias"]=data["username"]; postdata["name"]=ae(fu_csj(data["name"])); postdata["email"]=ae(fu_csj(data["email"])); postdata["password"]=ae(fu_csj(data["password"])); postdata["referral"]=s_referral; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_account_register",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ su_session=response["system_account_session"]; su_alias=response["response_data"]["alias"]; su_id=response["response_data"]["id"]; su_name=response["response_data"]["name"]; su_language=response["response_data"]["language"]; su_avatar=response["response_data"]["avatar"]; su_header=response["response_data"]["header"]; fu_ymy("ses_su_session"); fu_ymy("ses_su_alias"); fu_ymy("ses_su_id"); fu_ymy("ses_su_name"); fu_ymy("ses_su_language"); fu_ccj("ses_su_session", su_session); fu_ccj("ses_su_alias", su_alias); fu_ccj("ses_su_id", su_id); fu_ccj("ses_su_name", su_name); fu_ccj("ses_su_language", su_language); if (fu_rpz("ses_s_sessions")!=""){ var sessionstorage=fu_hdg(fu_rpz("ses_s_sessions")); sessionstorage[""+su_id+""]={}; sessionstorage[""+su_id+""]["session"]=su_session; sessionstorage[""+su_id+""]["alias"]=su_alias; sessionstorage[""+su_id+""]["id"]=su_id; sessionstorage[""+su_id+""]["name"]=su_name; sessionstorage[""+su_id+""]["language"]=su_language; fu_ymy("ses_s_sessions"); fu_ccj("ses_s_sessions", fu_ere(sessionstorage));}
fu_hrr("Hey welcome "+response["response_data"]["name"]+"!"); fu_azs(s_mode); fu_hxc(); if (s_loginrestore==false){ fu_wrg("/feed");}else{ fu_wrg(s_loginrestore); s_loginrestore=false;} setTimeout(function(){ fu_bjv("verify",fu_csj("0"));}, 1000);}else{ fu_jom("Account creation failed. "+response["system_api_error"]+"");}
fu_nxk();});} function fu_ovb(){ fu_clu(); fu_wta("simple"); fu_vbf("Access Request"); var type=""; var publisher=''; var reason=''; var sendback=''; var sendback_forhash=''; var session=''; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ type=arr[2];}} if (su_id!=null){ fu_pco("container_header","<div style='text-align:center;margin-bottom:15px;'><img src='https://hey.cafe/logo_transparent.png' style='height: 80px;width: 80px;'></div>"); fu_pco("container_content",'<bubble style="text-align:center;"><div class=\'loading\'></div></bubble>'); if (type=="login"){ if (arr!=null){ if (arr[3]!=undefined){ publisher=fu_xla(decodeURIComponent(""+arr[3]+""));} if (arr[4]!=undefined){ reason=fu_xla(decodeURIComponent(""+arr[4]+""));} if (arr[5]!=undefined){ sendback=fu_xla(decodeURIComponent(""+arr[5]+"")); sendback_forhash=fu_amb(sendback);}else{ sendback=document.referrer; sendback_forhash=fu_amb(sendback);}} var sendback_hash=sendback_forhash.hashCode(); fu_npw("https://"+s_hostname+"/get_account_sessions?query="+su_id+"&count=100",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["sessions"]!=false){ var found_tokensend=false; fu_qeq(response["response_data"]["sessions"], function(id){ var sesreason=response["response_data"]["sessions"][""+id+""]["info_reason"]; var sespublisher=response["response_data"]["sessions"][""+id+""]["info_publisher"]; var sestoken=response["response_data"]["sessions"][""+id+""]["info_token"]; var sestype=response["response_data"]["sessions"][""+id+""]["info_type"]; if (sendback_hash==sestoken && type==sestype && publisher==sespublisher && reason==sesreason){ found_tokensend=true; var sespermission_email=response["response_data"]["sessions"][""+id+""]["info_permission_email"]; if (sespermission_email=="true"){ sespermission_email=true;}else{ sespermission_email=false;} var sespermission_location=response["response_data"]["sessions"][""+id+""]["info_permission_location"]; if (sespermission_location=="true"){ sespermission_location=true;}else{ sespermission_location=false;}
fu_txn(type,fu_csj(publisher),fu_csj(reason),fu_csj(sendback),sespermission_email,sespermission_location);}}); if (found_tokensend==false){ fu_mxp("container_content"); fu_pco("container_header","<h2 style=\"text-align:center;\">Sign in with Hey.Café</h2>"); fu_pco("container_content",'<bubble style="text-align:center;"><div class=\'minibubble\' style="text-align:left;"><img source=\'https://logo.clearbit.com/'+sendback_forhash+'\' class=\'avatar optimizer_img\' style=\'float:left;height:70px;width:70px;margin-right:15px;border-radius:5px;\'><h3 style=\'margin-top:0px;margin-bottom: 5px;\'>'+publisher+'</h3><div style="margin-bottom: 5px;">'+fu_nwo(reason)+'</div><div style="font-size: 0.8em;">'+sendback_forhash+'</div></div><BR><BR><div style="padding-left: 20px;padding-right: 20px;font-size: 1.2em;">'+publisher+' will have access to basic info about your account like your name, avatar, header, bio and username if you continue.</div><BR><BR><input type="submit" name="submit" onclick="fu_txn(\''+type+'\',\''+fu_csj(publisher)+'\',\''+fu_csj(reason)+'\',\''+fu_csj(sendback)+'\',false,false); return false;" value="Continue as '+su_name+'"></bubble>');}else{ fu_mxp("container_content"); fu_pco("container_content",'<bubble style="text-align:center;">You have already logged into this service before, we are sending you over in just a second...<BR><BR><div class=\'loading\'></div></bubble>');}} }});} if (type=="permission"){ var sessionfound=false; var sesreason=false; var sespublisher=false; var sesdomain=false; if (arr!=null){ if (arr[3]!=undefined){ permission=decodeURIComponent(""+arr[3]+"");} if (arr[4]!=undefined){ session=decodeURIComponent(""+arr[4]+"");} if (arr[5]!=undefined){ sendback=fu_xla(decodeURIComponent(""+arr[5]+"")); sendback_forhash=fu_amb(sendback);}else{ sendback=document.referrer; sendback_forhash=fu_amb(sendback);}}
fu_npw("https://"+s_hostname+"/get_account_sessions?query="+su_id+"&count=100",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["sessions"]!=false){ fu_qeq(response["response_data"]["sessions"], function(id){ if (id==session){ sesreason=response["response_data"]["sessions"][""+id+""]["info_reason"]; sespublisher=response["response_data"]["sessions"][""+id+""]["info_publisher"]; sesdomain=response["response_data"]["sessions"][""+id+""]["info_domain"];}});} if (sespublisher!=false){ fu_mxp("container_content"); fu_pco("container_header","<h2 style=\"text-align:center;\">Sign in with Hey.Café</h2>"); var message=false; if (permission=="email"){ var message=''+sespublisher+' is requesting access to the email address you have set on your profile.';} if (permission=="location"){ var message=''+sespublisher+' is requesting access to the location info you have set on your profile settings. This is not real time location info.';} if (permission=="all"){ var message=''+sespublisher+' is requesting access to some of the info listed in your settings like the location info you have set and your email. This is not real time location info.';} var sendbackwithtoken=sendback; if (sendbackwithtoken.includes("loginkey=")==false){ if (sendbackwithtoken.includes("?")){ sendbackwithtoken=sendbackwithtoken+"&loginkey="+session+"&permission="+permission+"";}else{ sendbackwithtoken=sendbackwithtoken+"?loginkey="+session+"&permission="+permission+"";}}else{ sendbackwithtoken=sendbackwithtoken+"&permission="+permission+"";} if (message!=false){ fu_pco("container_content",'<bubble style="text-align:center;"><div class=\'minibubble\' style="text-align:left;"><img source=\'https://logo.clearbit.com/'+sendback_forhash+'\' class=\'avatar optimizer_img\' style=\'float:left;height:70px;width:70px;margin-right:15px;border-radius:5px;\'><h3 style=\'margin-top:0px;margin-bottom: 5px;\'>'+sespublisher+'</h3><div style="margin-bottom: 5px;">'+fu_nwo(sesreason)+'</div><div style="font-size: 0.8em;">'+sesdomain+'</div></div><BR><BR><div style="padding-left: 20px;padding-right: 20px;font-size: 1.2em;">'+message+'</div><BR><BR><input type="submit" name="submit" onclick="fu_zfw(\''+session+'\',\''+permission+'\',\''+fu_csj(sendback)+'\'); return false;" value="Share info"><BR><BR><a href="'+sendbackwithtoken+'">Do not share this info</a></bubble>');}else{ fu_mxp("container_content"); fu_pco("container_content",'<bubble style="text-align:center;">The permission type is not valid.</bubble>');}}else{ fu_mxp("container_content"); fu_pco("container_content",'<bubble style="text-align:center;">Error with request, this session is not valid.<BR><BR>'+session+'</bubble>');}} });} if (type=="api"){ if (arr!=null){ if (arr[3]!=undefined){ publisher=fu_xla(decodeURIComponent(""+arr[3]+""));} if (arr[4]!=undefined){ reason=fu_xla(decodeURIComponent(""+arr[4]+""));} if (arr[5]!=undefined){ sendback=fu_xla(decodeURIComponent(""+arr[5]+"")); sendback_forhash=fu_amb(sendback);}else{ sendback=document.referrer; sendback_forhash=fu_amb(sendback);}}
fu_npw("https://"+s_hostname+"/get_account_sessions?query="+su_id+"&count=100",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["sessions"]!=false){ var found_tokensend=false; fu_qeq(response["response_data"]["sessions"], function(id){ var sesreason=response["response_data"]["sessions"][""+id+""]["info_reason"]; var sespublisher=response["response_data"]["sessions"][""+id+""]["info_publisher"]; var sestoken=response["response_data"]["sessions"][""+id+""]["info_token"]; var sestype=response["response_data"]["sessions"][""+id+""]["info_type"]; if (sendback_hash==sestoken && type==sestype && publisher==sespublisher && reason==sesreason){ found_tokensend=true; fu_txn(type,fu_csj(publisher),fu_csj(reason),fu_csj(sendback));}}); if (found_tokensend==false){ fu_mxp("container_content"); fu_pco("container_header","<h2 style=\"text-align:center;\">Share API Access</h2>"); fu_pco("container_content",'<bubble style="text-align:center;"><div class=\'minibubble\' style="text-align:left;"><img source=\'https://logo.clearbit.com/'+sendback_forhash+'\' class=\'avatar optimizer_img\' style=\'float:left;height:70px;width:70px;margin-right:15px;border-radius:5px;\'><h3 style=\'margin-top:0px;margin-bottom: 5px;\'>'+publisher+'</h3><div style="margin-bottom: 5px;">'+fu_nwo(reason)+'</div><div style="font-size: 0.8em;">'+sendback_forhash+'</div></div><BR><BR><div style="padding-left: 20px;padding-right: 20px;font-size: 1.2em;">'+publisher+' will get an API key they can use to have full access to your account. You should only share access like this with applications you trust.</div><BR><BR><input type="submit" name="submit" onclick="fu_txn(\''+type+'\',\''+fu_csj(publisher)+'\',\''+fu_csj(reason)+'\',\''+fu_csj(sendback)+'\'); return false;" value="Continue as '+su_name+'"></bubble>');}else{ fu_mxp("container_content"); fu_pco("container_content",'<bubble style="text-align:center;">You have already logged into this service before, we are sending you over in just a second...<BR><BR><div class=\'loading\'></div></bubble>');}} }});}}else{ s_loginrestore=sp; if (arr!=null){ if (arr[3]!=undefined){ publisher=fu_xla(decodeURIComponent(""+arr[3]+""));}}
s_loginmessage="Login to your Hey.Café account first before you can login to "+publisher+"."; fu_wrg("/login");}
fu_nxk();} function fu_txn(type,publisher,reason,sendback,permiss_email,permiss_location){ fu_clu(); var postdata={}; var sendurl=""; publisher=fu_xla(publisher); reason=fu_xla(reason); sendback=fu_xla(sendback); var sendback_forhash=fu_amb(sendback); var sendback_hash=sendback_forhash.hashCode(); postdata["publisher"]=ae(fu_csj(publisher)); postdata["reason"]=ae(fu_csj(reason)); postdata["type"]=ae(type); postdata["token"]=ae(fu_csj(sendback_hash)); postdata["domain"]=ae(fu_csj(sendback_forhash)); if (permiss_email==true){ postdata["permission_email"]=ae("true");} if (permiss_location==true){ postdata["permission_location"]=ae("true");}
postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_session_create"; fu_opn(sendurl,postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (sendback.includes("loginkey=")==false){ if (sendback.includes("?")){ sendback=sendback+"&loginkey="+response["response_data"]+"";}else{ sendback=sendback+"?loginkey="+response["response_data"]+"";}}
window.location.href = sendback;}else{ fu_jom("Unable to create session. We can't send you to the service.");}
fu_nxk();});} function fu_zfw(session,permission,sendback){ fu_clu(); var postdata={}; var sendurl=""; sendback=fu_xla(sendback); var sendback_forhash=fu_amb(sendback); var sendback_hash=sendback_forhash.hashCode(); postdata["session"]=ae(fu_csj(session)); postdata["permission"]=ae(fu_csj(permission)); postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_session_permission"; fu_opn(sendurl,postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (sendback.includes("loginkey=")==false){ if (sendback.includes("?")){ sendback=sendback+"&loginkey="+session+"&permission="+permission+"";}else{ sendback=sendback+"?loginkey="+session+"&permission="+permission+"";}}else{ sendback=sendback+"&permission="+permission+"";}
window.location.href = sendback;}else{ fu_jom("Unable to update session. We can't send you to the service.");}
fu_nxk();});}function fu_hae(){ fu_clu(); fu_wta("full"); var query=""; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ query=decodeURIComponent(arr[2]);}}
fu_vbf("Search"); fu_pco("container_content","<h1 id='title_update_search'>Search</h1>"); fu_pco("container_content",'<bubble class="alt0" style="padding: 0px;padding-left: 5px;padding-right: 5px;"><form action="#" onsubmit="javascript:fu_mzl(this);"><input type="text" name="search" style="max-width: calc(100% - 20px);" placeholder="Search..." value="'+query+'"></form></bubble><div id="search_results"></div>'); if (query!=""){ fu_xwm(query);}
fu_nxk();} function fu_blr(form,enter){ event.preventDefault(); var data=fu_uwq(form); var built=false; var dosearch=true; if (!aa("search_results")){ fu_mxp("container_content"); fu_fic("container_content",'<h1 id="title_update_search">Search</h1><div id="search_results"></div>');}else{ built=true;} if (enter!=undefined){ if (built==true){ dosearch=false;}} if (data["search"]!=""){ if (dosearch==true){ fu_mxp("search_results"); event.preventDefault(); var data=fu_uwq(form); fu_xwm(data["search"]);}} } function fu_mzl(form){ event.preventDefault(); var data=fu_uwq(form); fu_xwm(data["search"]);} var search_query_id=""; function fu_xwm(query){ var newid=fu_hmk(30); search_query_id=newid; var search_had_results=false; fu_uyr("/search/"+ae(query)+"",true); fu_vbf("Searching for "+query +""); fu_mxp("title_update_search"); fu_pco("title_update_search","Search: "+query+""); fu_mxp("search_results"); fu_pco("search_results","<div id='search_results_accounts'></div><div id='search_results_cafes'></div><div id='search_results_conversations'><div class='loading'></div></div>"); fu_npw("https://"+s_hostname+"/get_search_accounts?search="+ae(fu_csj(query))+"&count=8",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("search_results_accounts"); if (response["response_data"]["accounts"]!=false){ if (newid==search_query_id){ fu_mxp("search_results_no_results"); search_had_results=true; fu_pco("search_results_accounts","<h2 style='margin-top:0px;'>Accounts</h2>"); fu_qeq(response["response_data"]["accounts"], function(id){ var content=response["response_data"]["accounts"][""+id+""]; fu_cyh(content,"search_results_accounts","halfsize");});}} }else{ fu_few("Not able to load list...");}}); fu_npw("https://"+s_hostname+"/get_search_cafes?search="+ae(fu_csj(query))+"&count=8",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("search_results_cafes"); if (response["response_data"]["cafes"]!=false){ if (newid==search_query_id){ fu_mxp("search_results_no_results"); search_had_results=true; fu_pco("search_results_cafes","<h2>Cafés</h2>"); fu_qeq(response["response_data"]["cafes"], function(id){ var content=response["response_data"]["cafes"][""+id+""]; fu_zsi(content,"search_results_cafes","halfsize");});}} }else{ fu_few("Not able to load list...");}}); fu_npw("https://"+s_hostname+"/get_search_conversations?search="+ae(fu_csj(query))+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("search_results_conversations"); if (newid==search_query_id){ if (response["response_data"]["conversations"]!=false){ fu_pco("search_results_conversations","<h2>Conversations</h2>"); fu_qeq(response["response_data"]["conversations"], function(id){ fu_ndm(response["response_data"]["conversations"][""+id+""],"search_results_conversations");});}else{ if (search_had_results==false){ fu_pco("search_results_conversations","<div id='search_results_no_results'><bubble class='alt1'>Sorry we have no search results!</bubble></div>");}} }}else{ fu_few("Not able to load list...");}});} function fu_tct(){ if (fu_wlm()==true){ fu_wta("full"); var pageload=true; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ pageload=false; if (arr[2]=="me"){ fu_yyf();}else{ fu_bbd(arr[2]);}} } if (pageload==true){ fu_vbf("Settings"); fu_pco("container_content","<h1>Settings</h1>",true); fu_pco("container_content","<div id='SettingsExtras'></div>"); fu_pco("container_content","<div id='SettingsAccount'><div class='loading'></div></div>"); fu_pco("container_content","<div id='SettingsCafes'><div class='loading'></div></div>"); fu_pco("container_content","<bubble style='margin-top:50px;'><h2 style='margin-top:0px;'>Learn more</h2><span>Learn more about Hey.Café including our policys like our TOS and privacy policy.</span> <a href='/help/tag/s9vuh5tz2tj1efk'>You can view that here</a>.</div>",true); fu_npw("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("SettingsAccount"); fu_pco("SettingsAccount","<h2>Account</h2>",true); if (response["response_data"]["email_verified"]=="0"){ fu_pco("SettingsExtras","<div><bubble onclick='javascript:fu_bjv(\"verify\",\""+fu_csj(response["response_data"]["email_verified"])+"\")' class='alt1'><strong>Tap here to verify email address</strong><BR><BR><span>Verify your email to get started, once your email is verified you will have access to more settings.</span></bubble>");}
fu_pco("SettingsAccount","<bubble onclick='javascript:fu_wrg(\"/settings/me\");'><img source='"+response["response_data"]["avatar"]+"' class='avatar optimizer_img' style='float:left;height:50px;width:50px;margin-right:15px;'><h3 style='margin-top: 5px;margin-bottom: 0px;'>"+fu_cpd(response["response_data"]["name"])+"</h3><trans>Tap to view your settings.</trans></bubble>");}else{ fu_few("Not able to load your user data to generate on the settings page...");}}); fu_npw("https://"+s_hostname+"/get_account_cafes?query="+su_id+"&count=2000&admin=true",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("SettingsCafes"); if (response["response_data"]["cafes"]!=false){ var isincafe=false; fu_qeq(response["response_data"]["cafes"], function(id){ if (response["response_data"]["cafes"][""+id+""]["you_admin"]==true){ if (response["response_data"]["cafes"][""+id+""]["you_member"]==true){ if (isincafe==false){ isincafe=true; fu_pco("SettingsCafes","<h2>Cafés</h2><div id='s_cafe_list_gen'></div>",true);}
fu_pco("s_cafe_list_gen","<bubble onclick='javascript:fu_wrg(\"/settings/"+id+"\");'><img source='"+response["response_data"]["cafes"][""+id+""]["avatar"]+"' class='avatar optimizer_img' style='float:left;height:50px;width:50px;margin-right:15px;'><h3 style='margin-top: 5px;margin-bottom: 0px;'>"+fu_cpd(response["response_data"]["cafes"][""+id+""]["name"])+"</h3><trans>Has "+response["response_data"]["cafes"][""+id+""]["members"]+" member(s) and is set to "+response["response_data"]["cafes"][""+id+""]["mode"]+" status.</trans></bubble>");}} });}else{ fu_pco("SettingsCafes","<h2 style='margin-top: 0px;'>Cafés</h2>",true); fu_pco("SettingsCafes","<bubble class='alt1'>You are not a moderator or admin of any Cafés yet.</bubble>",true);}}else{ fu_few("Not able to load your café data to generate on the settings page...");}});}} } function fu_dqi(){ fu_pbr(); fu_pco("container_modl","<h1>User Switcher</h1>",true); fu_pco("container_modl","<div style='margin-bottom:20px;'><a href=\"javascript:fu_vxy();\"><div class=\"tab\">New Session</div></a> <a href=\"/logout\"><div class=\"tab\">Logout</div></a></div>",true); var sessionstorage=false; if (fu_rpz("ses_s_sessions")!=""){ sessionstorage=fu_hdg(fu_rpz("ses_s_sessions"));}
sessionstorage[""+su_id+""]={}; sessionstorage[""+su_id+""]["session"]=su_session; sessionstorage[""+su_id+""]["alias"]=su_alias; sessionstorage[""+su_id+""]["id"]=su_id; sessionstorage[""+su_id+""]["name"]=su_name; sessionstorage[""+su_id+""]["language"]=su_language; fu_ccj("ses_s_sessions", fu_ere(sessionstorage)); if (sessionstorage!=false){ var options=""; var currentaccount=""; fu_qeq(sessionstorage, function(id){ if (sessionstorage[""+id+""]!=null){ var userdata=sessionstorage[""+id+""]; if (userdata["name"]!=null){ if (su_id!=id){ options=""+options+"<div class='minibubble' onclick='javascript:fu_hyl(\""+id+"\");'><img src='https://endpoint.hey.cafe/takemeto/account_avatar?query="+id+"' class='avatar' style='float:left;height:50px;width:50px;margin-right:15px;'><h3 style='margin-top: 5px;margin-bottom: 0px;'>"+fu_cpd(userdata["name"])+"</h3><trans>Tap to switch accounts</trans></div>";}else{ currentaccount=""+currentaccount+"<div class='minibubble'><img src='https://endpoint.hey.cafe/takemeto/account_avatar?query="+id+"' class='avatar' style='float:left;height:50px;width:50px;margin-right:15px;'><h3 style='margin-top: 5px;margin-bottom: 0px;'>"+fu_cpd(userdata["name"])+"</h3><trans>Your current account</trans></div>";}} }}); fu_pco("container_modl","<bubble><h3 style='margin-top:0px;'><trans>Active session</trans></h3>"+currentaccount+"<h3><trans>Other sessions</trans></h3>"+options+"</bubble>");}else{ fu_pco("container_modl","<bubble class=\"alt1\">You have no other active sessions</bubble>",true);}} function fu_vxy(){ s_checkups=false; var sessionstorage={}; if (fu_rpz("ses_s_sessions")!=""){ sessionstorage=fu_hdg(fu_rpz("ses_s_sessions"));}
sessionstorage[""+su_id+""]={}; sessionstorage[""+su_id+""]["session"]=su_session; sessionstorage[""+su_id+""]["alias"]=su_alias; sessionstorage[""+su_id+""]["id"]=su_id; sessionstorage[""+su_id+""]["name"]=su_name; sessionstorage[""+su_id+""]["language"]=su_language; fu_ccj("ses_s_sessions", fu_ere(sessionstorage)); fu_clu(); fu_npw("https://"+s_hostname+"/post_account_logout_switch",function(result){ var response = fu_hdg(result); fu_ehb(); su_session=null; su_alias=null; su_id=null; su_name=null; su_language="en"; su_avatar=null; su_header=null; su_admin=false; su_moderator=false; fu_ymy("ses_su_session"); fu_ymy("ses_su_alias"); fu_ymy("ses_su_id"); fu_ymy("ses_su_name"); fu_ymy("ses_su_language"); fu_wrg("/login"); setTimeout("s_checkups=true;", 4000); fu_nxk();});} function fu_hyl(account){ s_checkups=false; if (fu_rpz("ses_s_sessions")!=""){ sessionstorage=fu_hdg(fu_rpz("ses_s_sessions")); sessionstorage[""+su_id+""]={}; sessionstorage[""+su_id+""]["session"]=su_session; sessionstorage[""+su_id+""]["alias"]=su_alias; sessionstorage[""+su_id+""]["id"]=su_id; sessionstorage[""+su_id+""]["name"]=su_name; sessionstorage[""+su_id+""]["language"]=su_language; fu_ccj("ses_s_sessions", fu_ere(sessionstorage)); su_session=null; su_alias=null; su_id=null; su_name=null; su_language="en"; su_avatar=null; su_header=null; su_admin=false; su_moderator=false; if (sessionstorage[""+account+""]!=null){ fu_clu(); fu_npw("https://"+s_hostname+"/post_account_logout_switch",function(result){ var response = fu_hdg(result); fu_ehb(); fu_ccj("ses_su_session", sessionstorage[""+account+""]["session"]); fu_ccj("ses_su_alias", sessionstorage[""+account+""]["alias"]); fu_ccj("ses_su_id", sessionstorage[""+account+""]["id"]); fu_ccj("ses_su_name", sessionstorage[""+account+""]["name"]); fu_ccj("ses_su_language", sessionstorage[""+account+""]["language"]); fu_hrr("Switching accounts"); fu_drb(); fu_nxk();});}else{ fu_hrr("We had a problem with the session"); fu_wrg("/"); fu_drb();}}else{ fu_hrr("You have no sessions setup"); fu_wrg("/");} setTimeout("s_checkups=true;", 4000);} function fu_yyf(){ fu_clu(); if (su_id!=null){ fu_wta("full"); var tab="info"; var setting="all"; var arr = sp.split('/'); if (arr!=null){ if (arr[3]!=undefined){ var tab=arr[3];} if (arr[4]!=undefined){ var setting=arr[4];}}
fu_pco("container_content","<h1>Account Settings</h1>",true); fu_pco("container_content","<div class='horizontalscroll' style='margin-bottom:20px;' id='MenuSettings'></div>"); fu_pco("MenuSettings","<a href='/settings/me/info'><div class='tab'>Info</div></a>",true); fu_pco("MenuSettings","<a href='/settings/me/about'><div class='tab'>About Page</div></a>",true); fu_pco("MenuSettings","<a href='/settings/me/tags'><div class='tab'>Tags</div></a>",true); fu_pco("MenuSettings","<a href='/settings/me/security'><div class='tab'>Security</div></a>",true); fu_pco("MenuSettings","<a href='/settings/me/privacy'><div class='tab'>Privacy</div></a>",true); fu_pco("MenuSettings","<a href='/settings/me/rss'><div class='tab'>RSS Import</div></a>",true); fu_pco("MenuSettings","<a href='/settings/me/sessions'><div class='tab'>Sessions</div></a>",true); fu_pco("container_content","<div id='me_s_message'></div><div id='me_settings'><div class='loading'></div></div>"); if (tab=="info"){ fu_npw("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("me_settings"); fu_pco("me_settings","<h2>Main settings</h2>",true); su_session=response["system_account_session"]; su_alias=response["response_data"]["alias"]; su_id=response["response_data"]["id"]; su_name=response["response_data"]["name"]; su_language=response["response_data"]["language"]; fu_ccj("ses_su_session", su_session); fu_ccj("ses_su_alias", su_alias); fu_ccj("ses_su_id", su_id); fu_ccj("ses_su_name", su_name); fu_ccj("ses_su_language", su_language); var langword="en"; if (response["response_data"]["language"]=="en"){ langword="English";} if (response["response_data"]["language"]=="pt"){ langword="Portuguese";} if (response["response_data"]["language"]=="es"){ langword="Spanish";} if (response["response_data"]["language"]=="zh"){ langword="Chinese";} if (response["response_data"]["language"]=="nl"){ langword="Dutch";} if (response["response_data"]["language"]=="fi"){ langword="Finnish";} if (response["response_data"]["language"]=="fr"){ langword="French";} if (response["response_data"]["language"]=="de"){ langword="German";} if (response["response_data"]["language"]=="id"){ langword="Indonesian";} if (response["response_data"]["language"]=="it"){ langword="Italian";} if (response["response_data"]["language"]=="ja"){ langword="Japanese";} if (response["response_data"]["language"]=="ko"){ langword="Korean";} if (response["response_data"]["language"]=="pl"){ langword="Polish";} if (response["response_data"]["language"]=="ru"){ langword="Russian";} if (response["response_data"]["language"]=="sv"){ langword="Swedish";} if (response["response_data"]["language"]=="uk"){ langword="Ukranian";} if (response["response_data"]["language"]=="vi"){ langword="Vietnamese";} if (response["response_data"]["language"]=="hu"){ langword="Hungarian";} if (response["response_data"]["email_verified"]=="0"){ fu_pco("me_s_message","<bubble onclick='javascript:fu_bjv(\"verify\",\""+fu_csj(response["response_data"]["email_verified"])+"\")' style='margin-top:15px;' class='alt1'><strong>Tap here to verify email address</strong><BR><BR><span>Verify your email to get started, once your email is verified you will have access to more settings.<span></bubble>",true);} var controls=""; controls=""+controls+"<div class='minibubble' onclick='javascript:fu_bjv(\"name\",\""+fu_csj(response["response_data"]["name"])+"\")'><strong><trans>Name</trans>:</strong> "+fu_cpd(response["response_data"]["name"])+"</div>"; controls=""+controls+"<div class='minibubble' onclick='javascript:fu_bjv(\"alias\",\""+fu_csj(response["response_data"]["alias"])+"\")'><strong><trans>Alias / Username</trans>:</strong> "+response["response_data"]["alias"]+"</div>"; controls=""+controls+"<div class='minibubble' onclick='javascript:fu_bjv(\"email\",\""+fu_csj(response["response_data"]["email"])+"\")'><strong><trans>Email</trans>:</strong> "+response["response_data"]["email"]+"</div>"; controls=""+controls+"<div class='minibubble' onclick='javascript:fu_bjv(\"password\",\""+fu_csj("false")+"\")'><strong><trans>Password</trans>:</strong> **********</div>"; if (s_device!="NativeiOSApp"){ if (response["response_data"]["pro"]=="1"){ var prodays=fu_atf(Math.round((suc_pro_expire_seconds/86400))); controls=""+controls+"<div class='minibubble' onclick='javascript:fu_emk();'><strong><trans>Pro</trans>:</strong> <trans>You are Pro for the next "+prodays+" days!</trans></div>";}else{ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_emk();'><strong><trans>Pro</trans>:</strong> <trans>You are not Pro, become Pro and get acccess to lots of great features!</trans></div>";}}
controls=""+controls+"<div class='minibubble' onclick='javascript:fu_bjv(\"bio\",\""+fu_csj(response["response_data"]["bio"])+"\")'><strong><trans>Bio</trans>:</strong> "+fu_cpd(fu_dwb(fu_nwo(response["response_data"]["bio"])))+"</div>"; if (response["response_data"]["website"]!="false"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_bjv(\"website\",\""+fu_csj(response["response_data"]["website"])+"\")'><strong><trans>Website</trans>:</strong> "+fu_cpd(fu_dwb(fu_nwo(response["response_data"]["website"])))+"</div>";}else{ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_bjv(\"website\",\""+fu_csj(response["response_data"]["website"])+"\")'><strong><trans>Website</trans>:</strong> <trans>Not set.</trans></div>";} if (response["response_data"]["pronouns"]!="false"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_bjv(\"pronouns\",\""+fu_csj(response["response_data"]["pronouns"])+"\")'><strong><trans>Pronouns</trans>:</strong> "+fu_cpd(fu_dwb(fu_nwo(response["response_data"]["pronouns"])))+"</div>";}else{ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_bjv(\"pronouns\",\""+fu_csj(response["response_data"]["pronouns"])+"\")'><strong><trans>Pronouns</trans>:</strong> <trans>Not set.</trans></div>";} if (response["response_data"]["feed"]!="false"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_bjv(\"feed\",\""+fu_csj(response["response_data"]["feed"])+"\")'><strong><trans>Feed Filter</trans>:</strong> "+response["response_data"]["feed"]+"</div>";}else{ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_bjv(\"feed\",\""+fu_csj(response["response_data"]["feed"])+"\")'><strong><trans>Feed Filter</trans>:</strong> all</div>";}
controls=""+controls+"<div class='minibubble' onclick='javascript:fu_bjv(\"language\",\""+fu_csj(response["response_data"]["language"])+"\")'><strong><trans>Language</trans>:</strong> "+langword+" / "+response["response_data"]["language"]+"</div>"; if (response["response_data"]["country"]!="false"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_bjv(\"country\",\""+fu_csj(response["response_data"]["country"])+"\")'><strong><trans>Country</trans>:</strong> "+response["response_data"]["country"]+"</div>"; if (response["response_data"]["state"]!="false"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_bjv(\"state\",\""+fu_csj(response["response_data"]["state"])+"\")'><strong><trans>Province</trans>:</strong> "+response["response_data"]["state"]+"</div>";}else{ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_bjv(\"state\",\""+fu_csj(response["response_data"]["state"])+"\")'><strong><trans>Province</trans>:</strong> <trans>Not set.</trans></div>";}}else{ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_bjv(\"country\",\""+fu_csj(response["response_data"]["country"])+"\")'><strong><trans>Country</trans>:</strong> <trans>Not set.</trans></div>";}
fu_pco("me_settings","<bubble>"+controls+"</bubble>"); if (response["response_data"]["email_verified"]=="1"){ var controls_profiledes=""; controls_profiledes=""+controls_profiledes+"<div class='minibubble' onclick='javascript:fu_bjv(\"avatar\",\""+fu_csj(response["response_data"]["avatar"])+"\")'><strong><trans>Avatar</trans>:</strong> <img source='"+response["response_data"]["avatar"]+"' class='optimizer_img' style='display: block;margin:0px auto;max-height:100px;max-width: 100px;border-radius:100%;'></div>"; controls_profiledes=""+controls_profiledes+"<div class='minibubble' onclick='javascript:fu_bjv(\"header\",\""+fu_csj(response["response_data"]["header"])+"\")'><strong><trans>Header</trans>:</strong> <img source='"+response["response_data"]["header"]+"' class='optimizer_img' style='display: block;margin:0px auto;max-width:300px;'></div>"; fu_pco("me_settings","<h2><trans>Profile Design</trans></h2><bubble><trans>To update any option or upload media just tap any of the boxes below. Header images for accounts are shown in a 21:9 aspect.</trans><BR><BR>"+controls_profiledes+"</bubble>"); var controls_appsetting=""; var controls_appsettingcolour=""; var colouroptions = ['false','155,82,246','225,127,163','216,106,90','190,78,50','228,157,118','243,199,116','108,177,138','80,131,97','137,180,235','88,134,237','68,112,218']; colouroptions.forEach(function(element, index){ var previewcol=s_accent; if (element!="false"){ previewcol=element;}
controls_appsettingcolour=""+controls_appsettingcolour+"<div class='minibubble' onclick='javascript:fu_xqf(\"app_colour\",[\""+element+"\"]);s_app_colour=\""+element+"\";fu_azs(\""+s_mode+"\");' style='width: auto;display: inline-block;margin:5px;background:rgb("+previewcol+") !important;width: 60px;height: 60px;padding: 0px;color:rgba(255,255,255,0) !important;border-radius: 100%;'>X</div>";}); controls_appsetting=""+controls_appsetting+"<div class='minibubble'>"+controls_appsettingcolour+"</div>"; if (response["response_data"]["app_stats"]=="false"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_xqf(\"app_stats\",[\"true\"]);s_app_stats=\"true\";'><strong><trans>Stats</trans>:</strong> "+fu_cpd('👍')+"&ensp;<trans>No (help your sanity and keep stats hidden)</trans></div>";} if (response["response_data"]["app_stats"]=="true"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_xqf(\"app_stats\",[\"false\"]);s_app_stats=\"false\";'><strong><trans>Stats</trans>:</strong> "+fu_cpd('👎')+"&ensp;<trans>Yes</trans></div>";} if (response["response_data"]["app_reducemotion"]=="false"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_xqf(\"app_reducemotion\",[\"true\"]);s_app_reducemotion=\"true\";fu_azs(\""+s_mode+"\");'><strong><trans>Reduce Motion</trans>:</strong> "+fu_cpd('❎')+"&ensp;<trans>No</trans></div>";} if (response["response_data"]["app_reducemotion"]=="true"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_xqf(\"app_reducemotion\",[\"false\"]);s_app_reducemotion=\"false\";fu_azs(\""+s_mode+"\");'><strong><trans>Reduce Motion</trans>:</strong> "+fu_cpd('✅')+"&ensp;<trans>Yes</trans></div>";} if (response["response_data"]["app_hidesuggestions"]=="false"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_xqf(\"app_hidesuggestions\",[\"true\"]);s_app_hidesuggestions=\"true\";fu_azs(\""+s_mode+"\");'><strong><trans>Hide Suggestions</trans>:</strong> "+fu_cpd('👍')+"&ensp;<trans>No</trans></div>";} if (response["response_data"]["app_hidesuggestions"]=="true"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_xqf(\"app_hidesuggestions\",[\"false\"]);s_app_hidesuggestions=\"false\";fu_azs(\""+s_mode+"\");'><strong><trans>Hide Suggestions</trans>:</strong> "+fu_cpd('👎')+"&ensp;<trans>Yes</trans></div>";} if (response["response_data"]["app_forcedisplay"]=="false"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_xqf(\"app_forcedisplay\",[\"dark\"]);s_app_forcedisplay=\"dark\";fu_azs(\""+s_mode+"\");'><strong><trans>Display Mode</trans>:</strong> "+fu_cpd('🌤️')+"&ensp;<trans>Auto</trans></div>";} if (response["response_data"]["app_forcedisplay"]=="dark"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_xqf(\"app_forcedisplay\",[\"light\"]);s_app_forcedisplay=\"light\";fu_azs(\""+s_mode+"\");'><strong><trans>Display Mode</trans>:</strong> "+fu_cpd('☁️')+"&ensp;<trans>Dark</trans></div>";} if (response["response_data"]["app_forcedisplay"]=="light"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_xqf(\"app_forcedisplay\",[\"false\"]);s_app_forcedisplay=\"false\";fu_azs(\""+s_mode+"\");'><strong><trans>Display Mode</trans>:</strong> "+fu_cpd('☀️')+"&ensp;<trans>Light</trans></div>";} if (response["response_data"]["app_scaledisplay"]=="false"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_xqf(\"app_scaledisplay\",[\"small\"]);s_app_scaledisplay=\"small\";fu_azs(\""+s_mode+"\");'><strong><trans>Scale Mode</trans>:</strong> "+fu_cpd('🧐')+"&ensp;<trans>Off</trans></div>";} if (response["response_data"]["app_scaledisplay"]=="small"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_xqf(\"app_scaledisplay\",[\"medium\"]);s_app_scaledisplay=\"medium\";fu_azs(\""+s_mode+"\");'><strong><trans>Scale Mode</trans>:</strong> "+fu_cpd('🧐')+"&ensp;<trans>Small</trans></div>";} if (response["response_data"]["app_scaledisplay"]=="medium"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_xqf(\"app_scaledisplay\",[\"large\"]);s_app_scaledisplay=\"large\";fu_azs(\""+s_mode+"\");'><strong><trans>Scale Mode</trans>:</strong> "+fu_cpd('🧐')+"&ensp;<trans>Medium</trans></div>";} if (response["response_data"]["app_scaledisplay"]=="large"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_xqf(\"app_scaledisplay\",[\"false\"]);s_app_scaledisplay=\"false\";fu_azs(\""+s_mode+"\");'><strong><trans>Scale Mode</trans>:</strong> "+fu_cpd('🧐')+"&ensp;<trans>Large</trans></div>";}
fu_pco("me_settings","<h2><trans>App Settings</trans></h2><bubble>"+controls_appsetting+"</bubble>"); var controls_emails=""; if (response["response_data"]["email_updates"]=="0"){ controls_emails=""+controls_emails+"<div class='minibubble' onclick='javascript:fu_xqf(\"email_updates\",[\"on\"])'><strong><trans>Updates</trans>:</strong> "+fu_cpd('👎')+"&ensp;<trans>No</trans></div>";} if (response["response_data"]["email_updates"]=="1"){ controls_emails=""+controls_emails+"<div class='minibubble' onclick='javascript:fu_xqf(\"email_updates\",[\"off\"])'><strong><trans>Updates</trans>:</strong> "+fu_cpd('👍')+"&ensp;<trans>Yes</trans></div>";} if (response["response_data"]["email_notifications"]=="0"){ controls_emails=""+controls_emails+"<div class='minibubble' onclick='javascript:fu_xqf(\"email_notifications\",[\"on\"])'><strong><trans>Notifications</trans>:</strong> "+fu_cpd('👎')+"&ensp;<trans>No</trans></div>";} if (response["response_data"]["email_notifications"]=="1"){ controls_emails=""+controls_emails+"<div class='minibubble' onclick='javascript:fu_xqf(\"email_notifications\",[\"off\"])'><strong><trans>Notifications</trans>:</strong> "+fu_cpd('👍')+"&ensp;<trans>Yes</trans></div>";} if (response["response_data"]["email_messages"]=="0"){ controls_emails=""+controls_emails+"<div class='minibubble' onclick='javascript:fu_xqf(\"email_messages\",[\"on\"])'><strong><trans>Messages</trans>:</strong> "+fu_cpd('👎')+"&ensp;<trans>No</trans></div>";} if (response["response_data"]["email_messages"]=="1"){ controls_emails=""+controls_emails+"<div class='minibubble' onclick='javascript:fu_xqf(\"email_messages\",[\"off\"])'><strong><trans>Messages</trans>:</strong> "+fu_cpd('👍')+"&ensp;<trans>Yes</trans></div>";}
fu_pco("me_settings","<h2><trans>Emails</trans></h2><bubble><trans>The email settings for what emails we will send you based on events.</trans><BR><BR>"+controls_emails+"</bubble>"); var controls_special=""; controls_special=""+controls_special+"<div class='minibubble' onclick='javascript:fu_wrg(\"/delete\")'>"+fu_cpd('🗑️')+"&ensp;<trans>Delete account</trans></div>"; fu_pco("me_settings","<h2><trans>Special</trans></h2><bubble>"+controls_special+"</bubble>");}
fu_nxk();}else{ fu_few("Not able to load settings");}});} if (tab=="about"){ fu_npw("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["email_verified"]=="1"){ fu_mxp("me_settings"); var controls_about=""; if (response["response_data"]["about"]==false){ var contsabout="<trans>No about page content set.</trans>";}else{ var contsabout=response["response_data"]["about"];}
contsabout=fu_uiv(contsabout); contsabout=fu_idd(contsabout); contsabout=fu_ibd(contsabout); contsabout=fu_cpd(contsabout); contsabout=fu_esd(contsabout); contsabout=fu_ebi(contsabout); controls_about=""+contsabout+""; fu_pco("me_settings","<h2>About Page</h2>",true); fu_pco("me_settings","<bubble><span>The about page allows for extended content like a conversation. You can have multiple links, more mentions, formatting like lists and more.</span> <a href=\"/help/formatting\">You can also view the formating help page</a>.<BR><BR><span>This is also used for your personal site.</span> <a href='/home/personal_site'>Learn more about that here.</a><BR><BR><a href='javascript:fu_bjv(\"about\",\""+fu_csj(response["response_data"]["about"])+"\")'><div class='button'>Edit content</div></a></bubble>",true); fu_pco("me_settings","<bubble class='conversation' style='padding-top:0px;padding-bottom:0px;'><div class='content'>"+controls_about+"</div></bubble>");}else{ fu_mxp("me_settings"); fu_pco("me_settings","<h2>About Page</h2><bubble>You need to verify your email first.</bubble>",true);}
fu_nxk();}else{ fu_few("Not able to load settings");}});} if (tab=="tags"){ fu_npw("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["email_verified"]=="1"){ fu_mxp("me_settings"); var contentstags=""; fu_pco("me_settings","<h2>Tags</h2><bubble><span>Tags allow for better conversation sorting, if you are Pro you can create up to 10 tags on your account.</span><BR><BR><div id='s_create_new_tag'></div></bubble>",true); var tagshavenow=0; if (response["response_data"]["tags"]!=false){ fu_qeq(response["response_data"]["tags"], function(select){ tagshavenow=tagshavenow+1;});} if (response["response_data"]["pro"]=="1"){ if (tagshavenow>=10){ fu_pco("s_create_new_tag",""+tagshavenow+"/10");}else{ fu_pco("s_create_new_tag","<a href='javascript:fu_pbj(\"false\")'><div class='button'>New tag</div></a> "+tagshavenow+"/10");}}else{ fu_pco("s_create_new_tag","0/0");} if (response["response_data"]["tags"]==false){ contentstags="<bubble class='alt1'><trans>No tags have been created yet</trans></bubble>";}else{ fu_qeq(response["response_data"]["tags"], function(select){ contentstags=""+contentstags+"<bubble><div style=\"font-size:2.3em;float:left;margin-right:15px;\">"+fu_cpd(response["response_data"]["tags"][""+select+""]["emoji"])+"</div><h3 style=\"margin-top: 0px;margin-bottom: 5px;font-weight:400;\">"+fu_cpd(response["response_data"]["tags"][""+select+""]["name"])+"</h3><div style='font-size: 0.8em;'><a href='javascript:fu_ppc(\""+response["response_data"]["tags"][""+select+""]["id"]+"\",\""+response["response_data"]["tags"][""+select+""]["emoji"]+"\")'><div class='button'><trans>Change Emoji</trans></div></a> <a href='javascript:fu_ryj(\""+response["response_data"]["tags"][""+select+""]["id"]+"\",\""+response["response_data"]["tags"][""+select+""]["name"]+"\")'><div class='button'><trans>Change Name</trans></div></a> <a href='javascript:fu_pqr(\""+response["response_data"]["tags"][""+select+""]["id"]+"\")'><div class='button'><trans>Delete</trans></div></a></div></bubble>";});}
fu_pco("me_settings",""+contentstags+""); fu_nxk();}else{ fu_few("Not able to load settings");}}else{ fu_mxp("me_settings"); fu_pco("me_settings","<h2>Tags</h2><bubble>You need to verify your email first.</bubble>",true);}});} if (tab=="privacy"){ fu_npw("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["email_verified"]=="1"){ fu_mxp("me_settings"); var controls_privacy=""; if (response["response_data"]["hidden"]=="1"){ controls_privacy=""+controls_privacy+"<div class='minibubble' onclick='javascript:fu_xqf(\"hidden\",[\"off\"])'><strong>Show in explore:</strong> "+fu_cpd('👎')+"&ensp;No</div>";} if (response["response_data"]["hidden"]=="0"){ controls_privacy=""+controls_privacy+"<div class='minibubble' onclick='javascript:fu_xqf(\"hidden\",[\"on\"])'><strong>Show in explore:</strong> "+fu_cpd('👍')+"&ensp;Yes</div>";} if (response["response_data"]["invisible"]=="1"){ controls_privacy=""+controls_privacy+"<div class='minibubble' onclick='javascript:fu_xqf(\"invisible\",[\"off\"])'><strong>Show online status:</strong> "+fu_cpd('👎')+"&ensp;No</div>";} if (response["response_data"]["invisible"]=="0"){ controls_privacy=""+controls_privacy+"<div class='minibubble' onclick='javascript:fu_xqf(\"invisible\",[\"on\"])'><strong>Show online status:</strong> "+fu_cpd('👍')+"&ensp;Yes</div>";}
fu_pco("me_settings","<h2>Privacy</h2>",true); fu_pco("me_settings","<bubble><span>We have a few options for now, to control if you show in the who to follow and explore page, or if you are always seen as offline or invisible.</span><BR><BR>"+controls_privacy+"</bubble>",true);}else{ fu_mxp("me_settings"); fu_pco("me_settings","<h2>Privacy</h2><bubble>You need to verify your email first.</bubble>",true);}
fu_nxk();}else{ fu_few("Not able to load settings");}});} if (tab=="security"){ fu_npw("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["email_verified"]=="1"){ fu_mxp("me_settings"); fu_pco("me_settings","<h2>Security</h2><bubble>Security settings like 2FA can be found here but keep in mind sessions (active logins) can be found on the sessions page.</bubble>",true); var controls_2fa=""; if (response["response_data"]["2fa_type"]!="email"){ if (response["response_data"]["2fa_type"]=="off"){ if (response["response_data"]["2fa_validated"]!="0"){ controls_2fa=""+controls_2fa+"<div class='minibubble' onclick='javascript:fu_xqf(\"2fa_app\",[\"on\"])'><strong>2FA App:</strong> "+fu_cpd('👎')+"&ensp;No</div>";}else{ controls_2fa=""+controls_2fa+"<div class='minibubble' onclick='fu_bjv(\"2fa_validate\",\""+fu_csj(response["response_data"]["2fa_validated"])+"\")'><strong>2FA App:</strong> "+fu_cpd('👎')+"&ensp;No (setup)</div>";}} if (response["response_data"]["2fa_type"]=="app"){ controls_2fa=""+controls_2fa+"<div class='minibubble' onclick='javascript:fu_xqf(\"2fa_app\",[\"off\"])'><strong>2FA App:</strong> "+fu_cpd('👍')+"&ensp;Yes</div>";}} if (response["response_data"]["2fa_type"]!="app"){ if (response["response_data"]["2fa_type"]=="off"){ controls_2fa=""+controls_2fa+"<div class='minibubble' onclick='javascript:fu_xqf(\"2fa_email\",[\"on\"])'><strong>2FA Email:</strong> "+fu_cpd('👎')+"&ensp;No</div>";} if (response["response_data"]["2fa_type"]=="email"){ controls_2fa=""+controls_2fa+"<div class='minibubble' onclick='javascript:fu_xqf(\"2fa_email\",[\"off\"])'><strong>2FA Email:</strong> "+fu_cpd('👍')+"&ensp;Yes</div>";}} var controls_2fa_access=""; if (response["response_data"]["2fa_validated"]!="0"){ controls_2fa_access="<a href='javascript:fu_bjv(\"2fa_validate\",\""+fu_csj(response["response_data"]["2fa_validated"])+"\")'><trans>View your 2FA setup QR code by tapping here</trans></a>.";}
fu_pco("me_settings","<h2><trans>2FA</trans></h2><bubble><trans>2FA is a great way to protect your account, but if you lose access to your 2FA method you will be locked out. If you do get locked out contact us, we can help switch to email 2FA from app 2FA as long as we can verify who you are.</trans> "+controls_2fa_access+"<BR><BR>"+controls_2fa+"</bubble>");}else{ fu_mxp("me_settings"); fu_pco("me_settings","<h2><trans>Security</trans></h2><bubble><trans>You need to verify your email first.</trans></bubble>");}
fu_nxk();}else{ fu_few("Not able to load settings");}});} if (tab=="rss"){ fu_npw("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["email_verified"]=="1"){ fu_mxp("me_settings"); var controls_rssimport=""; fu_qeq(response["response_data"]["rssimports"], function(id){ var currentitem=""; var cur_id=response["response_data"]["rssimports"][""+id+""]["id"]; var cur_active=response["response_data"]["rssimports"][""+id+""]["info_active"]; var cur_url=response["response_data"]["rssimports"][""+id+""]["info_url"]; var cur_title=response["response_data"]["rssimports"][""+id+""]["info_title"]; var cur_description=response["response_data"]["rssimports"][""+id+""]["info_description"]; var cur_template=response["response_data"]["rssimports"][""+id+""]["info_template"]; var cur_cafe=response["response_data"]["rssimports"][""+id+""]["info_cafe"]; currentitem=""+currentitem+"</bubble><bubble><div>"; currentitem=""+currentitem+"<div style='float:right;padding-left:10px;padding-bottom:10px;'><a href=\"javascript:fu_dtg('"+cur_id+"')\"><trans>Delete</trans></a></div><h3 style='margin-top: 0px;margin-bottom:5px;'>"+cur_title+"</h3><strong>"+cur_url+"</strong><BR><BR>"+cur_description+"<BR><BR>"; if (cur_active=="0"){ currentitem=""+currentitem+"<div class='minibubble' onclick='javascript:fu_bwh(\""+cur_id+"\",\"active\",[\"on\"]);'><strong><trans>Active</trans>:</strong> "+fu_cpd('👎')+"&ensp;<trans>No</trans></div>";}else{ currentitem=""+currentitem+"<div class='minibubble' onclick='javascript:fu_bwh(\""+cur_id+"\",\"active\",[\"off\"]);'><strong><trans>Active</trans>:</strong> "+fu_cpd('👍')+"&ensp;<trans>Yes</trans></div>";}
currentitem=""+currentitem+"<div class='minibubble' onclick='javascript:fu_xhd(\""+cur_id+"\",\"template\",\""+cur_template+"\");'><strong><trans>Template</trans>:</strong> "+cur_template+"</div>"; if (cur_cafe=="false"){ currentitem=""+currentitem+"<div class='minibubble' onclick='javascript:fu_xhd(\""+cur_id+"\",\"cafe\",\""+cur_cafe+"\");'><strong><trans>Conversation location</trans>:</strong> <trans>Personal Café</trans></div>";}else{ currentitem=""+currentitem+"<div class='minibubble' onclick='javascript:fu_xhd(\""+cur_id+"\",\"cafe\",\""+cur_cafe+"\");'><strong><trans>Conversation location</trans>:</strong> "+fu_cpd(fu_dwb(fu_nwo("!"+cur_cafe+"")))+"</div>";}
currentitem=""+currentitem+"<div id='preview_rssimport_"+cur_id+"'></div>"; currentitem=""+currentitem+"</div>"; controls_rssimport=""+controls_rssimport+""+currentitem+"";}); if (controls_rssimport==""){ controls_rssimport="<BR><BR><bubble class=\"alt1\"><trans>You have no RSS import rules setup.</trans></bubble>";}
fu_pco("me_settings","<h2><trans>RSS Imports</trans></h2><bubble><trans>RSS imports is an advanced feature that once setup makes Hey.Café create conversations based on RSS feed items. RSS feeds update only once per hour unless your account is Pro.</trans><BR><BR><a href='javascript:fu_epz();'><div class='button'><trans>Create new RSS import rule</trans></div></a>"+controls_rssimport+"</bubble>"); fu_qeq(response["response_data"]["rssimports"], function(id){ var cur_id=response["response_data"]["rssimports"][""+id+""]["id"]; var cur_url=response["response_data"]["rssimports"][""+id+""]["info_url"]; var cur_template=response["response_data"]["rssimports"][""+id+""]["info_template"]; fu_npw("https://"+s_hostname+"/get_account_rssimport_preview?query="+cur_id+"",function(result){ var rssresponse = fu_hdg(result); if (rssresponse["system_api_error"]==false){ if (rssresponse["response_data"]["channel"]!=undefined){ if (rssresponse["response_data"]["channel"]["title"]!=undefined){ if (rssresponse["response_data"]["channel"]["item"]!=false){ fu_pco("preview_rssimport_"+cur_id+"","<BR><BR><strong><trans>Preview of template</trans></strong><BR>"); var numbertoshow=8; fu_qeq(rssresponse["response_data"]["channel"]["item"], function(id){ if (numbertoshow>=1){ numbertoshow=numbertoshow-1; fu_vmo(cur_id,rssresponse["response_data"]["channel"]["item"][""+id+""],cur_template);}});}}else{ fu_pco("preview_rssimport_"+cur_id+"","<trans>Not able to load RSS feed to generate a preview.</trans>");}}else{ fu_pco("preview_rssimport_"+cur_id+"","<trans>Not able to load RSS feed to generate a preview.</trans>");}}else{ fu_pco("preview_rssimport_"+cur_id+"","<trans>Not able to load RSS feed to generate a preview.</trans>");}});});}else{ fu_mxp("me_settings"); fu_pco("me_settings","<h2><trans>RSS Imports</trans></h2><bubble><trans>You need to verify your email first.</trans></bubble>");}
fu_nxk();}else{ fu_few("Not able to load settings");}});} if (tab=="sessions"){ fu_npw("https://"+s_hostname+"/get_account_sessions?query="+su_id+"&count=200",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("me_settings"); fu_pco("me_settings","<h2>Sessions</h2>",true); fu_pco("me_settings","<bubble><trans>Sessions are what gives you app access to Hey.Café and lets applications use your account if you give it API access.</trans><BR><BR><a href=\"javascript:fu_iqn();\"><div class='button'><trans>Create new API key</trans></div></a></bubble>"); fu_pco("me_settings","<div id='SettingsSessions'></div>"); if (response["response_data"]["sessions"]!=false){ fu_qeq(response["response_data"]["sessions"], function(id){ var itemdomain="hey.cafe"; if (response["response_data"]["sessions"][""+id+""]["info_domain"]!="false"){ itemdomain=response["response_data"]["sessions"][""+id+""]["info_domain"];}
fu_pco("SettingsSessions","<bubble><a style='float:right;' href=\"javascript:fu_jds('"+response["response_data"]["sessions"][""+id+""]["id"]+"');\"><trans>Remove</trans></a><h3 style='margin-top:0px;'>"+response["response_data"]["sessions"][""+id+""]["info_publisher"]+" / "+response["response_data"]["sessions"][""+id+""]["info_reason"]+"</h3><img source='https://logo.clearbit.com/"+itemdomain+"' class='avatar optimizer_img' style='float:left;height:85px;width:85px;margin-right:15px;border-radius:5px;'><div style='margin-bottom:5px;'><strong>Code:</strong> <code>"+response["response_data"]["sessions"][""+id+""]["id"]+"</code></div><div style='margin-bottom:5px;'><strong>Type:</strong> <code>"+response["response_data"]["sessions"][""+id+""]["info_type"]+"</code></div><div style='margin-bottom:5px;'><strong>Age:</strong> <code>"+fu_agm(response["response_data"]["sessions"][""+id+""]["date_created"])+"</code></div><div style='margin-bottom:5px;'><strong>IP:</strong> <code>"+response["response_data"]["sessions"][""+id+""]["info_ip"]+"</code></div><div style='margin-bottom:5px;'><strong>Useragent:</strong> <code>"+response["response_data"]["sessions"][""+id+""]["info_useragent"]+"</code></div></bubble>");});}
fu_nxk();}else{ fu_few("Not able to load settings");}});}} } function fu_vmo(cur_id,data,template){ var currentitem=""; if (data["title"]!=undefined){ template=template.replace("[title]", data["title"]);}else{ template=template.replace("[title]", "");} if (data["description"]!=undefined){ template=template.replace("[description]", data["description"]);}else{ template=template.replace("[description]", "");} if (data["link"]!=undefined){ template=template.replace("[link]", data["link"]);}else{ template=template.replace("[link]", "");} if (data["image"]!=undefined){ if (Array.isArray(data["image"])==true){ var images=""; fu_qeq(data["image"], function(id){ images=""+images+" "+data["image"][""+id+""]+"";}); template=template.replace("[image]", images);}else{ template=template.replace("[image]", data["image"]);}}else{ template=template.replace("[image]", "");} var matches = template.match(/\[linkonly\:if\:not\:([^\n\]]+)\]/gi); fu_qeq(matches, function(id){ var incldata=matches[""+id+""]; var reallink=data["link"]; var result = incldata.match(/\[linkonly\:if\:not\:([^\n\]]+)\]/); if (reallink.includes(result[1])){ template=template.replace(result[0], "");}else{ template=data["link"];}}); var matches = template.match(/\[linkonly\:if\:([^\n\]]+)\]/gi); fu_qeq(matches, function(id){ var incldata=matches[""+id+""]; var reallink=data["link"]; var result = incldata.match(/\[linkonly\:if\:([^\n\]]+)\]/); if (reallink.includes(result[1])){ template=data["link"];}else{ template=template.replace(result[0], "");}}); if (su_pro==true){ template=fu_ojk(template,s_char_pro);}else{ template=fu_ojk(template,s_char_reg);}
template=fu_uiv(template); template=fu_idd(template); template=fu_ibd(template); template=fu_cpd(template); template=fu_esd(template); template=fu_ebi(template); currentitem=""+currentitem+"<div class='conversation'><div class=\"minibubble\" style=\"padding-bottom: 0px;padding-top: 0px;margin-top: 10px;margin-bottom:10px;\">"; currentitem=""+currentitem+""+template+""; currentitem=""+currentitem+"</div></div>"; fu_pco("preview_rssimport_"+cur_id+"",currentitem);} function fu_iqn(name,value){ fu_pbr(); fu_pco("container_modl","<h1>New Session / API Key</h1>",true); fu_pco("container_modl",'<bubble><trans>Once a session API key is created it can be used to access the same backend the main application can access with the key being provided in a header. You can read more on the Wave site. Warning keys give global account access.</trans><BR><BR><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="publisher" size="50" maxlength="200" placeholder="Publisher / App"><BR><input type="text" class="input" name="reason" size="50" maxlength="200" placeholder="Use / Reason"><BR><BR><input type="submit" name="submit" onclick="fu_jqk(this.form); return false;" value="Create"></div></form></bubble>');} function fu_jqk(form){ fu_clu(); fu_jwg(); if (Array.isArray(form)==false){ var data=fu_uwq(form);}else{ var data=form;} var postdata={}; var sendurl=""; postdata["publisher"]=ae(fu_csj(data["publisher"])); postdata["reason"]=ae(fu_csj(data["reason"])); postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_session_create"; fu_opn(sendurl,postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_hrr("New API session key has been created"); fu_zng();}else{ fu_hrr("Unable to create session");}
fu_nxk();});} function fu_jds(session){ fu_clu(); fu_jwg(); var postdata={}; var sendurl=""; postdata["code"]=session; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_session_remove"; fu_opn(sendurl,postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_hrr("Session removed");}
fu_zng();}else{ fu_hrr("Unable to remove session");}
fu_nxk();});} function fu_epz(name,value){ fu_pbr(); fu_pco("container_modl","<h1>New RSS import rule</h1>",true); fu_pco("container_modl",'<bubble><trans>Once you submit the URL for the RSS feed you will have the ability to update settings and see a import preview before items are imported.</trans><BR><BR><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="url" size="50" maxlength="255" placeholder="URL"><BR><BR><input type="submit" name="submit" onclick="fu_gkc(this.form); return false;" value="Create"></div></form></bubble>');} function fu_gkc(form){ fu_clu(); fu_jwg(); if (Array.isArray(form)==false){ var data=fu_uwq(form);}else{ var data=form;} var postdata={}; var sendurl=""; postdata["url"]=data["url"]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_rssimport_create"; fu_opn(sendurl,postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_hrr("RSS import rule created");}
fu_zng();}else{ fu_hrr("Unable to create RSS import rule");}
fu_nxk();});} function fu_dtg(resource){ fu_clu(); fu_jwg(); var postdata={}; var sendurl=""; postdata["resource"]=resource; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_rssimport_delete"; fu_opn(sendurl,postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_hrr("RSS import rule deleted");}
fu_zng();}else{ fu_hrr("Unable to delete RSS import rule");}
fu_nxk();});} function fu_xhd(resource,name,value){ fu_pbr(); if (name=="template"){ fu_pco("container_modl","<h1>Edit template</h1>",true); fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea class="input fullsize" name="template" size="50" maxlength="200" placeholder="Template (default is [title] [link])">'+value+'</textarea><BR><BR><input type="submit" name="submit" onclick="fu_bwh(\''+resource+'\',\'template\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="cafe"){ fu_pco("container_modl","<h1>Pick conversation location</h1>",true); fu_npw("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_pco("container_modl","<bubble onclick=\"javascript:fu_bwh('"+resource+"','cafe',['false']);\"><img source='"+response["response_data"]["avatar"]+"' class='avatar optimizer_img' nowait='true' style='float:left;height:60px;width:60px;margin-right:15px;'><h2 style='margin-top: 5px;margin-bottom: 7px;'>"+fu_cpd(response["response_data"]["name"])+"</h2>Post to my personal café.</bubble>"); fu_npw("https://"+s_hostname+"/get_account_cafes?query="+su_id+"&count=1000",function(result){ var caferesponse = fu_hdg(result); if (caferesponse["system_api_error"]==false){ if (caferesponse["response_data"]["cafes"]!=false){ fu_qeq(caferesponse["response_data"]["cafes"], function(id){ if (caferesponse["response_data"]["cafes"][""+id+""]["you_member"]==true){ if (caferesponse["response_data"]["cafes"][""+id+""]["member_create"]=="1"){ fu_pco("container_modl","<bubble onclick='javascript:fu_bwh(\""+resource+"\",\"cafe\",[\""+id+"\"]);'><img source='"+caferesponse["response_data"]["cafes"][""+id+""]["avatar"]+"' nowait='true' class='avatar optimizer_img' style='float:left;height:60px;width:60px;margin-right:15px;'><h2 style='margin-top: 5px;margin-bottom: 7px;'>"+fu_cpd(caferesponse["response_data"]["cafes"][""+id+""]["name"])+"</h2>Post to the "+caferesponse["response_data"]["cafes"][""+id+""]["alias"]+" café.</bubble>");}else{ if (caferesponse["response_data"]["cafes"][""+id+""]["you_admin"]==true){ fu_pco("container_modl","<bubble onclick='javascript:fu_bwh(\""+resource+"\",\"cafe\",[\""+id+"\"]);'><img source='"+caferesponse["response_data"]["cafes"][""+id+""]["avatar"]+"' nowait='true' class='avatar optimizer_img' style='float:left;height:60px;width:60px;margin-right:15px;'><h2 style='margin-top: 5px;margin-bottom: 7px;'>"+fu_cpd(caferesponse["response_data"]["cafes"][""+id+""]["name"])+"</h2>Post to the "+caferesponse["response_data"]["cafes"][""+id+""]["alias"]+" café.</bubble>");}} }});}
fu_nxk();}else{ fu_few("Not able to load your cafe data to generate the page...");}});}else{ fu_few("Not able to load your user data to generate the page...");}});}} function fu_bwh(resource,name,form){ fu_clu(); fu_jwg(); if (Array.isArray(form)==false){ var data=fu_uwq(form);}else{ var data=form;} var postdata={}; var sendurl=""; postdata["resource"]=resource; if (name=="active"){ postdata["mode"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_rssimport_update_active";} if (name=="cafe"){ postdata["cafe"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_rssimport_update_cafe";} if (name=="template"){ postdata["template"]=ae(fu_csj(data["template"])); postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_rssimport_update_template";}
fu_opn(sendurl,postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_hrr("Updated");} if (response["response_data"]=="taken"){ fu_hrr("This has been taken already");}
fu_zng();}else{ fu_hrr("Unable to save data");}
fu_nxk();});} function fu_emk(featurelock){ fu_pbr(); fu_clu(); if (featurelock==undefined){ featurelock=false;} if (su_id!=null){ fu_pco("container_modl","<h1>Pro</h1>",true); fu_npw("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["pro"]=="1"){ var prodays=fu_atf(Math.round((suc_pro_expire_seconds/86400))); fu_pco("container_modl","<bubble><trans>Wait... You aready have Pro! You are Pro for the next "+prodays+" days!</trans><BR><BR><trans>You now have access to a bunch of great features. To learn more about what you have access just visit the page linked below.</trans><BR><BR><a href='/help/goto/pro'><trans>What you get with pro.</trans></a><BR><BR><trans>Thank you so much! Pro helps us maintain the service and provide everything ad free for everyone!</trans></bubble>"); if (featurelock==true){ fu_pco("container_modl","<bubble class=\"alt1\">Hey you already have Pro and are trying to access a Pro function, all you need to do is refresh the page.</bubble>",true);}}else{ var supporterbuttons="<BR><BR><trans>Take your profile to the next level with Pro!</trans> <a href='/help/goto/pro'><trans>Learn more about what you get with Pro.</trans></a><BR><BR>"; if (s_device!="NativeiOSApp"){ if (response["response_data"]["country"]!="false" && response["response_data"]["country"]!="Russia" && response["response_data"]["state"]!="false"){ supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_cpd("☕️")+"<BR>2 Months</div>$4.98 USD</div><div class='minibubble' style='margin:5px;text-align:center;' onclick=\"javascript:fu_jwg(); window.open('https://lammcs.ca/service_purchase/?service=heycafe&country="+response["response_data"]["country"]+"&state="+response["response_data"]["state"]+"&amount=4.98&username="+response["response_data"]["alias"]+"&good=true', '_blank');\"><trans>Purchase</trans></div></div>"; supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_cpd("☕️")+"<BR>1 Year</div>$24.98 USD</div><div class='minibubble' style='margin:5px;text-align:center;' onclick=\"javascript:fu_jwg(); window.open('https://lammcs.ca/service_purchase/?service=heycafe&country="+response["response_data"]["country"]+"&state="+response["response_data"]["state"]+"&amount=24.98&username="+response["response_data"]["alias"]+"&good=true', '_blank');\"><trans>Purchase</trans></div></div>";}else{ supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_cpd("☕️")+"<BR>2 Months</div>$4.98 USD</div><div class='minibubble' style='margin:5px;text-align:center;'>"+fu_cpd("🔒")+" <trans>Purchase</trans></div></div>"; supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_cpd("☕️")+"<BR>1 Year</div>$24.98 USD</div><div class='minibubble' style='margin:5px;text-align:center;'>"+fu_cpd("🔒")+" <trans>Purchase</trans></div></div>"; supporterbuttons=""+supporterbuttons+"<BR><BR><bubble class=\"alt1\"><trans>You have one more step, you need to first set your Country and State/Province in settings for tax reasons before you can make any purchases.</trans> <a href='/settings/me'><trans>Visit settings to change your information.</trans></a> <trans>This info will NOT display on your profile.</trans></bubble>";}}else{ supporterbuttons="";} if (featurelock==true){ fu_pco("container_modl","<bubble class=\"alt1\">"+fu_cpd("🔒 <trans>You need Pro to access this feature!</trans>")+"</bubble>");}
fu_pco("container_modl","<bubble><h2 style='margin-top:0px;'><trans>Why go Pro and help support Hey.Café?</trans></h2><trans>When you go Pro you also gain more features like larger conversations, better quality photos, ability to edit conversations and comments, a fancy profile badge, and more.</trans>"+supporterbuttons+"</bubble>");}
fu_nxk();}else{ fu_few("Not able to load settings");}});}} function fu_bjv(name,value){ fu_pbr(); value=fu_xla(value); if (name=="name"){ fu_pco("container_modl","<h1>Name</h1>",true); fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="name" size="50" maxlength="50" placeholder="Name" value="'+value+'"><BR><BR><input type="submit" name="submit" onclick="fu_xqf(\'name\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="password"){ fu_pco("container_modl","<h1>Password</h1>",true); fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="password" class="input" name="oldpassword" size="30" autocomplete="current-password" placeholder="Current Password"><BR><input type="password" class="input" name="newpassword" size="30" autocomplete="new-password" placeholder="New Password"><BR><BR><input type="submit" name="submit" onclick="fu_xqf(\'password\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="alias"){ fu_pco("container_modl","<h1>Alias</h1>",true); fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="alias" size="50" maxlength="50" placeholder="Alias / Username" value="'+value+'"><BR><BR><input type="submit" name="submit" onclick="fu_xqf(\'alias\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="email"){ fu_pco("container_modl","<h1>Email</h1>",true); fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="email" size="50" maxlength="50" placeholder="Email" value="'+value+'"><BR><BR><input type="submit" name="submit" onclick="fu_xqf(\'email\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="2fa_validate"){ fu_npw("https://"+s_hostname+"/get_account_secret",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_pco("container_modl","<h1>Setup 2FA app</h1>",true); var urlforimage='http://qrickit.com/api/qr?qrsize=400&e=l&bgdcolor=ffffff&fgdcolor=7463EC&t=png&d='+ae(response["response_data"]["2fa_url"]); fu_pco("container_modl",'<bubble><div>Getting setup is easy, go to your 2FA app of choice like Authy, 1Password or any other 2FA app and scan the QR code. You can also enter the secret below manually in the app if it wont scan. When you have it setup enter a generated code in the box below to verify it was setup and enable 2FA on your account.</div><BR><BR><div style="text-align:center;"><img src="'+urlforimage+'" style="max-width:400px;"><BR><BR>Code: <strong>'+response["response_data"]["2fa_secret"]+'</strong><BR><BR><a href="'+response["response_data"]["2fa_url"]+'">Tap to add to 2FA App</a></div></bubble><bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="code" size="50" maxlength="50" placeholder="Code" value=""><BR><BR><input type="submit" name="submit" onclick="fu_xqf(\'2fa_validate\',this.form); return false;" value="Check"></div></form></bubble>',true);}});} if (name=="verify"){ fu_pco("container_modl","<h1>Verify email</h1>",true); fu_npw("https://"+s_hostname+"/post_account_update_email_sendcode",function(result){ var response = fu_hdg(result); fu_ehb(); if (response["system_api_error"]==false){ }else{ fu_few("Not able generate code for the settings page...");}}); fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div>We have sent you a code to your email address, enter it below to verify your account. Keep this window open or the code might not work.</div><BR><BR><div style="text-align:center;"><input type="text" class="input" name="code" size="50" maxlength="50" placeholder="Code" value=""><BR><BR><input type="submit" name="submit" onclick="fu_xqf(\'verify\',this.form); return false;" value="Verify"></div></form></bubble>',true);} if (name=="bio"){ fu_pco("container_modl","<h1>Bio</h1>",true); fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea class="input fullsize" name="bio" size="50" maxlength="350" placeholder="Bio">'+value+'</textarea><BR><BR><input type="submit" name="submit" onclick="fu_xqf(\'bio\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="about"){ fu_pco("container_modl","<h1>About page content</h1>",true); fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea class="input fullsize" name="about" size="50" maxlength="4500" placeholder="About page content">'+value+'</textarea><BR><BR><input type="submit" name="submit" onclick="fu_xqf(\'about\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="website"){ fu_pco("container_modl","<h1>Website</h1>",true); fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="website" size="50" maxlength="70" placeholder="Website" value="'+value+'"><BR><BR><input type="submit" name="submit" onclick="fu_xqf(\'website\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="pronouns"){ fu_pco("container_modl","<h1>Pronouns</h1>",true); fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="pronouns" size="50" maxlength="70" placeholder="Pronouns" value="'+value+'"><BR><BR><input type="submit" name="submit" onclick="fu_xqf(\'pronouns\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="avatar"){ fu_pco("container_modl","<h1>Avatar</h1>",true); fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea id="imagedata_source" activated="true" style="position:fixed;left:0px;top:-200px;" name="avatar"></textarea><div id="uploader_previewarea"></div><input type="file" onchange="fu_pxf(this,\'imagedata_source\',\'uploader_previewarea\',\'uploader_readytosend\',\'images\')" /><BR><BR><input type="submit" name="submit" id="uploader_readytosend" onclick="fu_xqf(\'avatar\',this.form); return false;" value="Save" disabled></div></form></bubble>');} if (name=="country"){ fu_pco("container_modl","<h1>Country</h1>",true); fu_npw("https://"+s_hostname+"/get_account_locations_countrys",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["countrys"]!=false){ var locations="<select name=\"country\">"; fu_qeq(response["response_data"]["countrys"], function(id){ locations=""+locations+"<option value=\""+response["response_data"]["countrys"][""+id+""]["name"]+"\">"+response["response_data"]["countrys"][""+id+""]["name"]+"</option>";}); locations=""+locations+"</select>"; fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;">'+locations+'<BR><BR><input type="submit" name="submit" onclick="fu_xqf(\'country\',this.form); return false;" value="Save"></div></form></bubble>');}}else{ fu_few("Not able to load your country list to generate on the settings page...");}});} if (name=="state"){ fu_pco("container_modl","<h1>Province</h1>",true); fu_npw("https://"+s_hostname+"/get_account_locations_states",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["states"]!=false){ var locations="<select name=\"state\">"; fu_qeq(response["response_data"]["states"], function(id){ locations=""+locations+"<option value=\""+response["response_data"]["states"][""+id+""]["name"]+"\">"+response["response_data"]["states"][""+id+""]["name"]+"</option>";}); locations=""+locations+"</select>"; fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;">'+locations+'<BR><BR><input type="submit" name="submit" onclick="fu_xqf(\'state\',this.form); return false;" value="Save"></div></form></bubble>');}}else{ fu_few("Not able to load your state list to generate on the settings page...");}});} if (name=="language"){ fu_pco("container_modl","<h1>Language</h1>",true); var locations="<select name=\"language\">"; locations=""+locations+"<option value=\"en\">English</option>"; locations=""+locations+"<option value=\"pt\">Portuguese</option>"; locations=""+locations+"<option value=\"es\">Spanish</option>"; locations=""+locations+"<option value=\"zh\">Chinese</option>"; locations=""+locations+"<option value=\"nl\">Dutch</option>"; locations=""+locations+"<option value=\"fi\">Finnish</option>"; locations=""+locations+"<option value=\"fr\">French</option>"; locations=""+locations+"<option value=\"de\">German</option>"; locations=""+locations+"<option value=\"id\">Indonesian</option>"; locations=""+locations+"<option value=\"it\">Italian</option>"; locations=""+locations+"<option value=\"ja\">Japanese</option>"; locations=""+locations+"<option value=\"ko\">Korean</option>"; locations=""+locations+"<option value=\"pl\">Polish</option>"; locations=""+locations+"<option value=\"ru\">Russian</option>"; locations=""+locations+"<option value=\"sv\">Swedish</option>"; locations=""+locations+"<option value=\"uk\">Ukranian</option>"; locations=""+locations+"<option value=\"vi\">Vietnamese</option>"; locations=""+locations+"<option value=\"hu\">Hungarian</option>"; locations=""+locations+"</select>"; fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;">'+locations+'<BR><BR><input type="submit" name="submit" onclick="fu_xqf(\'language\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="header"){ fu_pco("container_modl","<h1>Header</h1>",true); fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea id="imagedata_source" activated="true" style="position:fixed;left:0px;top:-200px;" name="header"></textarea><div id="uploader_previewarea"></div><input type="file" onchange="fu_pxf(this,\'imagedata_source\',\'uploader_previewarea\',\'uploader_readytosend\',\'images\')" /><BR><BR><input type="submit" name="submit" id="uploader_readytosend" onclick="fu_xqf(\'header\',this.form); return false;" value="Save" disabled></div></form></bubble>');} if (name=="feed"){ fu_pco("container_modl","<h1>Feed sort</h1>",true); var controls=""; controls=""+controls+"<div class='minibubble' onclick='javascript:fu_xqf(\"feed\",[\"all\"])'><h3 style='margin-top: 0px;margin-bottom: 10px;'><trans>All</trans></h3><trans>Show everything from accounts you follow and cafés where you are a member.</trans></div>"; controls=""+controls+"<div class='minibubble' onclick='javascript:fu_xqf(\"feed\",[\"notme\"])'><h3 style='margin-top: 0px;margin-bottom: 10px;'><trans>Not Me</trans></h3><trans>Show everything but just exclude my own content.</trans></div>"; controls=""+controls+"<div class='minibubble' onclick='javascript:fu_xqf(\"feed\",[\"account\"])'><h3 style='margin-top: 0px;margin-bottom: 10px;'><trans>Accounts</trans></h3><trans>Show everything only from accounts you follow.</trans></div>"; controls=""+controls+"<div class='minibubble' onclick='javascript:fu_xqf(\"feed\",[\"clean\"])'><h3 style='margin-top: 0px;margin-bottom: 10px;'><trans>Clean</trans></h3><trans>Show only profile updates, and conversations in cafés where you are a member.</trans></div>"; controls=""+controls+"<div class='minibubble' onclick='javascript:fu_xqf(\"feed\",[\"others\"])'><h3 style='margin-top: 0px;margin-bottom: 10px;'><trans>Others</trans></h3><trans>Show content from accounts you do not follow and not your own content.</trans></div>"; fu_pco("container_modl",'<bubble><div><trans>Changing your view settings for your feed will change for your entire account on every device you use. You can change this any time.</trans><div><BR><BR>'+controls+'</bubble>');}} function fu_xqf(name,form){ fu_clu(); fu_jwg(); if (Array.isArray(form)==false){ var data=fu_uwq(form);}else{ var data=form;} var postdata={}; var sendurl=""; if (name=="email_updates"){ postdata["mode"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_email_updates";} if (name=="email_notifications"){ postdata["mode"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_email_notifications";} if (name=="email_messages"){ postdata["mode"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_email_messages";} if (name=="invisible"){ postdata["mode"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_invisible";} if (name=="hidden"){ postdata["mode"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_hidden";} if (name=="2fa_validate"){ postdata["code"]=data["code"]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_2fa_validate";} if (name=="2fa_email"){ postdata["mode"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_2fa_email";} if (name=="2fa_app"){ postdata["mode"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_2fa_app";} if (name=="feed"){ postdata["mode"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_feed";} if (name=="app_colour"){ postdata["colour"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_app_colour";} if (name=="app_stats"){ postdata["value"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_app_stats";} if (name=="app_reducemotion"){ postdata["value"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_app_reducemotion";} if (name=="app_hidesuggestions"){ postdata["value"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_app_hidesuggestions";} if (name=="app_forcedisplay"){ postdata["value"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_app_forcedisplay";} if (name=="app_scaledisplay"){ postdata["value"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_app_scaledisplay";} if (name=="name"){ postdata["name"]=ae(fu_csj(data["name"])); postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_name";} if (name=="password"){ postdata["old"]=ae(fu_csj(data["oldpassword"])); postdata["new"]=ae(fu_csj(data["newpassword"])); postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_password";} if (name=="alias"){ postdata["alias"]=data["alias"]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_alias";} if (name=="country"){ postdata["country"]=ae(fu_csj(data["country"])); postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_country";} if (name=="state"){ postdata["state"]=ae(fu_csj(data["state"])); postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_state";} if (name=="email"){ postdata["email"]=ae(fu_csj(data["email"])); postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_email";} if (name=="language"){ postdata["language"]=data["language"]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_language";} if (name=="verify"){ postdata["code"]=data["code"]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_email_verify";} if (name=="bio"){ postdata["bio"]=ae(fu_csj(data["bio"])); postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_bio";} if (name=="about"){ postdata["content"]=ae(fu_csj(data["about"])); postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_about";} if (name=="website"){ postdata["website"]=ae(fu_csj(data["website"])); postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_website";} if (name=="pronouns"){ postdata["pronouns"]=ae(fu_csj(data["pronouns"])); postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_pronouns";} if (name=="avatar"){ postdata["file"]=ae(data["avatar"]); postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_avatar";} if (name=="header"){ postdata["file"]=ae(data["header"]); postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_account_update_header";}
fu_opn(sendurl,postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_hrr("Updated");} if (response["response_data"]=="taken"){ fu_hrr("This has been taken already");}
fu_zng();}else{ var message="Unable to save data"; if (name=="verify"){ message="Sorry the code was wrong";}
fu_hrr(message); fu_zng();}
fu_nxk();});} function fu_pbj(cafe){ if (cafe==undefined){ cafe="false";}
fu_pbr(); fu_pco("container_modl","<h1>Create tag</h1>",true); fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="name" size="50" maxlength="50" placeholder="Name"><div style="position:fixed;top:-300px;opacity:0;"><input type="text" class="input" name="emoji" size="50" maxlength="50" id="emoji_picker_input" value="📕"></div><div style=\'text-align:center;font-size:4em;padding-top:35px;padding-bottom:35px;\' id=\'emoji_picker_current\'>'+fu_cpd("📕")+'</div><div id=\'emoji_load_in_case\'></div><div id=\'emoji_load_in_selectors\'></div><BR><BR><input type="submit" name="submit" onclick="fu_lgj(\''+cafe+'\',this.form); return false;" value="Create"></div></form></bubble>'); fu_pco("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_cmh('Activities');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("🏀")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Activities</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_cmh('Animals & Nature');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("🦊")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Animals & Nature</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_cmh('Flags');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("🇨🇦")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Flags</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_cmh('Food & Drink');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("🥤")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Food & Drink</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_cmh('Objects');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("💡")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Objects</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_cmh('People & Body');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("🤷‍♂️")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>People & Body</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_cmh('Smileys & Emotion');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("🫣")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Smileys & Emotion</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_cmh('Symbols');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("❤️")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Symbols</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_cmh('Travel & Places');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("🚲")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Travel & Places</h3>Tap to load emojis you can pick from</bubble>");} function fu_cmh(search){ fu_mxp("emoji_load_in_case"); fu_pco("emoji_load_in_case","<div class='loading'></div>"); fu_npw("https://"+s_hostname+"/get_system_emoji_category?category="+ae(search)+"&count=800",function(result){ var response = fu_hdg(result); fu_mxp("emoji_load_in_case"); fu_pco("emoji_load_in_case","<div id='emoji_actual_placement' style='text-align: center;margin-bottom:20px;'></div>"); if (response["system_api_error"]==false){ fu_qeq(response["response_data"], function(id){ fu_pco("emoji_actual_placement","<div style='display:inline-block;font-size:2em;padding:5px;'><bubble onclick=\"javascript:fu_mve('"+response["response_data"][""+id+""]["emoji"]+"');\">"+fu_cpd(response["response_data"][""+id+""]["emoji"])+"</bubble></div>");});}});} function fu_mve(emoji){ fu_mxp("emoji_load_in_case"); fu_mxp("emoji_picker_current"); fu_pco("emoji_picker_current",fu_cpd(emoji)); aa('emoji_picker_input').value=emoji;} function fu_lgj(cafe,form){ fu_clu(); fu_jwg(); if (Array.isArray(form)==false){ var data=fu_uwq(form);}else{ var data=form;} var postdata={}; var sendurl=""; postdata["cafe"]=cafe; postdata["name"]=ae(fu_csj(data["name"])); postdata["emoji"]=ae(fu_csj(data["emoji"])); postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_conversation_create_tag",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_hrr("The tag has been created");}
fu_zng();}else{ var message="Unable to create tag: "+response["system_api_error"]+""; fu_hrr(message); fu_zng();}
fu_nxk();});} function fu_ppc(tag,emoji){ fu_pbr(); fu_pco("container_modl","<h1>Update tag emoji</h1>",true); fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><div style="position:fixed;top:-300px;opacity:0;"><input type="text" class="input" name="emoji" size="50" maxlength="50" id="emoji_picker_input" value="'+emoji+'"></div><div style=\'text-align:center;font-size:4em;padding-top:35px;padding-bottom:35px;\' id=\'emoji_picker_current\'>'+fu_cpd(emoji)+'</div><div id=\'emoji_load_in_case\'></div><div id=\'emoji_load_in_selectors\'></div><BR><BR><input type="submit" name="submit" onclick="fu_fuv(\''+tag+'\',this.form); return false;" value="Update Emoji"></div></form></bubble>'); fu_pco("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_cmh('Activities');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("🏀")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Activities</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_cmh('Animals & Nature');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("🦊")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Animals & Nature</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_cmh('Flags');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("🇨🇦")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Flags</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_cmh('Food & Drink');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("🥤")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Food & Drink</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_cmh('Objects');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("💡")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Objects</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_cmh('People & Body');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("🤷‍♂️")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>People & Body</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_cmh('Smileys & Emotion');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("🫣")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Smileys & Emotion</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_cmh('Symbols');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("❤️")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Symbols</h3>Tap to load emojis you can pick from</bubble>"); fu_pco("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_cmh('Travel & Places');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_cpd("🚲")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Travel & Places</h3>Tap to load emojis you can pick from</bubble>");} function fu_ryj(tag,name){ fu_pbr(); fu_pco("container_modl","<h1>Update tag name</h1>",true); fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="name" size="50" maxlength="50" placeholder="Name" value="'+name+'"><BR><BR><input type="submit" name="submit" onclick="fu_vbn(\''+tag+'\',this.form); return false;" value="Update"></div></form></bubble>');} function fu_pqr(tag){ fu_pbr(); fu_pco("container_modl","<h1>Delete tag</h1>",true); fu_pco("container_modl",'<bubble><div style="text-align:center;"><trans>Are you sure you want to delete the tag?</trans><BR><BR><input type="submit" name="submit" onclick="fu_zke(\''+tag+'\'); return false;" value="Delete"></div></form></bubble>');} function fu_qou(tag,current){ fu_pbr(); if (current=="true"){ fu_emc(tag,"false");} if (current=="false"){ fu_emc(tag,"true");}} function fu_fuv(tag,form){ fu_clu(); fu_jwg(); if (Array.isArray(form)==false){ var data=fu_uwq(form);}else{ var data=form;} var postdata={}; var sendurl=""; postdata["tag"]=tag; postdata["emoji"]=ae(fu_csj(data["emoji"])); postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_conversation_update_tag",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_hrr("The tag has been updated");}
fu_zng();}else{ var message="Unable to update tag: "+response["system_api_error"]+""; fu_hrr(message); fu_zng();}
fu_nxk();});} function fu_vbn(tag,form){ fu_clu(); fu_jwg(); if (Array.isArray(form)==false){ var data=fu_uwq(form);}else{ var data=form;} var postdata={}; var sendurl=""; postdata["tag"]=tag; postdata["name"]=ae(fu_csj(data["name"])); postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_conversation_update_tag",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_hrr("The tag has been updated");}
fu_zng();}else{ var message="Unable to update tag: "+response["system_api_error"]+""; fu_hrr(message); fu_zng();}
fu_nxk();});} function fu_emc(tag,setting){ fu_clu(); fu_jwg(); var postdata={}; var sendurl=""; postdata["tag"]=tag; postdata["staff"]=setting; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_conversation_update_tag",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_hrr("The tag has been updated");}
fu_zng();}else{ var message="Unable to update tag: "+response["system_api_error"]+""; fu_hrr(message); fu_zng();}
fu_nxk();});} function fu_zke(tag){ fu_clu(); fu_jwg(); var postdata={}; var sendurl=""; postdata["tag"]=tag; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_conversation_delete_tag",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_hrr("The tag has been deleted");}
fu_zng();}else{ var message="Unable to delete tag: "+response["system_api_error"]+""; fu_hrr(message); fu_zng();}
fu_nxk();});} function fu_bbd(id){ if (su_id!=null){ fu_wta("full"); var tab="info"; var setting="all"; var arr = sp.split('/'); if (arr!=null){ if (arr[3]!=undefined){ var tab=arr[3];} if (arr[4]!=undefined){ var setting=arr[4];}}
fu_pco("container_content","<h1>Café Settings</h1>",true); fu_pco("container_content","<div class='horizontalscroll' style='margin-bottom:20px;' id='MenuSettings'></div>"); fu_pco("MenuSettings","<a href='/settings/"+id+"/info'><div class='tab'>Info</div></a>",true); fu_pco("MenuSettings","<a href='/settings/"+id+"/about'><div class='tab'>About</div></a>",true); fu_pco("MenuSettings","<a href='/settings/"+id+"/tags'><div class='tab'>Tags</div></a>",true); fu_pco("MenuSettings","<a href='/settings/"+id+"/members'><div class='tab'>Members</div></a>",true); fu_pco("container_content","<div id='cafe_s_message'></div><div id='cafe_settings'><div class='loading'></div></div>"); fu_npw("https://"+s_hostname+"/get_cafe_members?query="+id+"&status=waiting",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["members"]!=false){ fu_pco("cafe_s_message","<bubble onclick='javascript:fu_wrg(\"/settings/"+id+"/members/waiting\");' class=\"alt1\">You have some new members waiting to be allowed into the Café. Tap here to view the users that have requested access.</bubble>",true);}} }); if (tab=="info"){ fu_npw("https://"+s_hostname+"/get_cafe_info?query="+id+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("cafe_settings"); var controls=""; fu_pco("cafe_settings","<h2>Main settings</h2>",true); controls=""+controls+"<div class='minibubble' onclick='javascript:fu_hpi(\""+id+"\",\"name\",\""+fu_csj(response["response_data"]["name"])+"\")'><strong><trans>Name</trans>:</strong> "+fu_cpd(response["response_data"]["name"])+"</div>"; controls=""+controls+"<div class='minibubble' onclick='javascript:fu_hpi(\""+id+"\",\"alias\",\""+fu_csj(response["response_data"]["alias"])+"\")'><strong><trans>Alias</trans>:</strong> "+response["response_data"]["alias"]+"</div>"; controls=""+controls+"<div class='minibubble' onclick='javascript:fu_hpi(\""+id+"\",\"bio\",\""+fu_csj(response["response_data"]["bio"])+"\")'><strong><trans>Bio</trans>:</strong> "+fu_cpd(fu_dwb(fu_nwo(response["response_data"]["bio"])))+"</div>"; if (response["response_data"]["mode"]=="public"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_lwe(\""+id+"\",\"mode\",[\"private\"])'><strong><trans>Mode</trans>:</strong> "+fu_cpd('👋')+"&ensp;<trans>Public, anyone can join</trans></div>";} if (response["response_data"]["mode"]=="private"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_lwe(\""+id+"\",\"mode\",[\"public\"])'><strong><trans>Mode</trans>:</strong> "+fu_cpd('🔐')+"&ensp;<trans>Private, requests must be approved</trans></div>";} if (response["response_data"]["hidden"]=="1"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_lwe(\""+id+"\",\"hidden\",[\"off\"])'><strong><trans>Show in explore</trans>:</strong> "+fu_cpd('👎')+"&ensp;<trans>No</trans></div>";} if (response["response_data"]["hidden"]=="0"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_lwe(\""+id+"\",\"hidden\",[\"on\"])'><strong><trans>Show in explore</trans>:</strong> "+fu_cpd('👍')+"&ensp;<trans>Yes</trans></div>";} if (response["response_data"]["public_view"]=="0"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_lwe(\""+id+"\",\"public_view\",[\"on\"])'><strong><trans>Public View Conversations</trans>:</strong> "+fu_cpd('👎')+"&ensp;<trans>No</trans></div>";} if (response["response_data"]["public_view"]=="1"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_lwe(\""+id+"\",\"public_view\",[\"off\"])'><strong><trans>Public View Conversations</trans>:</strong> "+fu_cpd('👍')+"&ensp;<trans>Yes</trans></div>";} if (response["response_data"]["public_react"]=="0"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_lwe(\""+id+"\",\"public_react\",[\"on\"])'><strong><trans>Public React</trans>:</strong> "+fu_cpd('👎')+"&ensp;<trans>No</trans></div>";} if (response["response_data"]["public_react"]=="1"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_lwe(\""+id+"\",\"public_react\",[\"off\"])'><strong><trans>Public React</trans>:</strong> "+fu_cpd('👍')+"&ensp;<trans>Yes</trans></div>";} if (response["response_data"]["public_comment"]=="0"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_lwe(\""+id+"\",\"public_comment\",[\"on\"])'><strong><trans>Public Comment</trans>:</strong> "+fu_cpd('👎')+"&ensp;<trans>No</trans></div>";} if (response["response_data"]["public_comment"]=="1"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_lwe(\""+id+"\",\"public_comment\",[\"off\"])'><strong><trans>Public Comment</trans>:</strong> "+fu_cpd('👍')+"&ensp;<trans>Yes</trans></div>";} if (response["response_data"]["member_create"]=="0"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_lwe(\""+id+"\",\"member_create\",[\"on\"])'><strong><trans>Member Create Conversations</trans>:</strong> "+fu_cpd('👎')+"&ensp;<trans>No</trans></div>";} if (response["response_data"]["member_create"]=="1"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_lwe(\""+id+"\",\"member_create\",[\"off\"])'><strong><trans>Member Create Conversations</trans>:</strong> "+fu_cpd('👍')+"&ensp;<trans>Yes</trans></div>";} if (response["response_data"]["member_react"]=="0"){ if (response["response_data"]["public_react"]=="1"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_lwe(\""+id+"\",\"member_react\",[\"on\"])'><strong><trans>Member React</trans>:</strong> "+fu_cpd('👍')+"&ensp;<trans>Yes, overwritten by public react on</trans></div>";}else{ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_lwe(\""+id+"\",\"member_react\",[\"on\"])'><strong><trans>Member React</trans>:</strong> "+fu_cpd('👎')+"&ensp;<trans>No</trans></div>";}} if (response["response_data"]["member_react"]=="1"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_lwe(\""+id+"\",\"member_react\",[\"off\"])'><strong><trans>Member React</trans>:</strong> "+fu_cpd('👍')+"&ensp;<trans>Yes</trans></div>";} if (response["response_data"]["member_comment"]=="0"){ if (response["response_data"]["public_comment"]=="1"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_lwe(\""+id+"\",\"member_comment\",[\"on\"])'><strong><trans>Member Comment</trans>:</strong> "+fu_cpd('👍')+"&ensp;<trans>Yes, but overwritten by public comments</trans></div>";}else{ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_lwe(\""+id+"\",\"member_comment\",[\"on\"])'><strong><trans>Member Comment</trans>:</strong> "+fu_cpd('👎')+"&ensp;<trans>No</trans></div>";}} if (response["response_data"]["member_comment"]=="1"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_lwe(\""+id+"\",\"member_comment\",[\"off\"])'><strong><trans>Member Comment</trans>:</strong> "+fu_cpd('👍')+"&ensp;<trans>Yes</trans></div>";} var infoabout='<div style="margin-top: 5px;font-size: 0.8em;"><trans>If turned off conversations made by any members will not show on that persons feed and on the main feed (ideal setting is off for support groups).</trans></div>'; if (response["response_data"]["member_feed"]=="0"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_lwe(\""+id+"\",\"member_feed\",[\"on\"])'><strong><trans>Member Feed</trans>:</strong> "+fu_cpd('👎')+"&ensp;<trans>No"+infoabout+"</trans></div>";} if (response["response_data"]["member_feed"]=="1"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_lwe(\""+id+"\",\"member_feed\",[\"off\"])'><strong><trans>Member Feed</trans>:</strong> "+fu_cpd('👍')+"&ensp;<trans>Yes"+infoabout+"</trans></div>";}
fu_pco("container_content","<bubble>"+controls+"</bubble>"); var controls_cafedes=""; controls_cafedes=""+controls_cafedes+"<div class='minibubble' onclick='javascript:fu_hpi(\""+id+"\",\"avatar\",\""+fu_csj(response["response_data"]["avatar"])+"\")'><strong><trans>Avatar</trans>:</strong> <img source='"+response["response_data"]["avatar"]+"' class='optimizer_img' style='display: block;margin:0px auto;max-height:100px;max-width: 100px;border-radius:100%;'></div>"; controls_cafedes=""+controls_cafedes+"<div class='minibubble' onclick='javascript:fu_hpi(\""+id+"\",\"header\",\""+fu_csj(response["response_data"]["header"])+"\")'><strong><trans>Header</trans>:</strong> <img source='"+response["response_data"]["header"]+"' class='optimizer_img' style='display: block;margin:0px auto;max-width:300px;'></div>"; fu_pco("container_content","<h2><trans>Café Design</trans></h2><bubble><trans>To update any option or upload media just tap any of the boxes below. Header images for cafés are shown in a 30:8 aspect.</trans><BR><BR>"+controls_cafedes+"</bubble>"); fu_nxk();}else{ fu_few("Not able to load settings");}});} if (tab=="about"){ fu_npw("https://"+s_hostname+"/get_cafe_info?query="+id+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("cafe_settings"); var controls_about=""; if (response["response_data"]["about"]==false){ var contsabout="<trans>No about page content set.</trans>";}else{ var contsabout=response["response_data"]["about"];}
contsabout=fu_uiv(contsabout); contsabout=fu_idd(contsabout); contsabout=fu_ibd(contsabout); contsabout=fu_cpd(contsabout); contsabout=fu_esd(contsabout); contsabout=fu_ebi(contsabout); controls_about=""+contsabout+""; fu_pco("cafe_settings","<h2><trans>About Page</trans></h2><bubble><trans>The about page allows for extended content like a conversation. This allows you to have multiple links and more mentions and formatting like lists and more. You can view the content below or click edit to make changes.</trans><BR><BR><a href='javascript:fu_hpi(\""+id+"\",\"about\",\""+fu_csj(response["response_data"]["about"])+"\")'><div class='button'><trans>Edit content</trans></div></a></bubble><bubble class='conversation' style='padding-top:0px;padding-bottom:0px;'>"+controls_about+"</bubble>"); fu_nxk();}else{ fu_few("Not able to load settings");}});} if (tab=="tags"){ fu_npw("https://"+s_hostname+"/get_cafe_info?query="+id+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("cafe_settings"); var contentstags=""; fu_pco("cafe_settings","<h2><trans>Tags</trans></h2><bubble><span><trans>Tags allow for better conversation sorting, and cafés have access to a staff only setting. If a tag is set to staff only, only moderators and admins can set the tag on a conversation (for stuff like updates and announcements). This also makes it so any staff in a café can change any conversations tags any time by opening the 3 dot menu on that conversation.</trans></span><BR><BR><div id='s_create_new_tag'></div></bubble>"); var tagshavenow=0; if (response["response_data"]["tags"]!=false){ fu_qeq(response["response_data"]["tags"], function(select){ tagshavenow=tagshavenow+1;});} if (tagshavenow>=20){ fu_pco("s_create_new_tag",""+tagshavenow+"/20");}else{ fu_pco("s_create_new_tag","<a href='javascript:fu_pbj(\""+id+"\")'><div class='button'><trans>New tag</trans></div></a> "+tagshavenow+"/20");} if (response["response_data"]["tags"]==false){ contentstags="<bubble class='alt1'><trans>No tags have been created yet</trans></bubble>";}else{ fu_qeq(response["response_data"]["tags"], function(select){ contentstags=""+contentstags+"<bubble><div style=\"font-size:2.3em;float:left;margin-right:15px;\">"+fu_cpd(response["response_data"]["tags"][""+select+""]["emoji"])+"</div><h3 style=\"margin-top: 0px;margin-bottom: 5px;font-weight:400;\">"+fu_cpd(response["response_data"]["tags"][""+select+""]["name"])+"</h3><div style='font-size: 0.8em;'><a href='javascript:fu_ppc(\""+response["response_data"]["tags"][""+select+""]["id"]+"\",\""+response["response_data"]["tags"][""+select+""]["emoji"]+"\")'><div class='button'><trans>Change Emoji</trans></div></a> <a href='javascript:fu_ryj(\""+response["response_data"]["tags"][""+select+""]["id"]+"\",\""+response["response_data"]["tags"][""+select+""]["name"]+"\")'><div class='button'><trans>Change Name</trans></div></a> <a href='javascript:fu_qou(\""+response["response_data"]["tags"][""+select+""]["id"]+"\",\""+response["response_data"]["tags"][""+select+""]["staff"]+"\")'><div class='button'><trans>Staff only: "+response["response_data"]["tags"][""+select+""]["staff"]+"</trans></div></a> <a href='javascript:fu_pqr(\""+response["response_data"]["tags"][""+select+""]["id"]+"\")'><div class='button'><trans>Delete</trans></div></a></div></bubble>";});}
fu_pco("cafe_settings",""+contentstags+""); fu_nxk();}else{ fu_few("Not able to load settings");}});} if (tab=="members"){ var extra=""; if (setting=="active"){ extra="&status=active";} if (setting=="waiting"){ extra="&status=waiting";} if (setting=="banned"){ extra="&status=banned";} if (setting=="admin"){ extra="&type=admin";} if (setting=="moderator"){ extra="&type=moderator";}
fu_npw("https://"+s_hostname+"/get_cafe_members?query="+id+""+extra+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("cafe_settings"); fu_pco("cafe_settings","<h2>Members</h2>",true); fu_pco("cafe_settings","<div></div>"); fu_pco("cafe_settings","<a href='/settings/"+id+"/members/all'><div class='tab'>All</div></a>",true); fu_pco("cafe_settings","<a href='/settings/"+id+"/members/active'><div class='tab'>Active</div></a>",true); fu_pco("cafe_settings","<a href='/settings/"+id+"/members/waiting'><div class='tab'>Waiting</div></a>",true); fu_pco("cafe_settings","<a href='/settings/"+id+"/members/banned'><div class='tab'>Banned</div></a>",true); fu_pco("cafe_settings","<a href='/settings/"+id+"/members/admin'><div class='tab'>Admin</div></a>",true); fu_pco("cafe_settings","<a href='/settings/"+id+"/members/moderator'><div class='tab'>Moderator</div></a>",true); fu_pco("cafe_settings","<div style='margin-bottom:15px;'></div>"); if (response["response_data"]["members"]!=false){ fu_qeq(response["response_data"]["members"], function(select){ var data=response["response_data"]["members"][""+select+""]; var menu_status="<div onclick=\"javscript:fu_hky('"+id+"','"+data["id"]+"','"+fu_csj(data["name"])+"','"+data["avatar"]+"','"+data["member_status"]+"');\" class='minibubble'><strong>Member status:</strong> "+data["member_status"]+"</div>"; if (data["member_admin"]=="1"){ var menu_admin="<div onclick=\"javscript:fu_hya('"+id+"','"+data["id"]+"','"+fu_csj(data["name"])+"','"+data["avatar"]+"','"+data["member_admin"]+"');\" class='minibubble'><strong>Admin status:</strong> yes</div>";}else{ var menu_admin="<div onclick=\"javscript:fu_hya('"+id+"','"+data["id"]+"','"+fu_csj(data["name"])+"','"+data["avatar"]+"','"+data["member_admin"]+"');\" class='minibubble'><strong>Admin status:</strong> no</div>";} if (data["member_moderator"]=="1"){ var menu_moderator="<div onclick=\"javscript:fu_frg('"+id+"','"+data["id"]+"','"+fu_csj(data["name"])+"','"+data["avatar"]+"','"+data["member_moderator"]+"');\" class='minibubble'><strong>Moderator status:</strong> yes</div>";}else{ var menu_moderator="<div onclick=\"javscript:fu_frg('"+id+"','"+data["id"]+"','"+fu_csj(data["name"])+"','"+data["avatar"]+"','"+data["member_moderator"]+"');\" class='minibubble'><strong>Moderator status:</strong> no</div>";}
fu_pco("cafe_settings","<bubble><a href=\"/@"+data["alias"]+"\"><img source=\""+data["avatar"]+"\" style='width:60px;height:60px;float:left;margin-right:15px;margin-bottom:10px;' class=\"avatar optimizer_img\" alt='Avatar for "+data["name"]+"'></a><div style='margin-left: 75px;'><strong>"+data["name"]+"</strong>"+menu_status+""+menu_admin+""+menu_moderator+"</div></bubble>");});}else{ fu_pco("cafe_settings","<bubble class=\"alt1\">Sorry we can't find any members with the status "+setting+".</bubble>",true);}
fu_nxk();}else{ fu_few("Not able to load settings");}});}} } function fu_hpi(id,name,value){ fu_pbr(); value=fu_xla(value); if (name=="name"){ fu_pco("container_modl","<h1>Name</h1>",true); fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="name" size="50" maxlength="50" placeholder="Name" value="'+value+'"><BR><BR><input type="submit" name="submit" onclick="fu_lwe(\''+id+'\',\'name\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="alias"){ fu_pco("container_modl","<h1>Alias</h1>",true); fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="alias" size="50" maxlength="50" placeholder="Alias" value="'+value+'"><BR><BR><input type="submit" name="submit" onclick="fu_lwe(\''+id+'\',\'alias\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="bio"){ fu_pco("container_modl","<h1>Bio</h1>",true); fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea class="input" name="bio" size="50" maxlength="350" placeholder="Bio">'+value+'</textarea><BR><BR><input type="submit" name="submit" onclick="fu_lwe(\''+id+'\',\'bio\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="about"){ fu_pco("container_modl","<h1>About page content</h1>",true); fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea class="input" name="about" size="50" maxlength="4500" placeholder="About page content">'+value+'</textarea><BR><BR><input type="submit" name="submit" onclick="fu_lwe(\''+id+'\',\'about\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="avatar"){ fu_pco("container_modl","<h1>Avatar</h1>",true); fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea id="imagedata_source" activated="true" style="position:fixed;left:0px;top:-200px;" name="avatar"></textarea><div id="uploader_previewarea"></div><input type="file" onchange="fu_pxf(this,\'imagedata_source\',\'uploader_previewarea\',\'uploader_readytosend\',\'images\')" /><BR><BR><input type="submit" id="uploader_readytosend" name="submit" onclick="fu_lwe(\''+id+'\',\'avatar\',this.form); return false;" value="Save" disabled></div></form></bubble>');} if (name=="header"){ fu_pco("container_modl","<h1>Header</h1>",true); fu_pco("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea id="imagedata_source" activated="true" style="position:fixed;left:0px;top:-200px;" name="header"></textarea><div id="uploader_previewarea"></div><input type="file" onchange="fu_pxf(this,\'imagedata_source\',\'uploader_previewarea\',\'uploader_readytosend\',\'images\')" /><BR><BR><input type="submit" id="uploader_readytosend" name="submit" onclick="fu_lwe(\''+id+'\',\'header\',this.form); return false;" value="Save" disabled></div></form></bubble>');}} function fu_lwe(id,name,form){ fu_clu(); fu_jwg(); if (Array.isArray(form)==false){ var data=fu_uwq(form);}else{ var data=form;} var postdata={}; postdata["cafe"]=id; var sendurl=""; if (name=="name"){ postdata["name"]=ae(fu_csj(data["name"])); postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_name";} if (name=="alias"){ postdata["alias"]=data["alias"]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_alias";} if (name=="mode"){ postdata["mode"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_mode";} if (name=="hidden"){ postdata["mode"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_hidden";} if (name=="public_comment"){ postdata["mode"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_rule_public_comment";} if (name=="public_react"){ postdata["mode"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_rule_public_react";} if (name=="public_view"){ postdata["mode"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_rule_public_view";} if (name=="member_create"){ postdata["mode"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_rule_member_create";} if (name=="member_react"){ postdata["mode"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_rule_member_react";} if (name=="member_comment"){ postdata["mode"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_rule_member_comment";} if (name=="member_feed"){ postdata["mode"]=data[0]; postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_rule_member_feed";} if (name=="bio"){ postdata["bio"]=ae(fu_csj(data["bio"])); postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_bio";} if (name=="about"){ postdata["content"]=ae(fu_csj(data["about"])); postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_about";} if (name=="avatar"){ postdata["file"]=ae(data["avatar"]); postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_avatar";} if (name=="header"){ postdata["file"]=ae(data["header"]); postdata=fu_ere(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_header";}
fu_opn(sendurl,postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_hrr("Updated");} if (response["response_data"]=="taken"){ fu_hrr("This has been taken already");}
fu_zng();}else{ fu_hrr("Unable to save data"); fu_zng();}
fu_nxk();});} function fu_hky(id,user,name,photo,current,value){ if (value==undefined){ value=false;}
fu_pbr(); if (value==false){ fu_pco("container_modl","<h1>Member status for "+fu_xla(name)+"</h1>"); fu_pco("container_modl","<div style='margin:15px;text-align:center;'><img source=\""+photo+"\" style='width:160px;height:160px;' class=\"avatar optimizer_img\" nowait='true' alt='Avatar for "+name+"'></div>"); fu_pco("container_modl","<bubble class='alt1'>You can change an account status from waiting to active or banned using this menu, or making an active user banned. You can also remove a member at any time by selecting remove.</bubble>"); if (current!='active'){ fu_pco("container_modl","<bubble onclick=\"javascript:fu_hky('"+id+"','"+user+"','"+name+"','"+photo+"','"+current+"','active');\"><strong style=\"display: inline-block;margin-bottom: 10px;\">Active</strong><BR>Make user active and able to interact and post in the café.</bubble>");}
fu_pco("container_modl","<bubble onclick=\"javascript:fu_hky('"+id+"','"+user+"','"+name+"','"+photo+"','"+current+"','banned');\"><strong style=\"display: inline-block;margin-bottom: 10px;\">Banned</strong><BR>Remove the member from the café and block any interaction.</bubble>"); fu_pco("container_modl","<bubble onclick=\"javascript:fu_hky('"+id+"','"+user+"','"+name+"','"+photo+"','"+current+"','remove');\"><strong style=\"display: inline-block;margin-bottom: 10px;\">Remove</strong><BR>Remove the member from the café, they can join back later on if the café is public.</bubble>");}else{ fu_clu(); fu_jwg(); var postdata={}; postdata["cafe"]=id; postdata["member"]=user; postdata["mode"]=value; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_cafe_update_member_status",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_hrr("Member status has been updated");}
fu_wrg("/settings/"+id+"/members");}else{ fu_hrr("Unable to save data");}
fu_nxk();});}} function fu_hya(id,user,name,photo,current,value){ if (value==undefined){ value=false;}
fu_pbr(); if (value==false){ fu_pco("container_modl","<h1>Member admin status for "+fu_xla(name)+"</h1>"); fu_pco("container_modl","<div style='margin:15px;text-align:center;'><img source=\""+photo+"\" style='width:160px;height:160px;' class=\"avatar optimizer_img\" nowait='true' alt='Avatar for "+name+"'></div>"); fu_pco("container_modl","<bubble class='alt1'>Setting a member of a café as admin gives them access to this settings area and access to the moderating tools.</bubble>"); if (current=="0"){ fu_pco("container_modl","<bubble onclick=\"javascript:fu_hya('"+id+"','"+user+"','"+name+"','"+photo+"','"+current+"','on');\"><strong style=\"display: inline-block;margin-bottom: 10px;\">Set Admin</strong><BR>Give member admin access.</bubble>");}else{ fu_pco("container_modl","<bubble onclick=\"javascript:fu_hya('"+id+"','"+user+"','"+name+"','"+photo+"','"+current+"','off');\"><strong style=\"display: inline-block;margin-bottom: 10px;\">Remove</strong><BR>Remove admin access from member.</bubble>");}}else{ fu_clu(); fu_jwg(); var postdata={}; postdata["cafe"]=id; postdata["member"]=user; postdata["mode"]=value; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_cafe_update_member_admin",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_hrr("Member admin status has been updated");} if (response["response_data"]=="self"){ fu_hrr("You are not allowed to update the admin settings of your own account");}
fu_wrg("/settings/"+id+"/members");}else{ fu_hrr("Unable to save data");}
fu_nxk();});}} function fu_frg(id,user,name,photo,current,value){ if (value==undefined){ value=false;}
fu_pbr(); if (value==false){ fu_pco("container_modl","<h1>Member moderator status for "+fu_xla(name)+"</h1>"); fu_pco("container_modl","<div style='margin:15px;text-align:center;'><img source=\""+photo+"\" style='width:160px;height:160px;' class=\"avatar optimizer_img\" nowait='true' alt='Avatar for "+name+"'></div>"); fu_pco("container_modl","<bubble class='alt1'>Setting a member of a café as moderator gives them access to moderating tools.</bubble>"); if (current=="0"){ fu_pco("container_modl","<bubble onclick=\"javascript:fu_frg('"+id+"','"+user+"','"+name+"','"+photo+"','"+current+"','on');\"><strong style=\"display: inline-block;margin-bottom: 10px;\">Set Moderator</strong><BR>Give member moderator access.</bubble>");}else{ fu_pco("container_modl","<bubble onclick=\"javascript:fu_frg('"+id+"','"+user+"','"+name+"','"+photo+"','"+current+"','off');\"><strong style=\"display: inline-block;margin-bottom: 10px;\">Remove</strong><BR>Remove moderator access from member.</bubble>");}}else{ fu_clu(); fu_jwg(); var postdata={}; postdata["cafe"]=id; postdata["member"]=user; postdata["mode"]=value; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_cafe_update_member_moderator",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_hrr("Member moderator status has been updated");}
fu_wrg("/settings/"+id+"/members");}else{ fu_hrr("Unable to save data");}
fu_nxk();});}} function fu_sde(){ var type=null; var content=null; var sendback="null"; var foundtype=false; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ type=arr[2];} if (arr[3]!=undefined){ content=arr[3];} if (arr[4]!=undefined){ sendback=fu_xla(decodeURIComponent(""+arr[4]+""));}else{ sendback=document.referrer;}} if (sendback==""){ sendback="null";} if (sendback.includes("hey.cafe")){ sendback="null";} if (su_id!=null){ fu_wta("simple"); fu_vbf("Share"); setTimeout("fu_dqo('"+sendback+"');", 1000); fu_wkn("basics", "#container_footer", "display:none;"); fu_wkn("basics", "modl .close", "display:none;"); fu_wkn("basics", "modl .frame", "margin-top: 0px;border-radius: 0px;max-height: calc(100% - 30px);box-shadow: rgba(0, 0, 0, 0) 0px 1px 5px -2px;-webkit-box-shadow: rgba(0, 0, 0, 0) 0px 1px 5px -2px;"); fu_wkn("basics", "modl .background", "background-color: rgba(138, 138, 138, 0);display: none;"); if (type=="conversation"){ foundtype=true; fu_sgz(content);} if (type=="comment"){ foundtype=true; fu_wga(content);} if (foundtype==false){ fu_sgz(type);}}else{ s_loginmessage="Login to your Hey.Café account first before we can continue."; if (type=="comment"){ s_loginmessage="Login to your Hey.Café account first before we can create a comment.";} if (type=="conversation"){ s_loginmessage="Login to your Hey.Café account first before we can share the content.";}
s_loginrestore=sp; fu_wrg("/login");}} function fu_sgz(content){ fu_wkn("newshare", "modl", "background:none;"); fu_wkn("newshare", "modl .frame", "margin:0px;"); var sendcontent=fu_xla(decodeURIComponent(""+content+"")); fu_nhv('',fu_csj(sendcontent));} function fu_wga(conversation){ fu_wkn("newshare", "modl", "background:none;"); fu_wkn("newshare", "modl .frame", "margin:0px;"); fu_gbo(conversation,false);} var checkclosedcount=0; function fu_dqo(sendback){ if (s_modl==false){ if (checkclosedcount==2){ if (sendback!="null"){ fu_pco("container_content","<bubble class='alt1' style='text-align: center;font-size: 1.1em;font-weight: 600;'>Sending you back...</bubble><div class='loading'></div>"); window.location.href = sendback;}else{ fu_pco("container_content","<bubble class='alt1' style='text-align:center;font-size: 1.1em;font-weight: 600;'>You can close this page</bubble>"); window.close();}
checkclosedcount=100;}else{ checkclosedcount=checkclosedcount+1;}} setTimeout("fu_dqo('"+sendback+"');", 300);} function fu_qvh(resource,id){ fu_pbr(); fu_pco("container_modl","<h1>Share</h1>"); fu_pco("container_modl","<bubble><div class='loading'></div></bubble>"); if (resource=="conversation"){ fu_npw("https://"+s_hostname+"/get_conversation_info?query="+id+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ var text=false; var title=fu_atw(response["response_data"]["contents"]); var description=fu_lsr(response["response_data"]["contents"]); var smallstring=fu_aic(Array.from(response["response_data"]["contents"]).slice(0, 120).join(''))+"..."; if (text==false && title!=false){ text=title;} if (text==false && description!=false){ text=description;} if (text==false && smallstring!=false){ text=smallstring;} var url="https://hey.cafe/conversation/"+response["response_data"]["id"]+""; var urlfull="https://hey.cafe/conversation/"+response["response_data"]["id"]+""; var urlspace=fu_qkz(response["response_data"]["contents"]); if (urlspace!=false){ urlfull="https://hey.cafe/conversation/"+response["response_data"]["id"]+"/"+urlspace+"";}
fu_rap(text+" #heycafe",url,urlfull);}else{ fu_pbr(); fu_pco("container_modl","<h1>Share failed</h1>"); fu_pco("container_modl","<bubble class='alt1'>We are not able to load the content needed</bubble>");}});}} function fu_rap(text,url,urlfull){ fu_pbr(); if (urlfull==undefined){ urlfull=url;}
fu_pco("container_modl","<h1>Share</h1>"); fu_pco("container_modl","<bubble>So you want to share this outside of Hey.café... That is great! Here is the content you are sharing, just tap an option below to open that service. You can also click on the boxes below to copy the text or the url if you want to use somewhere else.<div id='sharetext_case'></div></bubble>"); if (urlfull!=url){ fu_pco("sharetext_case","<pre style=\"white-space: pre-wrap;white-space: -moz-pre-wrap;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;margin-bottom: 0px;\" onclick=\"fu_fqw('CopyContentClickFull');\"><code id='CopyContentClickFull'>"+text+" "+urlfull+"</code></pre>");}else{ fu_pco("sharetext_case","<pre style=\"white-space: pre-wrap;white-space: -moz-pre-wrap;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;margin-bottom: 0px;\" onclick=\"fu_fqw('CopyContentClickFull');\"><code id='CopyContentClickFull'>"+text+" "+url+"</code></pre>");}
fu_pco("sharetext_case","<pre style=\"white-space: pre-wrap;white-space: -moz-pre-wrap;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;margin-bottom: 0px;\" onclick=\"fu_fqw('CopyContentClickText');\"><code id='CopyContentClickText'>"+text+"</code></pre>"); if (urlfull!=url){ fu_pco("sharetext_case","<pre style=\"white-space: pre-wrap;white-space: -moz-pre-wrap;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;margin-bottom: 0px;\" onclick=\"fu_fqw('CopyContentClickURL');\"><code id='CopyContentClickURL'>"+urlfull+"</code></pre>");}else{ fu_pco("sharetext_case","<pre style=\"white-space: pre-wrap;white-space: -moz-pre-wrap;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;margin-bottom: 0px;\" onclick=\"fu_fqw('CopyContentClickURL');\"><code id='CopyContentClickURL'>"+url+"</code></pre>");}
fu_pco("container_modl","<h2 style='margin-top:40px;'>Services</h2>"); var linktext = fu_aic(text); var buttons=fu_lsz(urlfull,text); fu_pco("container_modl","<bubble>"+buttons+"</bubble>"); if (url.includes("hey.cafe")){ if (url.includes("/conversation/")){ var foundid = url.match(/(\/conversation\/)([^&\n?#\s]+)/); var conversationid=foundid[2]; if (conversationid!=undefined){ if (conversationid.includes("/")==false){ fu_pco("container_modl","<h2 style='margin-top:40px;'>Website embed</h2>"); fu_pco("container_modl",'<bubble>You can put this on your website to embed this content directly. You can click the box below to copy to clipboard.<pre style="white-space: pre-wrap;white-space: -moz-pre-wrap;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;margin-bottom: 0px;" onclick="fu_fqw(\'CopyContentClickEmbed\');"><code id="CopyContentClickEmbed">&#60;script src="https://hey.cafe/application/external/embed.js" content="conversation" resource="'+conversationid+'"&#62;&#60;/script&#62;</code></pre></bubble>');}} }} }
function fu_tds(){ if (fu_wlm()==true){ fu_wta("full"); fu_vbf("STAFF AREA"); var isstaff=false; if (su_moderator=="1"){ isstaff=true;} if (su_admin=="1"){ isstaff=true;} var section=null; var resource=null; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ section=arr[2];} if (arr[3]!=undefined){ resource=arr[3];}} if (isstaff==false){ fu_wrg("/e/404");} if (section==null){ fu_efl();} if (section=="accounts" || section=="account"){ fu_sob(resource);} if (section=="cafes" || section=="cafe"){ fu_rqs(resource);} if (section=="conversations" || section=="conversation"){ fu_ods(resource);} if (section=="comments" || section=="comment"){ fu_wdr(resource);}} } function fu_rcd(){ fu_pco("container_content","<div style='margin-bottom:15px;'><div class='horizontalscroll' id='PageStaffMenu'></div></div>"); fu_pco("PageStaffMenu","<a href='/staff'><div class='tab'>Overview</div></a>"); fu_pco("PageStaffMenu","<a href='/staff/accounts'><div class='tab'>Accounts</div></a>"); fu_pco("PageStaffMenu","<a href='/staff/cafes'><div class='tab'>Cafés</div></a>"); fu_pco("PageStaffMenu","<a href='/staff/conversations'><div class='tab'>Conversations</div></a>"); fu_pco("PageStaffMenu","<a href='/staff/comments'><div class='tab'>Comments</div></a>");} function fu_efl(){ fu_pco("container_content","<h1>Staff / Overview</h1>"); fu_rcd(); fu_pco("container_content","<div id='StaffReportsList'><div class='loading'></div></bubble>"); fu_npw("https://"+s_hostname+"/get_staff_reports?count=200",function(result){ var responrep = fu_hdg(result); if (responrep["system_api_error"]==false){ fu_mxp("StaffReportsList"); if (responrep["response_data"]["reports"]!=false){ fu_qeq(responrep["response_data"]["reports"], function(id){ fu_pco("StaffReportsList","<bubble onclick=\"javascript:fu_wrg('/staff/"+responrep["response_data"]["reports"][""+id+""]["resource_type"]+"/"+responrep["response_data"]["reports"][""+id+""]["resource_id"]+"');\"><h3 style=\"margin-top: 0px;\">Report</h3><div><b>Type:</b> "+responrep["response_data"]["reports"][""+id+""]["resource_type"]+"</div><div><b>ID:</b> "+responrep["response_data"]["reports"][""+id+""]["resource_id"]+"</div><div><b>Status Level:</b> "+responrep["response_data"]["reports"][""+id+""]["status_level"]+"</div><div><b>Status Closed:</b> "+responrep["response_data"]["reports"][""+id+""]["status_closed"]+"</div><div><b>Staff Open:</b> "+responrep["response_data"]["reports"][""+id+""]["info_staff"]+"</div></bubble>");});}else{ fu_pco("StaffReportsList","<bubble class='alt1'>We have no active reports.</bubble>");}} });} function fu_sob(resource){ fu_pco("container_content","<h1>Staff / Accounts</h1>"); fu_rcd(); if (resource==null){ fu_pco("container_content","<bubble class='alt1'>No resource given, still working on this</bubble>");}else{ fu_pco("container_content","<div id='staff_resource_area'><div class='loading'></div></div>"); fu_npw("https://"+s_hostname+"/get_staff_account?query="+resource+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false && response["response_data"]!=false){ fu_mxp("staff_resource_area"); fu_pco("staff_resource_area","<bubble id='resource_area_main'></bubble><bubble id='resource_area_more' class='conversation normal'></bubble>"); fu_pco("resource_area_main","<div style='margin-bottom:15px;'><div class='horizontalscroll' id='PageResourceActionMenu'></div></div>"); if (response["response_data"]["status"]=="active"){ fu_pco("PageResourceActionMenu","<a href=\"javascript:fu_qie('account_ban','"+resource+"','false');\"><div class='tab'>Ban</div></a>"); fu_pco("PageResourceActionMenu","<a href=\"javascript:fu_qie('account_delete','"+resource+"','false');\"><div class='tab'>Delete</div></a>"); fu_pco("PageResourceActionMenu","<a href=\"javascript:fu_ozo('account','"+resource+"','false');\"><div class='tab'>Close Reports</div></a>"); fu_pco("resource_area_main","<bubble class='alt4'>Resource is active and visable on the site</bubble>");}else{ fu_pco("PageResourceActionMenu","<a href=\"javascript:fu_qie('account_unban','"+resource+"','false');\"><div class='tab'>Restore</div></a>"); fu_pco("resource_area_main","<bubble class='alt7'>Resource is not active and hidden on the site</bubble>");}
fu_pcj(response["response_data"],"resource_area_more");}else{ fu_ozo('account',resource,'false'); fu_mxp("staff_resource_area"); fu_pco("staff_resource_area","<bubble class='alt1'>The ID is wrong or the resource has been deleted</bubble>");}});}} function fu_rqs(resource){ fu_pco("container_content","<h1>Staff / Cafés</h1>"); fu_rcd(); if (resource==null){ fu_pco("container_content","<bubble class='alt1'>No resource given, still working on this</bubble>");}else{ fu_pco("container_content","<div id='staff_resource_area'><div class='loading'></div></div>"); fu_npw("https://"+s_hostname+"/get_staff_cafe?query="+resource+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false && response["response_data"]!=false){ fu_mxp("staff_resource_area"); fu_pco("staff_resource_area","<bubble id='resource_area_main'></bubble><bubble id='resource_area_more' class='conversation normal'></bubble>"); fu_pco("resource_area_main","<div style='margin-bottom:15px;'><div class='horizontalscroll' id='PageResourceActionMenu'></div></div>"); if (response["response_data"]["status"]=="active"){ fu_pco("PageResourceActionMenu","<a href=\"javascript:fu_qie('cafe_ban','"+resource+"','false');\"><div class='tab'>Ban</div></a>"); fu_pco("PageResourceActionMenu","<a href=\"javascript:fu_qie('cafe_delete','"+resource+"','false');\"><div class='tab'>Delete</div></a>"); fu_pco("PageResourceActionMenu","<a href=\"javascript:fu_ozo('cafe','"+resource+"','false');\"><div class='tab'>Close Reports</div></a>"); fu_pco("resource_area_main","<bubble class='alt4'>Resource is active and visable on the site</bubble>");}else{ fu_pco("PageResourceActionMenu","<a href=\"javascript:fu_qie('cafe_unban','"+resource+"','false');\"><div class='tab'>Restore</div></a>"); fu_pco("resource_area_main","<bubble class='alt7'>Resource is not active and hidden on the site</bubble>");}
fu_xfb(response["response_data"],"resource_area_more");}else{ fu_ozo('cafe',resource,'false'); fu_mxp("staff_resource_area"); fu_pco("staff_resource_area","<bubble class='alt1'>The ID is wrong or the resource has been deleted</bubble>");}});}} function fu_ods(resource){ fu_pco("container_content","<h1>Staff / Conversations</h1>"); fu_rcd(); if (resource==null){ fu_pco("container_content","<bubble class='alt1'>No resource given, still working on this</bubble>");}else{ fu_pco("container_content","<div id='staff_resource_area'><div class='loading'></div></div>"); fu_npw("https://"+s_hostname+"/get_staff_conversation?query="+resource+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false && response["response_data"]!=false){ fu_mxp("staff_resource_area"); fu_pco("staff_resource_area","<bubble id='resource_area_main'></bubble><bubble id='resource_area_more' class='conversation normal'></bubble>"); fu_pco("resource_area_main","<div style='margin-bottom:15px;'><div class='horizontalscroll' id='PageResourceActionMenu'></div></div>"); if (response["response_data"]["info_hidden_cafe"]=="0" && response["response_data"]["info_hidden_global"]=="0"){ fu_pco("PageResourceActionMenu","<a href=\"javascript:fu_qie('conversation_hide','"+resource+"','false');\"><div class='tab'>Hide</div></a>"); fu_pco("PageResourceActionMenu","<a href=\"javascript:fu_ozo('conversation','"+resource+"','true');\"><div class='tab'>Close Reports</div></a>"); fu_pco("resource_area_main","<bubble class='alt4'>Resource is active and visable on the site</bubble>");}else{ fu_pco("PageResourceActionMenu","<a href=\"javascript:fu_qie('conversation_show','"+resource+"','false');\"><div class='tab'>Show</div></a>"); fu_pco("resource_area_main","<bubble class='alt7'>Resource is not active and hidden on the site</bubble>");} if (response["response_data"]!="false"){ fu_jaj(response["response_data"],"resource_area_more");} if (response["response_data"]["cafe"]!=false){ fu_xfb(response["response_data"]["cafe"],"resource_area_more");} if (response["response_data"]["account"]!=false){ fu_pcj(response["response_data"]["account"],"resource_area_more");} if (response["response_data"]["attachments"]!=false){ fu_wln(response["response_data"]["attachments"],"resource_area_more",false);}}else{ fu_ozo('conversation',resource,'false'); fu_mxp("staff_resource_area"); fu_pco("staff_resource_area","<bubble class='alt1'>The ID is wrong or the resource has been deleted</bubble>");}});}} function fu_wdr(resource){ fu_pco("container_content","<h1>Staff / Comments</h1>"); fu_rcd(); if (resource==null){ fu_pco("container_content","<bubble class='alt1'>No resource given, still working on this</bubble>");}else{ fu_pco("container_content","<div id='staff_resource_area'><div class='loading'></div></div>"); fu_npw("https://"+s_hostname+"/get_staff_comment?query="+resource+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false && response["response_data"]!=false){ fu_mxp("staff_resource_area"); fu_pco("staff_resource_area","<bubble id='resource_area_main'></bubble><bubble id='resource_area_more' class='conversation normal'></bubble>"); fu_pco("resource_area_main","<div style='margin-bottom:15px;'><div class='horizontalscroll' id='PageResourceActionMenu'></div></div>"); if (response["response_data"]["info_hidden_cafe"]=="0" && response["response_data"]["info_hidden_global"]=="0"){ fu_pco("PageResourceActionMenu","<a href=\"javascript:fu_qie('comment_hide','"+resource+"','false');\"><div class='tab'>Hide</div></a>"); fu_pco("PageResourceActionMenu","<a href=\"javascript:fu_ozo('comment','"+resource+"','false');\"><div class='tab'>Close Reports</div></a>"); fu_pco("resource_area_main","<bubble class='alt4'>Resource is active and visable on the site</bubble>");}else{ fu_pco("PageResourceActionMenu","<a href=\"javascript:fu_qie('comment_show','"+resource+"','false');\"><div class='tab'>Show</div></a>"); fu_pco("resource_area_main","<bubble class='alt7'>Resource is not active and hidden on the site</bubble>");} if (response["response_data"]!="false"){ fu_pco("PageResourceActionMenu","<a href=\"javascript:fu_wrg('/staff/conversations/"+response["response_data"]["conversation"]+"');\"><div class='tab'>View Conversation</div></a>"); fu_zov(response["response_data"],"resource_area_more");} if (response["response_data"]["account"]!=false){ fu_pcj(response["response_data"]["account"],"resource_area_more");} if (response["response_data"]["attachments"]!=false){ fu_wln(response["response_data"]["attachments"],"resource_area_more",false);}}else{ fu_ozo('comment',resource,'false'); fu_mxp("staff_resource_area"); fu_pco("staff_resource_area","<bubble class='alt1'>The ID is wrong or the resource has been deleted</bubble>");}});}} function fu_xfb(content,container){ resourcetype="<div class=\"tab solidhover\" style=\"float:right;padding:5px;font-size:0.8em;padding-left: 10px;padding-right: 10px;margin-left: 5px;margin-right: 0px;margin-top: 0px;\">Café</div>"; fu_pco(container,"<bubble onclick=\"javascript:fu_wrg('/staff/cafes/"+content["id"]+"');\" style='cursor: pointer;overflow:hidden;'>"+resourcetype+"<img source='"+content["avatar"]+"' class='optimizer_img avatar' style='width:40px;height:40px;margin-left: -5px;margin-top: -5px;margin-bottom: 15px;float:left;margin-right:15px;' alt='Avatar image for cafe "+content["name"]+"'><h3 style='margin-top: 0px;'>"+fu_cpd(content["name"])+"</h3><div class='minibubble' style='font-size: 0.8em;font-weight: 400;padding: 10px;'>"+fu_cpd(fu_dwb(fu_nwo(content["bio"])))+"</div></bubble>");} function fu_pcj(content,container){ resourcetype="<div class=\"tab solidhover\" style=\"float:right;padding:5px;font-size:0.8em;padding-left: 10px;padding-right: 10px;margin-left: 5px;margin-right: 0px;margin-top: 0px;\">Account</div>"; fu_pco(container,"<bubble onclick=\"javascript:fu_wrg('/staff/accounts/"+content["id"]+"');\" style='cursor: pointer;overflow:hidden;'>"+resourcetype+"<img source='"+content["avatar"]+"' class='optimizer_img avatar' style='width:40px;height:40px;margin-left: -5px;margin-top: -5px;margin-bottom: 15px;float:left;margin-right:15px;' alt='Avatar image for cafe "+content["name"]+"'><h3 style='margin-top: 0px;'>"+fu_cpd(content["name"])+"</h3><div class='minibubble' style='font-size: 0.8em;font-weight: 400;padding: 10px;'>"+fu_cpd(fu_dwb(fu_nwo(content["bio"])))+"</div></bubble>");} function fu_jaj(content,container){ resourcetype="<div class=\"tab solidhover\" style=\"float:right;padding:5px;font-size:0.8em;padding-left: 10px;padding-right: 10px;margin-left: 5px;margin-right: 0px;margin-top: 0px;\">Conversation</div>"; fu_pco(container,"<bubble onclick=\"javascript:fu_wrg('/staff/conversations/"+content["id"]+"');\" style='cursor: pointer;overflow:hidden;'>"+resourcetype+"<div class='minibubble' style='font-size: 0.8em;font-weight: 400;padding: 10px;'>"+fu_cpd(fu_dwb(fu_nwo(content["contents"])))+"</div></bubble>");} function fu_zov(content,container){ resourcetype="<div class=\"tab solidhover\" style=\"float:right;padding:5px;font-size:0.8em;padding-left: 10px;padding-right: 10px;margin-left: 5px;margin-right: 0px;margin-top: 0px;\">Comment</div>"; fu_pco(container,"<bubble onclick=\"javascript:fu_wrg('/staff/comment/"+content["id"]+"');\" style='cursor: pointer;overflow:hidden;'>"+resourcetype+"<div class='minibubble' style='font-size: 0.8em;font-weight: 400;padding: 10px;'>"+fu_cpd(fu_dwb(fu_nwo(content["contents"])))+"</div></bubble>");} function fu_qie(action,resource,confirm){ fu_pbr(); var url="post_staff_cafe_ban"; if (action=="cafe_ban"){ url="post_staff_cafe_ban";} if (action=="cafe_unban"){ url="post_staff_cafe_unban";} if (action=="cafe_delete"){ url="post_staff_cafe_delete";} if (action=="account_ban"){ url="post_staff_account_ban";} if (action=="account_unban"){ url="post_staff_account_unban";} if (action=="account_delete"){ url="post_staff_account_delete";} if (action=="conversation_hide"){ url="post_staff_conversation_hide";} if (action=="conversation_show"){ url="post_staff_conversation_show";} if (action=="comment_hide"){ url="post_staff_comment_hide";} if (action=="comment_show"){ url="post_staff_comment_show";} if (confirm=="false"){ fu_pco("container_modl","<h1>Confirm "+action+"</h1><h3>Resource: "+resource+"</h3>"); fu_pco("container_modl","<bubble><div class='minibubble' onclick=\"javascript:fu_qie('"+action+"','"+resource+"','true');\"><strong style='display: inline-block;margin-bottom: 10px;'>Yes</strong><BR>This will run "+action+", if you dont want to click close below.</div></bubble>");}else{ fu_clu(); fu_jwg(); var postdata={}; postdata["resource"]=resource; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/"+url+"",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_zng(); fu_hrr("Alright we sent in the request with "+action+""); if (action=="cafe_ban"){ fu_ozo('cafe',resource,'true');} if (action=="account_ban"){ fu_ozo('account',resource,'true');} if (action=="conversation_hide"){ fu_ozo('conversation',resource,'true');} if (action=="comment_hide"){ fu_ozo('comment',resource,'true');}}else{ fu_zng(); fu_hrr(response["system_api_error"]);}
fu_nxk();});}} function fu_ozo(type,id,valid){ var postdata={}; postdata["resource_type"]=type; postdata["resource_id"]=id; postdata["valid"]=valid; postdata=fu_ere(postdata); fu_opn("https://"+s_hostname+"/post_staff_report_close",postdata,function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_hrr("Reports closed");}else{ fu_hrr("Error closing reports");}});}function fu_vhd(){ if (fu_wlm()==true){ fu_clu(); fu_wta("full"); fu_vbf("Discussions"); fu_pco("container_content","<h1>Discussions</h1>",true); fu_pco("container_content","<div class='horizontalscroll' style='margin-bottom:20px;' id='MenuFeed'></div>"); fu_pco("MenuFeed","<a href='/feed'><div class='tab'>Conversations</div></a>",true); fu_pco("MenuFeed","<a href='/cafes'><div class='tab'>Cafés</div></a>",true); fu_pco("MenuFeed","<a href='/tags'><div class='tab current'>Discussions</div></a>",true); fu_pco("container_content","<div></div>"); fu_pco("container_content","<div style='margin-top:20px;'></div>"); fu_pco("container_content","<div id='PageTagsGenerateCase'></div>"); fu_pco("container_content","<div id='PageTagsBottomLoader'></div>"); fu_cdp(0); fu_nxk();}} function fu_cdp(offset){ fu_mxp("PageTagsBottomLoader"); fu_pco("PageTagsBottomLoader","<div class='loading'></div>"); fu_npw("https://"+s_hostname+"/get_feed_tags?count=40&start="+offset+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["tags"]!=false){ var firstcheckrender=true; if (aa('tags_loaded')==undefined){ var render_frame_id=fu_hmk(20); fu_pco("PageTagsGenerateCase","<div id='tags_loaded'></div><div id='tags_render_"+render_frame_id+"'></div>");}else{ var render_frame_id=fu_hmk(20); fu_pco("PageTagsGenerateCase","<div id='tags_render_"+render_frame_id+"'></div>");}
fu_qeq(response["response_data"]["tags"], function(id){ fu_hxw(response["response_data"]["tags"][""+id+""],"tags_render_"+render_frame_id+"");}); setTimeout(function(){ fu_mxp("PageTagsBottomLoader"); fu_pco("PageTagsBottomLoader","<action type='inview_loadmore_pagetags' offset='"+(parseInt(offset)+40)+"'></action>");}, 400);}else{ fu_mxp("PageTagsBottomLoader"); if (offset==0){ fu_pco("PageTagsBottomLoader","<bubble class='alt1'>Sorry we can't find any café discussion tags.</bubble>",true);}} }else{ fu_few("Not able to load");}});} function fu_hxw(content,container){ var icon=""; var weight=400; var subtext="Can't find last item..."; var recentavatars=""; var clickevent="javascript:fu_wrg('/!"+content["cafe"]["alias"]+"/tag/"+content["id"]+"');"; var conversations=""; var avatarsdone=[]; var headermeta=""; if (content["cafe"]!=false){ headermeta="<div tabindex='0' class='cafeheader' style='display: inline-block;zoom: 0.8;margin: 0px;' onclick=\"javascript:fu_wrg('/!"+content["cafe"]["alias"]+"');\"><img source=\""+content["cafe"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for café "+content["cafe"]["name"]+"'> <strong>"+fu_cpd(content["cafe"]["name"])+"</strong></div>";}
fu_qeq(content["conversations"], function(id){ var theconcon=content["conversations"][""+id+""]; if (avatarsdone[""+theconcon["account"]["id"]+""]==undefined){ avatarsdone[""+theconcon["account"]["id"]+""]=true; recentavatars=""+recentavatars+"<a href=\"javascript:fu_xlg('"+theconcon["account"]["alias"]+"');\" "+fu_cnv(theconcon["account"])+"><img source='"+theconcon["account"]["avatar"]+"' class='optimizer_img avatar' style='width:20px;height:20px;margin-right:5px;margin-top:5px;' alt='Profile image for "+theconcon["account"]["name"]+"'></a>";}}); fu_pco(container,"<bubble id='tag_overview_"+content["id"]+"' class='conversation'><h2 onclick=\""+clickevent+"\" style='margin-top:0px;margin-bottom: 10px;'>"+fu_cpd(content["info_emoji"])+" "+fu_cpd(content["info_name"])+"</h2><div>"+headermeta+"</div><hr></hr><div id='tag_convos_"+content["id"]+"'></div></bubble>"); fu_qeq(content["conversations"], function(id){ fu_pco("tag_convos_"+content["id"]+"","<div id='tags_content_preview_"+content["conversations"][""+id+""]["id"]+"'><action type='inview_load_preview_conversation' element='tags_content_preview_"+content["conversations"][""+id+""]["id"]+"' conversation='"+content["conversations"][""+id+""]["id"]+"'></action><div class='loading'></div></div>");});}function fu_iqi(){ if (fu_wlm()==true){ fu_clu(); fu_wta("full"); fu_vbf("Shared Videos"); fu_pco("container_content","<h1>Shared Videos</h1>",true); fu_pco("container_content",'<div id="video_results"><div class=\'loading\'></div></div>'); fu_aav(); fu_nxk();}} function fu_aav(){ var query="[https://youtube.com watch] [https://youtube.com live] [https://youtu.be]"; var search_had_results=false; fu_mxp("video_results"); fu_pco("video_results","<div class='loading'></div>"); fu_npw("https://"+s_hostname+"/get_search_conversations?search="+ae(fu_csj(query))+"&count=20&following=true",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ fu_mxp("video_results"); if (response["response_data"]["conversations"]!=false){ fu_qeq(response["response_data"]["conversations"], function(id){ fu_ehj(response["response_data"]["conversations"][""+id+""]);});}else{ if (search_had_results==false){ fu_pco("video_results","<bubble class='alt1'>You are not following anyone who has shared videos from a source like Youtube.</bubble>");}} }else{ fu_few("Not able to load list...");}});} function fu_ehj(content){ if (aa("video_convo_"+content["id"]+"")==null){ var headermeta=""; if (content["cafe"]!=false){ } if (content["account"]!=false){ headermeta=headermeta+"<div class='minibubble' tabindex='0' class='alt0' onclick=\"javascript:fu_wrg('/@"+content["account"]["alias"]+"');\" style='margin-top: 0px;font-size: 0.7em;padding: 5px !important;padding-right: 10px !important;position: absolute;z-index: 5;left: 0px;top:0px;border-radius: 0px;border-top-left-radius: 12px;border:0px;'><img source=\""+content["account"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for Account "+content["account"]["name"]+"' style='width: 15px;height: 15px;float: left;margin-right: 5px;'><strong>"+fu_cpd(content["account"]["name"])+"</strong></div>";} var time=fu_agm(content["date_created"]); var contents=content["contents"]; if (content["info_hidden_global"]=="0" && content["info_hidden_cafe"]=="0"){ var urlmatches = contents.match(/\bhttps?:\/\/([^\<\n\s]+)\b/gi); fu_qeq(urlmatches, function(id){ var url=urlmatches[""+id+""]; var view="unknown"; var meta_id="metadata_"+fu_hmk(30)+""; var loadcontent=""; if (url.includes("youtube.com") || url.includes("youtu.be")){ if (url.includes("/watch?") || url.includes("live/") || url.includes("embed/") || url.includes("youtu.be/")){ loadcontent='<action type="inview_load_videos_youtube" element="'+meta_id+'" url="'+url+'" goto="/conversation/'+content["id"]+'"></action>'; view="youtubevideo";}} if (view!="unknown"){ fu_pco("video_results",'<bubble id="video_convo_'+content["id"]+'" class="halfsized video"><div style="margin: -10px;margin-top: -20px;margin-bottom: -20px;">'+headermeta+''+loadcontent+'<div id="'+meta_id+'"><div class=\'loading\'></div></div></div></bubble>');}});}} } function fu_qvq(element,url,goto){ var randhostname=fu_rbw(); var foundid =url.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/); var videoid=(foundid&&foundid[7].length==11)? foundid[7] : false; if (videoid==false){ var foundidtwo=url.match(/^.*youtu.be\/([^#&?]*).*/); var videoid=(foundidtwo&&foundidtwo[1].length==11)? foundidtwo[1] : false;} if (videoid==false){ var foundidtwo=url.match(/^.*youtube\.com\/live\/([^#&?]*).*/); var videoid=(foundidtwo&&foundidtwo[1].length==11)? foundidtwo[1] : false;} if (videoid!=false){ var playid="mediaplay_"+fu_hmk(30)+""; fu_npw("https://"+randhostname+"/get_bot_youtube_video_meta?query="+fu_csj(videoid)+"",function(result){ var response = fu_hdg(result); if (response["system_api_error"]==false){ if (response["response_data"]["title"]!="false"){ fu_mxp(element); fu_pco(element,"<div class='embed youtube'><div id='"+playid+"'><div class='media' style='position: relative;'><div class=\"aspectcase sixteenbynine\"><div class=\"content\"><a title='View Content To Play Youtube video' href=\""+goto+"\"><div class='playbuttoncase'><span class='playbutton'></span></div><div class='cover optimizer_bg content' source='https://img.youtube.com/vi/"+videoid+"/maxresdefault.jpg'></div></a></div></div></div></div><div style='font-size:0.8em;' id='"+element+"_yt_userdata'><a href='"+url+"' target='_blank' rel='noreferrer'><strong>"+response["response_data"]["title"]+"</strong></a></div></div>"); if (response["response_data"]["author_url"]!="false"){ fu_npw("https://"+randhostname+"/get_bot_website_meta?query="+fu_csj(response["response_data"]["author_url"])+"",function(result){ var author = fu_hdg(result); if (author["system_api_error"]==false){ fu_mxp(""+element+"_yt_userdata"); fu_pco(""+element+"_yt_userdata","<div style='overflow:hidden;'><div style='display:inline-block;float:left;margin-right:10px;'><a href='"+response["response_data"]["author_url"]+"' target='_blank' rel='noreferrer'><img source='"+author["response_data"]["image"]+"' class='optimizer_img media' style='border-radius:100%;width:40px;height:40px;'></a></div><a href='"+url+"' target='_blank' rel='noreferrer'><strong>"+response["response_data"]["title"]+"</strong></a><BR>"+response["response_data"]["author"]+"</div>");}},false,true);}}else{ fu_mxp(element); fu_pco(element,"<div class='embed youtube'><div id='"+playid+"'><div class='media' style='position: relative;'><div class=\"aspectcase sixteenbynine\"><div class=\"content\"><a title='View Content To Play Youtube video' href=\""+goto+"\"><div class='playbuttoncase'><span class='playbutton'></span></div><div class='cover optimizer_bg content' source='https://img.youtube.com/vi/"+videoid+"/maxresdefault.jpg'></div></a></div></div></div></div><div style='margin-top:10px;' id='"+element+"_yt_userdata'></div></div>");}} },false,true);}}</script></head><body>
	<div id="js_startup">
		<div style='font-family: -apple-system, BlinkMacSystemFont,Roboto, Oxygen-Sans, Ubuntu, Cantarell, sans-serif;font-weight:600;'>
			<div id="onjslaunchfail">
				<div style="margin:0px auto;text-align:center;margin-top:20px;max-width:600px;padding:10px;"><h1 style='margin:0px;'>Hey.Café</h1></div><div style="background: rgb(247, 248, 250);border-radius:15px;margin:0px auto;text-align:center;margin-top:20px;max-width:600px;padding:10px;color:rgb(97, 97, 97);font-weight: 500;">Hey, looks like something may have failed to load. This application is Javascript based and some older browsers may have problems.<BR><BR>This site requires the use of Javascript. Without it nothing will work.<BR><BR>If you think this is a bug <a href="/about.txt" style='color: rgb(96, 72, 244);font-weight: 600;text-decoration: none;'>contact us</a>.</div>
			</div>
		</div>
	</div>
	<content id="js_content"></content>
</body></html>
