<!DOCTYPE html><html lang="en"><head>
<title>Hey.Café</title>
<meta charset="utf-8">
<meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="description" content="A new social network designed to be fast, contains no ads, and respects your privacy. Share in a safe online community and make new friends.">
<meta name="apple-mobile-web-app-title" content="Hey.Café">
<meta name="theme-color" content="#6048f4">
<meta name="HandheldFriendly" content="true">
<meta name="MobileOptimized" content="width">
<meta name="robots" content="noai">
<meta name="robots" content="noimageai">
<meta name="app-token" content="jpuppwmbjyxlhsf">
<meta name="generator" content="Hey.Café">
<meta name="heycafe:title" content="Hey.Café">
<meta name="heycafe:description" content="A new social network designed to be fast, contains no ads, and respects your privacy. Share in a safe online community and make new friends.">
<meta name="heycafe:image" content="https://hey.cafe/logo_social.png?v=jpuppwmbjyxlhsf">
<meta property="og:url" content="https://hey.cafe/help">
<meta property="og:type" content="website">
<meta property="og:title" content="Hey.Café">
<meta property="og:site_name" content="Hey.Café">
<meta property="og:description" content="A new social network designed to be fast, contains no ads, and respects your privacy. Share in a safe online community and make new friends.">
<meta property="og:image" content="https://hey.cafe/logo_social.png?v=jpuppwmbjyxlhsf">
<link rel="home" href="https://hey.cafe" rel="home">
<link rel="canonical" href="https://hey.cafe/help">
<link rel="manifest" href="/manifest.json">
<link rel="icon" type="image/png" href="https://hey.cafe/logo_social.png?v=jpuppwmbjyxlhsf">
<link rel="apple-touch-icon" href="https://hey.cafe/logo_social.png?v=jpuppwmbjyxlhsf">
<link rel="apple-touch-startup-image" href="https://hey.cafe/logo_social.png?v=jpuppwmbjyxlhsf">
<link rel="icon" type="image/x-icon" href="/favicon.ico?v=jpuppwmbjyxlhsf">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=jpuppwmbjyxlhsf">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=jpuppwmbjyxlhsf">
<link rel="me" href="https://mastodon.social/@heycafe">
<link rel="preconnect" href="https://assets.heycafecdn.com">
<link rel="preconnect" href="https://proxy.heycafecdn.com">
<link rel="preconnect" href="https://b2.heycafecdn.com">
<style>
	body{ background-color:transparent; }
	#onjslaunchfail{ animation: 1s nolaunchfailfade;animation-fill-mode: forwards;visibility: hidden;}
	@keyframes nolaunchfailfade{ 99% { visibility: hidden; } 100% { visibility: visible; }}
</style>
<script>function ae(s) { return encodeURIComponent(s); } function ad(s) { return document.querySelector(s); } function ac(s) { return document.getElementsByClassName(s); } function ab(s) { return document.getElementsByTagName(s); } function aa(s) { return document.getElementById(s); } var s_domain="hey.cafe"; var s_hostname=""; var s_timestamp=0; var s_structure="simple"; var s_referral=false; var s_logout_reload=false; var s_loginrestore=false; var s_loginmessage=false; var s_debug=false; var s_modl=false; var s_gestures="on"; var s_checkups=true; var s_body_input=false; var s_body_input_last=false; var s_body_livearea=false; var s_body_livearea_last=false; var s_authsession=null; var s_iframesource=null; var s_httprequests=0; var s_httprequests_translate=0; var s_token=false; var s_token_alert=false; var s_pwa=false; var s_pwa_can=false; var s_renderengine="unknown"; var s_device="unknown"; var s_embed=false; var s_embed_position=0; var s_reloadkill=false; var s_scroll=0; var s_scroll_modl=0; var s_scroll_header=0; var s_touch_start_x=0; var s_touch_start_y=0; var s_touch_end_x=0; var s_touch_end_y=0; var s_touch_direction=false; var s_touch_onscroller=false; var s_touch_distance=0; var s_mode="light"; var s_accent="96, 79, 216"; var s_version="0.8"; var s_char_reg=460; var s_char_pro=4500; var s_width=window.innerWidth; var sp=window.location.pathname; var sprender=null; var s_lowpowerdevice=false; var su_session=null; var su_alias=null; var su_id=null; var su_name=null; var su_language="en"; var su_header=null; var su_avatar=null; var su_pro=false; var su_admin=false; var su_moderator=false; var su_default_header="https://b2.heycafecdn.com/file/HeyCafe/defaults/header_account.jpg"; var su_default_avatar="https://b2.heycafecdn.com/file/HeyCafe/defaults/avatar_account.png"; var s_app_colour="false"; var s_app_stats="false"; var s_app_reducemotion="false"; var s_app_hidesuggestions="false"; var s_app_forcedisplay="false"; var s_app_scaledisplay="false"; var s_app_reactions="false"; var suc_notifications=false; var suc_messages=false; var suc_settings=false; var suc_pro_expire=0; var suc_pro_expire_seconds=0; var s_suggestionclear=false; var sic=false; var sic_type="false"; var sic_last="false"; var sic_resource="false"; var sic_resource_sub="false"; var sic_function=""; var sp_title=""; var sp_description=""; var sp_url=""; var sp_image=""; var sh=[''+window.location.pathname+'']; var shl_url=false; var shl_contents=false; var shl_structure=false; var shl_scroll=false; var shl_meta_title=""; var shl_meta_description=""; var shl_meta_url=""; var shl_meta_image=""; var ss=[]; ss["endpoint-001"]={hostname: "endpoint-001.hey.cafe", online: null, speed:0}; ss["endpoint-002"]={hostname: "endpoint-002.hey.cafe", online: null, speed:0}; ss["endpoint-003"]={hostname: "endpoint-003.hey.cafe", online: null, speed:0}; ss["endpoint-004"]={hostname: "endpoint-004.hey.cafe", online: null, speed:0}; ss["endpoint-005"]={hostname: "endpoint-005.hey.cafe", online: null, speed:0}; ss["endpoint-006"]={hostname: "endpoint-006.hey.cafe", online: null, speed:0}; function fu_ndy(){ var number_total=Object.keys(ss).length; var number_picked=Math.floor(Math.random() * number_total); var number_on=0; var server="endpoint-001"; fu_lgl(ss, function(id){ if (number_on==number_picked){ server=id; if (ss[id]["online"]==false){ return fu_ndy();}}
number_on=number_on+1;}); return server;} function fu_bpp(){ var serverid=fu_ndy(); return ss[serverid]["hostname"];} function fu_kay(server,name,value){ var id=server.replace(".hey.cafe", ""); ss[id][name]=value;} var sr=[]; sr["blank"]={code: "2754", pro: false, canpick: false}; sr["emoji-thumb-up"]={code: "1f44d", pro: false, canpick: true}; sr["emoji-thumb-down"]={code: "1f44e", pro: false, canpick: true}; sr["emoji-heart"]={code: "2764", pro: false, canpick: true}; sr["emoji-heart-broken"]={code: "1f494", pro: false, canpick: true}; sr["emoji-wave"]={code: "1f44b", pro: false, canpick: true}; sr["emoji-partyface"]={code: "1f973", pro: false, canpick: true}; sr["emoji-love"]={code: "1f970", pro: false, canpick: true}; sr["emoji-pride"]={code: "1f3f3-fe0f-200d-1f308", pro: false, canpick: false}; sr["emoji-trans"]={code: "1f3f3-fe0f-200d-26a7-fe0f", pro: false, canpick: false}; sr["emoji-hug"]={code: "1fac2", pro: false, canpick: true}; sr["emoji-fingerscrossed"]={code: "1f91e", pro: false, canpick: true}; sr["emoji-peace"]={code: "270c", pro: false, canpick: true}; sr["emoji-clap"]={code: "1f44f", pro: false, canpick: true}; sr["emoji-fire"]={code: "1f525", pro: true, canpick: true}; sr["emoji-cool"]={code: "1f60e", pro: true, canpick: true}; sr["emoji-spock"]={code: "1f596", pro: true, canpick: true}; sr["emoji-rainbow"]={code: "1f308", pro: true, canpick: true}; sr["emoji-light"]={code: "1f4a1", pro: true, canpick: true}; sr["emoji-gaming"]={code: "1f579", pro: true, canpick: true}; sr["emoji-party"]={code: "1f389", pro: true, canpick: true}; sr["emoji-mind-blown"]={code: "1f92f", pro: true, canpick: true}; sr["emoji-cookie"]={code: "1f36a", pro: true, canpick: true}; sr["emoji-trophy"]={code: "1f3c6", pro: true, canpick: true}; sr["emoji-rose"]={code: "1f339", pro: true, canpick: true}; sr["emoji-star"]={code: "2b50", pro: false, canpick: true}; sr["emoji-smile"]={code: "1f642", pro: false, canpick: true}; sr["emoji-laugh"]={code: "1f602", pro: false, canpick: true}; sr["emoji-angry"]={code: "1f621", pro: false, canpick: true}; sr["emoji-dizzy"]={code: "1f974", pro: false, canpick: true}; sr["emoji-flushed"]={code: "1f633", pro: false, canpick: true}; sr["emoji-frown"]={code: "2639", pro: false, canpick: true}; sr["emoji-grimace"]={code: "1f62c", pro: false, canpick: true}; sr["emoji-grin"]={code: "1f600", pro: false, canpick: true}; sr["emoji-thinking"]={code: "1f914", pro: false, canpick: true}; sr["emoji-omg"]={code: "1f631", pro: false, canpick: true}; sr["emoji-beam"]={code: "1f601", pro: false, canpick: true}; sr["emoji-sweat"]={code: "1f605", pro: false, canpick: true}; sr["emoji-hearts"]={code: "1f60d", pro: false, canpick: true}; sr["emoji-stars"]={code: "1f929", pro: false, canpick: true}; sr["emoji-tears"]={code: "1f923", pro: false, canpick: true}; sr["emoji-eyes-only"]={code: "1f440", pro: false, canpick: true}; sr["emoji-tongue"]={code: "1f61b", pro: false, canpick: true}; sr["emoji-tongue-squint"]={code: "1f61d", pro: false, canpick: true}; sr["emoji-tongue-wink"]={code: "1f61c", pro: false, canpick: true}; sr["emoji-kiss"]={code: "1f617", pro: false, canpick: true}; sr["emoji-kiss-heart"]={code: "1f618", pro: false, canpick: true}; sr["emoji-laugh-outloud"]={code: "1f606", pro: false, canpick: true}; sr["emoji-meh"]={code: "1f610", pro: false, canpick: true}; sr["emoji-blank"]={code: "1f636", pro: false, canpick: true}; sr["emoji-eyes"]={code: "1f644", pro: false, canpick: true}; sr["emoji-cry"]={code: "1f62d", pro: false, canpick: true}; sr["emoji-tear"]={code: "1f622", pro: false, canpick: true}; sr["emoji-wink"]={code: "1f609", pro: false, canpick: true}; sr["emoji-shock"]={code: "1f628", pro: false, canpick: true}; sr["emoji-tired"]={code: "1f629", pro: false, canpick: true}; sr["emoji-duck"]={code: "1f986", pro: true, canpick: false}; sr["emoji-chick"]={code: "1f423", pro: false, canpick: true}; fu_yax("loader", "#uiLoaderLight", "overflow:hidden;position:fixed;z-index:800000;color:rgb(255,255,255);background: rgb(0,0,0);text-align:center;left:50%;width: 300px;margin-left: -150px;border-radius: 100px;height: auto;-webkit-transition: all 250ms ease-in-out;-moz-transition: all 250ms ease-in-out;-o-transition: all 250ms ease-in-out;transition: all 250ms ease-in-out;"); fu_yax("loader", "#uiLoaderLight .progress", "font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif;font-weight:600;padding:20px;padding-top:10px;padding-bottom:10px;text-transform: uppercase;font-size:1em;"); fu_yax("loader", "#uiLoaderLight.show", "top: calc(10px + env(safe-area-inset-top));"); fu_yax("loader", "#uiLoaderLight.hide", "top: -200px;"); fu_yax("loader", "#uiNotification", "position:fixed;z-index:7000;max-width:500px;height:0px;text-align:left;top:60px;right:0px;-webkit-transition: all 250ms ease-in-out;-moz-transition: all 250ms ease-in-out;-o-transition: all 250ms ease-in-out;transition: all 250ms ease-in-out;"); fu_yax("loader", "#uiAlert", "position:fixed;z-index:750000;width:100%;height:0px;text-align:center;top:0px;left:0px;-webkit-transition: all 250ms ease-in-out;-moz-transition: all 250ms ease-in-out;-o-transition: all 250ms ease-in-out;transition: all 250ms ease-in-out;"); var sc={}; function fu_low(name){ if (sc[""+name+""]==undefined){ sc[""+name+""]=null;} return sc[""+name+""];} function fu_paa(name,data){ if (sc[""+name+""]==undefined){ sc[""+name+""]=null;}
sc[""+name+""]=data;} function fu_agt(){ sc={};} var s_archive_cache={}; function fu_hty(name){ if (s_archive_cache[""+name+""]==undefined){ s_archive_cache[""+name+""]=null;} return s_archive_cache[""+name+""];} function fu_rmn(name,data){ if (s_archive_cache[""+name+""]==undefined){ s_archive_cache[""+name+""]=null;}
s_archive_cache[""+name+""]=data;} function fu_unt(){ s_archive_cache={};} if (window.location.hostname!=s_domain){ if (window.location.hostname=="beta.hey.cafe"){ s_domain=window.location.hostname;} if (window.location.hostname=="hey.cafe"){ s_domain=window.location.hostname;}} if (fu_yrj("ses_su_session")!=""){ fu_qex("ses_su_session",fu_yrj("ses_su_session")); fu_qex("ses_su_alias",fu_yrj("ses_su_alias")); fu_qex("ses_su_id",fu_yrj("ses_su_id")); fu_qex("ses_su_name",fu_yrj("ses_su_name")); fu_qex("ses_su_language",fu_yrj("ses_su_language")); fu_qex("ses_s_sessions",fu_yrj("ses_s_sessions")); fu_xuo("ses_su_session"); fu_xuo("ses_su_alias"); fu_xuo("ses_su_id"); fu_xuo("ses_su_name"); fu_xuo("ses_su_language"); fu_xuo("ses_s_sessions");} if (fu_mlq("ses_su_session")!=""){ su_session=fu_mlq("ses_su_session"); su_alias=fu_mlq("ses_su_alias"); su_id=fu_mlq("ses_su_id"); su_name=fu_mlq("ses_su_name"); su_language=fu_mlq("ses_su_language"); su_name="unknown";} if (fu_mlq("ses_s_referral")!=""){ s_referral=fu_mlq("ses_s_referral");} if (fu_mlq("ses_s_gestures")!=""){ s_gestures=fu_mlq("ses_s_gestures");}
window.onerror = function(msg, url, lineNo, columnNo, error){ fu_zmb(msg, url, lineNo, columnNo, error);}; window.onkeyup = function(e){ var event = e.which || e.keyCode || 0; if (event==27){ if (s_modl==false){ var elementactive="BODY"; if (document.activeElement.tagName!=undefined){ elementactive=document.activeElement.tagName;} if (elementactive!="INPUT" && elementactive!="TEXTAREA" && elementactive!="LIVEAREA"){ if (sp!="/debug"){ fu_euy("/debug");}else{ fu_euy("/");}} }else{ fu_hbj();}} if (event==13){ document.activeElement.click();}}; function fu_rfy(error){ fu_qkr("So sorry the page failed to load, you can tap to refresh. "+error+"","😭",sp,true);} function fu_ovf(count){ if (count>=1){ var newtitle="("+count+") "+sp_title+"";}else{ var newtitle=sp_title;} if (ad('title').innerHTML!=newtitle){ ad('title').innerHTML = newtitle;}} function fu_pcc(title){ if (title==""){ var newtitle="Hey.Café";}else{ var newtitle=title+" / Hey.Café";} if (sp_title!=newtitle){ sp_title=newtitle; ad('title').innerHTML = newtitle; ad('meta[property="og:title"]').content = newtitle; ad('meta[name="heycafe:title"]').content = newtitle;}} function fu_ccz(description){ if (description==""){ var newdescription="Social media kicked up a notch";}else{ var newdescription=description;}
sp_description=newdescription; ad('meta[name="description"]').content = newdescription; ad('meta[property="og:description"]').content = newdescription; ad('meta[name="heycafe:description"]').content = newdescription;} function fu_pmd(url,replace_history){ if (sp_url!=url){ if (replace_history==undefined){ replace_history=false;} if (url==""){ var newurl=window.location.pathname;}else{ var newurl=url;}
sp_url=newurl; ad('link[rel="canonical"]').href = "https://hey.cafe"+newurl; ad('meta[property="og:url"]').content = "https://hey.cafe"+newurl; if (replace_history==true){ if (s_pwa==false){ window.history.replaceState(null, sp_title, sp_url);}} }} function fu_zmx(url){ if (url==""){ var newurl="https://hey.cafe/logo.png";}else{ var newurl=url;}
sp_image=newurl; ad('meta[property="og:image"]').content = newurl; ad('meta[name="heycafe:image"]').content = newurl;} function fu_cwa(){ var scroll_height=document.body.scrollHeight; var scroll_width=document.body.scrollWidth; if (scroll_height<=80){ scroll_height=80;} var message = { height: scroll_height, width: scroll_width, domain: s_domain, page: sp }; window.top.postMessage(message, "*"); setTimeout("fu_cwa()", 100);} document.addEventListener('click', function (e){ var target=e.target; if (target!=null){ if (target.hasAttribute("href")==false){ target=target.parentElement;}} if (target!=null){ if (target.hasAttribute("href")==false){ target=target.parentElement;}} if (target!=null){ if (target.hasAttribute("href")==false){ target=target.parentElement;}} if (target!=null){ if (target.hasAttribute("href")==false){ target=target.parentElement;}} if (target!=null){ if (target.hasAttribute("href")==false){ target=target.parentElement;}} if (target!=null){ if (target.hasAttribute("href")==false){ target=target.parentElement;}} if (target!=null){ if (target.hasAttribute("href")==false){ target=target.parentElement;}} if (target!=null){ if (target.hasAttribute("href")==false){ target=target.parentElement;}} if (target!=null){ if (target.hasAttribute("href")==false){ target=target.parentElement;}} if (target!=null){ if (target.hasAttribute("href")==false){ target=target.parentElement;}} if (target!=null){ if (target.hasAttribute("href")==false){ target=target.parentElement;}} if (target!=null){ if (target.hasAttribute("href")){ if (target.hasAttribute("target")==false){ var url=target.getAttribute('href'); url=url.replace("https://"+s_domain+"", ""); if (!url.match(/javascript/)){ if (!url.match(/mailto:/)){ if (s_embed==false){ e.preventDefault(); fu_euy(url);}else{ e.preventDefault(); window.open(url, '_blank');}} }} }}
fu_oen("uiToolTip");}, false); window.addEventListener('message', function(e){ var message = e.data; if (message.type=="embed_position"){ s_embed_position=message.value;}} , false); window.addEventListener('popstate', function (e){ if (sp!=window.location.pathname){ var count=sh.length; if (count>=2){ var url=sh[count-2]; fu_xhg();}else{ fu_euy(window.location.pathname);}} }); document.addEventListener('scroll', function(e){ fu_ikw(); var newscroll=window.scrollY; if (s_width<700){ if (document.body.classList.contains("active_livearea")==false){ if (aa('container_headercase')){ if (s_scroll<=newscroll){ s_scroll_header=s_scroll_header-(s_scroll-newscroll); if (s_scroll_header>=100){ s_scroll_header=100;} if (s_scroll_header>=5){ aa('container_headercase').style.top="-200px"; aa('uiNotification').style.top="0px"; aa("container_menu").style.bottom="-200px"; aa('uiPopover').style.bottom="0px";}else{ aa('container_headercase').style.top="-"+s_scroll_header+"px"; aa("container_menu").style.bottom="-"+s_scroll_header+"px";}}else{ s_scroll_header=0; aa('container_headercase').style.top="0px"; aa('uiNotification').style.top="60px"; aa('uiPopover').style.bottom="60px"; if (s_width<700){ aa('container_menu').style.bottom="0px";}} if (newscroll<=0){ s_scroll_header=0; aa('container_headercase').style.top="0px"; aa('uiNotification').style.top="60px"; aa('uiPopover').style.bottom="60px"; aa('container_menu').style.bottom="0px";}} }else{ hadScrollJitterHide=true; fu_aqh();}}
fu_oen("uiToolTip"); s_scroll=newscroll;}); window.visualViewport.addEventListener("scroll", function(e){ fu_aqh();}); window.visualViewport.addEventListener("resize", function(e){ fu_aqh();}); window.addEventListener("offline", function(e){ fu_ygh("You are now offline");}); window.addEventListener("online", function(e){ fu_ygh("You are back online");}); function fu_aqh(){ if (document.body.classList.contains("active_livearea")==true){ if (aa('container_headercase')){ s_scroll_header=0; aa('container_headercase').style.top=""+window.visualViewport.offsetTop+"px"; aa('uiNotification').style.top="60px"; aa('uiPopover').style.bottom="60px"; aa('container_menu').style.bottom="-200px"; if (aa('uiPhoneNotchSub')){ aa("uiPhoneNotchSub").style.top=""+(window.visualViewport.offsetTop-10)+"px";}} }else{ if (aa('container_headercase')){ s_scroll_header=0; aa('container_headercase').style.top="0px"; aa('uiNotification').style.top="60px"; aa('uiPopover').style.bottom="60px"; aa('container_menu').style.bottom="0px"; if (aa('uiPhoneNotchSub')){ aa("uiPhoneNotchSub").style.top="-10px";}} }} function fu_qez(){ s_touch_distance=0; s_touch_direction=false; s_touch_onscroller=false; if (s_touch_end_x < s_touch_start_x){ var mydist=s_touch_start_x-s_touch_end_x; if (mydist>=40){ s_touch_distance=mydist; s_touch_direction="left";}} if (s_touch_end_x > s_touch_start_x){ var mydist=s_touch_end_x-s_touch_start_x; if (mydist>=40){ s_touch_distance=mydist; s_touch_direction="right";}} if (s_touch_end_y < s_touch_start_y){ var mydist=s_touch_start_y-s_touch_end_y; if (mydist>=40){ s_touch_distance=mydist; s_touch_direction="up";}} if (s_touch_end_y > s_touch_start_y){ var mydist=s_touch_end_y-s_touch_start_y; if (mydist>=40){ s_touch_distance=mydist; s_touch_direction="down";}} var elements=document.elementsFromPoint(s_touch_start_x, (s_touch_start_y - s_scroll)); for (var i = 0; i < elements.length; i++){ if (elements[i].scrollWidth > elements[i].clientWidth){ s_touch_onscroller=true;}} if (s_gestures=="on"){ if (s_touch_onscroller==false){ if (s_touch_distance>=150){ if (s_touch_direction=="right"){ if (sh.length>=2){ fu_ygh("Back gesture detected"); fu_xhg();}} }} }
fu_ngi("Gesture Detect: distance: "+s_touch_distance+", direction: "+s_touch_direction+", start x:"+s_touch_start_x+", end x: "+s_touch_end_x+", start y:"+s_touch_start_y+", end y: "+s_touch_end_y+", scroller: "+s_touch_onscroller+", page scroll: "+s_scroll+"");} document.addEventListener('touchstart', e => { s_touch_start_x = e.changedTouches[0].screenX; s_touch_start_y = e.changedTouches[0].screenY;}); document.addEventListener('touchend', e => { s_touch_end_x = e.changedTouches[0].screenX; s_touch_end_y = e.changedTouches[0].screenY; fu_qez();}); var uiToolTipBlank=true; var uiToolTipActiveText=""; document.addEventListener('mousemove', e => { if (s_device!="Android" && s_device!="iOS" && s_device!="NativeiOSApp" && s_device!="NativeAndroidApp"){ var elements=document.elementsFromPoint(e.clientX, e.clientY); var hastooltip=false; for (var i = 0; i < elements.length; i++){ if (elements[i].hasAttribute("data-title")){ var element=elements[i]; var elmx=e.clientX; var elmy=e.clientY; var type="left"; var allowed=false; if (elmx>=(s_width/2)){ type="right"; elmx=s_width-elmx;} if (aa("js_content")){ if (fu_efd(aa("js_content"),element)){ if (s_modl==false){ allowed=true;}} } if (aa("uiModl")){ if (fu_efd(aa("uiModl"),element)){ if (s_modl==true){ allowed=true;}} } if (uiToolTipActiveText!=element.getAttribute("data-title")){ fu_oen("uiToolTip"); uiToolTipActiveText=element.getAttribute("data-title");} if (allowed==true){ elmx=elmx+10; elmy=elmy+5; hastooltip=true; uiToolTipBlank=false; if (aa("active_tooltip")){ if (type=="left"){ aa("active_tooltip").style.left=""+elmx+"px"; aa("active_tooltip").style.top=""+elmy+"px"; aa("active_tooltip").style.right="";} if (type=="right"){ aa("active_tooltip").style.right=""+elmx+"px"; aa("active_tooltip").style.top=""+elmy+"px"; aa("active_tooltip").style.left="";}}else{ fu_ogv("uiToolTip","<tooltip id='active_tooltip' style='"+type+":"+elmx+"px;top:"+elmy+"px;max-width:300px;'>"+fu_ctl(fu_yaa(element.getAttribute("data-title")))+"</tooltip>");}} }} if (hastooltip==false){ if (uiToolTipBlank==false){ fu_oen("uiToolTip"); uiToolTipBlank=true;}} }}, {passive: true}); document.addEventListener("DOMContentLoaded", function(){ aa("js_startup").innerHTML=""; aa("js_startup").innerHTML=aa("js_startup").innerHTML+"<div id='uiLoaderLight' class='hide'><div class='progress' id='uiLoaderLightProgress'>Loading</div></div>"; aa("js_startup").innerHTML=aa("js_startup").innerHTML+"<a id='uiOpenSafari' style='display:none;' href='' target='_blank'>Link</a>"; aa("js_startup").innerHTML=aa("js_startup").innerHTML+"<div id='uiModl'></div>"; aa("js_startup").innerHTML=aa("js_startup").innerHTML+"<div id='uiToolTip'></div>"; aa("js_startup").innerHTML=aa("js_startup").innerHTML+"<div id='uiPopover'></div>"; aa("js_startup").innerHTML=aa("js_startup").innerHTML+"<div id='uiNotification'></div>"; aa("js_startup").innerHTML=aa("js_startup").innerHTML+"<div id='uiPhoneNotch'></div>"; aa("js_startup").innerHTML=aa("js_startup").innerHTML+"<div id='uiAlert'></div>"; aa("js_startup").innerHTML=aa("js_startup").innerHTML+"<div id='uiBackground'></div>"; if (typeof navigator.serviceWorker !== 'undefined'){ navigator.serviceWorker.register('/service_worker.js', {scope: '/'});} var startedrender=false; fu_uqy(); fu_nqx("Creating UI Elements"); if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches){ fu_rcg("dark"); startedrender=true; s_mode="dark";} if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches){ fu_rcg("light"); startedrender=true; s_mode="light";} if (startedrender==false){ fu_rcg("light");}
fu_lmn(); if (sp.startsWith("/embed/")){ fu_crv("embed");}
fu_nqx("Launching application"); fu_wxl();}); function fu_nqx(message){ fu_ogv("uiLoaderLightProgress",message);} function fu_uqy(message){ if (message==undefined){ fu_nqx("Loading...");}else{ fu_nqx(message);} if (aa("uiLoaderLight")){ aa("uiLoaderLight").classList.add("show"); aa("uiLoaderLight").classList.remove("hide");}} function fu_qaf(){ if (aa("uiLoaderLight")){ aa("uiLoaderLight").classList.add("hide"); aa("uiLoaderLight").classList.remove("show");}
fu_ikw();} function fu_qkr(message,emoji,url,sticky){ if (emoji==undefined){ emoji="👋";} if (url==undefined){ url="false";} if (sticky==undefined){ sticky=false;}
notificationid="notification_"+fu_sjw(30)+""; aa("uiNotification").innerHTML="<div onclick=\"fu_wme('"+notificationid+"','"+url+"');\" id='"+notificationid+"' class='notification'><div style='float: left;margin-right: 10px;width: 20px;height: 20px;padding: 15px;border-radius: 100%;font-size: 1.7em;overflow: hidden;margin-left: -5px;margin-top: -5px;margin-bottom: -5px;'><div style='margin-left: -8px;margin-top: -6px;'>"+fu_ctl(emoji)+"</div></div><div style='min-width:250px;'>"+message+"</div></div>"+aa("uiNotification").innerHTML+""; if (sticky==false){ setTimeout("fu_wme('"+notificationid+"','false');", 10000);} return notificationid;} function fu_wme(id,url){ if (aa(id)!=undefined){ aa(id).remove(); if (url=="reload"){ window.location.reload();}else{ if (url!="false"){ if (url.startsWith("http")){ window.location.replace(url);}else{ fu_euy(url);}} }} } function fu_ygh(message){ notificationid="notification_"+fu_sjw(30)+""; aa("uiAlert").innerHTML="<div onclick=\"fu_mfj('"+notificationid+"');\" id='"+notificationid+"' class='notification hide'>"+message+"</div>"; setTimeout(function(){ if (aa(notificationid)!=undefined){ aa(notificationid).classList.remove("hide"); aa(notificationid).classList.add("show");}}, 100); setTimeout("fu_mfj('"+notificationid+"');", 5000);} function fu_mfj(id){ if (aa(id)!=undefined){ aa(id).classList.remove("show"); aa(id).classList.add("hide"); setTimeout(function(){ if (aa(id)!=undefined){ aa(id).remove();}}, 1000);}} function fu_csf(){ if (window.innerWidth>=700 && s_width<700){ s_width=window.innerWidth; fu_euy(sp);} if (window.innerWidth<700 && s_width>=700){ s_width=window.innerWidth; fu_euy(sp);} if (window.innerWidth>=1100 && s_width<1100){ s_width=window.innerWidth; fu_euy(sp);} if (window.innerWidth<1100 && s_width>=1100){ s_width=window.innerWidth; fu_euy(sp);} if (s_app_forcedisplay=="false"){ if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches){ if (s_mode=="light"){ fu_rcg("dark"); s_mode="dark"; fu_ndu(s_structure); fu_lmn();}} if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches){ if (s_mode=="dark"){ fu_rcg("light"); s_mode="light"; fu_ndu(s_structure); fu_lmn();}} }else{ if (s_app_forcedisplay=="dark"){ if (s_mode=="light"){ fu_rcg("dark"); s_mode="dark"; fu_ndu(s_structure); fu_lmn();}} if (s_app_forcedisplay=="light"){ if (s_mode=="dark"){ fu_rcg("light"); s_mode="light"; fu_ndu(s_structure); fu_lmn();}} } if (document.activeElement.tagName=="INPUT"){ if (s_body_input==false){ s_body_input=true; if (document.activeElement.hasAttribute('id')){ s_body_input_last=document.activeElement.id;} document.body.classList.add("active_input"); document.body.dispatchEvent(new Event("scroll")); fu_aqh();}}else{ if (s_body_input==true){ s_body_input=false; document.body.classList.remove("active_input"); document.body.dispatchEvent(new Event("scroll")); fu_aqh();}} if (document.activeElement.tagName=="TEXTAREA"){ if (s_body_livearea==false){ s_body_livearea=true; if (document.activeElement.hasAttribute('id')){ s_body_livearea_last=document.activeElement.id;} document.body.classList.add("active_livearea"); document.body.dispatchEvent(new Event("scroll")); fu_aqh();}}else{ if (s_body_livearea==true){ s_body_livearea=false; document.body.classList.remove("active_livearea"); document.body.dispatchEvent(new Event("scroll")); fu_aqh();}} if (document.body.classList.contains("active_livearea")==true){ fu_aqh();} if (aa("container_modl")){ var nowscroll=aa("container_modl").scrollTop; if (nowscroll!=s_scroll_modl){ fu_ikw();}
s_scroll_modl=nowscroll;}else{ s_scroll_modl=0;} if (ab("TEXTAREA")){ runactions = ab("TEXTAREA"); [].slice.call(runactions).forEach(function(item){ if (item.hasAttribute("forcefocus")==true){ if (item.getAttribute("forcefocus")!="done"){ item.setAttribute('forcefocus', 'done'); item.blur(); item.setAttribute('autofocus', 'autofocus'); item.focus();}} if (item.hasAttribute("activated")==false){ var datathis = item.value; datathis=datathis.replace(/\s\s\s\s/g, "\n\n"); item.value = datathis; item.setAttribute('style', 'overflow:hidden;'); item.setAttribute('activated', 'true');}else{ item.style.height = (item.scrollHeight-30)+'px';} if (item.hasAttribute("charcost")==true){ var costcase=item.getAttribute("charcostcase"); var size=parseInt(item.getAttribute("maxsize")); var textinbox=item.value; var urlmatches = textinbox.match(/\bhttps?:\/\/([^\<\n\s]+)\b/gi); fu_lgl(urlmatches, function(id){ var data=urlmatches[""+id+""]; textinbox=textinbox.replace(data, "1234567890123456789012345678901234567890");}); var count=textinbox.length; var totalcost=Math.round(size-count); if (aa(costcase)){ fu_ogv(costcase,"<div style='font-variant-numeric: tabular-nums;'>"+totalcost+"</div>");}} });} if (ac("emojiconvert")){ runemojies = ac("emojiconvert"); [].slice.call(runemojies).forEach(function(item){ var source=item.getAttribute("alt"); source=fu_qdo(source); item.setAttribute('alt', source); item.classList.remove("emojiconvert");});} if (ab("TRANS")){ runtranslations = ab("TRANS"); [].slice.call(runtranslations).forEach(function(item){ if (item.hasAttribute("done")==false){ if (fu_hgy(item)){ var newid="uitrans_"+fu_sjw(40)+""; item.setAttribute('done', "true"); item.setAttribute('id', newid); fu_ljo(newid);}} });} if (ab("ACTION")){ runactions = ab("ACTION"); [].slice.call(runactions).forEach(function(item){ var done=false; var type=item.getAttribute("type"); if (type=="inview_load_comments"){ if (s_httprequests<=2){ if (fu_hgy(item)){ var send_conversation=item.getAttribute("conversation"); var send_count=item.getAttribute("count"); var send_comment=item.getAttribute("comment"); fu_nzs(send_conversation,send_count,send_comment); done=true;}} } if (type=="inview_load_comments_pinned"){ if (s_httprequests<=2){ if (fu_hgy(item)){ var send_conversation=item.getAttribute("conversation"); fu_ddm(send_conversation); done=true;}} } if (type=="inview_load_translate"){ if (s_httprequests<=2){ if (fu_hgy(item)){ var send_container=item.getAttribute("container"); var send_source=item.getAttribute("source"); var send_target=item.getAttribute("target"); var send_text=fu_qdo(item.getAttribute("text")); if (item.hasAttribute("replace")==true){ var send_replace=item.getAttribute("replace"); fu_qbw(send_container,send_source,send_target,send_text,send_replace);}else{ fu_qbw(send_container,send_source,send_target,send_text);}
done=true;}} } if (type=="inview_item_checkup"){ if (fu_hgy(item)){ var send_type=item.getAttribute("item_type"); var send_last=item.getAttribute("item_last"); var send_resource=item.getAttribute("item_resource"); var send_resource_sub=item.getAttribute("item_resource_sub"); var send_function=item.getAttribute("item_function"); sic=true; sic_type=send_type; sic_last=send_last; sic_resource=send_resource; sic_resource_sub=send_resource_sub; sic_function=send_function; done=true;}} if (type=="inview_load_metadata"){ if (s_httprequests<=2){ if (fu_hgy(item)){ var send_element=item.getAttribute("element"); var send_url=item.getAttribute("url"); fu_syb(send_element,send_url,false); done=true;}} } if (type=="inview_load_metadata_light"){ if (s_httprequests<=2){ if (fu_hgy(item)){ var send_element=item.getAttribute("element"); var send_url=item.getAttribute("url"); fu_syb(send_element,send_url,true); done=true;}} } if (type=="inview_load_videos_youtube"){ if (s_httprequests<=2){ if (fu_hgy(item)){ var send_element=item.getAttribute("element"); var send_url=item.getAttribute("url"); var send_goto=item.getAttribute("goto"); fu_tob(send_element,send_url,send_goto); done=true;}} } if (type=="inview_load_emoji"){ if (s_httprequests<=2){ if (fu_hgy(item)){ var send_element=item.getAttribute("element"); var send_text=item.getAttribute("text"); fu_nzd(send_element,send_text); done=true;}} } if (type=="inview_load_preview_conversation"){ if (s_httprequests<=2){ if (fu_hgy(item)){ var send_element=item.getAttribute("element"); var send_conversation=item.getAttribute("conversation"); var send_header=true; if (item.hasAttribute("header")){ var send_header=item.getAttribute("header");}
fu_khk(send_element,send_conversation,send_header); done=true;}} } if (type=="inview_load_preview_comment"){ if (s_httprequests<=2){ if (fu_hgy(item)){ var send_element=item.getAttribute("element"); var send_conversation=item.getAttribute("conversation"); var send_comment=item.getAttribute("comment"); var send_header=true; if (item.hasAttribute("header")){ var send_header=item.getAttribute("header");}
fu_rhr(send_element,send_conversation,send_comment,send_header); done=true;}} } if (type=="inview_load_mention"){ if (s_httprequests<=2){ if (fu_hgy(item)){ var send_element=item.getAttribute("element"); var send_alias=item.getAttribute("alias"); fu_ajr(send_element,send_alias); done=true;}} } if (type=="inview_load_cafe"){ if (s_httprequests<=2){ if (fu_hgy(item)){ var send_element=item.getAttribute("element"); var send_alias=item.getAttribute("alias"); fu_jhz(send_element,send_alias); done=true;}} } if (type=="inview_loadmore_pagefeed"){ if (fu_hgy(item)){ var send_offset=item.getAttribute("offset"); fu_bau(send_offset); done=true;}} if (type=="inview_loadmore_pagecafes"){ if (fu_hgy(item)){ var send_offset=item.getAttribute("offset"); fu_emq(send_offset); done=true;}} if (type=="inview_loadmore_pageprofile"){ if (fu_hgy(item)){ var send_offset=item.getAttribute("offset"); var send_alias=item.getAttribute("alias"); var send_pinned=item.getAttribute("pinned"); var send_tagged=item.getAttribute("tagged"); fu_dxw(send_offset,send_alias,send_pinned,send_tagged); done=true;}} if (type=="inview_loadmore_pagechat"){ if (fu_hgy(item)){ var send_offset=item.getAttribute("offset"); var send_chat=item.getAttribute("chat"); fu_qnu(send_offset,send_chat); done=true;}} if (type=="inview_loadmore_pagecafe"){ if (fu_hgy(item)){ var send_offset=item.getAttribute("offset"); var send_alias=item.getAttribute("alias"); var send_pinned=item.getAttribute("pinned"); var send_tagged=item.getAttribute("tagged"); fu_ldm(send_offset,send_alias,send_pinned,send_tagged); done=true;}} if (type=="inview_translate_run"){ if (s_httprequests_translate<=1){ if (fu_hgy(item)){ var send_element=item.getAttribute("element"); var send_text=item.getAttribute("text"); fu_ait(send_element,send_text); done=true;}} } if (done==true){ item.remove();}});} if (ab("TIMESTAMP")){ runactions = ab("TIMESTAMP"); [].slice.call(runactions).forEach(function(item){ var done=false; var time=item.getAttribute("time"); if (fu_hgy(item)==true){ var newtime=fu_hms(time); if (item.innerHTML!=newtime){ item.setAttribute("data-title",fu_tlv(time)); item.innerHTML=newtime;}} });} if (window.innerWidth!=s_width){ s_width=window.innerWidth; fu_ndu(s_structure);} if (s_httprequests<=-1){ s_httprequests=0;} if (s_httprequests_translate<=-1){ s_httprequests_translate=0;}
fu_ngi("Active Network Requests: "+s_httprequests+""); setTimeout("fu_csf()", 400);} function fu_cks(){ if (s_checkups==true){ fu_nrq("https://"+s_domain+"/app-token.txt?version="+s_timestamp+"",function(result){ if (result!="" && !result.includes("error")){ if (result!=s_token){ if (s_token_alert==false){ s_token_alert=fu_qkr("The app has been updated, tap here to reload.","🎉","reload",true);}}else{ if (s_token_alert!=false){ fu_wme(s_token_alert,"false"); s_token_alert=false;} setTimeout("fu_cks()", 600000);}}else{ if (s_token_alert!=false){ fu_wme(s_token_alert,"false"); s_token_alert=false;}} },5000);}else{ setTimeout("fu_cks()", 5000);}} function fu_lkl(){ if (s_checkups==true){ fu_agt(); setTimeout("fu_lkl()", 300000);}else{ setTimeout("fu_lkl()", 5000);}} var checkupServerEvent=false; var checkupServerEventDelay=false; function fu_xfy(){ if (s_checkups==true){ if (su_id!=null){ var item=""; var delay=1000; var timeout=2000; if (sic==true){ var item="?item=true&type="+sic_type+"&last="+sic_last+"&resource="+sic_resource+"&resource_sub="+sic_resource_sub+"";} if (checkupServerEvent==false){ checkupServerEvent=fu_sjw(20); if (checkupServerEventDelay==true){ delay=8000; timeout=5000;}
fu_knz("https://"+s_hostname+"/get_account_checkup"+item+"",function(result){ checkupServerEvent=false; var response = fu_leh(result); if (response["fail"]==undefined){ checkupServerEventDelay=false; if (response["system_api_error"]!=undefined){ if (response["system_api_error"]=="noauth"){ fu_pml();}} if (response["response_data"]!=undefined){ if (response["response_data"]!=""){ if (response["response_data"]["item_foundnew"]==true){ if (aa("checkup_item_canview")!=undefined){ if (fu_hgy(aa("checkup_item_canview"),false)){ setTimeout(""+sic_function+" fu_ikw();", 5); setTimeout("fu_ikw();", 500); sic=false; sic_type="false"; sic_last="false"; sic_resource="false"; sic_resource_sub="false"; sic_function="";}} }
s_timestamp=response["system_api_timestamp"]; su_avatar=response["response_data"]["info_avatar"]; su_header=response["response_data"]["info_header"]; su_name=response["system_account_name"]; if (aa("uiCheckupNotifications")){ if (response["response_data"]["notifications"]==0){ fu_ogv("uiCheckupNotifications",""+fu_slu("bell")+"");}else{ if (s_width>=700){ fu_ogv("uiCheckupNotifications",""+fu_slu("bell-fill")+"&ensp;"+fu_euw(response["response_data"]["notifications"])+"");}else{ fu_ogv("uiCheckupNotifications",""+fu_slu("bell-fill")+"");}} } if (aa("uiCheckupMessages")){ if (response["response_data"]["messages"]==0){ fu_ogv("uiCheckupMessages",""+fu_slu("envelope")+"");}else{ if (s_width>=700){ fu_ogv("uiCheckupMessages",""+fu_slu("envelope-fill")+"&ensp;"+fu_euw(response["response_data"]["messages"])+"");}else{ fu_ogv("uiCheckupMessages",""+fu_slu("envelope-fill")+"");}} } if (suc_notifications < response["response_data"]["notifications"]){ if (suc_notifications==0){ }} var titlecount=response["response_data"]["messages"]+response["response_data"]["notifications"]; fu_ovf(titlecount); var lastonlinelist=fu_low('ui_generate_menu_online'); var lastonlinehash=fu_low('ui_generate_menu_online_hash'); fu_paa('ui_generate_menu_online',response["response_data"]["friends_online"]); cachedata=response["response_data"]["friends_online"]; var newlist=""; if (cachedata!=false){ fu_lgl(cachedata, function(id){ var online='<text class="online_'+cachedata[""+id+""]["alias"]+'"><div class="badge" style="float: right;margin-right: -60px;font-size: 0.7em;"><div style="background:rgb(199, 82, 82);border-radius: 5px;width: 8px;height: 8px;display: inline-block;"></div> Offline</div></text>'; if (fu_rkw(cachedata[""+id+""]["seen"])<=60){ if (fu_rkw(cachedata[""+id+""]["active"])<=60){ var online='<text class="online_'+cachedata[""+id+""]["alias"]+'"><div class="badge online" style="float: right;margin-right: -60px;font-size: 0.7em;"><div style="background:rgb(82, 199, 135);border-radius: 5px;width: 8px;height: 8px;display: inline-block;"></div> Online</div></text>';}else{ var online='<text class="online_'+cachedata[""+id+""]["alias"]+'"><div class="badge idle" style="float: right;margin-right: -60px;font-size: 0.7em;"><div style="background:rgb(199, 144, 82);border-radius: 5px;width: 8px;height: 8px;display: inline-block;"></div> Idle</div></text>';}}
newlist=""+newlist+"<a href=\"javascript:fu_fvt('"+cachedata[""+id+""]["alias"]+"');\" class='multiline' style='padding-right: 70px;'><img src='"+s_imagecache+"?url="+cachedata[""+id+""]["avatar"]+"&size=88' class='avatar' alt='Avatar image for account "+cachedata[""+id+""]["name"]+"'>"+online+"&ensp;"+fu_ctl(cachedata[""+id+""]["name"])+"<div class='subline'>@"+cachedata[""+id+""]["alias"]+"</div></a>";}); var newhash=newlist.hashCode(); if (newhash!=lastonlinehash){ fu_paa('ui_generate_menu_online_hash', newhash); fu_oen("container_friends_online_list"); fu_qak("container_friends_online_list", "<div class='section'><h4 style='margin-top: 0px;'>Online Friends</h4><div id='gen_myfriend_list'></div></div>",true); fu_qak("gen_myfriend_list", newlist);}}else{ fu_paa('ui_generate_menu_online_hash',"blank"); fu_oen("container_friends_online_list"); fu_qak("container_friends_online_list", "<div class='section'><h4 style='margin-top: 0px;'>Online Friends</h4><div style='text-align:center;'>No friends online</div></div>",true);} var lastcafelist=fu_low('ui_generate_menu_cafes'); var lastcafehash=fu_low('ui_generate_menu_cafes_hash'); fu_paa('ui_generate_menu_cafes',response["response_data"]["cafes_recent"]); cachedata=response["response_data"]["cafes_recent"]; var newlist=""; if (cachedata!=false){ fu_lgl(cachedata, function(id){ var time=fu_hms(cachedata[""+id+""]["activity"]); var timelocal=fu_tlv(cachedata[""+id+""]["activity"]); newlist=""+newlist+"<a href='/!"+cachedata[""+id+""]["alias"]+"' class='multiline'><img src='"+s_imagecache+"?url="+cachedata[""+id+""]["avatar"]+"&size=88' class='avatar' alt='Avatar image for café "+cachedata[""+id+""]["name"]+"'>&ensp;"+fu_ctl(cachedata[""+id+""]["name"])+"<div class='subline'><timestamp time='"+cachedata[""+id+""]["activity"]+"' data-title='"+timelocal+"'>"+time+"</timestamp></div></a>";}); var newhash=newlist.hashCode(); if (newhash!=lastcafehash){ fu_paa('ui_generate_menu_cafes_hash', newhash); fu_oen("container_cafes_list"); fu_qak("container_cafes_list", "<div class='section'><h4 style='margin-top: 0px;'>My Cafés</h4><div id='gen_mycafe_list'></div></div>",true); fu_qak("gen_mycafe_list", newlist);}}else{ fu_paa('ui_generate_menu_cafes_hash',"blank"); fu_oen("container_cafes_list"); fu_qak("container_cafes_list", "<div class='section'><h4 style='margin-top: 0px;'>My Cafés</h4><div style='text-align:center;'>Not in any Cafés</div></div>",true);}
suc_notifications=response["response_data"]["notifications"]; suc_messages=response["response_data"]["messages"]; su_pro=response["response_data"]["info_pro"]; suc_pro_expire=response["response_data"]["info_pro_expire"]; suc_pro_expire_seconds=response["response_data"]["info_pro_expire_seconds"];}else{ fu_euy('/error/500');}} }else{ checkupServerEventDelay=true;}
fu_ikw();},timeout);} if (s_embed==false){ setTimeout("fu_xfy()", delay);}} }else{ setTimeout("fu_xfy()", 5000);}} function fu_lmn(){ var frosting="-webkit-backdrop-filter: blur(20px) saturate(200%)!important;-moz-backdrop-filter: blur(20px) saturate(200%)!important;backdrop-filter: blur(20px) saturate(200%)!important;"; var ua = window.navigator.userAgent.toLowerCase(); var os_iOS = ua.indexOf('iphone') > -1 || ua.indexOf('ipad') > -1 || ua.indexOf('macintosh') > -1 && 'ontouchend' in document; var os_iOSApp = ua.indexOf('iphone') > -1 && ua.indexOf('heycafe_iosapp') > -1 && 'ontouchend' in document; var os_Android = ua.indexOf('android') > -1; var os_AndroidApp = ua.indexOf('android') > -1 && ua.indexOf('heycafe_androidapp'); var detect_engine_webkit = ua.indexOf('applewebkit') > -1; var detect_engine_gecko = ua.indexOf('gecko') > -1 && ua.indexOf('firefox') > -1; var os_macOS = ua.indexOf('macintosh'); accent=s_accent; if (s_app_colour!="false"){ accent=s_app_colour;} if (detect_engine_webkit==true){ s_renderengine="webkit";} if (os_iOS==true){ s_device="iOS";} if (os_iOSApp==true){ s_device="NativeiOSApp"; s_pwa=true;} if (os_Android==true){ s_device="Android";} if (os_AndroidApp==true){ s_device="NativeAndroidApp"; s_pwa=true;} if (os_macOS==true){ s_device="Mac";} if (detect_engine_gecko==true){ s_lowpowerdevice=true;} if (s_device=="iOS" || s_device=="Android"){ s_pwa_can=true;} if (window.matchMedia('(display-mode: standalone)').matches){ s_pwa=true;} if (window.navigator.standalone){ if (window.navigator.standalone==true){ s_pwa=true;}} if (s_device=="NativeiOSApp"){ fu_yax("loader", "#uiNotification", "margin-top:calc(env(safe-area-inset-top) + 0px);"); aa("uiPhoneNotch").innerHTML='<div id="uiPhoneNotchSub" style="background:rgba(0,0,0,0.8);position: fixed;left: 0px;top: -10px;width: 100%;height: calc(env(safe-area-inset-top) + 10px);z-index: 50000;'+frosting +'"></div>';} if (s_device=="iOS" && s_pwa==true){ fu_yax("loader", "#uiNotification", "margin-top:calc(env(safe-area-inset-top) + 0px);"); aa("uiPhoneNotch").innerHTML='<div id="uiPhoneNotchSub" style="background:rgba(0,0,0,0.8);position: fixed;left: 0px;top: -10px;width: 100%;height: calc(env(safe-area-inset-top) + 10px);z-index: 50000;'+frosting +'"></div>';}} function fu_wxl(){ if (s_pwa==true){ viewport = ad("meta[name=viewport]"); viewport.setAttribute('content', 'viewport-fit=cover, width=device-width, initial-scale=1, user-scalable=no');}
fu_nqx("Making some checks"); fu_dvh();} function fu_dvh(){ var serverid=fu_ndy(); s_hostname=ss[serverid]["hostname"]; fu_nqx("Selecting endpoint"); fu_bxp();} function fu_bxp(){ fu_nqx("Connecting to server"); var a = performance.now(); fu_knz("https://"+s_hostname+"?session="+su_session+"",function(result){ var response = fu_leh(result); var b = performance.now(); var speed=b-a; fu_nqx("Endpoint speed was "+speed+"ms"); fu_kay(s_hostname,"speed",speed); fu_kay(s_hostname,"online",true); if (response["system_api_timestamp"]!=undefined){ s_timestamp=response["system_api_timestamp"]; s_authsession=response["system_authsession"]; if (response["system_account_id"]!=undefined){ if (response["system_account_id"]==false){ su_session=null; su_alias=null; su_id=null; su_name=null; su_language="en"; fu_kym("ses_su_session"); fu_kym("ses_su_alias"); fu_kym("ses_su_id"); fu_kym("ses_su_name"); fu_kym("ses_su_language");} if (response["system_account_id"]!=false){ su_session=response["system_account_session"]; su_alias=response["system_account_alias"]; su_id=response["system_account_id"]; su_name=response["system_account_name"]; su_language=response["system_account_language"]; su_avatar=response["newsession_account_avatar"]; su_header=response["newsession_account_header"]; su_pro=response["newsession_account_pro"]; su_admin=response["newsession_account_admin"]; su_moderator=response["newsession_account_moderator"]; s_app_colour=response["newsession_app_colour"]; s_app_stats=response["newsession_app_stats"]; s_app_reducemotion=response["newsession_app_reducemotion"]; s_app_hidesuggestions=response["newsession_app_hidesuggestions"]; s_app_forcedisplay=response["newsession_app_forcedisplay"]; s_app_scaledisplay=response["newsession_app_scaledisplay"]; s_app_reactions=response["newsession_app_reactions"]; var renderchangeforce=false; if (s_app_colour!="false"){ renderchangeforce=true; fu_lmn();} if (s_app_reducemotion!="false"){ renderchangeforce=true;} if (s_app_hidesuggestions!="false"){ renderchangeforce=true;} if (s_app_forcedisplay!="false"){ renderchangeforce=true;} if (s_app_scaledisplay!="false"){ renderchangeforce=true;} if (renderchangeforce==true){ fu_rcg(s_mode); fu_lmn();}
fu_qex("ses_su_session", su_session); fu_qex("ses_su_alias", su_alias); fu_qex("ses_su_id", su_id); fu_qex("ses_su_name", su_name); fu_qex("ses_su_language", su_language);}}
fu_nqx("Host time sync of "+response["system_api_timestamp"]+""); fu_nqx("Done"); fu_qaf(); fu_dcy(); setTimeout(function(){ fu_ond();}, 40);}else{ fu_nqx("Load failed, trying again"); setTimeout(function(){ fu_pml();}, 100);}},2000);} function fu_ond(){ if (s_pwa==false){ if (s_pwa_can==true){ fu_rrw((window.screen.width*window.devicePixelRatio),(window.screen.height*window.devicePixelRatio),function(image){ var spash = document.createElement('link'); spash.href = image; spash.media = '(device-width: '+window.screen.width+'px) and (device-height: '+window.screen.height+'px) and (-webkit-device-pixel-ratio: '+window.devicePixelRatio+')'; spash.rel = "apple-touch-startup-image"; document.head.appendChild(spash);});}}
s_token=ad('meta[name="app-token"]').content; if (window.location !== window.parent.location){ s_iframesource=window.parent.location; fu_cwa();} if (fu_yrj("ses_s_beta")!=""){ if (fu_yrj("ses_s_beta")=="true"){ if (s_domain=='hey.cafe'){ if (sp.startsWith("/share")==false && sp.startsWith("/request")==false && sp.startsWith("/embed")==false){ fu_scx('ses_s_beta', 'true', 60); fu_qkr("Hey you should be on beta... Redirecting now...","😎"); setTimeout("window.location.replace('https://beta.hey.cafe"+sp+"');", 500);}} }} if (s_domain=="beta.hey.cafe"){ fu_scx('ses_s_beta', 'true', 60);}
fu_csf(); fu_xfy(); fu_lkl(); setTimeout("fu_cks()", 600000);} function fu_ngi(message){ if (s_debug==true){ console.log(message);}} function fu_nib(element){ if (aa(element)){ var data=aa(element).innerHTML; data=fu_zls(data); navigator.clipboard.writeText(data); fu_ygh("Copied to clipboard");}else{ fu_ygh("Can't copy");}} function fu_jxu(element, content){ element.parentNode.fu_jxu(content, element);} function fu_byh(element, content){ element.parentNode.fu_jxu(content, element.nextSibling);} function fu_zls(input){ var e = document.createElement('div'); e.innerHTML = input; return e.childNodes[0].nodeValue;} function fu_slu(string){ return "<img alt='"+string+"' class='svgicon' src='https://assets.heycafecdn.com/bootstrap_icons/svg/"+string+".svg' style='width: 1.2em;margin-left: 2px;margin-right: 2px;display: inline;vertical-align: text-top;'>";} function fu_knz(url, callback, maxtime, cache, credentials){ s_httprequests=s_httprequests+1; var queryString = ""; var hash=url.hashCode(); if (s_authsession!=null){ queryString=""+queryString+"http_authsession="+s_authsession+""; if (document.hidden){ queryString=""+queryString+"&http_backgroundtask=true";}} var timeout=10000; var storecache=false; var cachefound=false; if (maxtime!=undefined){ if (maxtime!=false){ timeout=maxtime;}} if (cache!=undefined){ storecache=cache;} if (credentials==undefined){ credentials=true;} if (storecache==true){ if (fu_low('gethttp_cache_storage_'+hash+'')!=null){ cachefound=true;}} if (cachefound==false){ var xhr = new XMLHttpRequest(); xhr.timeout = timeout; xhr.withCredentials = credentials; xhr.onreadystatechange = function(){ if(xhr.readyState==4){ s_httprequests=s_httprequests-1; content = xhr.responseText; if (content==""){ content="{ \"fail\": \"page_error\", \"system_api_error\": true }";} if (storecache==true){ fu_paa('gethttp_cache_storage_'+hash+'',content);}
callback(content);}else{ if(xhr.readyState==4 && xhr.status!=200){ s_httprequests=s_httprequests-1; callback("{ \"fail\": \"unknown\", \"system_api_error\": true }");}} }
xhr.ontimeout = function(){ s_httprequests=s_httprequests-1; callback("{ \"fail\": \"timeout\", \"system_api_error\": true }");}
xhr.open("POST", url, true); xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"); xhr.send(queryString);}else{ s_httprequests=s_httprequests-1; var content=fu_low('gethttp_cache_storage_'+hash+''); callback(content);}} function fu_hhf(url, data, callback, cacheclear, credentials){ s_httprequests=s_httprequests+1; var purgecache=true; if (cacheclear!=undefined){ purgecache=cacheclear;} if (credentials==undefined){ credentials=true;} var queryString = ""; var xhr = new XMLHttpRequest(); xhr.withCredentials = credentials; xhr.onreadystatechange = function(){ if(xhr.readyState==4){ s_httprequests=s_httprequests-1; content = xhr.responseText; if (content==""){ content="{ \"fail\": \"page_error\", \"system_api_error\": true }";} if (purgecache==true){ fu_agt();}
callback(content);}}
xhr.open("POST", url, true); if (s_authsession!=null){ queryString=""+queryString+"http_authsession="+s_authsession+""; if (document.hidden){ queryString=""+queryString+"&http_backgroundtask=true";}} var queryString = "&data="+data; xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"); xhr.send(queryString);} function fu_nrq(url, callback, maxtime, credentials){ s_httprequests=s_httprequests+1; var xhr = new XMLHttpRequest(); var timeout=10000; if (maxtime!=undefined){ timeout=maxtime;} if (credentials==undefined){ credentials=true;}
xhr.timeout = timeout; xhr.withCredentials = credentials; xhr.onreadystatechange = function(){ if(xhr.readyState==4){ s_httprequests=s_httprequests-1; content = xhr.responseText; if (content==""){ content="{ \"fail\": \"page_error\", \"system_api_error\": true }";}
callback(content);}else{ if(xhr.readyState==4 && xhr.status!=200){ s_httprequests=s_httprequests-1; callback("{ \"fail\": \"unknown\", \"system_api_error\": true }");}} }
xhr.ontimeout = function(){ s_httprequests=s_httprequests-1; callback("{ \"fail\": \"timeout\", \"system_api_error\": true }");}
xhr.open("GET", url, true); xhr.send();} function fu_xpp(hex){ var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex); return result ? { r: parseInt(result[1], 16),
g: parseInt(result[2], 16),
b: parseInt(result[3], 16) } : null;} function fu_xlz(r,g,b){ r = r.toString(16); g = g.toString(16); b = b.toString(16); if (r.length==1){ r = "0"+r;} if (g.length==1){ g = "0"+g;} if (b.length==1){ b = "0"+b;} return "#"+r + g + b;} function fu_art(col, amt){ if (col.includes("rgb")){ col=col.replace("rgb(", ""); col=col.replace(")", ""); col=col.replace(/\s/g, ''); var arr=col.split(","); col=fu_xlz(parseInt(arr[0]),parseInt(arr[1]),parseInt(arr[2]));}
col = col.replace(/^#/, ''); if (col.length === 3) col = col[0] + col[0] + col[1] + col[1] + col[2] + col[2]; let [r, g, b] = col.match(/.{2}/g); ([r, g, b] = [parseInt(r, 16) + amt, parseInt(g, 16) + amt, parseInt(b, 16) + amt]); r = Math.max(Math.min(255, r), 0).toString(16); g = Math.max(Math.min(255, g), 0).toString(16); b = Math.max(Math.min(255, b), 0).toString(16); const rr = (r.length < 2 ? '0' : '') + r; const gg = (g.length < 2 ? '0' : '') + g; const bb = (b.length < 2 ? '0' : '') + b; var hex='#'+rr+''+gg+''+bb+''; var rgb=fu_xpp(hex); return 'rgb('+rgb['r']+','+rgb['g']+','+rgb['b']+')';} function fu_rsd(col){ if (col.includes("rgb")){ col=col.replace("rgb(", ""); col=col.replace(")", ""); col=col.replace(/\s/g, ''); var arr=col.split(","); col=fu_xlz(parseInt(arr[0]),parseInt(arr[1]),parseInt(arr[2]));}
col = col.replace(/^#/, ''); if (col.length === 3) col = col[0] + col[0] + col[1] + col[1] + col[2] + col[2]; let [r, g, b] = col.match(/.{2}/g); ([r, g, b] = [parseInt(r, 16), parseInt(g, 16), parseInt(b, 16)]); r = Math.max(Math.min(255, r), 0).toString(16); g = Math.max(Math.min(255, g), 0).toString(16); b = Math.max(Math.min(255, b), 0).toString(16); const rr = (r.length < 2 ? '0' : '') + r; const gg = (g.length < 2 ? '0' : '') + g; const bb = (b.length < 2 ? '0' : '') + b; var hex='#'+rr+''+gg+''+bb+''; var rgb=fu_xpp(hex); var brightness = Math.round(((parseInt(rgb['r']) * 299) + (parseInt(rgb['g']) * 587) + (parseInt(rgb['b']) * 114)) / 1000); var textColour = (brightness > 125) ? '#000000' : '#ffffff'; return textColour;} function fu_hpe(col, amt){ if (col.includes("rgb")){ col=col.replace("rgba(", ""); col=col.replace("rgb(", ""); col=col.replace(")", ""); col=col.replace(/\s/g, ''); var rgb=col.split(","); return 'rgba('+parseInt(rgb[0])+','+parseInt(rgb[1])+','+parseInt(rgb[2])+','+amt+')';}else{ return col;}} function fu_fnb(name, blanksend){ if (ad('meta[name="'+name+'"]')){ return ad('meta[name="'+name+'"]').content;}else{ return blanksend;}} function fu_hms(timestamp){ var math_now=s_timestamp.split(""); var math_new=timestamp.split(""); var t1 = new Date(""+math_now[0]+""+math_now[1]+""+math_now[2]+""+math_now[3]+"", (""+math_now[4]+""+math_now[5]+"" - 1), ""+math_now[6]+""+math_now[7]+"", ""+math_now[8]+""+math_now[9]+"", ""+math_now[10]+""+math_now[11]+"", ""+math_now[12]+""+math_now[13]+"", 0); var t2 = new Date(""+math_new[0]+""+math_new[1]+""+math_new[2]+""+math_new[3]+"", (""+math_new[4]+""+math_new[5]+"" - 1), ""+math_new[6]+""+math_new[7]+"", ""+math_new[8]+""+math_new[9]+"", ""+math_new[10]+""+math_new[11]+"", ""+math_new[12]+""+math_new[13]+"", 0); var dif = t1.getTime() - t2.getTime(); var seconds = dif / 1000; if (seconds > ((24*3600)*2)){ return Math.floor(seconds/(24*3600))+" days ago";} if (seconds > 24*3600){ return "Yesterday";} if (seconds > (3600*2)){ return Math.floor(seconds/3600)+" hours ago";} if (seconds > 3600){ return "1 hour ago";} if (seconds >= 60 && seconds < 120){ return "1 minute ago";} if (seconds > 60){ return Math.floor(seconds/60)+" minutes ago";} if (seconds==1){ return "1 second ago";} if (seconds < 60){ return Math.floor(seconds)+" seconds ago";}} function fu_rkw(timestamp){ var math_now=s_timestamp.split(""); var math_new=timestamp.split(""); var t1 = new Date(""+math_now[0]+""+math_now[1]+""+math_now[2]+""+math_now[3]+"", (""+math_now[4]+""+math_now[5]+"" - 1), ""+math_now[6]+""+math_now[7]+"", ""+math_now[8]+""+math_now[9]+"", ""+math_now[10]+""+math_now[11]+"", ""+math_now[12]+""+math_now[13]+"", 0); var t2 = new Date(""+math_new[0]+""+math_new[1]+""+math_new[2]+""+math_new[3]+"", (""+math_new[4]+""+math_new[5]+"" - 1), ""+math_new[6]+""+math_new[7]+"", ""+math_new[8]+""+math_new[9]+"", ""+math_new[10]+""+math_new[11]+"", ""+math_new[12]+""+math_new[13]+"", 0); var dif = t1.getTime() - t2.getTime(); var seconds = dif / 1000; return seconds;} function fu_tlv(timestamp){ var secondsago=fu_rkw(timestamp); var nowdate=new Date(); nowdate.setSeconds(nowdate.getSeconds() - secondsago); var finalcode=nowdate.toLocaleString("en-GB", { hour12: true, year: 'numeric', month: 'numeric', day: 'numeric', hour: '2-digit', minute: '2-digit'}); return finalcode;} function fu_uti(wide,tall,media){ s_modl=true; if (wide==undefined){ wide=false;} if (tall==undefined){ tall=false;} if (media==undefined){ media=false;} var offsettop=0; if (s_embed==true){ offsettop=s_embed_position;} if (!aa("container_modl")){ ab("BODY")[0].classList.add("noscroll"); aa("uiModl").innerHTML="<modl style='padding-top: "+offsettop+"px;'><div class='background' onclick='javascript:fu_hbj();'></div><div class='case' id='container_modl_case'><div class='frame' id='container_modl'></div></div><div class='close' onclick='javascript:fu_hbj();'>"+fu_slu("x")+"</div></modl>";}else{ aa("container_modl").innerHTML="";} if (wide==true){ aa("container_modl_case").classList.add("wide");}else{ aa("container_modl_case").classList.remove("wide");} if (tall==true){ aa("container_modl_case").classList.add("tall");}else{ aa("container_modl_case").classList.remove("tall");} if (media==true){ aa("container_modl_case").classList.add("media");}else{ aa("container_modl_case").classList.remove("media");} setTimeout("fu_ikw();", 20); setTimeout("fu_ikw();", 500);} function fu_lwj(resource,type,raw,alt){ if (raw==undefined){ raw=false;} if (alt==undefined){ alt="false";}else{ alt=fu_qdo(alt);} var altrender=""; if (alt!="false"){ altrender="<bubble class='alt_text'>"+fu_ctl(fu_yaa(alt))+"</bubble>";} if (type=="image"){ fu_uti(false,false,true); if (raw==true){ fu_qak("container_modl",""+altrender+"<bubble class='noframe' onclick=\"javascript:fu_hbj();\"><div style=\"position: absolute; width: 100%; top: 20px;z-index: -5;\"><div class=\"loading\"></div></div><div style='text-align: center;'><a href='"+resource+"' target='_blank'><img src='"+resource+"' style='max-width: 100%;width: auto;text-align: center;'></a></div></bubble>");}else{ fu_qak("container_modl",""+altrender+"<bubble class='noframe' onclick=\"javascript:fu_hbj();\"><div style=\"position: absolute; width: 100%; top: 20px;z-index: -5;\"><div class=\"loading\"></div></div><div style='text-align: center;'><a href='"+resource+"' target='_blank'><img source='"+resource+"' nowait='true' useparent='true' class='optimizer_img' style='max-width: 100%;width: auto;text-align: center;'></a></div></bubble>");}} if (type=="video"){ fu_uti(true); fu_qak("container_modl","<bubble><video style='width: 100vw;height: auto;max-height: calc(100vh - 80px);' controls autoplay><source src=\""+resource+"\">Your browser does not support the video tag.</video></bubble>");} if (type=="content"){ fu_uti(true); fu_qak("container_modl","<bubble class='conversation normal'><div class='content' id='modl_content_loadin'><div id='loading'></div></div></bubble>"); fu_nrq(""+resource+"",function(result){ var contents = fu_irl(result); contents=fu_hww(contents); contents=fu_maf(contents); contents=fu_nns(contents); contents=fu_ctl(contents); contents=fu_ltt(contents); fu_oen("modl_content_loadin"); fu_qak("modl_content_loadin",""+contents+"");},10000,false);}} function fu_hbj(){ s_modl=false; if (aa("container_modl")){ ab("BODY")[0].classList.remove("noscroll"); aa("uiModl").innerHTML="";}} function fu_qbb(element,type,source,html){ if (aa(element)){ fu_oen(element); if (type=="external"){ fu_qak(element,'<bubble class="alt1" style="text-align:center;"><h3 style="margin-top:0px;">Want to load content from the external source '+source+'?</h3><div>When you load content from an external source the company hosting this content can see information about you including your location and browser data.<BR><BR><div class="button" style="padding: 30px;padding-top: 15px;padding-bottom: 15px;" onclick="fu_olt(\''+element+'\',\''+html+'\')">Yes load media</div><div style="padding: 30px;padding-top: 15px;padding-bottom: 15px;"><a href="javascript:fu_owi(\''+element+'\',\''+html+'\');">Yes load media (in PIP)</a></div></div></bubble>');} if (type=="internal"){ fu_qak(element,'<bubble class="alt1" style="text-align:center;"><h3 style="margin-top:0px;">Want to load content?</h3><div>Not all attachments are checked to be safe, only open files from accounts you trust. If you find media someone has uploaded as inappropriate please report it.<BR><BR><div class="button" style="padding: 30px;padding-top: 15px;padding-bottom: 15px;" onclick="fu_olt(\''+element+'\',\''+html+'\')">Yes load media</div><div style="padding: 30px;padding-top: 15px;padding-bottom: 15px;"><a href="javascript:fu_owi(\''+element+'\',\''+html+'\');">Yes load media (in PIP)</a></div></div></bubble>');}} setTimeout("fu_ikw();", 20); setTimeout("fu_ikw();", 500);} function fu_olt(element,html){ fu_oen(element); fu_qak(element,fu_qdo(html)); setTimeout("fu_ikw();", 20); setTimeout("fu_ikw();", 500);} function fu_owi(element,html){ fu_oen(element); fu_qak(element,'<bubble class="alt1" style="text-align:center;"><h3 style="margin-top:0px;">Playing in PIP</h3><div>You can navagate away from the page if you wish and the media will stay open.</div></bubble>'); fu_lyb(fu_sjw(30),"<div style='margin-left:-10px;margin-right:-10px;margin-top:-10px;margin-bottom:-10px;'>"+fu_qdo(html)+"</div>");} function fu_lyb(id,content){ if (!aa("popover_"+id)){ fu_qak("uiPopover","<popover id='popover_"+id+"'><div class='close' onclick=\"javascript:fu_kld('"+id+"');\">x</div><div>"+content+"</div></popover>");} setTimeout("fu_ikw();", 20); setTimeout("fu_ikw();", 500);} function fu_kld(id){ if (aa("popover_"+id)){ aa("popover_"+id).remove();}} function fu_ljo(element){ if (aa(element)){ var elements=aa(element).querySelectorAll('*'); if (elements.length>=1){ aa(element).removeAttribute("id"); elements.forEach(el => { if (el.innerHTML!=undefined){ if (el.innerHTML!=""){ var transtext=el.innerHTML; if (transtext.includes("<")==false && transtext.includes(">")==false){ el.innerHTML=fu_wvu(transtext);}} }});}else{ var transtext=aa(element).innerHTML; if (transtext.includes("<")==false && transtext.includes(">")==false){ aa(element).innerHTML=fu_wvu(transtext); aa(element).removeAttribute("id");}} }} function fu_wvu(text){ if (su_language!=null){ var hashsource=""+su_language+"_en_"+text+""; var hash=hashsource.hashCode(); if (fu_hty('translate_'+hash+'')==null){ var transelement="uitrans_"+fu_sjw(40)+""; var transcall="<action type='inview_translate_run' element='"+transelement+"' text='"+text+"'></action>"; return "<span id='"+transelement+"'>"+text+"</span>"+transcall+"";}else{ var response=fu_hty('translate_'+hash+''); return "<span>"+response["text"]+"</span>";}} } function fu_ait(element,text){ s_httprequests_translate=s_httprequests_translate+1; if (su_language!=null && su_language!="en"){ var hashsource=""+su_language+"_en_"+text+""; var hash=hashsource.hashCode(); if (fu_hty('translate_'+hash+'')==null){ if (aa(element)){ var postdata={}; postdata["text"]=ae(fu_qti(fu_qmj(text))); postdata["target"]=su_language; postdata["source"]="en"; postdata=fu_mmy(postdata); var randhostname=fu_bpp(); fu_hhf("https://"+randhostname+"/api/language_translate",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_rmn('translate_'+hash+'',response["response_data"]); s_httprequests_translate=s_httprequests_translate-1; fu_smb(element,response["response_data"]);}else{ s_httprequests_translate=s_httprequests_translate-1;}},false);}}else{ var response=fu_hty('translate_'+hash+''); s_httprequests_translate=s_httprequests_translate-1; fu_smb(element,response);}}else{ s_httprequests_translate=s_httprequests_translate-1;}} function fu_smb(element,response){ if (aa(element)){ fu_oen(element); fu_qak(element,response["text"]); aa(element).removeAttribute("id");}} function fu_jki(element,content){ if (aa(element)){ aa(element).removeAttribute('replc'); aa(element).innerHTML=content;}} function fu_wiu(element){ if (aa(element)){ return aa(element).innerHTML;}else{ return false;}} function fu_qak(element,content,translate){ if (translate==undefined || su_language==null || su_language=="en"){ translate=false;} if (aa(element)){ aa(element).removeAttribute('replc'); if (translate==false){ aa(element).insertAdjacentHTML('beforeend', content);}else{ var transid="trans_"+fu_sjw(30)+""; aa(element).insertAdjacentHTML('beforeend',"<span id='"+transid+"'>"+content+"</span>"); fu_ljo(transid);}} } function fu_qpc(element,content){ if (aa(element)){ aa(element).insertAdjacentHTML('afterbegin', content);}} function fu_oen(element){ if (aa(element)){ aa(element).removeAttribute('replc'); aa(element).innerHTML="";} setTimeout("fu_ikw();", 20); setTimeout("fu_ikw();", 500);} function fu_ogv(element,content){ if (aa(element)){ var hash=content.hashCode(); var replace=true; if (aa(element).getAttribute('replc')){ if (hash==aa(element).getAttribute('replc')){ replace=false;}} if (replace==true){ aa(element).setAttribute('replc', hash); aa(element).innerHTML=content;}} } function fu_yax(parent, name, rules){ if (aa("ui-style-"+parent+"")){ var style = aa("ui-style-"+parent+"");}else{ var style = document.createElement('style'); style.setAttribute("id", "ui-style-"+parent+""); style.type = 'text/css'; ab('head')[0].appendChild(style);}
style.sheet.insertRule(name+"{"+rules+"}", 0);} function fu_qjp(parent){ if (aa("ui-style-"+parent+"")){ aa("ui-style-"+parent+"").remove();}} function fu_ebw(element,textarea,preview){ aa(preview).src=URL.createObjectURL(element.files[0]); fu_djv(element, function(data){ aa(textarea).value=data;});} function fu_xzu(element,textarea,preview,button,onlytype){ var uploadgood=true; var uploadmessage=""; var file=element.files[0]; var size=element.files[0].size; var size_kb=size/1024; var size_mb=size_kb/1024; var types_images = ['image/jpeg', 'image/png', 'image/gif', 'image/webp']; var types_videos = ['video/quicktime', 'video/mp4', 'video/mpeg']; if (button!=false){ aa(button).disabled = true;}
element.style.display = "none"; aa(preview).innerHTML="<div style='text-align:center;margin-top:20px;margin-bottom:20px;'><div id='uploader_temp_header'><strong>Uploading file...</strong><BR><div class='loading'></div></div><div id='uploader_temp_progress'></div><div id='uploader_temp_preview'></div></div>"; if (button==undefined){ button=false;} if (onlytype==undefined){ onlytype=false;} if (onlytype=="images"){ if (types_images.indexOf(file.type)==-1){ uploadgood=false; uploadmessage="You can only upload images";}} if (size_mb>=96){ uploadgood=false; uploadmessage="File is to large, file needs to be 96mb or under";} if (aa(preview)==undefined){ uploadgood=false; uploadmessage="Upload area missing";} if (uploadgood==true){ if (types_images.indexOf(file.type)!==-1){ var previewurl=URL.createObjectURL(file); if (aa("uploader_temp_preview")!=undefined){ aa("uploader_temp_preview").innerHTML="<img style='margin-top:20px;max-width:400px;margin-bottom:10px;' src='"+previewurl+"'>";}}
let data = new FormData(); data.append('file', file); let request = new XMLHttpRequest(); request.withCredentials = true; request.open('POST', "https://"+s_hostname+"/post_temp_file"); if (s_authsession!=null){ request.setRequestHeader("authsession", s_authsession);}
request.upload.addEventListener('progress', function(e){ let percent_complete = (e.loaded / e.total)*100; aa("uploader_temp_progress").innerHTML=""+Math.round(percent_complete)+"%";}); request.addEventListener('load', function(e){ var status=request.status; var data=request.response; var response = fu_leh(data); if (response["system_api_error"]==false && response["response_data"]!=false){ var id=response["response_data"]["filename"]; aa(textarea).value=id; if (aa("uploader_temp_header")!=undefined){ aa("uploader_temp_header").innerHTML="<strong>Finished</strong>"; aa("uploader_temp_progress").innerHTML="Upload is finished, you can now submit."; if (button!=false){ aa(button).disabled = false;}} if (types_videos.indexOf(file.type)!==-1){ if (aa("uploader_temp_header")!=undefined){ aa("uploader_temp_header").innerHTML="<strong>Uploading Preview</strong>"; aa("uploader_temp_progress").innerHTML="We are now uploading the preview"; var previewurl=URL.createObjectURL(file); aa("uploader_temp_preview").innerHTML="<video id=\"main-video\" controls><source type=\""+file.type+"\"></video><canvas id=\"video-canvas\"></canvas>"; ad("#main-video source").setAttribute('src', previewurl); aa("main-video").load(); var canvcx=aa("video-canvas").getContext("2d"); var stages_meta=false; var stages_play=false; var stages_preview=false; aa("main-video").addEventListener('loadedmetadata', function(){ if (stages_preview==false){ aa("video-canvas").width = aa("main-video").videoWidth; aa("video-canvas").height = aa("main-video").videoHeight; stages_meta=true;}}); aa("main-video").addEventListener('canplay', function(){ if (stages_preview==false){ aa("video-canvas").style.display = 'inline'; aa("main-video").currentTime = (aa("main-video").duration/2)/2; stages_play=true;}}); aa("main-video").addEventListener('timeupdate', function(){ if (stages_preview==false){ if (stages_meta==true){ if (stages_play==true){ canvcx.drawImage(aa("main-video"), 0, 0, aa("main-video").videoWidth, aa("main-video").videoHeight); var image = aa("video-canvas").toDataURL('image/jpeg'); aa("main-video").style.display = 'none'; aa("video-canvas").style.display = 'none'; let preview_data = new FormData(); preview_data.append('image', image); preview_data.append('file', aa(textarea).value); stages_preview=true; let preview_request = new XMLHttpRequest(); preview_request.withCredentials = true; preview_request.open('POST', "https://"+s_hostname+"/post_temp_preview"); if (s_authsession!=null){ preview_request.setRequestHeader("authsession", s_authsession);}
preview_request.upload.addEventListener('progress', function(e){ let percent_complete = (e.loaded / e.total)*100; aa("uploader_temp_progress").innerHTML=""+Math.round(percent_complete)+"%";}); preview_request.addEventListener('load', function(e){ var status=preview_request.status; var data=preview_request.response; var response = fu_leh(data); if (response["system_api_error"]==false && response["response_data"]!=false){ var id=response["response_data"]["filename"]; aa("uploader_temp_header").innerHTML="<strong>Finished</strong>"; aa("uploader_temp_progress").innerHTML="Upload is finished, you can now submit."; if (button!=false){ aa(button).disabled = false;}}else{ aa("uploader_temp_header").innerHTML="<strong>Error</strong>"; aa("uploader_temp_progress").innerHTML="Preview upload failed";}}); preview_request.send(preview_data);}} }});}} }else{ aa("uploader_temp_header").innerHTML="<strong>Error</strong>"; aa("uploader_temp_progress").innerHTML="File upload failed";}}); request.send(data);}else{ aa("uploader_temp_header").innerHTML="<strong>Error</strong>"; aa("uploader_temp_progress").innerHTML=uploadmessage;}} function fu_djv(element, callback){ var file = element.files[0]; var reader = new FileReader(); reader.onloadend = function(){ callback(reader.result);}
reader.readAsDataURL(file);} var liveArea_restoretext=""; var liveArea_lastcontent=""; var liveArea_searchkey=""; function fu_vch(element, event){ if (element!=false){ if (element.hasAttribute('id')){ var id=element.id;}else{ var id=fu_sjw(20); element.setAttribute("id", id);} if (element.hasAttribute('formid')){ var formid=element.getAttribute('formid');}else{ var formid=false;}
liveArea_searchkey=fu_sjw(25); if (aa("livearea_tags_"+id+"")==undefined){ var tags = document.createElement('div'); tags.setAttribute("id", "livearea_tags_"+id+""); tags.innerHTML=''; fu_jxu(element,tags);} if (aa("livearea_suggestions_"+id+"")==undefined){ var suggestions = document.createElement('div'); suggestions.setAttribute("id", "livearea_suggestions_"+id+""); suggestions.innerHTML=''; fu_byh(element,suggestions);} if (aa("livearea_extras_"+id+"")==undefined){ var extras = document.createElement('div'); extras.setAttribute("id", "livearea_extras_"+id+""); extras.setAttribute("style", "overflow:hidden;margin-top: -10px;margin-bottom: 5px;"); extras.innerHTML=''; fu_byh(element,extras);} if (aa("livearea_charactercount_"+id+"")==undefined){ fu_qak("livearea_extras_"+id+"","<div id='livearea_charactercount_"+id+"' class='tab' style='float: right;margin-right: 15px;border-radius: 10px;border-top-left-radius: 0px;border-top-right-radius: 0px;font-size: 0.8em;opacity: 0.8;font-weight: 500;padding: 2px;padding-left: 8px;padding-right: 8px;border:1px solid "+cpc_button_background+";background:"+cpc_box_background+";'></div>"); element.setAttribute("charcost", "true"); element.setAttribute("charcostcase", "livearea_charactercount_"+id+"");} if (liveArea_lastcontent!=""){ if (aa("livearea_restore_"+id+"")==undefined){ liveArea_restoretext=liveArea_lastcontent; fu_qak("livearea_extras_"+id+"","<div id='livearea_restore_"+id+"' onclick=\"javascript:fu_aty('"+id+"');\" class='tab' style='float: left;margin-left: 15px;border-radius: 10px;border-top-left-radius: 0px;border-top-right-radius: 0px;font-size: 0.8em;opacity: 0.8;font-weight: 500;padding: 2px;padding-left: 8px;padding-right: 8px;border:1px solid "+cpc_button_background+";background:"+cpc_box_background+";'>Restore</div>");}}else{ if (aa("livearea_restore_"+id+"")==undefined){ fu_qak("livearea_extras_"+id+"","<div id='livearea_restore_"+id+"'></div>");}} var contents=element.value; var entersend=false; if (element.hasAttribute("entersend")==true){ entersend=element.getAttribute("entersend");} if (contents!=""){ liveArea_lastcontent=contents; var contents_search=" "+contents+" "; if (event!=false){ if (event.inputType!="insertReplacementText"){ fu_oen("livearea_suggestions_"+id+"");}} if (event!=false){ if (event.inputType=="insertReplacementText"){ if (contents.includes("@"+event.data)==true){ contents=contents.replace("@"+event.data, "@"+event.data.toLowerCase()); aa(id).value=contents;} if (contents.includes("!"+event.data)==true){ contents=contents.replace("!"+event.data, "!"+event.data.toLowerCase()); aa(id).value=contents;} if (contents.includes(":"+event.data)==true){ contents=contents.replace(":"+event.data, ":"+event.data.toLowerCase()); aa(id).value=contents;}} }
fu_oen("livearea_tags_"+id+""); var matches = contents_search.match(/([^&a-z0-9A-Z\/]\@)([a-z0-9A-Z\-\_]+)/gi); fu_lgl(matches, function(subid){ var data=matches[""+subid+""]; var result = data.match(/(\@)([a-z0-9A-Z\-\_]+)/); if (fu_nzo(contents,result[0])<=1){ fu_sih(id,result[2],liveArea_searchkey,formid);}}); var matches = contents_search.match(/([^&a-z0-9A-Z\/]\!)([a-z0-9A-Z\-\_]+)/gi); fu_lgl(matches, function(subid){ var data=matches[""+subid+""]; var result = data.match(/(\!)([a-z0-9A-Z\-\_]+)/); if (fu_nzo(contents,result[0])<=1){ fu_kwe(id,result[2],liveArea_searchkey,formid);}}); var matches = contents_search.match(/([^&a-z0-9A-Z\/]\:)([a-z0-9A-Z\-\_]+)/gi); fu_lgl(matches, function(subid){ var data=matches[""+subid+""]; var result = data.match(/(\:)([a-z0-9A-Z\-\_]+)/); if (fu_nzo(contents,result[0])<=1){ fu_swa(id,result[2],liveArea_searchkey,formid);}});} if (event!=false){ if (entersend!=false){ if (event.keyCode === 13 || event.inputType=="insertParagraph" || event.inputType=="insertLineBreak"){ aa(entersend).click();}} }} } function fu_nph(element){ setTimeout(function(){ fu_vch(aa(element), false);}, 500); setTimeout(function(){ fu_vch(aa(element), false);}, 1200);} function fu_owk(element, event){ } function fu_aty(element){ aa(element).value=liveArea_restoretext; liveArea_restoretext=liveArea_lastcontent; liveArea_lastcontent=aa(element).value; fu_vch(aa(element),false); fu_ygh("Content has been restored");} function fu_sih(element,search,key,formid){ if (aa(element)){ if (fu_low('livearea_mention_'+search+'')==null){ fu_paa('livearea_mention_'+search+'',"searching"); fu_jki("livearea_suggestions_"+element+"","<bubble class='float_suggestions'>Checking Mention...</bubble>"); fu_knz("https://"+s_hostname+"/get_account_info?query="+search+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_paa('livearea_mention_'+search+'',"found"); fu_paa('livearea_mention_'+search+'_data',response["response_data"]); fu_jqq(element,response["response_data"],formid); fu_oen("livearea_suggestions_"+element+"");}else{ fu_paa('livearea_mention_'+search+'',"not_valid"); fu_tos(element,search,key);}},false,true);}else{ if (fu_low('livearea_mention_'+search+'')=="not_valid"){ fu_tos(element,search,key);}else{ fu_jqq(element,fu_low('livearea_mention_'+search+'_data'),formid);}} }} function fu_jqq(element,content,formid){ if (content!=null){ fu_qak("livearea_tags_"+element+"","<div onclick=\"javascript:fu_qtv('"+element+"','@"+content["alias"]+"','');\" style='display:inline-block;margin-left: 3px;margin-right: 3px;margin-bottom: 3px;padding:5px;padding-left:10px;font-size: 0.7em;padding-right:10px;border-radius: "+cp_elements_radius+"px;border:1px solid "+cpc_button_background+";cursor:pointer;'><img src='"+s_imagecache+"?url="+content["avatar"]+"&size=88' class='avatar' alt='Avatar for "+content["name"]+"' style='display: inline-block;width: 16px;height: 16px;margin-top: -2px;margin-bottom: -4px;margin-left: -4px;'> "+fu_ctl(content["name"])+" @"+content["alias"] +"</div>");}} function fu_tos(element,search,key){ if (aa(element)){ if (liveArea_searchkey==key){ if (fu_low('livearea_mention_search_'+search+'')==null){ fu_paa('livearea_mention_search_'+search+'',"searching"); fu_jki("livearea_suggestions_"+element+"","<bubble class='float_suggestions'>Searching Accounts...</bubble>"); fu_knz("https://"+s_hostname+"/get_search_accounts?search="+ae(fu_qti(search))+"&count=10",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_paa('livearea_mention_search_'+search+'',response["response_data"]); fu_bge(element,search,response["response_data"],key);}else{ fu_oen("livearea_suggestions_"+element+"");}},false,true);}else{ if (fu_low('livearea_mention_search_'+search+'')!="searching"){ fu_bge(element,search,fu_low('livearea_mention_search_'+search+''),key);}} }} } function fu_bge(element,search,data,key){ if (aa(element)){ if (liveArea_searchkey==key){ var suggestions=""; fu_lgl(data["accounts"], function(id){ var content=data["accounts"][""+id+""]; suggestions=suggestions+"<div class=\"minibubble\" onclick=\"javascript:fu_qtv('"+element+"','@"+search+"','@"+content["alias"]+" ');\"><img src='"+s_imagecache+"?url="+content["avatar"]+"&size=88' class='avatar' alt='Avatar for "+content["name"]+"' style='display: inline-block;width: 16px;height: 16px;margin-bottom: -2px;'> "+fu_ctl(content["name"])+"</div>";}); if (suggestions==""){ suggestions="No matches...";}
fu_oen("livearea_suggestions_"+element+""); fu_qak("livearea_suggestions_"+element+"","<bubble class='float_suggestions'>"+suggestions+"</bubble>");}} } function fu_kwe(element,search,key,formid){ if (aa(element)){ if (fu_low('livearea_cafe_'+search+'')==null){ fu_paa('livearea_cafe_'+search+'',"searching"); fu_jki("livearea_suggestions_"+element+"","<bubble class='float_suggestions'>Searching Café...</bubble>"); fu_knz("https://"+s_hostname+"/get_cafe_info?query="+search+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_paa('livearea_cafe_'+search+'',"found"); fu_paa('livearea_cafe_'+search+'_data',response["response_data"]); fu_hvf(element,response["response_data"],formid); fu_oen("livearea_suggestions_"+element+"");}else{ fu_paa('livearea_cafe_'+search+'',"not_valid"); fu_adm(element,search,key);}},false,true);}else{ if (fu_low('livearea_cafe_'+search+'')=="not_valid"){ fu_adm(element,search,key);}else{ fu_hvf(element,fu_low('livearea_cafe_'+search+'_data'),formid);}} }} function fu_hvf(element,content,formid){ if (content!=null){ if (formid!=false && aa("convo_cafearea_"+formid+"_"+content["id"]+"")==undefined){ fu_qak("livearea_tags_"+element+"","<div onclick=\"javascript:fu_gos('"+content["id"]+"','convo_cafearea_"+formid+"','convo_submit_"+formid+"'); fu_nph('"+element+"');\" style='display:inline-block;margin-left: 3px;margin-right: 3px;margin-bottom: 3px;padding:5px;padding-left:10px;font-size: 0.7em;padding-right:10px;border-radius: "+cp_elements_radius+"px;border:1px solid "+cpc_button_background+";background:"+cpc_alt_background+";cursor:pointer;'><img src='"+s_imagecache+"?url="+content["avatar"]+"&size=88' class='avatar' alt='Avatar for "+content["name"]+"' style='display: inline-block;width: 16px;height: 16px;margin-top: -2px;margin-bottom: -4px;margin-left: -4px;'> "+fu_ctl(content["name"])+" !"+content["alias"] +"</div>");}else{ fu_qak("livearea_tags_"+element+"","<div onclick=\"javascript:fu_qtv('"+element+"','!"+content["alias"]+"','');\" style='display:inline-block;margin-left: 3px;margin-right: 3px;margin-bottom: 3px;padding:5px;padding-left:10px;font-size: 0.7em;padding-right:10px;border-radius: "+cp_elements_radius+"px;border:1px solid "+cpc_button_background+";cursor:pointer;'><img src='"+s_imagecache+"?url="+content["avatar"]+"&size=88' class='avatar' alt='Avatar for "+content["name"]+"' style='display: inline-block;width: 16px;height: 16px;margin-top: -2px;margin-bottom: -4px;margin-left: -4px;'> "+fu_ctl(content["name"])+" !"+content["alias"] +"</div>");}} } function fu_adm(element,search,key){ if (aa(element)){ if (liveArea_searchkey==key){ if (fu_low('livearea_cafe_search_'+search+'')==null){ fu_paa('livearea_cafe_search_'+search+'',"searching"); fu_jki("livearea_suggestions_"+element+"","<bubble class='float_suggestions'>Searching For Cafés...</bubble>"); fu_knz("https://"+s_hostname+"/get_search_cafes?search="+ae(fu_qti(search))+"&count=10",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_paa('livearea_cafe_search_'+search+'',response["response_data"]); fu_yjw(element,search,response["response_data"],key);}else{ fu_oen("livearea_suggestions_"+element+"");}},false,true);}else{ if (fu_low('livearea_cafe_search_'+search+'')!="searching"){ fu_yjw(element,search,fu_low('livearea_cafe_search_'+search+''),key);}} }} } function fu_yjw(element,search,data,key){ if (aa(element)){ if (liveArea_searchkey==key){ var suggestions=""; fu_lgl(data["cafes"], function(id){ var content=data["cafes"][""+id+""]; suggestions=suggestions+"<div class=\"minibubble\" onclick=\"javascript:fu_qtv('"+element+"','!"+search+"','!"+content["alias"]+" ');\"><img src='"+s_imagecache+"?url="+content["avatar"]+"&size=88' class='avatar' alt='Avatar for Cafe "+content["name"]+"' style='display: inline-block;width: 16px;height: 16px;margin-bottom: -2px;'> "+fu_ctl(content["name"])+"</div>";}); if (suggestions==""){ suggestions="No matches...";}
fu_oen("livearea_suggestions_"+element+""); fu_qak("livearea_suggestions_"+element+"","<bubble class='float_suggestions'>"+suggestions+"</bubble>");}} } function fu_swa(element,search,key,formid){ if (aa(element)){ fu_oka(element,search,key);}} function fu_oka(element,search,key){ if (aa(element)){ if (liveArea_searchkey==key){ if (fu_low('livearea_emoji_search_'+search+'')==null){ fu_paa('livearea_emoji_search_'+search+'',"searching"); fu_jki("livearea_suggestions_"+element+"","<bubble class='float_suggestions'>Finding Emoji...</bubble>"); fu_knz("https://"+s_hostname+"/get_system_emoji_search?search="+search+"&count=20",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_paa('livearea_emoji_search_'+search+'',response["response_data"]); fu_sig(element,search,response["response_data"],key);}else{ fu_oen("livearea_suggestions_"+element+"");}},false,true);}else{ if (fu_low('livearea_emoji_search_'+search+'')!="searching"){ fu_sig(element,search,fu_low('livearea_emoji_search_'+search+''),key);}} }} } function fu_sig(element,search,data,key){ if (aa(element)){ if (liveArea_searchkey==key){ var suggestions=""; fu_lgl(data, function(id){ var content=data[""+id+""]; suggestions=suggestions+"<div class=\"minibubble\" onclick=\"javascript:fu_qtv('"+element+"',':"+search+"','"+content["emoji"]+"');\">"+fu_ctl(content["emoji"])+" "+fu_ctl(content["alias_a"])+"</div>";}); if (suggestions==""){ suggestions="No matches...";}
fu_oen("livearea_suggestions_"+element+""); fu_qak("livearea_suggestions_"+element+"","<bubble class='float_suggestions'>"+suggestions+"</bubble>");}} } function fu_qtv(element,search,content){ if (aa(element)){ fu_oen("livearea_suggestions_"+element+""); var valuenow=aa(element).value; if (content!=""){ valuenow=valuenow.replace(search, content);}else{ valuenow=valuenow.replace(" "+search, content); valuenow=valuenow.replace(search+" ", content); valuenow=valuenow.replace(search, content);} aa(element).value=valuenow; fu_vch(aa(element),false); aa(element).blur(); aa(element).removeAttribute('autofocus'); aa(element).setAttribute('autofocus', 'autofocus'); aa(element).focus();}}var cp_elements_radius = 16; var cp_elements_align = "left"; var cp_fonts="-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Oxygen-Sans,Ubuntu,Cantarell,\"Helvetica Neue\",sans-serif;"; var cp_frost_heavy="-webkit-backdrop-filter: blur(20px) saturate(200%)!important;-moz-backdrop-filter: blur(20px) saturate(200%)!important;backdrop-filter: blur(20px) saturate(200%)!important;"; var cp_frost_medium="-webkit-backdrop-filter: blur(10px) saturate(200%)!important;-moz-backdrop-filter: blur(10px) saturate(200%)!important;backdrop-filter: blur(10px) saturate(200%)!important;"; var cp_frost_light="-webkit-backdrop-filter: blur(5px) saturate(200%)!important;-moz-backdrop-filter: blur(5px) saturate(200%)!important;backdrop-filter: blur(5px) saturate(200%)!important;"; var cp_radial_transparent_purpleblue="radial-gradient(200% 200% at 5% 5%, rgba(213,95,254,0.22), rgba(47,141,255,0.22), rgba(21,173,161,0.22)), rgba(255,255,255,0.22)"; var css_special_inline_event_style=""; var css_special_inline_event_text="Hey.Café"; var css_special_inline_event_pride="background: linear-gradient( 124deg, #010101 12.5%, #784F17 12.5%, #784F17 25%, #e70000 25%, #e70000 37.5%, #ff8c00 37.5%, #ff8c00 50%, #ffef00 50%, #ffef00 62.5%, #00811f 62.5%, #00811f 75%, #0044ff 75%, #0044ff 87.5%, #760089 87.5% );color: #ffffff !important;text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;"; var css_special_inline_event_pride_new="background: linear-gradient(to right, rgb(237, 34, 36), rgb(243, 91, 34), rgb(249, 150, 33), rgb(245, 193, 30), rgb(241, 235, 27) 27%, rgb(241, 235, 27), rgb(241, 235, 27) 33%, rgb(99, 199, 32), rgb(12, 155, 73), rgb(33, 135, 141), rgb(57, 84, 165), rgb(97, 55, 155), rgb(147, 40, 142));color: #ffffff !important;text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;"; var css_special_inline_event_canada_day="background: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSc2NTAnIGhlaWdodD0nNjUwJyB2aWV3Qm94PSctMjAxNSAtMjAwMCA0MDMwIDQwMzAnPjxwYXRoIGZpbGw9JyNEODA2MjEnIGQ9J20tOTAgMjAzMCA0NS04NjNhOTUgOTUgMCAwIDAtMTExLTk4bC04NTkgMTUxIDExNi0zMjBhNjUgNjUgMCAwIDAtMjAtNzNsLTk0MS03NjIgMjEyLTk5YTY1IDY1IDAgMCAwIDM0LTc5bC0xODYtNTcyIDU0MiAxMTVhNjUgNjUgMCAwIDAgNzMtMzhsMTA1LTI0NyA0MjMgNDU0YTY1IDY1IDAgMCAwIDExMS01N2wtMjA0LTEwNTIgMzI3IDE4OWE2NSA2NSAwIDAgMCA5MS0yN2wzMzItNjUyIDMzMiA2NTJhNjUgNjUgMCAwIDAgOTEgMjdsMzI3LTE4OS0yMDQgMTA1MmE2NSA2NSAwIDAgMCAxMTEgNTdsNDIzLTQ1NCAxMDUgMjQ3YTY1IDY1IDAgMCAwIDczIDM4bDU0Mi0xMTUtMTg2IDU3MmE2NSA2NSAwIDAgMCAzNCA3OWwyMTIgOTktOTQxIDc2MmE2NSA2NSAwIDAgMC0yMCA3M2wxMTYgMzIwLTg1OS0xNTFhOTUgOTUgMCAwIDAtMTExIDk4bDQ1IDg2M3onLz48L3N2Zz4=\"), linear-gradient( 90deg, #D80621 12.5%, #D80621 12.5%, #D80621 25%, #FFFFFF 25%, #FFFFFF 37.5%, #FFFFFF 37.5%, #FFFFFF 50%, #FFFFFF 50%, #FFFFFF 62.5%, #FFFFFF 62.5%, #FFFFFF 75%, #D80621 75%, #D80621 87.5%, #D80621 87.5% );background-size: contain;background-repeat: no-repeat;background-position: center;color: #ffffff !important;text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;"; var datenow=new Date(); var month=datenow.getUTCMonth() + 1; var day=datenow.getUTCDate(); var year=datenow.getUTCFullYear(); if (month==6){ css_special_inline_event_style=css_special_inline_event_pride_new; css_special_inline_event_text="Pride Month!";} if (month==7 && day==1){ css_special_inline_event_style=css_special_inline_event_canada_day; css_special_inline_event_text="Canada Day!";} var cpc_background=""; var cpc_alt_background=""; var cpc_alt_active_background=""; var cpc_text=""; var cpc_alt_text=""; var cpc_link=""; var cpc_button_background=""; var cpc_button_text=""; var cpc_alt_button_background=""; var cpc_alt_button_text=""; var cpc_box_background=""; var cpc_border="rgba(0,0,0,0.2)"; var cpc_shadow="rgba(50,50,50,0.06) 0px 2px 4px 1px"; var cpc_alert_background="rgb(0,0,0)"; var cpc_alert_border="rgba(255,255,255,0.8)"; var cpc_alert_text="rgb(255,255,255)"; var cpc_alt1_background="rgb(248,226,178)"; var cpc_alt1_text=fu_rsd(cpc_alt1_background); var cpc_alt2_background="rgb(222,210,252)"; var cpc_alt2_text=fu_rsd(cpc_alt2_background); var cpc_alt3_background="rgb(195,228,243)"; var cpc_alt3_text=fu_rsd(cpc_alt3_background); var cpc_alt4_background="rgb(211,238,195)"; var cpc_alt4_text=fu_rsd(cpc_alt4_background); var cpc_alt5_background="rgb(239,212,230)"; var cpc_alt5_text=fu_rsd(cpc_alt5_background); var cpc_alt6_background="rgb(243,219,181)"; var cpc_alt6_text=fu_rsd(cpc_alt6_background); var cpc_alt7_background="rgb(240,205,204)"; var cpc_alt7_text=fu_rsd(cpc_alt7_background); function fu_rcg(mode,accent){ if (mode==undefined){ mode=s_mode;} if (accent==undefined){ accent=s_accent; if (s_app_colour!="false"){ accent=s_app_colour;}}
fu_qjp("all"); if (mode=="dark"){ cpc_link=fu_art("rgb("+accent+")",40); if (fu_rsd(cpc_link)=="#ffffff"){ cpc_link=fu_art(cpc_link,80);}
cpc_background="rgb(0,0,0)"; cpc_text=fu_rsd(cpc_background); cpc_alt_background="rgb(45,45,45)"; cpc_alt_tint_background="rgb(50,50,50)"; cpc_alt_active_background="rgb(40,40,40)"; cpc_alt_text=fu_rsd(cpc_alt_background); cpc_box_background="rgb(23,23,23)"; cpc_text=fu_rsd(cpc_background); cpc_button_background=fu_art("rgb("+accent+")",0); cpc_button_text=fu_rsd(cpc_button_background); cpc_alt_button_background=fu_art(cpc_background,30); cpc_alt_button_text=fu_rsd(cpc_alt_button_background);} if (mode=="light"){ cpc_link="rgb("+accent+")"; if (fu_rsd(cpc_link)=="#000000"){ cpc_link=fu_art(cpc_link,-80);}
cpc_background="rgb(242,242,242)"; cpc_text=fu_rsd(cpc_background); cpc_alt_background="rgb(240,240,240)"; cpc_alt_tint_background="rgb(245,245,245)"; cpc_alt_active_background="rgb(230,230,230)"; cpc_alt_text=fu_rsd(cpc_alt_background); cpc_box_background="rgb(255,255,255)"; cpc_text=fu_rsd(cpc_background); cpc_button_background=fu_art("rgb("+accent+")",0); cpc_button_text=fu_rsd(cpc_button_background); cpc_alt_button_background=fu_art(cpc_background,-30); cpc_alt_button_text=fu_rsd(cpc_alt_button_background);}
s_blank_colour=cpc_alt_background; fu_yax("all", "html", "-webkit-overflow-scrolling : touch !important;overflow: auto !important;"); fu_yax("all", "body", "-webkit-overflow-scrolling : touch !important;overflow: auto !important;"); fu_yax("all", "html", "padding:0px;min-height:100vh;margin:0px;"); fu_yax("all", "body", "-webkit-touch-callout: none;padding:0px;min-height:100vh;margin:0px;background:"+cpc_background+";color:"+cpc_text+";font-family: "+cp_fonts+";font-size:1em;line-height: 1.3;-webkit-font-smoothing: antialiased;-webkit-text-size-adjust: 100%;text-rendering: optimizeLegibility;"); if (s_app_scaledisplay=="small"){ fu_yax("all", "body", "font-size:1.15em !important;line-height: 1.3 !important;");} if (s_app_scaledisplay=="medium"){ fu_yax("all", "body", "font-size:1.25em !important;line-height: 1.3 !important;");} if (s_app_scaledisplay=="large"){ fu_yax("all", "body", "font-size:1.5em !important;line-height: 1.3 !important;");}
fu_yax("all", "body.noscroll", "overflow:hidden;"); fu_yax("all", "body .hide_if_active_input","max-height:400px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", "body .hide_if_active_livearea","max-height:400px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", "body.active_input .hide_if_active_input, body.active_livearea .hide_if_active_livearea", "overflow:hidden;max-height:0px !important;padding-top:0px !important;padding-bottom:0px !important;margin-top:0px !important;margin-bottom:0px !important;border:0px;"); fu_yax("all", "a:focus", "outline-offset: -2px;outline: 2px solid rgb(243,199,116) !important;"); fu_yax("all", "a:focus bubble", "outline-offset: -2px;outline: 2px solid rgb(243,199,116) !important;"); fu_yax("all", "bubble .button:focus", "outline-offset: -2px;outline: 2px solid rgb(243,199,116) !important;"); fu_yax("all", "input:focus", "outline-offset: -2px;outline: 2px solid rgb(243,199,116) !important;"); fu_yax("all", "button:focus", "outline-offset: -2px;outline: 2px solid rgb(243,199,116) !important;"); fu_yax("all", "*[tabindex]:focus", "outline-offset: -2px;outline: 2px solid rgb(243,199,116) !important;"); fu_yax("all", "input:focus:not([type=submit])", "outline-offset: -2px;outline: 2px solid "+fu_art(cpc_button_background,20)+" !important;"); fu_yax("all", "textarea:focus", "outline-offset: -2px;outline: 2px solid "+fu_art(cpc_button_background,20)+" !important;"); fu_yax("all", "livearea:focus", "outline-offset: -2px;outline: 2px solid "+fu_art(cpc_button_background,20)+" !important;"); fu_yax("all", "p", "margin-top:10px;margin-bottom:10px;"); fu_yax("all", "pre", "overflow: auto;font-family: "+cp_fonts+";padding:15px;border-radius: "+cp_elements_radius+"px;background:"+cpc_alt_background+";"); fu_yax("all", "pre p", "padding:0px !important;margin:0px !important;"); fu_yax("all", "content", "display: block;margin-top: env(safe-area-inset-top);margin-bottom: env(safe-area-inset-bottom);padding-top:10px;padding-bottom:10px;"); fu_yax("all", "svg", "height: 1em;width: 1em;display: inline-flex;align-self: center;top: 0.15em;position: relative;"); if (mode=="dark"){ fu_yax("all", ".svgicon", "filter: invert(1);");}
fu_yax("all", "img", "height: auto;width: 100%;"); fu_yax("all", ".optimizer_hidden", "opacity:0;"); fu_yax("all", ".optimizer_show", "opacity:1;"); fu_yax("all", "span[onclick]:hover img[emoji], div[onclick]:hover img[emoji], a:hover img[emoji]", "filter: drop-shadow(1px 0 0 white) drop-shadow(-1px 0 0 white) drop-shadow(0 1px 0 white) drop-shadow(0 -1px 0 white);"); fu_yax("all", "tooltip", "position:fixed;display:inline-block;z-index: 9000;padding:5px;padding-left:10px;padding-right:10px;font-size:0.8em;box-shadow: "+cpc_shadow+";background:"+cpc_box_background+";border-radius: "+cp_elements_radius+"px;border:1px solid "+cpc_button_background+";"); fu_yax("all", "details", "overflow:hidden;background:"+cpc_alt_background+";border-radius: "+cp_elements_radius+"px;padding:15px;padding-bottom: 5px;"); fu_yax("all", "details summary", "cursor: pointer;background:"+fu_art(cpc_alt_background,-20)+";padding:10px;outline: none;margin-left: -15px;margin-top: -15px;margin-right: -15px;margin-bottom: 10px;padding-left: 20px;padding-right: 20px;"); fu_yax("all", "rainbow", "display: inline-block;-webkit-background-clip: text;-webkit-text-fill-color: transparent;font-size: 1.5em;font-weight:600;transition: background-image .25s ease-in-out;"); if (mode=="dark"){ fu_yax("all", "rainbow", "background-image: linear-gradient(to left, violet, yellow, lightblue, green, orange, red);");}else{ fu_yax("all", "rainbow", "background-image: linear-gradient(to left, violet, indigo, blue, green, orange, red);");}
fu_yax("all", "rainbow:hover", "background-image: linear-gradient(to left, "+cpc_text+", "+cpc_text+");"); fu_yax("all", ".sticker", "z-index: 4;display: inline-grid;place-items: center;font-weight: 900;font-size: 2.5em;color: #bb4af0;margin-left: 10px;margin-right: 10px;"); fu_yax("all", ".sticker span", "z-index: 6;background: linear-gradient(to right, #ef548f, #ef8b6d, #cfef6b, #3bf0c1, #bb4af0);-webkit-background-clip: text;-webkit-text-fill-color: transparent;-webkit-text-stroke: 0.03em rgba(0, 0, 0, 0.7);"); fu_yax("all", ".sticker > *, .sticker::before, .sticker::after", "grid-area: text;"); fu_yax("all", ".sticker::before, .sticker::after", "content: attr(data-text); color: #fff;"); fu_yax("all", ".sticker::before", "z-index: 2;-webkit-text-stroke: 0.41em white;"); fu_yax("all", ".sticker::after", "z-index: 1;text-shadow: 0.07em 0.08em 0.35em rgba(0, 0, 0, 1), -0.07em -0.05em 0.35em rgba(0, 0, 0, 1);"); fu_yax("all", "img:not([src])", "opacity:0;"); fu_yax("all", ".playbuttoncase", "z-index: 25;border: 2px solid #ffffff;font-size: 48px;color: rgb(255,255,255);background: rgba(21, 106, 52, 0.62);width: 48px;height: 48px;padding: 20px;line-height: 0;border-radius: 100%;position: absolute;top: 50%;left: 50%;margin-left: -48px;margin-top: -48px;"); fu_yax("all", ".playbutton", "vertical-align: middle;display: inline-block;width: 0;height: 0;border-top: 20px solid transparent;border-bottom: 20px solid transparent;border-left: 30px solid rgb(255,255,255);margin-top: 5px;margin-left: 12px;"); fu_yax("all", "span[onclick]", "display: inline-block;cursor: pointer;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", "span[onclick]:hover", "background:"+cpc_button_background+" !important;color:"+cpc_button_text+" !important;"); fu_yax("all", "h1", "margin-top: 0px;"); fu_yax("all", "hr", "margin-top:15px;margin-bottom:15px;border:0px;height:2px;background:"+cpc_alt_background+";"); fu_yax("all", "iframe", "height:100%;width:100%;border:0px;border-radius: "+cp_elements_radius+"px;"); fu_yax("all", "video", "height:100%;width:100%;border:0px;border-radius: "+cp_elements_radius+"px;"); fu_yax("all", "#embed_preview iframe", "border-radius:0px;"); fu_yax("all", ".horizontalscroll", "padding-top:3px;padding-bottom:3px;overflow-x: auto;white-space: nowrap;padding: 5px;padding-left:0px;padding-right:5px;margin-top:10px;"); fu_yax("all", "bubble .horizontalscroll", "border:0px;background:none;margin-top:0px;"); fu_yax("all", "#uiNotification", "right: 0px;"); fu_yax("all", "#uiNotification .notification", "cursor: pointer;font-weight:500;display:block;overflow:hidden;margin-bottom:0px;padding:15px;margin-top:15px;margin-right:15px;margin-left:15px;box-shadow: "+cpc_shadow+";background:"+cpc_box_background+";border-radius: "+cp_elements_radius+"px;border:1px solid "+cpc_button_background+";animation: animation-bubble-in 250ms cubic-bezier(0.17,0.04,0.03,0.94) both !important;"); fu_yax("all", "#uiNotification .notification:hover", "background:"+cpc_alt_background+";"); fu_yax("all", "#uiAlert .notification", "position:relative;cursor: pointer;display:inline-block;overflow:hidden;color:"+cpc_alert_text+";background:"+cpc_alert_background+";border-radius:100px;font-weight:600;padding:20px;padding-top:10px;padding-bottom:10px;margin-top:10px;margin-right:5px;margin-left:5px;-webkit-transition: all 350ms ease-in-out;-moz-transition: all 350ms ease-in-out;-o-transition: all 350ms ease-in-out;transition: all 350ms ease-in-out;"); fu_yax("all", "#uiAlert .notification.show", "top: calc(0px + env(safe-area-inset-top));"); fu_yax("all", "#uiAlert .notification.hide", "top: -200px;"); fu_yax("all", "#uiPopover", "position: fixed;bottom: 0px;right: 0px;max-width: calc(100vw - 15px);max-height: 50vh;z-index: 2000;"); fu_yax("all", "#uiPopover popover", "width: 300px;float: right;z-index: 2000;margin-right: 15px;margin-bottom: 10px;background: "+cpc_box_background+";border:1px solid "+cpc_border+";border-radius:"+cp_elements_radius+"px;padding: 10px;animation: animation-bubble-in 250ms cubic-bezier(0.17,0.04,0.03,0.94) both !important;box-shadow: "+cpc_shadow+";"); fu_yax("all", "#uiPopover .close", "color:"+cpc_button_text+" !important;background:"+cpc_button_background+";;border-radius: "+cp_elements_radius+"px;position: absolute;margin-top: -20px;margin-right: -10px;padding: 5px;padding-left: 10px;padding-right: 10px;right: 0;z-index: 2200;text-align: center;font-size: 13px;cursor: pointer;text-transform: lowercase;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", "#uiPopover .close:hover", "background:"+fu_art(cpc_button_background,20)+" !important;"); fu_yax("all", "modl", "animation: animation-modl-in 200ms linear 1 forwards !important;display:block;z-index: 8000;position: fixed;top: 0px;left: 0px;width: 100%;height: 100%;margin-top: env(safe-area-inset-top);max-height: calc(100% - env(safe-area-inset-top));"); fu_yax("all", "modl .background", "cursor: pointer;display:block;z-index: -5;position: fixed;top: -100px;left: -100px;width: calc(100% + 200px);height: calc(100% + 200px);background:"+fu_hpe(cpc_box_background,0.8)+";"+cp_frost_light+""); fu_yax("all", "modl .case", "width:100%;max-width: 750px;position: absolute;top: 25%;left: 50%;transform: translate(-50%,-25%);max-height: calc(100svh - env(safe-area-inset-bottom));overflow: auto;-webkit-overflow-scrolling: touch;overflow-x: hidden;"); fu_yax("all", "modl .frame", "margin:10px;margin-bottom: calc(10px + env(safe-area-inset-bottom));"); fu_yax("all", "modl .frame .nomarginmodl", "margin-top: -15px;margin-left: -15px;margin-right: -15px;"); fu_yax("all", "modl .case.wide", "max-width: 1100px;"); fu_yax("all", "modl .case.media", "max-width: 11000px;"); fu_yax("all", "modl .case.media .frame", "background: none;box-shadow:none;"); fu_yax("all", "modl .case.media bubble.alt_text", "max-width:600px;margin:0px auto;margin-bottom:10px;"); fu_yax("all", "modl .case.media bubble.noframe", "overflow: hidden;text-align: center;padding: 0px;background: none !important;border:0px;border-radius: 0px;box-shadow:none;border:0px solid "+cpc_border+";"); fu_yax("all", "modl .case.media bubble img", "max-width: 100vw;max-height: calc(100vh - 80px);width: auto;"); fu_yax("all", "modl .close", "display: block;position: fixed;top: 10px;right: 10px;width: 30px;height: 30px;line-height: 30px;padding: 0px;font-weight: 600;text-align: center;box-shadow: "+cpc_shadow+";z-index: 100;border-radius: 100%;cursor: pointer;text-transform: uppercase;transition: all 200ms ease-in-out 0s;color:"+cpc_button_text+" !important;background:"+cpc_button_background+";border:1px solid "+cpc_border+";"); fu_yax("all", "modl .close:hover", "background:"+fu_art(cpc_button_background,20)+" !important;"); if (fu_rsd(cpc_button_background)=="#ffffff"){ fu_yax("all", "modl .close .svgicon", "filter: invert(1);");}else{ fu_yax("all", "modl .close .svgicon", "filter: invert(0);");}
fu_yax("all", ".avatar", "z-index: 5;position: relative;display:inline-block;border-radius:100%;background:rgb(255,255,255);"); fu_yax("all", "a", "color:"+cpc_link+";font-weight:600;text-decoration:none;-webkit-tap-highlight-color: rgba(0,0,0,0);"); fu_yax("all", "a:hover", "color:"+fu_art(cpc_link,-40)+";"); fu_yax("all", ".mention a", "background:rgba("+accent+",0.1);color:"+cpc_text+";border-radius: "+cp_elements_radius+"px;padding: 3px;padding-left: 10px;padding-right: 10px;display: inline-block;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", ".mention a:hover", "background:rgba("+accent+",0.3);color:"+cpc_text+";"); fu_yax("all", ".mention a .avatar", "margin-right: 4px;"); fu_yax("all", ".mention a img", "width: 1em !important;height: 1em !important;max-width: 1em !important;max-height: 1em !important;"); fu_yax("all", ".tab", "display:inline-block;cursor: pointer;margin-left:5px;margin-right:5px;padding:10px;padding-left:20px;padding-right:20px;font-size: 0.8em;border-radius:"+cp_elements_radius+"px;background: "+cpc_box_background+";color:"+cpc_text+" !important;border:1px solid "+cpc_border+";box-shadow: "+cpc_shadow+";-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", "bubble .tab", "background: "+cpc_alt_background+";color:"+cpc_alt_text+" !important;box-shadow:none;"); fu_yax("all", ".tab.current", "border:1px solid "+cpc_button_background+";"); fu_yax("all", ".tab.important", "color:"+cpc_button_text+" !important;background:"+cpc_button_background+";"); fu_yax("all", ".tab.important:hover", "background:"+fu_art(cpc_button_background,20)+" !important;"); if (fu_rsd(cpc_button_background)=="#ffffff"){ fu_yax("all", ".tab.important .svgicon", "filter: invert(1);");}else{ fu_yax("all", ".tab.important .svgicon", "filter: invert(0);");}
fu_yax("all", ".tab.important.alt1", "color:"+cpc_alt1_text+" !important;background:"+cpc_alt1_background+";"); fu_yax("all", ".tab.important.alt2", "color:"+cpc_alt2_text+" !important;background:"+cpc_alt2_background+";"); fu_yax("all", ".tab.important.alt3", "color:"+cpc_alt3_text+" !important;background:"+cpc_alt3_background+";"); fu_yax("all", ".tab.important.alt4", "color:"+cpc_alt4_text+" !important;background:"+cpc_alt4_background+";"); fu_yax("all", ".tab.important.alt4", "color:"+cpc_alt5_text+" !important;background:"+cpc_alt5_background+";"); fu_yax("all", ".tab.important.alt4", "color:"+cpc_alt6_text+" !important;background:"+cpc_alt6_background+";"); fu_yax("all", ".tab.important.alt4", "color:"+cpc_alt7_text+" !important;background:"+cpc_alt7_background+";"); fu_yax("all", ".tab.solidhover", "cursor:default;"); fu_yax("all", ".tab.nohover", "cursor:default;background:none !important;color:"+cpc_text+" !important;border:0px solid "+cpc_border+";"); fu_yax("all", ".tab:not(.nohover):not(.solidhover):hover", "background:"+cpc_alt_active_background+" !important;color:"+cpc_alt_text+" !important;"); fu_yax("all", ".tab.important:not(.nohover):not(.solidhover):hover", "background:"+fu_art(cpc_button_background,20)+" !important;color:"+cpc_button_text+" !important;"); fu_yax("all", ".verified_badge img", "width: 0.8em !important;vertical-align: baseline !important;filter: invert(43%) sepia(79%) saturate(2932%) hue-rotate(209deg) brightness(90%) contrast(89%);"); fu_yax("all", ".business_badge img", "width: 0.8em !important;vertical-align: baseline !important;filter: invert(55%) sepia(100%) saturate(3.5);"); fu_yax("all", ".verified_robot_badge img", "width: 0.8em !important;vertical-align: baseline !important;filter: invert(60%) sepia(50%) saturate(80);"); fu_yax("all", ".robot_badge img", "width: 0.8em !important;vertical-align: baseline !important;filter: invert(55%) sepia(100%) saturate(0);"); fu_yax("all", "bubble", "display:block;overflow:auto;margin-bottom:15px;padding: 10px;box-shadow: "+cpc_shadow+";background:"+cpc_box_background+";border-radius: "+cp_elements_radius+"px;border:1px solid "+cpc_border+";animation: animation-bubble-in 250ms cubic-bezier(0.17,0.04,0.03,0.94) both !important;"); fu_yax("all", "bubble.noanimation", "animation: animation-bubble-in 0ms cubic-bezier(0.17,0.04,0.03,0.94) both !important;"); fu_yax("all", "modl bubble:last-of-type", "margin-bottom:0px;"); fu_yax("all", "bubble .button", "background:"+cpc_button_background+";color:"+cpc_button_text+";padding: 5px;padding-left: 15px;padding-right: 15px;display:inline-block;border-radius: "+cp_elements_radius+"px;text-align: center;cursor: pointer;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", "bubble .button:hover", "background:"+fu_art(cpc_button_background,20)+";color:"+cpc_button_text+";"); fu_yax("all", "bubble[onclick]", "cursor: pointer;border-radius: "+cp_elements_radius+"px;border:0px;padding:10px;background:"+cpc_box_background+";color:"+cpc_alt_text+";border:1px solid "+cpc_border+";"); fu_yax("all", "bubble[onclick]:hover", "background:rgba("+accent+",0.2) !important;color:"+cpc_text+" !important;border:1px solid "+fu_art(cpc_button_background,20)+";"); fu_yax("all", "bubble.alt0", "background:"+cpc_background+";border-radius: "+cp_elements_radius+"px;padding:15px;border:0px;border:1px solid "+cpc_border+";"); fu_yax("all", "bubble.alt1, bubble.alt1[onclick]", "color:"+cpc_alt1_text+";background:"+cpc_alt1_background+";border-radius: "+cp_elements_radius+"px;padding:15px !important;border:0px;border:1px solid "+cpc_border+";"); fu_yax("all", "bubble.alt2, bubble.alt2[onclick]", "color:"+cpc_alt2_text+";background:"+cpc_alt2_background+";border-radius: "+cp_elements_radius+"px;padding:15px !important;border:0px;border:1px solid "+cpc_border+";"); fu_yax("all", "bubble.alt3, bubble.alt3[onclick]", "color:"+cpc_alt3_text+";background:"+cpc_alt3_background+";border-radius: "+cp_elements_radius+"px;padding:15px !important;border:0px;border:1px solid "+cpc_border+";"); fu_yax("all", "bubble.alt4, bubble.alt4[onclick]", "color:"+cpc_alt4_text+";background:"+cpc_alt4_background+";border-radius: "+cp_elements_radius+"px;padding:15px !important;border:0px;border:1px solid "+cpc_border+";"); fu_yax("all", "bubble.alt5, bubble.alt5[onclick]", "color:"+cpc_alt5_text+";background:"+cpc_alt5_background+";border-radius: "+cp_elements_radius+"px;padding:15px !important;border:0px;border:1px solid "+cpc_border+";"); fu_yax("all", "bubble.alt6, bubble.alt6[onclick]", "color:"+cpc_alt6_text+";background:"+cpc_alt6_background+";border-radius: "+cp_elements_radius+"px;padding:15px !important;border:0px;border:1px solid "+cpc_border+";"); fu_yax("all", "bubble.alt7, bubble.alt7[onclick]", "color:"+cpc_alt7_text+";background:"+cpc_alt7_background+";border-radius: "+cp_elements_radius+"px;padding:15px !important;border:0px;border:1px solid "+cpc_border+";"); fu_yax("all", "bubble .minibubble", "overflow:hidden;background:"+cpc_alt_background+";border-radius: "+cp_elements_radius+"px;padding:10px;border:1px solid "+cpc_border+";"); fu_yax("all", "bubble .minibubble.list", "overflow:hidden;background:none;border-radius: 0px;border-bottom:1px solid "+cpc_alt_active_background+";"); fu_yax("all", "bubble .minibubble.list[onclick]:hover", "padding:10px;border-radius: "+cp_elements_radius+"px;"); fu_yax("all", "bubble .minibubble.list:last-of-type", "border-bottom:0px solid "+cpc_alt_background+";"); fu_yax("all", "bubble .minibubble:first-of-type", "margin-top:0px;"); fu_yax("all", "bubble .minibubble .extra", "font-size: 0.8em;margin-top:10px;background: "+cpc_alt_background+";padding:10px;border-radius: "+cp_elements_radius+"px;"); fu_yax("all", "bubble .minibubble.spacing", "margin-top:10px !important;"); fu_yax("all", "bubble .minibubble:empty", "display:none;"); fu_yax("all", "bubble.float_suggestions", "white-space: nowrap;overflow-x: scroll;font-size:0.8em;text-align:center;width:calc(100% - 5px);margin:0px;border-radius:0px;border:0px;padding: 5px !important;padding-bottom:3px;padding-right:0px !important;box-shadow: none;"); fu_yax("all", "bubble.float_suggestions .minibubble", "display:inline-block;margin:0px;margin-right:5px;background:"+cpc_alt_background+";color:"+cpc_alt_text+";padding:5px;padding-left:12px;padding-right:12px;"); fu_yax("all", "bubble .embed", "display:block;overflow:hidden;background: "+cpc_alt_background+";color:"+cpc_alt_text+";border-radius: "+cp_elements_radius+"px;padding:10px;margin-top:10px;margin-bottom:10px;"); fu_yax("all", "bubble .embed[onclick]", "cursor: pointer;"); fu_yax("all", "bubble .embed[onclick]:hover", "background:"+cpc_alt_active_background+" !important;color:"+cpc_alt_text+" !important;"); fu_yax("all", "bubble .embed.attachment", "background:rgb(191, 191, 191,0.1);"); fu_yax("all", "bubble .embed .media", "width:100%;margin:0px;"); fu_yax("all", "bubble .embed .link", "margin-bottom:0px;"); fu_yax("all", "bubble .embed a strong", "color:"+cpc_text+";"); fu_yax("all", "bubble .embed .preview", "float: left;margin-right: 10px;border-radius:"+cp_elements_radius+"px;"); fu_yax("all", "bubble .embed .preview img", "width: auto;max-width:250px;max-height:140px;border-radius:"+cp_elements_radius+"px;"); fu_yax("all", "bubble .embed .preview_large", "margin-bottom: 10px;"); fu_yax("all", "bubble .minibubble[onclick]", "margin-top:10px;cursor: pointer;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", "bubble .minibubble[onclick]:hover", "background:"+cpc_alt_active_background+" !important;color:"+cpc_alt_text+" !important;"); fu_yax("all", "bubble .translatebubble", "overflow:hidden;background:"+fu_hpe(cpc_alt4_background,0.3)+";border-radius: "+cp_elements_radius+"px;padding:15px;padding-top:10px;padding-bottom:10px;"); fu_yax("all", "bubble.shadedbackground", "padding:0px;background-position: center;background-size:cover;"); fu_yax("all", "bubble.shadedbackground .cover", "margin-left:0px;margin-right:0px;margin-top:0px;text-align:center;overflow:hidden;padding:20px;"); fu_yax("all", ".reaction", "display: inline-block;"); fu_yax("all", ".reaction .reactcontent", "display:inline-block;width: 50px;height: 50px;font-size: 25px;line-height: 40px;text-align: center;"); fu_yax("all", ".reaction .avatar", "width: 20px;height: 20px;margin-left: -18px;margin-bottom: -3px;"); fu_yax("all", "bubble.profile", "text-align:left;overflow: hidden;padding:0px;"); fu_yax("all", "bubble.profile .minibubble", "background: none;border-radius: 0px;padding: 10px;padding-left:0px;padding-top:10px;line-height: 1.2em;text-align:left;border:0px solid "+cpc_border+";"); fu_yax("all", "bubble.profile .tab","z-index: 5;position: relative;float: right;margin-left:0px;margin-top: 10px;font-size:0.8em;font-weight:600;padding: 6px;padding-left: 10px;padding-right: 10px;margin-right:10px;box-shadow: "+cpc_shadow+";"); fu_yax("all", "bubble.profile .gradiant", "background: linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 0.7) 100%);width: 100%;height: 100%;position: absolute;"); fu_yax("all", "bubble.profile .avatar.main", "width: 150px;height: 150px;margin-bottom: 10px;margin-top: 10px;margin-right: 20px;float: left;margin-top: -50px;margin-left: 15px;"); fu_yax("all", "bubble.profile h1", "font-size: 1.8em;margin-top: 10px;z-index: 5;position: relative;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;max-width: calc(100% - 300px);"); fu_yax("all", "bubble.profile h2", "font-size: 0.9em;font-weight: 400;margin-top: -10px;margin-left: 0px;z-index: 5;position: relative;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;max-width: calc(100% - 300px);"); fu_yax("all", "bubble.profile .cover", "background-position: center;background-size:cover;border-radius:"+cp_elements_radius+"px;border-bottom-left-radius:0px;border-bottom-right-radius:0px;"); fu_yax("all", "bubble.profile .button", "display:inline-block;padding: 10px;padding-left: 15px;padding-right: 15px;font-size: 0.8em;background:"+cpc_button_background+";color:"+cpc_button_text+";border-radius:"+cp_elements_radius+"px;margin-left:5px;margin-right:5px;float: right;margin-top: -70px;margin-right: 15px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", "bubble.profile .button:hover", "background:"+fu_art(cpc_button_background,20)+";color:"+cpc_button_text+";"); fu_yax("all", "bubble.profile .specialbox", "cursor: pointer;font-size: 0.8em;font-weight:600;background:"+cpc_alt_background+" !important;color:"+cpc_text+" !important;border-radius: "+cp_elements_radius+"px;padding: 5px;padding-left: 10px;margin-top:3px;padding-right: 10px;margin-right:5px;display: inline-block;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", "bubble.profile .specialbox:hover", "background:"+cpc_alt_active_background+" !important;color:"+cpc_alt_text+" !important;"); fu_yax("all", "bubble.profile .specialbox.important[onclick]", "cursor: pointer;background:"+cpc_button_background+" !important;color:"+cpc_button_text+" !important;"); fu_yax("all", "bubble.profile .specialbox.important[onclick]:hover", "background:"+fu_art(cpc_button_background,20)+" !important;color:"+cpc_button_text+" !important;"); if (fu_rsd(cpc_button_background)=="#ffffff"){ fu_yax("all", "bubble.profile .specialbox.important .svgicon", "filter: invert(1);");}else{ fu_yax("all", "bubble.profile .specialbox.important .svgicon", "filter: invert(0);");}
fu_yax("all", "bubble.halfsized.profile", "padding:10px;background:"+cpc_box_background+";margin-bottom:10px;"); fu_yax("all", "bubble.halfsized.profile .gradiant", "background-image: linear-gradient(rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0) 40%, rgba(0, 0, 0, 0.8) 100%);"); fu_yax("all", "bubble.halfsized.profile .tab", "background:"+cpc_alt1_background+";color:"+cpc_alt1_text+" !important;"); fu_yax("all", "bubble.halfsized.profile .cover", "margin-left: -10px;margin-right: -10px;margin-top: -10px;margin-bottom:10px;border-bottom-left-radius:0px;border-bottom-right-radius:0px;"); fu_yax("all", "bubble.halfsized.profile .avatar.main", "margin-top:0px;margin-left:0px;margin-bottom: 0px;width: 40px;height: 40px;margin-right:10px;"); fu_yax("all", "bubble.halfsized.profile .minibubble","margin-top: 15px;border-top: 0px;padding:0px;"); fu_yax("all", "bubble.halfsized.profile h1", "font-size: 1.2em;max-width: calc(100% - 100px);margin-top: 0px;"); fu_yax("all", "bubble.halfsized.profile h2", "font-size: 0.7em;font-weight: 400;max-width: calc(100% - 100px);"); fu_yax("all", "bubble.halfsized.video", "padding:10px;margin-bottom:10px;"); fu_yax("all", "bubble.halfsized.video .embed", "background:"+cpc_box_background+";"); fu_yax("all", "bubble.halfsized.video .cover", "background-position: center;background-size:cover;margin-left: -10px;margin-right: -10px;margin-top: -10px;margin-bottom:10px;border-bottom-left-radius:0px;border-bottom-right-radius:0px;"); fu_yax("all", "bubble.halfsized.video .avatar.main", "margin-top:0px;margin-left:0px;margin-bottom: 0px;width: 40px;height: 40px;margin-right:10px;"); fu_yax("all", "bubble.halfsized.video .minibubble","margin-top: 15px;border-top: 0px;padding-top: 0px;"); fu_yax("all", "bubble[onclick] .tab", "background:"+cpc_alt1_background+";color:"+cpc_alt1_text+" !important;"); fu_yax("all", ".conversation", "margin-bottom: 10px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", ".conversation.preview", "margin-bottom: 20px;padding:10px;"); fu_yax("all", ".conversation.normal .footer_comments", "margin-left: 20px;"); fu_yax("all", ".conversation.normal .section_extra", "margin-left: 20px;"); fu_yax("all", ".conversation .cafeheader", "cursor: pointer;background:"+cpc_alt_background+";padding: 10px;border-radius:"+cp_elements_radius+"px;margin-bottom: 10px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", ".conversation .cafeheader:hover", "background:"+cpc_alt_active_background+" !important;color:"+cpc_alt_text+" !important;"); fu_yax("all", ".conversation .cafeheader .avatar", "max-width: 20px;max-height: 20px;float: left;margin-right: 10px;"); fu_yax("all", ".conversation .tagged", "float: right;background:"+cpc_alt_background+";color:"+cpc_alt_text+";padding: 5px;padding-left:8px;padding-right:8px;border-radius: "+cp_elements_radius+"px;font-size: 0.7em;margin-right: 5px;cursor: pointer;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", ".conversation .tagged:hover", "background:"+cpc_alt_active_background+" !important;color:"+cpc_alt_text+" !important;"); fu_yax("all", ".conversation .minibubble .cafe", "background:"+cpc_box_background+";"); fu_yax("all", ".conversation .minibubble.preview.miniframe", "border:0px solid "+cpc_alt_background+";border-left:2px solid "+cpc_alt_background+";background:none;border-radius:0px;"); fu_yax("all", ".conversation .minibubble.preview.miniframe[onclick]:hover", "background:"+cpc_alt_active_background+" !important;color:"+cpc_alt_text+" !important;border-radius:"+cp_elements_radius+"px;border-left:2px solid "+cpc_alt_active_background+";"); fu_yax("all", ".conversation .minibubble.preview .meta", "float:right;"); fu_yax("all", ".conversation .minibubble.preview", "padding: 10px;padding-bottom: 0px;margin-top: 10px;margin-bottom:10px;"); fu_yax("all", ".conversation .minibubble.preview .cafe", "padding: 10px;border-radius: 0px;"); fu_yax("all", ".conversation .minibubble .minibubble.preview", "padding: 10px;margin-top: 0px;margin-bottom:0px;"); fu_yax("all", ".conversation .minibubble .minibubble.preview .content", "padding-bottom: 0px;"); fu_yax("all", ".notification .conversation .minibubble.preview", "padding-top: 0px;padding-bottom: 0px;margin-top: 10px;margin-bottom:10px;"); fu_yax("all", ".conversation .header", "overflow: hidden;padding-top:3px;"); fu_yax("all", ".conversation .minibubble.preview .header", "min-height: 0px;"); fu_yax("all", ".conversation .timestamp", "display: inline-block;padding:3px;padding-left: 0px;padding-right: 10px;border-radius: "+cp_elements_radius+"px;"); fu_yax("all", ".conversation .timestamp:hover", "padding-left: 10px;padding-right: 10px;"); fu_yax("all", ".conversation .badge", "display: inline-block;padding:3px;padding-left: 10px;padding-right: 10px;margin-left: 5px;border-radius: "+cp_elements_radius+"px;font-size: 0.8em;"); fu_yax("all", ".conversation .badge.admin", "background:"+cpc_alt4_background+";color: "+fu_rsd(cpc_alt4_background)+";"); fu_yax("all", ".conversation .badge.moderator", "background:"+cpc_alt2_background+";color: "+fu_rsd(cpc_alt2_background)+";"); fu_yax("all", ".conversation .badge.pro", "background:"+cpc_alt1_background+";color: "+fu_rsd(cpc_alt1_background)+";"); fu_yax("all", ".conversation .badge.verified", "background:"+cpc_alt3_background+";color: "+fu_rsd(cpc_alt3_background)+";"); fu_yax("all", ".conversation .badge.online", "background:"+fu_art("rgb(82, 199, 135)",75)+";color: rgb(22, 22, 22);"); fu_yax("all", ".conversation .badge.idle", "background:"+fu_art("rgb(199, 144, 82)",75)+";color: rgb(22, 22, 22);"); fu_yax("all", ".conversation .badge.pin", "background:"+fu_art("rgb(199, 82, 82)",75)+";color: rgb(22, 22, 22);"); fu_yax("all", ".conversation .badge.pin .svgicon", "filter: invert(0);"); fu_yax("all", ".conversation .header .action", "float: right;font-size: 0.7em;font-weight: 600;background:"+cpc_alt_background+";color:"+cpc_alt_text+";padding: 5px;padding-left: 10px;padding-right: 10px;display:inline-block;border-radius: "+cp_elements_radius+"px;text-align: center;cursor: pointer;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", ".conversation .header .action.important", "background:"+cpc_alt_active_background+";color: "+cpc_alt_text+";"); fu_yax("all", ".conversation .header .action:hover", "background:"+cpc_alt_active_background+" !important;color:"+cpc_alt_text+" !important;"); fu_yax("all", ".conversation .footer .minireactions", "display:inline-block;max-width:50%;overflow:hidden;float:right;"); fu_yax("all", ".conversation .footer .action", "background:"+cpc_alt_background+";color:"+cpc_alt_text+";font-size: 0.85em;font-weight: 600;padding: 5px;padding-left: 10px;padding-right: 10px;display:inline-block;border-radius: "+cp_elements_radius+"px;text-align: center;cursor: pointer;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", ".conversation .footer .action.important", "background:"+cpc_alt_active_background+";color: "+cpc_alt_text+";"); fu_yax("all", ".conversation .footer .action:hover", "background:"+cpc_alt_active_background+" !important;color:"+cpc_alt_text+" !important;"); fu_yax("all", ".conversation .footer .footer_mini .action", "font-size: 1.3em;"); fu_yax("all", ".conversation .header .meta", "color:"+cpc_alt_text+";overflow:hidden;font-weight: 500;font-size: 0.8em;white-space: nowrap;overflow-x: auto;padding-bottom: 5px;padding-top: 5px;"); fu_yax("all", ".conversation .header h4", "font-weight: 500;margin-top: 0px;margin-bottom: 5px;"); fu_yax("all", ".conversation .header .avatar", "float:left;height:50px;width:50px;margin-top:-3px;margin-right:10px;"); fu_yax("all", ".conversation .content_case", "margin-top:10px;margin-bottom:10px;"); fu_yax("all", ".conversation .content_case > .translate", "margin-top:10px;"); fu_yax("all", ".conversation .content_case > .attachments", "margin-top:10px;"); fu_yax("all", ".conversation .content_case > .content > *:first-child", "margin-top:0px;"); fu_yax("all", ".conversation .content_case > .content > *:last-child", "margin-bottom:0px;"); fu_yax("all", ".conversation .content_case > .content p:empty", "margin:0px;padding:0px;"); fu_yax("all", ".conversation .content_case > .translate:empty", "margin:0px;padding:0px;"); fu_yax("all", ".conversation .content_case > .attachments:empty", "margin:0px;padding:0px;"); fu_yax("all", ".conversation .content_case > .attachments .media:first-child .media_backing", "margin-top:0px;"); fu_yax("all", ".conversation .content_case > .attachments .media:last-child .media_backing", "margin-bottom:0px;"); fu_yax("all", ".conversation .content .cover", "background-position: center;background-size:cover;"); fu_yax("all", ".conversation .content heading", "display:block;font-weight:500;font-size:1.7em;margin-top:10px;margin-bottom:10px;"); fu_yax("all", ".conversation .content subheading", "display:block;font-size:1.4em;margin-top:25px;margin-bottom:15px;"); fu_yax("all", ".conversation .content p:not(:first-child) heading", "margin-top:25px;"); fu_yax("all", ".conversation .content quote", "display:block;overflow:hidden;padding-left:10px;padding-right:10px;border-radius: "+cp_elements_radius+"px;background:"+cpc_alt_background+";margin-top:10px;margin-bottom:10px;"); fu_yax("all", ".conversation .attachent", "cursor: pointer;background:"+cpc_alt_background+";border-radius: "+cp_elements_radius+"px;padding: 10px;margin-top:10px;margin-bottom: 10px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", ".conversation .attachent:hover", "background:"+cpc_alt_active_background+";"); fu_yax("all", ".conversation .media", "position: relative;width: 100%;line-height: 0;overflow:hidden;border-radius: "+cp_elements_radius+"px;"); fu_yax("all", ".conversation .media_backing", "background-size: cover;background-repeat: no-repeat;background-color: "+cpc_box_background+";background-position: center center;border-radius: "+cp_elements_radius+"px;margin-top:10px;margin-bottom:10px;overflow:hidden;"); fu_yax("all", ".conversation .preview_large .media_backing", "margin-top:0px;"); fu_yax("all", ".conversation .media_bg", "background-size: contain;background-repeat: no-repeat;background-position: center center;border-radius: "+cp_elements_radius+"px;"); fu_yax("all", ".conversation .media_nowrap", "margin-top:10px;margin-bottom:10px;"); fu_yax("all", ".conversation .media_nowrap:first-child", "margin-top:0px;"); fu_yax("all", ".conversation .media_nowrap:last-child", "margin-bottom:0px;"); fu_yax("all", ".conversation .collage", "margin-top:10px;margin-bottom:10px;overflow-x: auto;white-space: nowrap;"); fu_yax("all", ".conversation .embed .preview .media_backing", "margin-top:0px;margin-bottom: 0px;"); fu_yax("all", ".conversation .embed .media_backing", "margin-bottom:0px;"); fu_yax("all", ".conversation .spoiler", "filter: blur(20px);"); fu_yax("all", ".conversation .window", "padding:15px;overflow:hidden;border:2px solid "+cpc_alt_background+";border-radius: "+cp_elements_radius+"px;"); fu_yax("all", ".conversation .link", "overflow:hidden;padding:15px;padding-left:20px;padding-right:20px;margin-top:15px;margin-bottom:10px;border-radius:"+cp_elements_radius+"px;text-align:center;background:"+cpc_alt_button_background+";color:"+cpc_alt_button_text+";cursor:pointer;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", ".conversation .link:hover", "background:"+fu_art(cpc_alt_button_background,20)+";"); fu_yax("all", ".conversation .footer_extras:not(:empty)", "margin-top:10px;border-top:2px solid "+cpc_alt_background+";padding-top:10px;"); fu_yax("all", ".conversation .footer_reactions:not(:empty)", "margin-top:10px;border-top:2px solid "+cpc_alt_background+";padding-top:10px;"); fu_yax("all", ".conversation .footer_comments:not(:empty)", "margin-top:10px;"); fu_yax("all", ".conversation.full .footer_comments:not(:empty)", "margin-top:10px;border-top:2px solid "+cpc_alt_background+";padding-top:10px;"); fu_yax("all", ".conversation .comment_reply_case", "margin-left:0px;border-left:2px solid "+cpc_alt_background+";padding-left:10px;"); fu_yax("all", ".conversation .comment", "position: relative;min-width:300px;z-index: 1;font-size: 0.85em;border-radius: "+cp_elements_radius+"px;padding-top: 10px;padding-bottom:10px;"); fu_yax("all", ".conversation .comment.highlight", "border:2px solid "+cpc_alt1_background+";padding:10px;"); fu_yax("all", ".conversation .comment.highlight::before", "content: \"\";border-radius: "+cp_elements_radius+"px;position: absolute;top: 0; left: 0px;width: 100%; height: 100%;opacity: .05; z-index: -1;background:"+cpc_alt_button_background+";"); fu_yax("all", ".conversation .comment .header", "padding-top:0px;display: inline;"); fu_yax("all", ".conversation .comment .footer", "margin-left:50px;margin-bottom: 0px;"); fu_yax("all", ".conversation .comment .footer .action", "background:"+cpc_alt_background+";color:"+cpc_alt_text+";font-weight: 600;display:inline-block;border-radius: "+cp_elements_radius+"px;text-align: center;padding:5px;padding-left: 10px;padding-right: 10px;cursor: pointer;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", ".conversation .comment .footer .action:hover", "background:"+cpc_alt_active_background+" !important;color:"+cpc_alt_text+" !important;"); fu_yax("all", ".conversation .comment .header .meta", "color:"+cpc_alt_text+";overflow:hidden;font-weight: 500;font-size: 0.8em;padding-top: 3px;padding-bottom:0px;display: inline;margin-left: 10px;min-width: 40px;"); fu_yax("all", ".conversation .comment .header strong", "font-size:1.1em;"); fu_yax("all", ".conversation .comment .header .avatar", "float:left;height:40px;width:40px;margin-top:0px;margin-right:10px;"); fu_yax("all", ".conversation .comment .content_case", "margin: 0px;margin-left: 50px;margin-top: 10px;margin-bottom: 10px;"); fu_yax("all", ".conversation .comment .media", "position: relative;width:100%;margin-left: 0px;margin-right: 0px;line-height: 0;overflow:hidden;border-radius: "+cp_elements_radius+"px;"); fu_yax("all", ".conversation .comment .media_backing", "background-size: cover;background-repeat: no-repeat;background-color: "+cpc_box_background+";background-position: center center;border-radius: "+cp_elements_radius+"px;"); fu_yax("all", ".conversation .comment .media_bg", "background-size: contain;background-repeat: no-repeat;background-position: center center;border-radius: "+cp_elements_radius+"px;"); fu_yax("all", ".conversation .comment .window", "padding:15px;overflow:hidden;border:2px solid "+cpc_alt_background+";border-radius: "+cp_elements_radius+"px;"); fu_yax("all", ".conversation .comment .link", "overflow:hidden;padding:15px;padding-left:20px;padding-right:20px;margin-top:15px;margin-bottom:10px;border-radius:"+cp_elements_radius+"px;text-align:center;background:"+cpc_alt_button_background+";color:"+cpc_alt_button_text+";cursor:pointer;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", ".conversation .comment .link:hover", "background:"+fu_art(cpc_alt_button_background,20)+";"); fu_yax("all", "bubble.message","border:0px;margin:0px;padding:0px;background:none;box-shadow:none;margin-bottom: 5px;text-align:left;"); fu_yax("all", "bubble.message .content_case.normal", "max-width:calc(100% - 85px);text-align:left;font-size: 0.9em;display:inline-block;background:"+cpc_box_background+";color:"+cpc_text+";border-radius: "+cp_elements_radius+"px;margin: 0px;padding:8px;padding-left:12px;padding-right:12px;box-shadow: "+cpc_shadow+";border:1px solid "+cpc_border+";"); fu_yax("all", "bubble.message .content_case.update", "max-width:calc(100% - 85px);text-align:left;font-size: 0.9em;display:inline-block;background:"+fu_hpe(cpc_alt1_background,0.3)+";color:"+cpc_alt_text+";border-radius: "+cp_elements_radius+"px;margin: 0px;padding:8px;padding-left:12px;padding-right:12px;box-shadow: "+cpc_shadow+";border:1px solid "+cpc_border+";"); fu_yax("all", "bubble.message .media", "min-width:200px;"); fu_yax("all", "bubble.message .embed .media", "min-width:0px;"); fu_yax("all", "bubble.message .header", "float:left;margin-right:10px;margin-left:0px;"); fu_yax("all", "bubble.message .footer", "margin-left: 50px;"); fu_yax("all", "bubble.message .footer .meta", "display: inline-block;font-size:0.6em;"); fu_yax("all", "bubble.message .footer .meta .timestamp", "background:none;"); fu_yax("all", "bubble.message .footer .action", "display: inline-block;display:none;font-size:0.6em;background: none;padding: 3px;margin-left:5px;"); fu_yax("all", "bubble.message .header .avatar", "width:40px;height:40px;margin:0px;box-shadow: "+cpc_shadow+";border:1px solid "+cpc_border+";"); fu_yax("all", "bubble.message.myself","text-align:right;"); fu_yax("all", "bubble.message.myself .content_case.normal", "background:"+cpc_button_background+";color:"+cpc_button_text+";"); fu_yax("all", "bubble.message.myself a", "color:"+cpc_button_text+" !important;"); fu_yax("all", "bubble.message.myself .embed a", "color:"+cpc_alt_text+" !important;"); fu_yax("all", "bubble.message.myself .footer", "margin-right: 50px;"); fu_yax("all", "bubble.message.myself .header", "float:right;margin-left:10px;margin-right:0px;"); fu_yax("all", "bubble[onclick].notification", "cursor: pointer;"); fu_yax("all", "bubble[onclick].notification .meta", "color:"+cpc_alt_text+";overflow:hidden;margin-top:10px;font-weight: 500;font-size: 0.8em;"); fu_yax("all", "textarea", "border:1px solid "+cpc_button_background+";resize: none;background:"+cpc_box_background+";color:"+cpc_text+";-webkit-appearance: none;outline: none;font-size: 1em;border-radius: "+cp_elements_radius+"px;width: 100%;margin-top: 5px;margin-bottom: 5px;max-width: 300px;font-weight: 600;padding: 10px;padding-top: 15px;padding-bottom: 15px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", "textarea.hidden", "display:none;"); fu_yax("all", "textarea.fullsize", "width: calc(100% - 24px);max-width: 100%;"); fu_yax("all", "textarea:hover", "border:1px solid "+fu_art(cpc_button_background,20)+";"); fu_yax("all", "input", "border:1px solid "+cpc_button_background+";-webkit-appearance: none;outline: none;font-size: 1em;background:"+cpc_box_background+";color:"+cpc_text+";border-radius: "+cp_elements_radius+"px;width: 100%;margin-top: 5px;margin-bottom: 5px;max-width: 300px;font-weight: 600;padding: 10px;padding-top: 15px;padding-bottom: 15px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", "input:hover", "border:1px solid "+fu_art(cpc_button_background,20)+";"); fu_yax("all", "input:disabled", "opacity:0.7;cursor:default;filter: grayscale(100%);"); fu_yax("all", "select", "border:1px solid "+cpc_button_background+";-webkit-appearance: none;outline: none;font-size: 1em;background:"+cpc_box_background+";color:"+cpc_text+";border-radius: "+cp_elements_radius+"px;width: 100%;margin-top: 5px;margin-bottom: 5px;max-width: 322px;font-weight: 600;padding: 10px;padding-top: 15px;padding-bottom: 15px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", "input[type=submit]", "border:1px solid "+cpc_border+";text-transform: uppercase;background:"+cpc_button_background+";color:"+cpc_button_text+";cursor:pointer;"); fu_yax("all", "input[type=submit]:hover", "border:1px solid "+cpc_border+";background:"+fu_art(cpc_button_background,20)+";"); fu_yax("all", "input[type=file]", "cursor: pointer;padding: 40px;max-width: calc(100% - 84px);text-align: center;border: dashed 1px "+cpc_button_background+";color: rgba(0, 0, 0, 0);"); fu_yax("all", "input[type=file]::file-selector-button", "display:none;"); fu_yax("all", "input[type=file]:before", "content: 'Tap to select file or drop here';color:"+cpc_text+";"); fu_yax("all", "[placeholder]::-webkit-input-placeholder", "color:"+cpc_alt_text+";opacity:0.7;font-weight:400;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", "[placeholder]:focus::-webkit-input-placeholder", "transform: translate(10px, 0px);font-weight:600;color:"+cpc_text+";z-index:5;"); fu_yax("all", "livearea", "text-align:left;display:block;border:1px solid "+cpc_button_background+";resize: none;background:"+cpc_box_background+";color:"+cpc_text+";-webkit-appearance: none;outline: none;font-size: 1em;border-radius: "+cp_elements_radius+"px;width: 100%;margin-top: 5px;margin-bottom: 5px;max-width: 300px;font-weight: 600;padding: 10px;padding-top: 15px;padding-bottom: 15px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", "livearea.fullsize", "width: calc(100% - 24px);max-width: 100%;"); fu_yax("all", "livearea:hover", "border:1px solid "+fu_art(cpc_button_background,20)+";"); fu_yax("all", "livearea[placeholder]:empty:before", "color:"+cpc_alt_text+";opacity:0.7;content: attr(placeholder);"); fu_yax("all", "livearea[placeholder]:focus:empty:before", "content: '';"); fu_yax("all", "livearea .mention", "color:"+cpc_alt2_text+";background:"+cpc_alt2_background+";border-radius: "+cp_elements_radius+"px;padding: 3px;padding-left: 10px;padding-right: 10px;display: inline-block;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", "livearea .tag", "color:"+cpc_alt2_text+";background:"+cpc_alt2_background+";border-radius: "+cp_elements_radius+"px;padding: 3px;padding-left: 10px;padding-right: 10px;display: inline-block;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", "livearea .cafe", "color:"+cpc_alt2_text+";background:"+cpc_alt2_background+";border-radius: "+cp_elements_radius+"px;padding: 3px;padding-left: 10px;padding-right: 10px;display: inline-block;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", "livearea .mention.good", "color:"+cpc_alt3_text+";background:"+cpc_alt3_background+";"); fu_yax("all", "livearea .tag.good", "color:"+cpc_alt3_text+";background:"+cpc_alt3_background+";"); fu_yax("all", "livearea .cafe.good", "color:"+cpc_alt3_text+";background:"+cpc_alt3_background+";"); fu_yax("all", "livearea .mention.wait", "color:"+cpc_alt1_text+";background:"+cpc_alt1_background+";"); fu_yax("all", "livearea .tag.wait", "color:"+cpc_alt1_text+";background:"+cpc_alt1_background+";"); fu_yax("all", "livearea .cafe.wait", "color:"+cpc_alt1_text+";background:"+cpc_alt1_background+";"); fu_yax("all", "livearea .mention.bad", "border-bottom-left-radius: 0px;"); fu_yax("all", "livearea .tag.bad", "border-bottom-left-radius: 0px;"); fu_yax("all", "livearea .cafe.bad", "border-bottom-left-radius: 0px;"); fu_yax("all", "livearea .mention.wait", "border-bottom-left-radius: 0px;"); fu_yax("all", "livearea .tag.wait", "border-bottom-left-radius: 0px;"); fu_yax("all", "livearea .cafe.wait", "border-bottom-left-radius: 0px;"); fu_yax("all", ".header_bubble", "overflow:hidden;background:rgba(0,0,0,0);color:"+cpc_alt_text+";padding:10px;padding-left:15px;padding-right:15px;border-radius:"+cp_elements_radius+"px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("all", ".header_bubble:hover", "background:"+cpc_alt_background+";color:"+cpc_alt_text+";"); fu_yax("all", ".aspectcase", "width: 100%;position: relative;"); fu_yax("all", ".aspectcase.onebyone", "padding-bottom: calc(100% / (1/1));"); fu_yax("all", ".aspectcase.thirtybyeight", "padding-bottom: calc(100% / (30/8));"); fu_yax("all", ".aspectcase.twentyonebynine", "padding-bottom: calc(100% / (21/9));"); fu_yax("all", ".aspectcase.sixteenbynine", "padding-bottom: calc(100% / (16/9));"); fu_yax("all", ".aspectcase.fourbythree", "padding-bottom: calc(100% / (4/3));"); fu_yax("all", ".aspectcase.threebytwo", "padding-bottom: calc(100% / (3/2));"); fu_yax("all", ".aspectcase.eightbyfive", "padding-bottom: calc(100% / (8/5));"); fu_yax("all", ".aspectcase .content", "padding:0px !important;position: absolute;top: 0; bottom: 0; left: 0; right: 0;"); fu_yax("all", ".loading", "margin: 0px auto;margin-top: 20px;margin-bottom: 20px;width: 40px;height: 40px;box-sizing: border-box;border: solid 4px "+fu_hpe(cpc_link,0.3)+";border-left-color: "+cpc_link+";border-radius: 50%;animation: animation-loading 600ms linear infinite;"); fu_yax("all", ".fitloading", "margin:5px;width: calc(100% - 10px);height: calc(100% - 10px);box-sizing: border-box;border: solid 2px "+fu_hpe(cpc_link,0.3)+";border-left-color: "+cpc_link+";border-radius: 50%;animation: animation-loading 600ms linear infinite;"); fu_yax("all", "@keyframes animation-loading", "0% { transform: rotate(0deg);} 100% { transform: rotate(360deg);}"); fu_yax("all", "@keyframes pride", "0% { background-size: 2000%;} 100% { background-size: 100%;}"); if (s_app_reducemotion=="false"){ fu_yax("all", "@keyframes animation-bubble-in", "0% {opacity: 0; transform:scale(.95);} 10% { opacity: 0.5;} 100% { opacity:1; transform:scale(1);}"); fu_yax("all", "@keyframes animation-modl-in", "0% {opacity: 0; transform:scale(0.90);} 10% { opacity: 0.5;} 100% { opacity:1; transform:scale(1);}"); fu_yax("all", "@keyframes animation-fade-out-down", "from{ opacity: 1; -webkit-transform: none; transform: none;} to{ opacity: 0; -webkit-transform: translate3d(0, 100px, 0); transform: translate3d(0, 100px, 0);}"); fu_yax("all", "@keyframes animation-fade-out-up", "from{ opacity: 1; -webkit-transform: none; transform: none;} to{ opacity: 0; -webkit-transform: translate3d(0, -100px, 0); transform: translate3d(0, -100px, 0);}"); fu_yax("all", "@keyframes animation-fade-out-right", "from{ opacity: 1; -webkit-transform: none; transform: none;} to{ opacity: 0; -webkit-transform: translate3d(100px, 0, 0); transform: translate3d(100px, 0, 0);}"); fu_yax("all", "@keyframes animation-fade-in-up", "from{ opacity: 0; -webkit-transform: translate3d(0, 100px, 0); transform: translate3d(0, 100px, 0);} to{ opacity: 1; -webkit-transform: none; transform: none;}"); fu_yax("all", "@keyframes animation-fade-in-down", "from{ opacity: 0; -webkit-transform: translate3d(0, -100px, 0); transform: translate3d(0, -100px, 0);} to{ opacity: 1; -webkit-transform: none; transform: none;}"); fu_yax("all", "@keyframes animation-zoom-in", "from{ opacity: 0; -webkit-transform: scale3d(.3, .3, .3); transform: scale3d(.3, .3, .3);} 50%{ opacity: 1;}"); fu_yax("all", "@keyframes animation-zoom-out", "0%{ opacity: 1; -webkit-transform: scale3d(1, 1, 1); transform: scale3d(1, 1, 1);} 99%{ opacity: 0; -webkit-transform: scale3d(.3, .3, .3); transform: scale3d(.3, .3, .3);} 100%{ opacity: 0; -webkit-transform: scale3d(.3, .3, .3); transform: scale3d(.3, .3, .3); top: -1200px;}");}else{ fu_yax("all", "@keyframes animation-bubble-in", "0% { opacity:0; transform:scale(1);} 10% { opacity: 0.5;} 100% { opacity:1; transform:scale(1);}"); fu_yax("all", "@keyframes animation-modl-in", "0% { opacity:0; transform:scale(1);} 10% { opacity: 0.5;} 100% { opacity:1; transform:scale(1);}"); fu_yax("all", "@keyframes animation-fade-out-down", "from{ opacity: 0; -webkit-transform: translate3d(0, 100px, 0); transform: translate3d(0, 100px, 0);} to{ opacity: 0; -webkit-transform: translate3d(0, 100px, 0); transform: translate3d(0, 100px, 0);}"); fu_yax("all", "@keyframes animation-fade-out-up", "from{ opacity: 0; -webkit-transform: translate3d(0, -100px, 0); transform: translate3d(0, -100px, 0);} to{ opacity: 0; -webkit-transform: translate3d(0, -100px, 0); transform: translate3d(0, -100px, 0);}"); fu_yax("all", "@keyframes animation-fade-out-right", "from{ opacity: 0; -webkit-transform: translate3d(100px, 0, 0); transform: translate3d(100px, 0, 0);} to{ opacity: 0; -webkit-transform: translate3d(100px, 0, 0); transform: translate3d(100px, 0, 0);}"); fu_yax("all", "@keyframes animation-fade-in-up", "from{ opacity: 1; -webkit-transform: none; transform: none;} to{ opacity: 1; -webkit-transform: none; transform: none;}"); fu_yax("all", "@keyframes animation-fade-in-down", "from{ opacity: 1; -webkit-transform: none; transform: none;} to{ opacity: 1; -webkit-transform: none; transform: none;}"); fu_yax("all", "@keyframes animation-zoom-in", "from{ opacity: 1;} 50%{ opacity: 1;}"); fu_yax("all", "@keyframes animation-zoom-out", "0%{ opacity: 0; -webkit-transform: scale3d(.3, .3, .3); transform: scale3d(.3, .3, .3); top: -1200px;} 100%{ opacity: 0; -webkit-transform: scale3d(.3, .3, .3); transform: scale3d(.3, .3, .3); top: -1200px;}");} var metaThemeColor = ad("meta[name=theme-color]"); var arr=accent.split(","); var col=fu_xlz(parseInt(arr[0]),parseInt(arr[1]),parseInt(arr[2])); metaThemeColor.setAttribute("content", col);} function fu_chz(size,callback){ var background="rgb(255,255,255)"; var topcolour=fu_art("rgb("+s_accent+")",0); var bottomcolour=fu_art("rgb("+s_accent+")",20); var canvas = document.createElement('canvas'); canvas.height = size; canvas.width = size; canvas.style.backgroundColor = background; var ctx = canvas.getContext('2d'); ctx.beginPath(); ctx.rect(0, 0, size, size); ctx.fillStyle = background; ctx.fill(); ctx.textAlign = "center"; ctx.font = 'bolder '+(size/3)+'px Arial'; ctx.fillStyle = bottomcolour; ctx.fillText("Café", (size/2), ((size/2)+(size/3.9))); ctx.textAlign = "center"; ctx.font = 'bolder '+(size/3)+'px Arial'; ctx.fillStyle = topcolour; ctx.fillText("Hey", (size/2), (size/2)); callback(canvas.toDataURL());} function fu_cst(ctx, x, y, width, height, radius){ if (width < 2 * radius) radius = width / 2; if (height < 2 * radius) radius = height / 2; ctx.beginPath(); ctx.moveTo(x + radius, y); ctx.arcTo(x + width, y, x + width, y + height, radius); ctx.arcTo(x + width, y + height, x, y + height, radius); ctx.arcTo(x, y + height, x, y, radius); ctx.arcTo(x, y, x + width, y, radius); ctx.closePath();} function fu_xlv(ctx, color, ox, oy, blur){ ctx.shadowColor = color; ctx.shadowOffsetX = ox; ctx.shadowOffsetY = oy; ctx.shadowBlur = blur;} function fu_rrw(width,height,callback){ var background="rgb(235, 235, 235)"; var topcolour=fu_art("rgb("+s_accent+")",0); var bottomcolour=fu_art("rgb("+s_accent+")",20); var canvas = document.createElement('canvas'); canvas.width = width; canvas.height = height; canvas.style.backgroundColor = background; var ctx = canvas.getContext('2d'); ctx.beginPath(); ctx.rect(0, 0, width, height); ctx.fillStyle = background; ctx.fill(); ctx.textAlign = "center"; ctx.font = 'bolder '+(width/6)+'px Arial'; ctx.fillStyle = bottomcolour; ctx.fillText("Café", (width/2), ((height/2)+(width/8))); ctx.textAlign = "center"; ctx.font = 'bolder '+(width/6)+'px Arial'; ctx.fillStyle = topcolour; ctx.fillText("Hey", (width/2), (height/2)); callback(canvas.toDataURL());} function fu_crv(mode){ s_structure=mode; fu_ndu(mode); fu_oen("js_content"); if (mode=="splash"){ fu_qak("js_content", "<div id='container_contentcase'><div class='top_main_header'><div style='float: left;'><div id='container_header'></div></div><div style='float: right;'><div id='container_menu'></div></div></div><div id='container_content'></div><div id='container_footer'></div></div>");} if (mode=="simple"){ fu_qak("js_content", "<div id='container_contentcase'><div id='container_header'></div><div id='container_menu'></div><div id='container_content'></div><div id='container_footer'></div></div>");} if (mode=="embed"){ fu_qak("js_content", "<div id='container_contentcase'><div id='container_header'></div><div id='container_content'></div><div id='container_footer'></div></div>");} if (mode=="full"){ if (s_width>=700){ fu_qak("js_content", "<div id='container_windowcase'><div id='container_top'></div><div id='container_headercase'><div id='container_header'></div></div><div id='container_contentcase'><div id='container_sidebar'></div><div id='container_menu'></div><div id='container_content'></div></div><div id='container_footer'></div></div>");}else{ fu_qak("js_content", "<div id='container_top'></div><div id='container_menu'></div><div id='container_headercase'><div id='container_header'></div></div><div id='container_content'></div><div id='container_footer'></div>");}}
fu_jbe(mode); fu_cpk(mode); fu_hug(mode); fu_xiw(mode);} function fu_ndu(mode){ fu_qjp("simple"); fu_qjp("splash"); fu_qjp("full"); fu_qjp("full_large"); fu_qjp("full_medium"); fu_qjp("full_small"); fu_qjp("special"); fu_qjp("embed"); fu_qjp("sizebased_tablet"); fu_qjp("sizebased_mobile"); if (mode=="simple"){ fu_yax("simple", "body", "background:"+cpc_background+";color:"+cpc_text+";"); fu_yax("simple", "#container_header", "margin:0px auto;padding:0px;padding-bottom: 20px;"); fu_yax("simple", "#container_menu", "margin:0px auto;text-align:center;padding:0px;padding-bottom: 30px;"); fu_yax("simple", "content", "padding:20px;"); fu_yax("simple", "#container_contentcase", "max-width: 600px;margin:0px auto;"); fu_yax("simple", "#container_footer", "margin:0px auto;padding:20px;text-align:center;"); fu_yax("simple", "#container_header h1", "text-align:center;"); fu_yax("simple", "bubble.alt0", "background:"+cpc_alt_background+";color:"+cpc_alt_text+";"); fu_yax("simple", "bubble.alt0 input[type=text]", "background:"+cpc_background+";"); fu_yax("simple", "bubble.alt0 input[type=password]", "background:"+cpc_background+";"); if (s_width>=700){ fu_yax("simple", "bubble.halfsized", "display:inline-block;vertical-align:top;width: calc(50% - 27px);"); fu_yax("simple", "bubble.halfsized:nth-of-type(even)", "margin-left: 5px;"); fu_yax("simple", "bubble.halfsized:nth-of-type(odd)", "margin-right: 5px;");}} if (mode=="splash"){ fu_yax("splash", "body", "background:"+cpc_background+";color:"+cpc_text+";"); fu_yax("splash", "#container_header", "margin:0px auto;margin-bottom:0px;padding:0px;"); fu_yax("splash", ".top_main_header", "margin-bottom:40px;overflow:hidden;padding-bottom:10px;"); fu_yax("splash", "content", "padding:20px;"); fu_yax("splash", "#container_contentcase", "max-width: 1000px;margin:0px auto;"); fu_yax("splash", "#container_footer", "margin:0px auto;padding:20px;text-align:center;"); if (s_width<=700){ fu_yax("splash", "content", "padding:10px !important;");}
fu_yax("splash", ".hero_bubble", "border:0px;background:none;box-shadow:none;"); fu_yax("splash", ".subhero_bubble", "box-shadow:none;"); if (s_width>=700){ fu_yax("splash", ".herotext_large", "font-size:5em;font-weight:800;margin-top:0px;margin-bottom: 15px;"); fu_yax("splash", ".herotext_medium", "font-size: 1.5em;");}else{ fu_yax("splash", ".herotext_large", "font-size:4em;font-weight:800;margin-top:0px;margin-bottom: 15px;"); fu_yax("splash", ".herotext_medium", "font-size: 1.3em;");}
fu_yax("splash", "bubble.alt0", "background:"+cpc_alt_background+";color:"+cpc_alt_text+";"); fu_yax("splash", ".floatbox_a", "width:46%;display:inline-block;"); fu_yax("splash", ".floatbox_b", "width:54%;display:inline-block;"); fu_yax("splash", ".floatbox_c", "width:60%;display:inline-block;"); fu_yax("splash", ".floatbox_d", "width:40%;display:inline-block;"); fu_yax("splash", ".floatbox_a bubble", "border-radius:25px;margin:0px;margin-bottom:15px;padding:15px;padding-top: 25px;padding-bottom: 25px;background:"+cpc_box_background+";color:"+cpc_text+";"); fu_yax("splash", ".floatbox_b bubble", "border-radius:25px;margin:0px;margin-bottom:15px;padding:15px;padding-top: 25px;padding-bottom: 25px;background:"+cpc_box_background+";color:"+cpc_text+";"); fu_yax("splash", ".floatbox_c bubble", "border-radius:25px;margin:0px;margin-bottom:15px;padding:15px;padding-top: 25px;padding-bottom: 25px;background:"+cpc_box_background+";color:"+cpc_text+";"); fu_yax("splash", ".floatbox_d bubble", "border-radius:25px;margin:0px;margin-bottom:15px;padding:15px;padding-top: 25px;padding-bottom: 25px;background:"+cpc_box_background+";color:"+cpc_text+";"); if (s_width<=700){ fu_yax("splash", ".floatbox_a", "width:100% !important;"); fu_yax("splash", ".floatbox_b", "width:100% !important;"); fu_yax("splash", ".floatbox_c", "width:100% !important;"); fu_yax("splash", ".floatbox_d", "width:100% !important;");}else{ fu_yax("splash", ".floatbox", "overflow:hidden;display: flex;"); fu_yax("splash", ".ml bubble", "margin-left:15px !important;"); fu_yax("splash", ".mr bubble", "margin-right:15px !important;"); fu_yax("splash", ".floatbox_a bubble", "height: calc(100% - 45px);"); fu_yax("splash", ".floatbox_b bubble", "height: calc(100% - 45px);"); fu_yax("splash", ".floatbox_c bubble", "height: calc(100% - 45px);"); fu_yax("splash", ".floatbox_d bubble", "height: calc(100% - 45px);");}} if (mode=="embed"){ fu_yax("embed", "body", "-webkit-touch-callout: none;padding:0px;min-width:100%;min-height:100% !important;margin:0px;background:none !important;color:"+cpc_text+";font-family: "+cp_fonts+";font-size:1em;"); fu_yax("embed", "#container_header", "margin:0px auto;"); fu_yax("embed", "bubble", "padding:10px;margin-bottom:0px;box-shadow:none;border:1px solid "+cpc_border+";"); fu_yax("embed", "bubble:last-of-type", "margin-bottom:0px;"); fu_yax("embed", "content", "padding:0px;"); fu_yax("embed", "#container_contentcase", "max-width: 850px;margin:0px auto;"); fu_yax("embed", "#container_footer", "margin:0px auto;text-align:center;"); fu_yax("embed", "#container_header h1", "text-align:center;"); fu_yax("embed", ".conversation .footer", "display:none;"); fu_yax("embed", ".conversation .header .action", "display:none;"); fu_yax("embed", "body.noscroll bubble", "opacity:0.5;"); fu_yax("embed", "body.noscroll modl bubble", "opacity:1;"); fu_yax("embed", "modl .background", "opacity:0;"); fu_yax("embed", "bubble.profile h1", "max-width: calc(100% - 200px);"); fu_yax("embed", "bubble.profile h2", "max-width: calc(100% - 200px);"); if (s_width<=599){ fu_yax("embed", "bubble.profile .avatar.main", "border-width:2px;width: 100px;height: 100px;margin-top: -50px;"); fu_yax("embed", "bubble.profile .minibubble", "padding: 10px;");}} if (mode=="full"){ fu_yax("full", "body", "background:"+cpc_background+";color:"+cpc_text+";overflow-y:scroll;"); fu_yax("full", "#container_top", "max-width:1100px;margin:0px auto;margin-top:70px;"); fu_yax("full", "#container_content", "max-width:1100px;margin:0px auto;margin-bottom:20px;padding:20px;padding-top: 0px;"); fu_yax("full", "#container_footer", "max-width:1100px;margin:0px auto;padding:20px;text-align:center;"); fu_yax("full", "#container_headercase", "width: 100%;position: fixed;top: 0px;z-index: 5000;left: 0px;margin-top: env(safe-area-inset-top, 0px);-webkit-transition: top 250ms ease-in-out;-moz-transition: top 250ms ease-in-out;-o-transition: top 250ms ease-in-out;transition: top 250ms ease-in-out;"+cp_frost_heavy+"border-bottom:1px solid "+cpc_border+";"); fu_yax("full", "body.active_livearea #container_headercase", "-webkit-transition: top 0ms ease-in-out;-moz-transition: top 0ms ease-in-out;-o-transition: top 0ms ease-in-out;transition: top 0ms ease-in-out;"); fu_yax("full", "#container_header", "overflow:hidden;margin:0px auto;padding:10px;"); fu_yax("full", ".uibackground", "background:"+cpc_background+";position:fixed;background-size: cover;left:0px;top:0px;z-index: -5;width:100%;height:100%;"); fu_yax("full", ".uibackground .inside", "width: 100%;height: 100%;-webkit-backdrop-filter: blur(5px)!important;-moz-backdrop-filter: blur(5px)!important;backdrop-filter: blur(5px)!important;background: "+fu_hpe(cpc_background,0.85)+";"); fu_yax("full", ".sidemenu a", "display:block;margin-bottom:5px;background:"+fu_hpe(cpc_alt_background,0)+";color:"+cpc_alt_text+";border-radius: "+cp_elements_radius+"px;border:1px solid rgba(0,0,0,0);padding: 5px;white-space: nowrap;text-overflow: ellipsis;overflow:hidden;padding-top:10px;padding-bottom:10px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("full", ".sidemenu a.current", "padding-left:15px !important;position: relative;z-index: 5;background:"+cpc_box_background+";border:1px solid "+cpc_button_background+";"); fu_yax("full", ".sidemenu a.important", "background:"+cpc_button_background+";color:"+cpc_button_text+";padding-top: 10px;padding-bottom: 10px;"); fu_yax("full", ".sidemenu a.important:hover", "background:"+fu_art(cpc_button_background,20)+";"); fu_yax("full", ".sidemenu a:hover", "background:"+cpc_alt_active_background+" !important;color:"+cpc_alt_text+" !important;padding-left:15px !important;position: relative;z-index: 5;"); fu_yax("full", ".sidemenu a:last-of-type", "margin-bottom:0px;"); fu_yax("full", ".sidemenu .section a", "background:"+fu_hpe(cpc_alt_background,0)+";color:"+cpc_alt_text+";"); fu_yax("full", ".sidemenu .section a:hover", "background:"+cpc_alt_background+";color:"+cpc_alt_text+";"); fu_yax("full", ".sidemenu .cover", "background-position: center;background-size: cover;"); fu_yax("full", ".sidemenu .multiline .avatar", "margin-bottom: -24px;width: 44px;height: 44px;margin-top: -5px;"); fu_yax("full", ".sidemenu .multiline .subline", "margin-top: 5px; font-size: 0.5em; margin-left: 52px;"); fu_yax("full", ".sidemenu .multiline .badge", "display: inline-block;padding:3px;padding-left: 10px;padding-right: 10px;margin-left: 5px;border-radius: "+cp_elements_radius+"px;"); fu_yax("full", ".sidemenu .multiline .badge.online", "background:"+fu_art("rgb(82, 199, 135)",75)+";color: rgb(22, 22, 22);"); fu_yax("full", ".sidemenu .multiline .badge.idle", "background:"+fu_art("rgb(199, 144, 82)",75)+";color: rgb(22, 22, 22);"); fu_yax("full", ".header_logo", "float: left;background:"+cpc_alt_background+";color:"+cpc_text+" !important;border-radius: "+cp_elements_radius+"px;font-size: 1em;padding: 10px;padding-left: 20px;padding-right: 20px;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;overflow:hidden;"); if (s_width<=899){ fu_yax("full", "bubble.profile:not(.halfsized) .avatar.main", "border-width: 2px;width: 120px;height: 120px;margin: 0px auto;margin-top: -50px;float: none;display: block;"); fu_yax("full", "bubble.profile:not(.halfsized) .tab", "padding: 5px;padding-left: 10px;padding-right: 10px;font-size: 0.7em;"); fu_yax("full", "bubble.profile:not(.halfsized) h1", "font-size: 1.3em;padding-top: 10px;padding-bottom: 2px;text-align: center;max-width: 100%;"); fu_yax("full", "bubble.profile:not(.halfsized) h2", "font-size: 0.8em;padding-bottom: 5px;text-align: center;max-width: 100%;"); fu_yax("full", "bubble.profile:not(.halfsized) .button", "margin: 0px auto;display: block;max-width: 150px;float:none;"); fu_yax("full", "bubble.profile .minibubble", "padding:10px;");} if (s_width>=700){ fu_yax("full", "#container_contentcase", "max-width: 1100px;margin:0px auto;"); fu_yax("full", "#container_menu", "overflow: hidden;display:inline-block;vertical-align:top;width:282px;padding:10px;padding-top:20px;"); fu_yax("full", "#container_content", "display:inline-block;vertical-align:top;width: calc(100% - 342px);padding-right:10px;padding-top:20px;"); fu_yax("full", "#container_menu .section", "display:block;overflow:auto;margin-bottom:15px;padding: 10px;box-shadow: "+cpc_shadow+";background:"+cpc_box_background+";border-radius: "+cp_elements_radius+"px;border:1px solid "+cpc_border+";"); fu_yax("full", "#container_sidebar .section", "display:block;overflow:auto;margin-bottom:15px;padding: 10px;box-shadow: "+cpc_shadow+";background:"+cpc_box_background+";border-radius: "+cp_elements_radius+"px;border:1px solid "+cpc_border+";"); if (su_alias==null){ fu_yax("full", "#container_contentcase", "padding-left: 0px !important;padding-right: 0px !important;max-width: 800px !important;"); fu_yax("full", "#container_content", "width: calc(100% - 60px) !important;"); fu_yax("full", "#container_menu", "display:none !important;"); fu_yax("full", "#container_sidebar", "display:none !important;");}
fu_yax("full", "#container_headercase", "padding-bottom: 0px;background:"+fu_hpe(cpc_box_background,0.85)+" !important;box-shadow: "+cpc_shadow+";"); fu_yax("full", "#container_header", "overflow:hidden;"); fu_yax("full", "bubble.halfsized", "display:inline-block;vertical-align:top;width: calc(50% - 27px);"); fu_yax("full", "bubble.halfsized:nth-of-type(even)", "margin-left: 5px;"); fu_yax("full", "bubble.halfsized:nth-of-type(odd)", "margin-right: 5px;"); if (s_width>=1100){ fu_yax("full_large", "#container_contentcase", "max-width: 900px;padding-left: 300px;padding-right: 300px;"); fu_yax("full_large", "#container_menu", "position: fixed;left: 10px;top: 59px;width:285px;overflow: auto;margin-top:env(safe-area-inset-top);max-height: calc(calc(100% - 89px) - env(safe-area-inset-top));padding:10px;padding-top:20px;"); fu_yax("full_large", "#container_sidebar", "position: fixed;right: 10px;top: 59px;width:285px;overflow: auto;margin-top:env(safe-area-inset-top);max-height: calc(calc(100% - 89px) - env(safe-area-inset-top));padding:10px;padding-top:20px;"); fu_yax("full_large", "#container_content", "width: calc(100% - 40px) !important;");} if (s_width>=1400){ } if (s_width<=1099){ fu_yax("full_medium", "#container_menu", "width: 260px !important;padding-top:0px;"); fu_yax("full_medium", "#container_menu .section", "margin-bottom:10px;"); fu_yax("full_medium", "#container_content", "width: calc(100% - 290px);padding-left:0px;padding-right:10px;");} if (s_width<=799){ fu_yax("full_small", "#container_menu", "width: 200px !important;"); fu_yax("full_small", "#container_content", "width: calc(100% - 230px);");}} if (s_width<=699){ fu_yax("full", ".header_logo", "padding-top: 8px !important;padding-bottom:8px !important;margin-left: calc(50% - 55px);width: 50px;text-align: center;position: absolute;font-size: 0.7em !important;margin-top: 5px;"); fu_yax("full", "#container_top", "margin-top:60px;"); fu_yax("full", "#container_headercase", "background:"+fu_hpe(cpc_box_background,0.85)+" !important;border-bottom:1px solid "+cpc_border+";"); fu_yax("full", "#container_menu", "background:"+fu_hpe(cpc_box_background,0.85)+" !important;border-top:1px solid "+cpc_border+";position:fixed;z-index: 5000;bottom:0px;left:0px;padding:10px;padding-left:5px;padding-right:5px;width:calc(100% - 10px);padding-bottom: calc(10px + env(safe-area-inset-bottom));-webkit-transition: bottom 250ms ease-in-out;-moz-transition: bottom 250ms ease-in-out;-o-transition: bottom 250ms ease-in-out;transition: bottom 250ms ease-in-out;"+cp_frost_heavy+""); fu_yax("full", "#container_menu a", "display:inline-block;border-radius: "+cp_elements_radius+"px;padding: 5px;margin-left: 5px;margin-right: 5px;font-size: 1em;padding-top: 10px;padding-bottom: 10px;width: calc(25% - 20px);text-align:center;background: "+cpc_alt_background+";color:"+cpc_text+" !important;-webkit-transition: all 200ms ease-in-out;-moz-transition: all 200ms ease-in-out;-o-transition: all 200ms ease-in-out;transition: all 200ms ease-in-out;"); fu_yax("full", "#container_menu a.important", "background:"+cpc_button_background+";color:"+cpc_button_text+" !important;position: absolute;top: -70px;right: 10px;width: 30px;height: 30px;padding: 15px;border-radius: 100%;font-size: 1.5em;overflow: hidden;"); fu_yax("full", "#container_menu a:hover", "background: "+cpc_alt_active_background+";"); if (fu_rsd(cpc_button_background)=="#ffffff"){ fu_yax("full", "#container_menu a.important .svgicon", "filter: invert(1);");}else{ fu_yax("full", "#container_menu a.important .svgicon", "filter: invert(0);");}
fu_yax("full", "#mobile_popin_menu .section", "display:block;overflow:auto;margin-bottom:15px;padding: 10px;box-shadow: "+cpc_shadow+";background:"+cpc_box_background+";border-radius: "+cp_elements_radius+"px;border:1px solid "+cpc_border+";"); fu_yax("full", "#container_content", "padding-left: 10px !important;padding-right: 10px !important;"); fu_yax("full", ".conversation.normal .footer_comments", "margin-left: 10px;"); fu_yax("full", ".conversation.normal .section_extra", "margin-left: 10px;"); fu_yax("full", "bubble .embed .preview", "float: none;padding:0px;margin-right: -10px;margin-left: -10px;margin-top: -10px;margin-bottom:10px;"); fu_yax("full", "bubble .embed .preview img", "border-bottom-left-radius: 0px;min-width:100%;max-width:100%;max-height:800px;border-bottom-right-radius: 0px;"); fu_yax("full", "bubble .embed .preview .media", "margin-top: -10px;margin-left: -10px;margin-right: -10px;width: calc(100% + 20px);border-bottom-left-radius: 0px;border-bottom-right-radius: 0px;"); fu_yax("full", "bubble .embed.youtube .media_backing", "border-bottom-left-radius: 0px;border-bottom-right-radius: 0px;"); fu_yax("full", "bubble .embed.youtube div.media", "margin-top: -10px;margin-left: -10px;margin-right: -10px;width: calc(100% + 20px);border-bottom-left-radius: 0px;border-bottom-right-radius: 0px;"); fu_yax("full", "bubble .embed.applemusic .media_backing", "border-bottom-left-radius: 0px;border-bottom-right-radius: 0px;"); fu_yax("full", "bubble .embed.applemusic div.media", "margin-top: -10px;margin-left: -10px;margin-right: -10px;width: calc(100% + 20px);border-bottom-left-radius: 0px;border-bottom-right-radius: 0px;"); if (s_width<=330){ fu_yax("full", "#container_header", "padding-left:5px !important;padding-right:5px !important;"); fu_yax("all", ".conversation .comment", "min-width:250px;"); fu_yax("all", ".reactcontent", "display:none;");}} }} var uiGenerateBackground_image=false; function fu_xiw(mode){ if (mode!="full"){ fu_oen("uiBackground");} if (mode=="full"){ if (su_alias!=null){ if (su_header!=uiGenerateBackground_image){ fu_oen("uiBackground");}} }} function fu_jbe(mode){ fu_oen("container_header"); if (mode=="full"){ if (s_width>=700){ if (s_mode=="light"){ fu_qak("container_header", "<a tabindex='0' href='/'><div class='header_logo' style='"+css_special_inline_event_style+"' data-title='"+css_special_inline_event_text+"'>Hey.Café</div></a>");} if (s_mode=="dark"){ fu_qak("container_header", "<a tabindex='0' href='/'><div class='header_logo' style='"+css_special_inline_event_style+"' data-title='"+css_special_inline_event_text+"'>Hey.Café</div></a>");} if (sh.length>=2){ fu_qak("container_header", "<a tabindex='0' href='javascript:fu_xhg();'><div class='header_bubble' style='float: left;margin-left:5px;'>"+fu_slu("arrow-left")+"</div></a>");} if (su_alias!=null){ if (s_width>=900){ fu_qak("container_header", "<form action=\"#\" id=\"mainsearchelement\" onsubmit=\"javascript:fu_oie(this,true);\"><input type=\"text\" class=\"input\" tabindex=\"-1\" onkeyup=\"javascript:fu_oie(aa('mainsearchelement'));\" name=\"search\" size=\"50\" maxlength=\"50\" placeholder=\"Search\" style='border:0px solid #ffffff;float: left;margin: 0px;margin-left:5px;padding-bottom:10px;padding-top:10px;padding-left:20px;padding-right:20px;max-width:300px;'></form>");}else{ fu_qak("container_header", "<a href='javascript:fu_dsg();'><div class='header_bubble' style='float: left;margin-left:5px;'>"+fu_slu("search")+"</div></a>");} if (suc_notifications==0){ fu_qak("container_header", "<a tabindex='0' href='/notifications'><div class='header_bubble' id='uiCheckupNotifications' style='float:right;margin-left:5px;'>"+fu_slu("bell")+"</div></a>");}else{ fu_qak("container_header", "<a tabindex='0' href='/notifications'><div class='header_bubble' id='uiCheckupNotifications' style='float:right;margin-left:5px;'>"+fu_slu("bell-fill")+"&ensp;"+fu_euw(suc_notifications)+"</div></a>");} if (suc_messages==0){ fu_qak("container_header", "<a tabindex='0' href='/messages'><div class='header_bubble' id='uiCheckupMessages' style='float:right;margin-left:5px;'>"+fu_slu("envelope")+"</div></a>");}else{ fu_qak("container_header", "<a tabindex='0' href='/messages'><div class='header_bubble' id='uiCheckupMessages' style='float:right;margin-left:5px;'>"+fu_slu("envelope-fill")+"</div></a>");}} if (su_alias==null){ if (s_device!="NativeiOSApp"){ fu_qak("container_header", "<a href='/explore'><div class='header_bubble' style='float: left;margin-left:5px;'>Explore</div></a>");}
fu_qak("container_header", "<a href='/login'><div class='header_bubble' style='float: left;margin-left:5px;'>Login</div></a>"); fu_qak("container_header", "<a href='/register'><div class='header_bubble' style='float: left;margin-left:5px;'>Join</div></a>");}}else{ if (s_mode=="light"){ fu_qak("container_header", "<a tabindex='0' href='/'><div class='header_logo' style='"+css_special_inline_event_style+"' data-title='"+css_special_inline_event_text+"'>Hey.Café</div></a>");} if (s_mode=="dark"){ fu_qak("container_header", "<a tabindex='0' href='/'><div class='header_logo' style='"+css_special_inline_event_style+"' data-title='"+css_special_inline_event_text+"'>Hey.Café</div></a>");} if (su_alias!=null){ fu_qak("container_header", "<a href='javascript:fu_kjv();'><div class='header_bubble' style='float: left;margin-right:5px;border-radius: 40px;padding: 2px;'><img alt='Account image that opens menu' src='"+s_imagecache+"?url="+su_avatar+"&size=88' style='width: 35px;display: inline;vertical-align: text-top;border-radius: 35px;'></div></a>");}
fu_qak("container_header", "<a href='javascript:fu_dsg();'><div class='header_bubble' style='float: left;'>"+fu_slu("search")+"</div></a>"); if (su_alias!=null){ if (suc_notifications==0){ fu_qak("container_header", "<a href='/notifications'><div class='header_bubble' id='uiCheckupNotifications' style='float:right;margin-left:5px;'>"+fu_slu("bell")+"</div></a>");}else{ fu_qak("container_header", "<a href='/notifications'><div class='header_bubble' id='uiCheckupNotifications' style='float:right;margin-left:5px;'>"+fu_slu("bell-fill")+"</div></a>");} if (suc_messages==0){ fu_qak("container_header", "<a href='/messages'><div class='header_bubble' id='uiCheckupMessages' style='float:right;margin-left:5px;'>"+fu_slu("envelope")+"</div></a>");}else{ fu_qak("container_header", "<a href='/messages'><div class='header_bubble' id='uiCheckupMessages' style='float:right;margin-left:5px;'>"+fu_slu("envelope-fill")+"</div></a>");}} }} } function fu_cpk(mode){ fu_oen("container_menu"); if (mode=="full"){ if (su_alias!=null){ if (s_width>=700){ fu_ern("container_menu");}else{ fu_qak("container_menu", "<a href='/feed' title='Home'>"+fu_slu("house")+"</a>"); fu_qak("container_menu", "<a href='/cafes' title='Cafes'>"+fu_slu("cup-hot")+"</a>"); fu_qak("container_menu", "<a href='/explore' title='Explore'>"+fu_slu("compass")+"</a>"); fu_qak("container_menu", "<a href='/@"+su_alias+"' title='Profile'>"+fu_slu("person-badge")+"</a>");} if (s_width>=1100){ fu_brf("container_sidebar");}else{ if (s_width>=700){ fu_brf("container_menu");}} }else{ if (s_width>=700){ if (s_device!="NativeiOSApp"){ fu_qak("container_menu", "<a href='/' tabindex='0'>"+fu_slu("house")+"&ensp;Main</a>");}
fu_qak("container_menu", "<a href='/explore' tabindex='0'>Explore</a>"); fu_qak("container_menu", "<a href='/login' tabindex='0'>Login</a>"); fu_qak("container_menu", "<a href='/register' tabindex='0'>Join</a>");}else{ if (s_device!="NativeiOSApp"){ fu_qak("container_menu", "<a href='/' title='Home'>"+fu_slu("house")+"</a>");}
fu_qak("container_menu", "<a href='/explore' title='Explore'>Explore</a>"); fu_qak("container_menu", "<a href='/login' title='Login'>Login</a>"); fu_qak("container_menu", "<a href='/register' title='Join'>Join</a>");}} } if (mode=="splash"){ if (su_alias==null){ fu_qak("container_menu","<a href='/explore'><div class='tab' style='margin-left:0px;'>Explore</div></a><a href='/login'><div class='tab' style='margin-left:0px;'>Login</div></a><a href='/register'><div class='tab important' style='margin-left:0px;'>Join</div></a>");}} if (mode=="simple"){ if (su_alias==null){ if (fu_mlq("ses_s_sessions")==""){ if (s_device!="NativeiOSApp"){ fu_qak("container_menu","<a href='/'><div class='tab' style='margin-left:0px;'>Home</div></a><a href='/login'><div class='tab' style='margin-left:0px;'>Login</div></a><a href='/register'><div class='tab' style='margin-left:0px;'>Join</div></a>");}else{ fu_qak("container_menu","<a href='/login'><div class='tab' style='margin-left:0px;'>Login</div></a><a href='/register'><div class='tab' style='margin-left:0px;'>Join</div></a>");}} }} } function fu_kjv(){ fu_uti(); fu_qak("container_modl","<div id='mobile_popin_menu'></div><BR><BR><a href='/debug'>Go to debug menu</a>"); fu_ern("mobile_popin_menu"); fu_brf("mobile_popin_menu");} function fu_ern(container){ var menuid=fu_sjw(20); fu_qak(container, "<div class='sidemenu'><div class='section' style='padding:0px;'><div id='conmenu_a_"+menuid+"'></div></div><div class='section'><div id='conmenu_b_"+menuid+"'></div></div><div id='conmenu_c_"+menuid+"'></div></div>"); fu_qak("conmenu_a_"+menuid+"", "<a href='javascript:fu_nby();' style='padding-left:10px;'><img src='"+s_imagecache+"?url="+su_avatar+"&size=88' class='avatar' style='margin-bottom: -24px;width: 44px;height: 44px;margin-top: -5px;' alt='Avatar image for account "+su_name+"'>&ensp;"+su_name+"<div style=\"margin-top: 5px; font-size: 0.5em; margin-left: 52px;\">Tap for other accounts</div></a>",true); if (sp=="/feed"){ fu_qak("conmenu_b_"+menuid+"", "<a tabindex='0' class='current' href='/feed'>"+fu_slu("house")+"&ensp;<span>Conversations</span></a>",true);}else{ fu_qak("conmenu_b_"+menuid+"", "<a tabindex='0' href='/feed'>"+fu_slu("house")+"&ensp;<span>Conversations</span></a>",true);} if (sp=="/cafes"){ fu_qak("conmenu_b_"+menuid+"", "<a tabindex='0' class='current' href='/cafes'>"+fu_slu("cup-hot")+"&ensp;<span>Cafés</span></a>",true);}else{ fu_qak("conmenu_b_"+menuid+"", "<a tabindex='0' href='/cafes'>"+fu_slu("cup-hot")+"&ensp;<span>Cafés</span></a>",true);} if (sp=="/tags"){ fu_qak("conmenu_b_"+menuid+"", "<a tabindex='0' class='current' href='/tags'>"+fu_slu("tag")+"&ensp;<span>Discussions</span></a>",true);}else{ fu_qak("conmenu_b_"+menuid+"", "<a tabindex='0' href='/tags'>"+fu_slu("tag")+"&ensp;<span>Discussions</span></a>",true);} if (sp.startsWith("/explore")){ fu_qak("conmenu_b_"+menuid+"", "<a tabindex='0' class='current' href='/explore'>"+fu_slu("compass")+"&ensp;<span>Explore</span></a>",true);}else{ fu_qak("conmenu_b_"+menuid+"", "<a tabindex='0' href='/explore'>"+fu_slu("compass")+"&ensp;<span>Explore</span></a>",true);} if (sp.startsWith("/videos")){ fu_qak("conmenu_b_"+menuid+"", "<a tabindex='0' class='current' href='/videos'>"+fu_slu("camera-video")+"&ensp;<span>Videos</span></a>",true);}else{ fu_qak("conmenu_b_"+menuid+"", "<a tabindex='0' href='/videos'>"+fu_slu("camera-video")+"&ensp;<span>Videos</span></a>",true);} if (sp.startsWith("/@"+su_alias+"")){ fu_qak("conmenu_b_"+menuid+"", "<a tabindex='0' class='current' href='/@"+su_alias+"'>"+fu_slu("person-badge")+"&ensp;<span>My Profile</span></a>",true);}else{ fu_qak("conmenu_b_"+menuid+"", "<a tabindex='0' href='/@"+su_alias+"'>"+fu_slu("person-badge")+"&ensp;<span>My Profile</span></a>",true);} if (sp.startsWith("/help") || sp.startsWith("/referral") || sp.startsWith("/home/personal_site") || sp.startsWith("/embed")){ fu_qak("conmenu_b_"+menuid+"", "<a tabindex='0' class='current' href='/help'>"+fu_slu("life-preserver")+"&ensp;<span>Help</span></a>",true);}else{ fu_qak("conmenu_b_"+menuid+"", "<a tabindex='0' href='/help'>"+fu_slu("life-preserver")+"&ensp;<span>Help</span></a>",true);} if (sp.startsWith("/settings")){ fu_qak("conmenu_b_"+menuid+"", "<a tabindex='0' class='current' href='/settings'>"+fu_slu("sliders")+"&ensp;<span>Settings</span></a>",true);}else{ fu_qak("conmenu_b_"+menuid+"", "<a tabindex='0' href='/settings'>"+fu_slu("sliders")+"&ensp;<span>Settings</span></a>",true);} if (s_pwa==false){ if (su_admin=="1" || su_moderator=="1"){ fu_qak("conmenu_b_"+menuid+"", "<a tabindex='0' href='https://admin.hey.cafe' target='_blank'>"+fu_slu("ui-checks")+"&ensp;<span>Moderator Site</span></a>",true);}} if (s_app_hidesuggestions=="false"){ fu_qak("conmenu_c_"+menuid+"", "<div id='sect_c_suggest_account'></div>"); if (fu_low('ui_generate_whotofollow')!=null){ var cachedata=fu_low('ui_generate_whotofollow'); var newlist=""; fu_lgl(cachedata["accounts"], function(id){ var relation="you know"; if (cachedata["mutual"][""+id+""]==undefined){ cachedata["mutual"][""+id+""]="some"; relation="accounts";}
newlist=""+newlist+"<a href=\"javascript:fu_fvt('"+cachedata["accounts"][""+id+""]["alias"]+"');\" class='multiline'><img src='"+s_imagecache+"?url="+cachedata["accounts"][""+id+""]["avatar"]+"&size=88' class='avatar' alt='Avatar image for account "+cachedata["accounts"][""+id+""]["name"]+"'>&ensp;"+fu_ctl(cachedata["accounts"][""+id+""]["name"])+"<div class='subline'>Followed by "+cachedata["mutual"][""+id+""]+" "+relation+"</div></a>";}); fu_oen("sect_c_suggest_account"); fu_qak("sect_c_suggest_account", "<div class='section'><h4 style='margin-top: 0px;'>Who to follow</h4><div id='gen_whotofollow_list'></div></div>",true); fu_qak("gen_whotofollow_list", newlist);}else{ var url="https://"+s_hostname+"/get_explore_accounts?count=3&suggest=true"; fu_knz(url,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["accounts"]!=false){ fu_paa('ui_generate_whotofollow',response["response_data"]); var cachedata=response["response_data"]; var newlist=""; fu_lgl(cachedata["accounts"], function(id){ var relation="you know"; if (cachedata["mutual"][""+id+""]==undefined){ cachedata["mutual"][""+id+""]="some"; relation="accounts";}
newlist=""+newlist+"<a href=\"javascript:fu_fvt('"+cachedata["accounts"][""+id+""]["alias"]+"');\" class='multiline'><img src='"+s_imagecache+"?url="+cachedata["accounts"][""+id+""]["avatar"]+"&size=88' class='avatar' alt='Avatar image for account "+cachedata["accounts"][""+id+""]["name"]+"'>&ensp;"+fu_ctl(cachedata["accounts"][""+id+""]["name"])+"<div class='subline'>Followed by "+cachedata["mutual"][""+id+""]+" "+relation+"</div></a>";}); fu_oen("sect_c_suggest_account"); fu_qak("sect_c_suggest_account", "<div class='section'><h4 style='margin-top: 0px;'>Who to follow</h4><div id='gen_whotofollow_list'></div></div>",true); fu_qak("gen_whotofollow_list", newlist);}} });}} } function fu_brf(container){ var menuid=fu_sjw(20); fu_qak(container, "<div class='sidemenu'><div id='container_friends_online_list'></div><div id='container_cafes_list'></div><div id='container_cafes_suggest_list'></div></div>"); if (fu_low('ui_generate_menu_online')!=null){ if (fu_low('ui_generate_menu_online')!=false){ var cachedata=fu_low('ui_generate_menu_online'); var newlist=""; fu_lgl(cachedata, function(id){ var online='<text class="online_'+cachedata[""+id+""]["alias"]+'"><div class="badge" style="float: right;margin-right: -60px;font-size: 0.7em;"><div style="background:rgb(199, 82, 82);border-radius: 5px;width: 8px;height: 8px;display: inline-block;"></div> Offline</div></text>'; if (fu_rkw(cachedata[""+id+""]["seen"])<=60){ if (fu_rkw(cachedata[""+id+""]["active"])<=60){ var online='<text class="online_'+cachedata[""+id+""]["alias"]+'"><div class="badge online" style="float: right;margin-right: -60px;font-size: 0.7em;"><div style="background:rgb(82, 199, 135);border-radius: 5px;width: 8px;height: 8px;display: inline-block;"></div> Online</div></text>';}else{ var online='<text class="online_'+cachedata[""+id+""]["alias"]+'"><div class="badge idle" style="float: right;margin-right: -60px;font-size: 0.7em;"><div style="background:rgb(199, 144, 82);border-radius: 5px;width: 8px;height: 8px;display: inline-block;"></div> Idle</div></text>';}}
newlist=""+newlist+"<a href=\"javascript:fu_fvt('"+cachedata[""+id+""]["alias"]+"');\" class='multiline' style='padding-right: 70px;'><img src='"+s_imagecache+"?url="+cachedata[""+id+""]["avatar"]+"&size=88' class='avatar' alt='Avatar image for account "+cachedata[""+id+""]["name"]+"'>"+online+"&ensp;"+fu_ctl(cachedata[""+id+""]["name"])+"<div class='subline'>@"+cachedata[""+id+""]["alias"]+"</div></a>";}); fu_qak("container_friends_online_list", "<div class='section'><h4 style='margin-top: 0px;'>Online Friends</h4><div id='gen_myfriend_list'></div></div>",true); fu_qak("gen_myfriend_list", newlist);}else{ fu_qak("container_friends_online_list", "<div class='section'><h4 style='margin-top: 0px;'>Online Friends</h4><div style='text-align:center;'>No friends online</div></div>",true);}}else{ fu_qak("container_friends_online_list", "<div class='section'><h4 style='margin-top: 0px;'>Online Friends</h4><div style='text-align:center;'>No friends online</div></div>",true);} if (fu_low('ui_generate_menu_cafes')!=null){ if (fu_low('ui_generate_menu_cafes')!=false){ var cachedata=fu_low('ui_generate_menu_cafes'); var newlist=""; fu_lgl(cachedata, function(id){ var time=fu_hms(cachedata[""+id+""]["activity"]); var timelocal=fu_tlv(cachedata[""+id+""]["activity"]); newlist=""+newlist+"<a href='/!"+cachedata[""+id+""]["alias"]+"' class='multiline'><img src='"+s_imagecache+"?url="+cachedata[""+id+""]["avatar"]+"&size=88' class='avatar' alt='Avatar image for café "+cachedata[""+id+""]["name"]+"'>&ensp;"+fu_ctl(cachedata[""+id+""]["name"])+"<div class='subline'><timestamp time='"+cachedata[""+id+""]["activity"]+"' data-title='"+timelocal+"'>"+time+"</timestamp></div></a>";}); fu_qak("container_cafes_list", "<div class='section'><h4 style='margin-top: 0px;'>My Cafés</h4><div id='gen_mycafe_list'></div></div>",true); fu_qak("gen_mycafe_list", newlist);}else{ fu_qak("container_cafes_list", "<div class='section'><h4 style='margin-top: 0px;'>My Cafés</h4><div style='text-align:center;'>Not in any Cafés</div></div>",true);}}else{ fu_qak("container_cafes_list", "<div class='section'><h4 style='margin-top: 0px;'>My Cafés</h4><div style='text-align:center;'>Not in any Cafés</div></div>",true);} if (s_app_hidesuggestions=="false"){ if (fu_low('ui_generate_cafetojoin')!=null){ var cachedata=fu_low('ui_generate_cafetojoin'); var newlist=""; fu_lgl(cachedata["cafes"], function(id){ var relation="members you know"; if (cachedata["mutual"][""+id+""]==undefined){ cachedata["mutual"][""+id+""]="some"; relation="members";}
newlist=""+newlist+"<a href='/!"+cachedata["cafes"][""+id+""]["alias"]+"' class='multiline'><img src='"+s_imagecache+"?url="+cachedata["cafes"][""+id+""]["avatar"]+"&size=88' class='avatar' alt='Avatar image for café "+cachedata["cafes"][""+id+""]["name"]+"'>&ensp;"+fu_ctl(cachedata["cafes"][""+id+""]["name"])+"<div class='subline'>"+cachedata["mutual"][""+id+""]+" "+relation+"</div></a>";}); fu_oen("container_cafes_suggest_list"); fu_qak("container_cafes_suggest_list", "<div class='section'><h4 style='margin-top: 0px;'>Cafés to join</h4><div id='gen_cafetojoin_list'></div></div>",true); fu_qak("gen_cafetojoin_list", newlist);}else{ var url="https://"+s_hostname+"/get_explore_cafes?count=3&suggest=true"; fu_knz(url,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["cafes"]!=false){ fu_paa('ui_generate_cafetojoin',response["response_data"]); var cachedata=response["response_data"]; var newlist=""; fu_lgl(cachedata["cafes"], function(id){ var relation="members you know"; if (cachedata["mutual"][""+id+""]==undefined){ cachedata["mutual"][""+id+""]="some"; relation="members";}
newlist=""+newlist+"<a href='/!"+cachedata["cafes"][""+id+""]["alias"]+"' class='multiline'><img src='"+s_imagecache+"?url="+cachedata["cafes"][""+id+""]["avatar"]+"&size=88' class='avatar' alt='Avatar image for café "+cachedata["cafes"][""+id+""]["name"]+"'>&ensp;"+fu_ctl(cachedata["cafes"][""+id+""]["name"])+"<div class='subline'>"+cachedata["mutual"][""+id+""]+" "+relation+"</div></a>";}); fu_oen("container_cafes_suggest_list"); fu_qak("container_cafes_suggest_list", "<div class='section'><h4 style='margin-top: 0px;'>Cafés to join</h4><div id='gen_cafetojoin_list'></div></div>",true); fu_qak("gen_cafetojoin_list", newlist);}} });}} } function fu_hug(mode){ fu_oen("container_footer"); if (mode=="full" || mode=="simple" || mode=="splash"){ if (s_pwa==false){ fu_qak("container_footer", "<div style='font-size:0.8em;'>Made with <text style='color:rgb(255, 82, 155);'>love</text> in British Columbia, Canada.<BR>Hey.Café a product of <a href=\"https://lammcs.ca\" target=\"_blank\">LAMM Creative Solutions</a> © 2021-2024.<BR>PO Box 22052 Penticton Plaza RPO, Penticton, BC V2A 8L1, Canada</div>");}} } function fu_xqn(name){ var alias=""; var icon=""; if (sr[""+name+""]!=undefined){ icon=sr[""+name+""]["code"];} if (icon==""){ icon=sr["blank"]["code"];}
alias=name; alias=alias.replace("emoji-", ""); alias=alias.replace("-", " "); return '<img src="https://assets.heycafecdn.com/emoji/svg/'+icon+'.svg" alt="'+name+'" emoji="true" style="width: 1.2em;margin: 0px auto;vertical-align: middle;">';} function fu_dba(){ fu_yax("special", "@-webkit-keyframes emojiflakes-fall", "0%{top:-10%} 100%{top:100%}"); fu_yax("special", "@-webkit-keyframes emojiflakes-shake", "0%{-webkit-transform:translateX(0px);transform:translateX(0px)} 50%{-webkit-transform:translateX(80px);transform:translateX(80px)} 100%{-webkit-transform:translateX(0px);transform:translateX(0px)}"); fu_yax("special", ".emojiflake", "position:fixed;z-index: -5;top:-10%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default;-webkit-animation-name:emojiflakes-fall,emojiflakes-shake;-webkit-animation-duration:10s,3s;-webkit-animation-timing-function:linear,ease-in-out;-webkit-animation-iteration-count:infinite,infinite;-webkit-animation-play-state:running,running;animation-name:emojiflakes-fall,emojiflakes-shake;animation-duration:10s,3s;animation-timing-function:linear,ease-in-out;animation-iteration-count:infinite,infinite;animation-play-state:running,running;"); fu_yax("special", ".emojiflake:nth-of-type(0)", "left:1%;-webkit-animation-delay:0s,0s;animation-delay:0s,0s;"); fu_yax("special", ".emojiflake:nth-of-type(1)", "left:10%;-webkit-animation-delay:1s,1s;animation-delay:1s,1s;"); fu_yax("special", ".emojiflake:nth-of-type(2)", "left:20%;-webkit-animation-delay:6s,.5s;animation-delay:6s,.5s;"); fu_yax("special", ".emojiflake:nth-of-type(3)", "left:30%;-webkit-animation-delay:4s,2s;animation-delay:4s,2s;"); fu_yax("special", ".emojiflake:nth-of-type(4)", "left:40%;-webkit-animation-delay:2s,2s;animation-delay:2s,2s;"); fu_yax("special", ".emojiflake:nth-of-type(5)", "left:50%;-webkit-animation-delay:8s,3s;animation-delay:8s,3s;"); fu_yax("special", ".emojiflake:nth-of-type(6)", "left:60%;-webkit-animation-delay:6s,2s;animation-delay:6s,2s;"); fu_yax("special", ".emojiflake:nth-of-type(7)", "left:70%;-webkit-animation-delay:2.5s,1s;animation-delay:2.5s,1s;"); fu_yax("special", ".emojiflake:nth-of-type(8)", "left:80%;-webkit-animation-delay:1s,0s;animation-delay:1s,0s;"); fu_yax("special", ".emojiflake:nth-of-type(9)", "left:90%;-webkit-animation-delay:3s,1.5s;animation-delay:3s,1.5s;"); fu_qak("container_content",'<div class="emojiflake"><img src="https://assets.heycafecdn.com/emoji/svg/1f60e.svg" style="width:70px;height:70px;"></div>'); fu_qak("container_content",'<div class="emojiflake"><img src="https://assets.heycafecdn.com/emoji/svg/1f974.svg" style="width:70px;height:70px;"></div>'); fu_qak("container_content",'<div class="emojiflake"><img src="https://assets.heycafecdn.com/emoji/svg/1f929.svg" style="width:70px;height:70px;"></div>'); fu_qak("container_content",'<div class="emojiflake"><img src="https://assets.heycafecdn.com/emoji/svg/1f923.svg" style="width:70px;height:70px;"></div>'); fu_qak("container_content",'<div class="emojiflake"><img src="https://assets.heycafecdn.com/emoji/svg/1f973.svg" style="width:70px;height:70px;"></div>'); fu_qak("container_content",'<div class="emojiflake"><img src="https://assets.heycafecdn.com/emoji/svg/1f629.svg" style="width:70px;height:70px;"></div>'); fu_qak("container_content",'<div class="emojiflake"><img src="https://assets.heycafecdn.com/emoji/svg/1f914.svg" style="width:70px;height:70px;"></div>'); fu_qak("container_content",'<div class="emojiflake"><img src="https://assets.heycafecdn.com/emoji/svg/1f633.svg" style="width:70px;height:70px;"></div>'); fu_qak("container_content",'<div class="emojiflake"><img src="https://assets.heycafecdn.com/emoji/svg/1f61c.svg" style="width:70px;height:70px;"></div>'); fu_qak("container_content",'<div class="emojiflake"><img src="https://assets.heycafecdn.com/emoji/svg/1f61c.svg" style="width:70px;height:70px;"></div>');} function fu_enx(url,text){ var linktext = fu_wwb(text); var buttons=""; buttons=""+buttons+"<div style='width:33.33%;display:inline-block;'><a href=\"https://www.facebook.com/sharer.php?u="+ae(url)+"\" target='_blank'><div class='minibubble' style='font-size:0.8em;margin:5px;text-align:center;background:rgb(72,116,226);color:#ffffff;'><div style='font-size:0.9;'>Facebook</div></div></a></div>"; buttons=""+buttons+"<div style='width:33.33%;display:inline-block;'><a href=\"https://mastodonshare.com/?text="+ae(linktext)+"&url="+ae(url)+"\" target='_blank'><div class='minibubble' style='font-size:0.8em;margin:5px;text-align:center;background:rgb(99,100,246);color:#ffffff;'><div style='font-size:0.9;'>Mastodon</div></div></a></div>"; buttons=""+buttons+"<div style='width:33.33%;display:inline-block;'><a href=\"https://publish.buffer.com/compose?url="+ae(url)+"&title="+ae(linktext)+"\" target='_blank'><div class='minibubble' style='font-size:0.8em;margin:5px;text-align:center;background:rgb(245,223,85);color:#000000;'><div style='font-size:0.9;'>Buffer</div></div></a></div>"; buttons=""+buttons+"<div style='width:33.33%;display:inline-block;'><a href=\"https://api.whatsapp.com/send?text="+ae(linktext)+"%20"+ae(url)+"\" target='_blank'><div class='minibubble' style='font-size:0.8em;margin:5px;text-align:center;background:rgb(64,138,126);color:#ffffff;'><div style='font-size:0.9;'>WhatsApp</div></div></a></div>"; buttons=""+buttons+"<div style='width:33.33%;display:inline-block;'><a href=\"https://www.linkedin.com/sharing/share-offsite/?url="+ae(url)+"\" target='_blank'><div class='minibubble' style='font-size:0.8em;margin:5px;text-align:center;background:rgb(45,100,188);color:#ffffff;'><div style='font-size:0.9;'>Linkedin</div></div></a></div>"; buttons=""+buttons+"<div style='width:33.33%;display:inline-block;'><a href=\"https://t.me/share?text="+ae(linktext)+"&url="+ae(url)+"\" target='_blank'><div class='minibubble' style='font-size:0.8em;margin:5px;text-align:center;background:rgb(65,127,198);color:#ffffff;'><div style='font-size:0.9;'>Telegram</div></div></a></div>"; buttons=""+buttons+"<div style='width:33.33%;display:inline-block;'><a href=\"https://www.tumblr.com/widgets/share/tool/preview?canonicalUrl="+ae(url)+"&content="+ae(url)+"&posttype=link&caption="+ae(linktext)+"\" target='_blank'><div class='minibubble' style='font-size:0.8em;margin:5px;text-align:center;background:rgb(0,25,53);color:#ffffff;'><div style='font-size:0.9;'>Tumblr</div></div></a></div>"; buttons=""+buttons+"<div style='width:33.33%;display:inline-block;'><a href=\"mailto:?to=&body="+ae(linktext)+"%20"+ae(url)+"&subject="+ae("Take a look at this on Hey.Café")+"\" target='_blank'><div class='minibubble' style='font-size:0.8em;margin:5px;text-align:center;background:rgb(195,85,70);color:#ffffff;'><div style='font-size:0.9;'>Email</div></div></a></div>"; buttons=""+buttons+"<div style='width:33.33%;display:inline-block;'><a href=\"sms:?body="+ae(linktext)+"%20"+ae(url)+"\" target='_blank'><div class='minibubble' style='font-size:0.8em;margin:5px;text-align:center;background:rgb(94,198,80);color:#000000;'><div style='font-size:0.9;'>SMS</div></div></a></div>"; return buttons;}
function fu_zmb(msg, url, lineNo, columnNo, error){ var cancrash=false; var isvalid=true; if (typeof value=="string" && value.indexOf('Invalid regular expression') > -1){ if (typeof value=="string" && value.indexOf('Emoji') > -1){ isvalid=false;}} if (isvalid==true){ if (s_domain=="beta.hey.cafe"){ }} } function fu_pml(){ s_reloadkill=true; location.reload();} function fu_qgu(){ if (su_id==null){ fu_euy("/"); return false;}else{ return true;}} function fu_xbz(){ if (window.location!==window.parent.location){ setTimeout(function(){ fu_euy("/e/400");}, 500);}} function fu_amz(){ if (fu_mlq("ses_s_sessions")!=""){ fu_peb(); fu_ygh("You can't access this page when running multiple sessions"); setTimeout(function(){ fu_euy("/login");}, 500);}} function fu_dcy(){ window.scrollTo(0,0); var pagefound=false; fu_pcc(""); fu_ccz(""); fu_zmx(""); fu_pmd(""); fu_oen("uiToolTip"); sic=false; sic_type="false"; sic_last="false"; sic_resource="false"; sic_resource_sub="false"; sic_function=""; if (sprender!=sp){ sprender=sp; fu_oen("js_content");} if (sp=="/"){ pagefound=true; fu_auy();} if (sp=="/debug"){ pagefound=true; fu_zcl();} if (sp=="/login"){ pagefound=true; fu_peb();} if (sp=="/register"){ pagefound=true; fu_cey();} if (sp=="/logout"){ pagefound=true; fu_ceo();} if (sp.startsWith("/feed")){ pagefound=true; fu_wjy();} if (sp.startsWith("/cafes")){ pagefound=true; fu_whs();} if (sp.startsWith("/tags")){ pagefound=true; fu_bhx();} if (sp.startsWith("/explore")){ pagefound=true; fu_tmm();} if (sp.startsWith("/messages")){ pagefound=true; fu_ppc();} if (sp.startsWith("/settings")){ pagefound=true; fu_dcf();} if (sp.startsWith("/notifications")){ pagefound=true; fu_wqb();} if (sp.startsWith("/home")){ pagefound=true; fu_auy();} if (sp.startsWith("/help")){ pagefound=true; fu_ehh();} if (sp.startsWith("/delete")){ pagefound=true; fu_dbr();} if (sp.startsWith("/@")){ pagefound=true; fu_ttp();} if (sp.startsWith("/!")){ pagefound=true; fu_vzw();} if (sp.startsWith("/e/")){ pagefound=true; fu_mpm();} if (sp.startsWith("/r/")){ pagefound=true; fu_tfe();} if (sp.startsWith("/share")){ pagefound=true; fu_apd();} if (sp.startsWith("/videos")){ pagefound=true; fu_yiq();} if (sp.startsWith("/conversation")){ pagefound=true; fu_gmc();} if (sp.startsWith("/referral")){ pagefound=true; fu_tfe();} if (sp.startsWith("/embed")){ pagefound=true; fu_qsc();} if (sp.startsWith("/request")){ pagefound=true; fu_bqa();} if (sp.startsWith("/search")){ pagefound=true; fu_dsg();} if (sp.startsWith("/p/")){ pagefound=true; fu_hbn();} if (sp.startsWith("/c/")){ pagefound=true; fu_hbn();} if (sp.startsWith("/#")){ pagefound=true; fu_hbn();} if (pagefound==false){ fu_euy("/e/404");}} function fu_euy(url){ if (s_embed==false){ if (!url.match(/https:/)){ fu_hbj(); if (shl_url!=url){ if (url!=sp){ if (aa("container_content")){ shl_url=sp; shl_contents=aa("container_content").innerHTML; shl_structure=s_structure; shl_scroll=window.scrollY; shl_meta_title=sp_title; shl_meta_description=sp_description; shl_meta_url=sp_url; shl_meta_image=sp_image;}} }
sp=url; if (s_pwa==false){ history.pushState(null, null, sp);}
sh.push(url); fu_dcy();}else{ var openSafari = aa('uiOpenSafari'); openSafari.setAttribute('href', url); openSafari.click();}}else{ window.open(url, '_blank').focus();}} function fu_qqc(){ if (s_embed==false){ var refreshscrollposition=window.scrollY; fu_hbj(); fu_euy(sp); setTimeout(function(){ window.scrollTo(0, refreshscrollposition);}, 550);}} function fu_xhg(){ var count=sh.length; if (count>=2){ var url=sh[count-2]; sh.splice((count-1), 1); sh.splice((count-2), 1); sh.push(url); sp=url; if (s_pwa==false){ history.pushState(null, null, url);} if (shl_url!=sp){ fu_dcy();}else{ shl_url=sp; fu_crv(shl_structure); aa("container_content").innerHTML=shl_contents; setTimeout(function(){ window.scrollTo(0, shl_scroll);}, 5); fu_pcc(shl_meta_title); fu_ccz(shl_meta_description); fu_pmd(shl_meta_url); fu_zmx(shl_meta_image); fu_ikw(); setTimeout(function(){ fu_ikw();}, 500); setTimeout(function(){ shl_url=false; shl_contents=false; shl_structure=false; shl_scroll=false; shl_meta_title=""; shl_meta_description=""; shl_meta_url=""; shl_meta_image="";}, 10);}} }
Element.prototype.remove = function(){ if (this!=null){ if (this.parentElement!=null){ this.parentElement.removeChild(this);}} }
NodeList.prototype.remove = HTMLCollection.prototype.remove = function(){ for(var i = this.length - 1; i >= 0; i--){ if(this[i] && this[i].parentElement){ this[i].parentElement.removeChild(this[i]);}} }
String.prototype.escapeSpecialChars = function(){ return this.replace(/\\n/g, "\\n")
.replace(/\\'/g, "\\'")
.replace(/\\"/g, '\\"')
.replace(/\\&/g, "\\&")
.replace(/\\r/g, "\\r")
.replace(/\\t/g, "\\t")
.replace(/\\b/g, "\\b")
.replace(/\\f/g, "\\f");}; String.prototype.hashCode = function(){ var hash = 0, i, chr; if (this.length === 0) return hash; for (i = 0; i < this.length; i++){ chr = this.charCodeAt(i); hash = ((hash << 5) - hash) + chr; hash |= 0;} return hash;}; Array.prototype.remove = function(from, to){ var rest = this.slice((to || from) + 1 || this.length); this.length = from < 0 ? this.length + from : from; return this.push.apply(this, rest);}; function fu_ybe(el){ var _x = 0; var _y = 0; while( el && !isNaN( el.offsetLeft ) && !isNaN( el.offsetTop ) ){ _x += el.offsetLeft - el.scrollLeft; _y += el.offsetTop - el.scrollTop; el = el.offsetParent;} return { top: _y, left: _x };} function fu_nzo(text,string){ text=text.replaceAll(string, "__RTGMATCH__"); var count = (text.match(/__RTGMATCH__/g) || []).length; return count;} function fu_efd(parent, child){ var node = child.parentNode; while (node != null){ if (node==parent){ return true;}
node = node.parentNode;} return false;} function fu_rgf(url){ var matches=url.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i); return matches && matches[1];} function fu_irl(contents){ contents = contents.replaceAll("\t","~~"); contents = contents.replaceAll("\r",""); contents = contents.replaceAll("\n","\xa0\xa0"); contents = contents.replaceAll("|","&#124;"); contents = contents.replaceAll("\\","&#92;"); contents = contents.replaceAll("(c)","&#169;"); contents = contents.replaceAll("(r)","&#174;"); contents = contents.replaceAll("\"","&#34;"); contents = contents.replaceAll("'","&#39;"); contents = contents.replaceAll("<","&#60;"); contents = contents.replaceAll(">","&#62;"); contents = contents.replaceAll("+","&#43;"); contents = contents.replaceAll("`","&#96;"); return contents;} function fu_wwb(str){ return str.replace(/&#([0-9]{1,3});/gi, function(match, numStr){ var num = parseInt(numStr, 10); return String.fromCharCode(num);});} function fu_xgd(x){ return (decodeURI(x) !== decodeURIComponent(x));} function fu_qdo(str){ str=str.replace(/_/g, '/').replace(/-/g, '+').replace(/\./g, '='); if (str!=null){ return decodeURIComponent(atob(str).split('').map(function(c){ return '%'+('00'+c.charCodeAt(0).toString(16)).slice(-2);}).join(''));}else{ return str;}} function fu_qti(str){ str=btoa(ae(str).replace(/%([0-9A-F]{2})/g, function(match, p1){ return String.fromCharCode('0x'+p1);})); str=str.replace(/\//g, '_').replace(/\+/g, '-').replace(/\=/g, ''); return str;} function fu_muv(parent, child){ let node = child.parentNode; while (node){ if (node === parent){ return true;}
node = node.parentNode;} return false;} function fu_jzc(node, chars, range){ if (!range){ range = document.createRange()
range.selectNode(node); range.setStart(node, 0);} if (chars.count === 0){ range.setEnd(node, chars.count);} else if (node && chars.count >0){ if (node.nodeType === Node.TEXT_NODE){ if (node.textContent.length < chars.count){ chars.count -= node.textContent.length;}else{ range.setEnd(node, chars.count); chars.count = 0;}}else{ for (var lp = 0; lp < node.childNodes.length; lp++){ range = fu_jzc(node.childNodes[lp], chars, range); if (chars.count === 0){ break;}} }} return range;} function fu_txx(element,chars){ if (chars >= 0){ var selection = window.getSelection(); range = fu_jzc(element.parentNode, { count: chars }); if (range){ range.collapse(false); selection.removeAllRanges(); selection.addRange(range);}} } function fu_skj(element){ var caretOffset = 0; var doc = element.ownerDocument || element.document; var win = doc.defaultView || doc.parentWindow; var sel; if (typeof win.getSelection != "undefined"){ sel = win.getSelection(); if (sel.rangeCount > 0){ var range = win.getSelection().getRangeAt(0); var preCaretRange = range.cloneRange(); preCaretRange.selectNodeContents(element); preCaretRange.setEnd(range.endContainer, range.endOffset); caretOffset = preCaretRange.toString().length;}} else if ( (sel = doc.selection) && sel.type != "Control"){ var textRange = sel.createRange(); var preCaretTextRange = doc.body.createTextRange(); preCaretTextRange.moveToElementText(element); preCaretTextRange.setEndPoint("EndToEnd", textRange); caretOffset = preCaretTextRange.text.length;} return caretOffset;} function fu_hrk(element){ return element.textContent.length;} function fu_euw(x){ return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");} function fu_skr(text){ var urlmatches = text.match(/\bhttps?:\/\/([^\<\>\"\'\n\s]+)\b/gi); fu_lgl(urlmatches, function(id){ var data=urlmatches[""+id+""]; data=data.replaceAll("&#34;", ""); data=data.replaceAll("&#39;", ""); data=data.replaceAll("&gt;", ""); data=data.replaceAll("&lt;", ""); text=text.replace(data, "");}); return text;} function fu_fxz(text,size){ var size=parseInt(size); var textinbox=text; var count=text.length; var urlmatches = textinbox.match(/\bhttps?:\/\/([^\<\>\"\'\n\s]+)\b/gi); fu_lgl(urlmatches, function(id){ var data=urlmatches[""+id+""]; data=data.replaceAll("&#34;", ""); data=data.replaceAll("&#39;", ""); data=data.replaceAll("&gt;", ""); data=data.replaceAll("&lt;", ""); textinbox=textinbox.replace(data, "1234567890123456789012345678901234567890");}); var newcount=textinbox.length; var calcdiff=Math.round(count-newcount); if (calcdiff<=0){ calcdiff=0;} var calcnewmax=Math.round(size+calcdiff); return text.substring(0, calcnewmax);} function fu_tey(x){ if (x>=1000){ return ""+(Math.round((x/1000) * 10) / 10)+"k";}else{ return x;}} function fu_lgl(object, callback){ for(var prop in object){ if(object.hasOwnProperty(prop)){ callback(prop, object[prop]);}} } function fu_ddo(text, limit){ if (text.length > limit){ for (let i = limit; i > 0; i--){ if(text.charAt(i) === ' ' && (text.charAt(i-1) != ','||text.charAt(i-1) != '.'||text.charAt(i-1) != ';')){ return text.substring(0, i)+'...';}} return text.substring(0, limit)+'...';} else return text;}; function fu_qex(sname, svalue){ if (svalue!=""){ window.localStorage.setItem(sname, svalue);}} function fu_mlq(sname){ if (window.localStorage){ if (window.localStorage.getItem(sname)!=null){ return window.localStorage.getItem(sname);}else{ return "";}}else{ return "";}} function fu_kym(sname){ if (window.localStorage){ if (window.localStorage.getItem(sname)!=null){ window.localStorage.removeItem(sname);}} } function fu_scx(cname, cvalue, exdays){ var d = new Date(); d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000)); var expires = "expires="+d.toUTCString(); document.cookie = cname+"="+cvalue+";"+expires+";domain=.hey.cafe;path=/";} function fu_yrj(cname){ var name = cname+"="; var decodedCookie = decodeURIComponent(document.cookie); var ca = decodedCookie.split(';'); for (var i = 0; i <= (ca.length-1); i++){ var c = ca[i]; while (c.charAt(0)==' '){ c = c.substring(1);} if (c.indexOf(name)==0){ return c.substring(name.length, c.length);}} return "";} function fu_ggj(){ var cookies = document.cookie.split("; "); for (var c = 0; c < cookies.length; c++){ var d = window.location.hostname.split("."); while (d.length > 0){ var cookieBase = ae(cookies[c].split(";")[0].split("=")[0])+'=; expires=Thu, 01-Jan-1970 00:00:01 GMT; domain='+d.join('.')+' ;path='; var p = location.pathname.split('/'); document.cookie = cookieBase+'/'; while (p.length > 0){ document.cookie = cookieBase + p.join('/'); p.pop();}; d.shift();}} } function fu_xuo(cname){ document.cookie = cname+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT;domain=.hey.cafe;path=/";} function fu_sjw(len, charSet){ charSet = charSet || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'; var randomString = ''; for (var i = 0; i < len; i++){ var randomPoz = Math.floor(Math.random() * charSet.length); randomString += charSet.substring(randomPoz,randomPoz+1);} return randomString;} function fu_leh(data){ let datanew=JSON.parse(data); return datanew;} function fu_mmy(data){ let datanew=JSON.stringify(data); return datanew;} function fu_fhg(form){ var sarray=new Array(); for ( var i = 0; i < form.elements.length; i++ ){ var fieldName = form.elements[i].name; var fieldValue = form.elements[i].value; sarray[""+fieldName+""]=fieldValue;} return sarray;}
function fu_ctl(string){ var stringnew=string; if (stringnew!=undefined){ var matches = stringnew.match(/\p{RI}\p{RI}|\p{Emoji}(\p{EMod}+|\u{FE0F}\u{20E3}?|[\u{E0020}-\u{E007E}]+\u{E007F})?(\u{200D}\p{Emoji}(\p{EMod}+|\u{FE0F}\u{20E3}?|[\u{E0020}-\u{E007E}]+\u{E007F})?)+|\p{EPres}(\p{EMod}+|\u{FE0F}\u{20E3}?|[\u{E0020}-\u{E007E}]+\u{E007F})?|\p{Emoji}(\p{EMod}+|\u{FE0F}\u{20E3}?|[\u{E0020}-\u{E007E}]+\u{E007F})/gu); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var replace=""; for (var ch of data){ if (ch!=""){ emo=ch.codePointAt(0).toString(16); if (replace==""){ replace=""+emo+"";}else{ replace=""+replace+"-"+emo+"";}} } if (replace.length==9){ if (replace.includes("fe0f")){ replace=replace.replace("-fe0f", "");}} if (replace.length==10){ if (replace.includes("fe0f")){ replace=replace.replace("-fe0f", "");}} if (replace!="" && replace!="200d" && replace!="ea00"){ stringnew=stringnew.replace(data, "<img alt='"+fu_qti(data)+"' emojidata='"+fu_qti(data)+"' emoji='true' class='emojiconvert' src='https://assets.heycafecdn.com/emoji/svg/"+replace+".svg' style='width: 1.2em;margin-left: 2px;margin-right: 2px;display: inline;vertical-align: text-top;'>");}}); var matches = stringnew.match(/([\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2694-\u2697]|\uD83E[\uDD10-\uDD5D])/g); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var replace=""; emo=data.codePointAt(0).toString(16); replace=""+emo+""; if (replace!="" && replace!="200d" && replace!="ea00"){ stringnew=stringnew.replace(data, "<img alt='"+fu_qti(data)+"' emoji='true' class='emojiconvert' src='https://assets.heycafecdn.com/emoji/svg/"+replace+".svg' style='width: 1.2em;margin-left: 2px;margin-right: 2px;display: inline;vertical-align: text-top;'>");}});} return stringnew;}
function fu_qmj(contents){ var urlmatches = contents.match(/\bhttps?:\/\/([^\<\>\"\'\n\s]+)\b\/?/gi); fu_lgl(urlmatches, function(id){ var data=fu_iqe(urlmatches[""+id+""]); contents=contents.replace(data["url_original"], "");}); return contents;} function fu_iqe(url){ var data=[]; url=url.replaceAll("&#34;", ""); url=url.replaceAll("&#39;", ""); url=url.replaceAll("&gt;", ""); url=url.replaceAll("&lt;", ""); data["url_original"]=url; data["url_clean"]=url; data["url_display"]=url; data["url_clean"]=data["url_clean"].replace(/(&|\?)utm_.*?\=([^&\s]+)/igm, ""); data["url_display"]=data["url_display"].replace(/(&|\?)utm_.*?\=([^&\s]+)/igm, ""); data["url_clean"]=data["url_clean"].replace(/(&|\?)gcl.*?\=([^&\s]+)/igm, ""); data["url_display"]=data["url_display"].replace(/(&|\?)gcl.*?\=([^&\s]+)/igm, ""); data["url_clean"]=data["url_clean"].replace(/(&|\?)fbcl.*?\=([^&\s]+)/igm, ""); data["url_display"]=data["url_display"].replace(/(&|\?)fbcl.*?\=([^&\s]+)/igm, ""); data["url_clean"]=data["url_clean"].replace(/(&|\?)_ga\=([^&\s]+)/igm, ""); data["url_display"]=data["url_display"].replace(/(&|\?)_ga\=([^&\s]+)/igm, ""); data["url_clean"]=data["url_clean"].replace(/(&|\?)si\=([^&\s]+)/igm, ""); data["url_display"]=data["url_display"].replace(/(&|\?)si\=([^&\s]+)/igm, ""); data["url_clean"]=data["url_clean"].replace(/(&|\?)piwik_.*?\=([^&\s]+)/igm, ""); data["url_display"]=data["url_display"].replace(/(&|\?)piwik_.*?\=([^&\s]+)/igm, ""); data["url_clean"]=data["url_clean"].replace(/(&|\?)matomo_.*?\=([^&\s]+)/igm, ""); data["url_display"]=data["url_display"].replace(/(&|\?)matomo_.*?\=([^&\s]+)/igm, ""); data["url_clean"]=data["url_clean"].replace("http://", "https://"); data["url_display"]=data["url_display"].replace("https://", ""); data["url_display"]=data["url_display"].replace("http://", ""); data["url_display"]=data["url_display"].replace("www.", ""); return data;} function fu_yaa(contents,newlines){ contents=contents.trim(); contents=" "+contents+" "; if (newlines==undefined){ newlines=false;} if (newlines==true){ contents=contents.replace(/\s\s\s\s/g, "<br><br>"); contents=contents.replace(/\s\s/g, "<br>"); contents=contents.replace(/\<br\>\s\s/g, "<br>"); contents=contents.replace(/\<br\>\s/g, "<br>"); contents=contents.replace(/~~/g, "\t"); contents=contents.replace(/\<br\>\<br\>\<br\>/g, "<br><br>"); contents=contents.replace(/\<br\>\<br\>\<br\>/g, "<br><br>"); contents=contents.replace(/\<br\>\<br\>\<br\>/g, "<br><br>");} var matches = contents.match(/(\*\*\s)([^\n\*]+)(\s\*\*)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\*\*\s)([^\n\*]+)(\s\*\*)/); contents=contents.replace(result[0], "<strong>"+result[2]+"</strong>");}); var matches = contents.match(/(\`\s)([^\n\`]+)(\s\`)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\`\s)([^\n\`]+)(\s\`)/); contents=contents.replaceAll(result[0], "<code>"+result[2]+"</code>");}); var matches = contents.match(/(\*\_\s)([^\n\*]+)(\s\_\*)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\*\_\s)([^\n\*]+)(\s\_\*)/); contents=contents.replace(result[0], "<rainbow>"+result[2]+"</rainbow>");}); var matches = contents.match(/(\_\_\s)([^\n\_]+)(\s\_\_)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\_\_\s)([^\n\_]+)(\s\_\_)/); contents=contents.replace(result[0], "<i>"+result[2]+"</i>");}); var matches = contents.match(/([^&a-z0-9A-Z\/]\@)([a-z0-9A-Z\-\_]+)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\@)([a-z0-9A-Z\-\_]+)/); var id=fu_sjw(20); if (fu_nzo(contents,result[0])<=1){ contents=contents.replace(result[0], "<action type='inview_load_mention' element='mention_"+id+"' alias='"+result[2]+"'></action><text class='mention' id='mention_"+id+"'><a href='/@"+result[2]+"'>@"+result[2]+"</a></text>");}}); var matches = contents.match(/([^&a-z0-9A-Z\/]\!)([a-z0-9A-Z\-\_]+)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/([^&]\!)([a-z0-9A-Z\-\_]+)/); var id=fu_sjw(20); if (fu_nzo(contents,result[0].substring(1))<=1){ contents=contents.replace(result[0].substring(1), "<action type='inview_load_cafe' element='cafe_"+id+"' alias='"+result[2]+"'></action><text class='mention' id='cafe_"+id+"'><a href='/!"+result[2]+"'>!"+result[2]+"</a></text>");}}); var matches = contents.match(/([^&a-z0-9A-Z\/]\#)([a-z0-9A-Z\-\_]+)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/([^&]\#)([a-z0-9A-Z\-\_]+)/); var id=fu_sjw(20); if (fu_nzo(contents,result[0].substring(1))<=1){ contents=contents.replace(result[0].substring(1), "<action type='inview_load_tag' element='tag_"+id+"' alias='"+result[2]+"'></action><text class='hashtag' id='tag_"+id+"'><a href='/search/"+result[2]+"'>#"+result[2]+"</a></text>");}}); contents=contents.trim(); return contents;} function fu_fud(contents){ var urlmatches = contents.match(/\bhttps?:\/\/([^\<\>\"\'\n\s]+)\b\/?/gi); fu_lgl(urlmatches, function(id){ var data=fu_iqe(urlmatches[""+id+""]); contents=contents.replace(data["url_original"], "<a href='"+data["url_clean"]+"' target='_blank' rel='noreferrer'>"+data["url_display"]+"</a>");}); return contents;} function fu_hww(contents){ contents=contents.trim(); contents="<p>"+contents+"</p>"; contents=contents.replace(/\&\#124\;/g, "|"); contents=contents.replace(/\&\#96\;/g, "`"); if (contents.includes("{media_spoiler}")){ contents=contents.replace("{media_spoiler}", "");} var matches = contents.match(/\&\#60\;script(.*?)script\&\#62\;/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\&\#60\;script(.*?)script\&\#62\;/); if (result[0]!=""){ contents=contents.replace(result[0], "[["+fu_qti(result[0])+"]]");}}); var matches = contents.match(/\&lt\;script(.*?)script\&gt\;/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\&lt\;script(.*?)script\&gt\;/); if (result[0]!=""){ contents=contents.replace(result[0], "[["+fu_qti(result[0])+"]]");}}); var matches = contents.match(/\&\#60\;style(.*?)style\&\#62\;/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\&\#60\;style(.*?)style\&\#62\;/); if (result[0]!=""){ contents=contents.replace(result[0], "[["+fu_qti(result[0])+"]]");}}); var matches = contents.match(/\&lt\;style(.*?)style\&gt\;/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\&lt\;style(.*?)style\&gt\;/); if (result[0]!=""){ contents=contents.replace(result[0], "[["+fu_qti(result[0])+"]]");}}); var matches = contents.match(/(\`\`\`\s)(.*?[^\`])(\s\`\`\`)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\`\`\`\s)(.*?[^\`])(\s\`\`\`)/); var newcontent=result[2].trim(); var encodematches = newcontent.match(/\[\[(.*?)\]\]/gi); fu_lgl(encodematches, function(id){ var encdata=encodematches[""+id+""]; var encresult = newcontent.match(/\[\[(.*?)\]\]/); newcontent=newcontent.replace(encresult[0], fu_qdo(encresult[1]));}); newcontent=newcontent.replace(/\s\s/g, "\n"); newcontent=newcontent.replace(/\:tick\:/g, "&#96;"); newcontent=newcontent.replace(/\:hashtag\:/g, "&#35;"); newcontent=newcontent.replace(/\:tab\:/g, "&#9;"); newcontent=newcontent.replace(/\//g, "&#47;"); newcontent=newcontent.replace(/\-/g, "&#45;"); newcontent=newcontent.replace(/~~/g, "\t"); newcontent=newcontent.replace(/\-/g, "&#45;"); newcontent=newcontent.replace(/\*/g, "&#42;"); newcontent=newcontent.replace(/\_/g, "&#95;"); newcontent=newcontent.replace(/\|/g, "&#124;"); newcontent=newcontent.replace(/\{/g, "&#123;"); newcontent=newcontent.replace(/\}/g, "&#125;"); newcontent=newcontent.replace(/\!/g, "&#33;"); newcontent=newcontent.replace(/\@/g, "&#64;"); newcontent=newcontent.replace(/:/g, "&#58;"); contents=contents.replace(result[0], "<pre><code>"+newcontent+"</pre></code>");}); var matches = contents.match(/(\`\`\s)(.*?[^\`])(\s\`\`)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\`\`\s)(.*?[^\`])(\s\`\`)/); var newcontent=result[2].trim(); var encodematches = newcontent.match(/\[\[(.*?)\]\]/gi); fu_lgl(encodematches, function(id){ var encdata=encodematches[""+id+""]; var encresult = newcontent.match(/\[\[(.*?)\]\]/); newcontent=newcontent.replace(encresult[0], fu_qdo(encresult[1]));}); newcontent=newcontent.replace(/\s\s/g, "\n"); newcontent=newcontent.replace(/\:tick\:/g, "&#96;"); newcontent=newcontent.replace(/\:hashtag\:/g, "&#35;"); newcontent=newcontent.replace(/\:tab\:/g, "&#9;"); newcontent=newcontent.replace(/\//g, "&#47;"); newcontent=newcontent.replace(/\-/g, "&#45;"); newcontent=newcontent.replace(/~~/g, "\t"); newcontent=newcontent.replace(/\-/g, "&#45;"); newcontent=newcontent.replace(/\*/g, "&#42;"); newcontent=newcontent.replace(/\_/g, "&#95;"); newcontent=newcontent.replace(/\|/g, "&#124;"); newcontent=newcontent.replace(/\{/g, "&#123;"); newcontent=newcontent.replace(/\}/g, "&#125;"); newcontent=newcontent.replace(/\!/g, "&#33;"); newcontent=newcontent.replace(/\@/g, "&#64;"); newcontent=newcontent.replace(/:/g, "&#58;"); contents=contents.replace(result[0], "<pre><code>"+newcontent+"</pre></code>");}); var matches = contents.match(/(\-\-\-\-\s)(.*?[^\-])(\s\-\-\-\-)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\-\-\-\-\s)(.*?[^\-])(\s\-\-\-\-)/); var newcontent=result[2].trim(); contents=contents.replace(result[0], "<details><summary>Reveal Content / Spoilers</summary>"+newcontent+"</pre></details>");}); contents=contents.replace(/\s\s\s\s/g, "</p><p>"); contents=contents.replace(/\s\s/g, "<br>"); contents=contents.replace(/\<p\>\s\s/g, "<p>"); contents=contents.replace(/\<p\>\s/g, "<p>"); contents=contents.replace(/\<p\>\<br\>/g, "<p>"); contents=contents.replace(/\<br\>\<p\>/g, "<p>"); contents=contents.replace(/~~/g, "\t"); var matches = contents.match(/(\#\#\#\s)([^\n\<\>]+)(\s\#\#\#)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\#\#\#\s)([^\n\<\>]+)(\s\#\#\#)/); contents=contents.replace(result[0], "<subheading>"+result[2].trim()+"</subheading>");}); var matches = contents.match(/(\#\#\s)([^\n\<\>]+)(\s\#\#)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\#\#\s)([^\n\<\>]+)(\s\#\#)/); contents=contents.replace(result[0], "<heading>"+result[2].trim()+"</heading>");}); var matches = contents.match(/(\*\*\s)([^\n\*]+)(\s\*\*)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\*\*\s)([^\n\*]+)(\s\*\*)/); contents=contents.replaceAll(result[0], "<strong>"+result[2]+"</strong>");}); var matches = contents.match(/(\`\s)([^\n\`]+)(\s\`)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\`\s)([^\n\`]+)(\s\`)/); contents=contents.replaceAll(result[0], "<code>"+result[2]+"</code>");}); var matches = contents.match(/(\*\_\s)([^\n\*]+)(\s\_\*)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\*\_\s)([^\n\*]+)(\s\_\*)/); contents=contents.replaceAll(result[0], "<rainbow>"+result[2]+"</rainbow>");}); var matches = contents.match(/(\!\_\s)([^\n\*]+)(\s\_\!)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\!\_\s)([^\n\*]+)(\s\_\!)/); var value=result[2]; value=value.substring(0, 25); contents=contents.replace(result[0], "<div><span class=\"sticker sticker\" data-text=\""+value+"\"><span>"+value+"</span></span></div>");}); var matches = contents.match(/(\_\_\s)([^\n\_]+)(\s\_\_)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\_\_\s)([^\n\_]+)(\s\_\_)/); contents=contents.replaceAll(result[0], "<i>"+result[2]+"</i>");}); var matches = contents.match(/(\|\|\s)(.*?[^\|])(\s\|\|)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\|\|\s)(.*?[^\|])(\s\|\|)/); contents=contents.replaceAll("<p>"+result[0]+"</p>", "<quote><p>"+result[2]+"</p></quote>"); contents=contents.replaceAll(result[0], "<quote><p>"+result[2]+"</p></quote>");}); var matches = contents.match(/(\<p\>\*\s)(.*?)(\<\/p\>)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\<p\>\*\s)(.*?)(\<\/p\>)/); contents=contents.replace(result[0], "<ul><li>"+result[2]+"</li></ul>");}); var matches = contents.match(/([^&a-z0-9A-Z\/]\@)([a-z0-9A-Z\-\_]+)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\@)([a-z0-9A-Z\-\_]+)/); var id=fu_sjw(20); if (fu_nzo(contents,result[0])<=1){ if (result[2]!="everyone"){ contents=contents.replace(result[0], "<action type='inview_load_mention' element='mention_"+id+"' alias='"+result[2]+"'></action><text class='mention' id='mention_"+id+"'><a href='/@"+result[2]+"'>@"+result[2]+"</a></text>");}} }); var matches = contents.match(/([^&a-z0-9A-Z\/]\!)([a-z0-9A-Z\-\_]+)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/([^&]\!)([a-z0-9A-Z\-\_]+)/); var id=fu_sjw(20); if (fu_nzo(contents,result[0].substring(1))<=1){ contents=contents.replace(result[0].substring(1), "<action type='inview_load_cafe' element='cafe_"+id+"' alias='"+result[2]+"'></action><text class='mention' id='cafe_"+id+"'><a href='/!"+result[2]+"'>!"+result[2]+"</a></text>");}}); var matches = contents.match(/([^&a-z0-9A-Z\/]\#)([a-z0-9A-Z\-\_]+)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/([^&]\#)([a-z0-9A-Z\-\_]+)/); var id=fu_sjw(20); if (fu_nzo(contents,result[0].substring(1))<=1){ contents=contents.replace(result[0].substring(1), "<action type='inview_load_tag' element='tag_"+id+"' alias='"+result[2]+"'></action><text class='hashtag' id='tag_"+id+"'><a href='/search/"+result[2]+"'>#"+result[2]+"</a></text>");}}); var matches = contents.match(/(\{)file:([^\n\}\{]+)(\})/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\{)file:([^\n\}\{]+)(\})/); contents=contents.replace(result[0], "<attachment id='file_"+result[2].trim()+"'></attachment>");}); var matches = contents.match(/([^&a-z0-9A-Z\/]\:)([^\n\s\:\<\>\/]+)(\:)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\:)([^\n\s\:\<\>\/]+)(\:)/); var lookup_id="emojilookup_"+fu_sjw(30)+""; contents=contents.replace(result[0], "<action type='inview_load_emoji' element='"+lookup_id+"' text='"+result[2]+"'></action><text id='"+lookup_id+"'></text>");}); contents=contents.replace(/\<p\>/g, "<p dir=\"auto\">"); contents=contents.trim(); return contents;} function fu_nns(contents){ var urlmatches = contents.match(/\bhttps?:\/\/([^\<\>\"\'\n\s]+)\b\/?/gi); fu_lgl(urlmatches, function(id){ var data=fu_iqe(urlmatches[""+id+""]); var generated=false; var meta_id="metadata_"+fu_sjw(30)+""; if (fu_nzo(contents,data["url_original"])<=1){ if (data["url_original"].includes("hey.cafe")){ if (data["url_original"].includes("/conversation/")){ var foundid = data["url_original"].match(/(\/conversation\/)([^&\n?#\s\/]+)/); var conversationid=foundid[2]; if (conversationid!=undefined){ if (conversationid.includes("/")==false){ if (conversationid.includes(":")==false){ generated=true; contents=contents.replace(data["url_original"], "<div><action type='inview_load_preview_conversation' element='"+meta_id+"' conversation='"+conversationid+"'></action><div id='"+meta_id+"'><p><a href='"+data["url_clean"]+"' target='_blank' rel='noreferrer'>"+data["url_display"]+"</a></p></div></div>");}else{ var commentid=false; var comm_arr = conversationid.split(':'); if (comm_arr!=null){ conversationid=comm_arr[0]; if (comm_arr[1]!=undefined){ commentid=comm_arr[1];}} if (commentid!=false){ generated=true; contents=contents.replace(data["url_original"], "<div><action type='inview_load_preview_comment' element='"+meta_id+"' conversation='"+conversationid+"' comment='"+commentid+"'></action><div id='"+meta_id+"'><p><a href='"+data["url_clean"]+"' target='_blank' rel='noreferrer'>"+data["url_display"]+"</a></p></div></div>");}} }} }} if (data["url_original"].includes("giphy.com") && data["url_original"].includes("/media/")){ var foundid = data["url_original"].match(/(\/media\/|\/1\/)([^&\n?#]+)/); var imageid=foundid[2]; if (imageid!=undefined){ generated=true; contents=contents.replace(data["url_original"], "<div class='media' style='display: inline-block;width: auto;max-width: 100%;'><a href=\"javascript:fu_lwj('https://proxy.heycafecdn.com/ext_image/gif/?url=https://media.giphy.com/media/"+imageid+"&quality=raw','image',true);\"><img style='max-width: 100%;max-height: 400px;height: auto;width: auto;' original='true' source='https://proxy.heycafecdn.com/ext_image/gif/?url=https://media.giphy.com/media/"+imageid+"&quality=raw' class='optimizer_img' alt='External linked image'></a></div>");}} if (data["url_original"].includes("c.tenor.com") && data["url_original"].includes(".gif")){ var foundid = data["url_original"].match(/c\.tenor\.com([^&\n?#]+)/); var imageid=foundid[1]; if (imageid!=undefined){ generated=true; contents=contents.replace(data["url_original"], "<div class='media' style='display: inline-block;width: auto;max-width: 100%;'><a href=\"javascript:fu_lwj('https://proxy.heycafecdn.com/ext_image/gif/?url=https://c.tenor.com/"+imageid+"&quality=raw','image',true);\"><img style='max-width: 100%;max-height: 400px;height: auto;width: auto;' original='true' source='https://proxy.heycafecdn.com/ext_image/gif/?url=https://c.tenor.com/"+imageid+"&quality=raw' class='optimizer_img' alt='External linked image'></a></div>");}} if (generated==false){ if (contents.includes("("+data["url_original"]+")")==true || contents.includes("( "+data["url_original"]+" )")==true || contents.includes("("+data["url_original"]+" )")==true || contents.includes("( "+data["url_original"]+")")==true){ var foundandcustom=false; var tomatchagainst=data["url_original"]; var tomatchagainst=tomatchagainst.replace("http://", ""); var tomatchagainst=tomatchagainst.replace("https://", ""); var newgenmatch = contents.match(/\[([^\<\>\[\]]+)\]\(\bhttps?:\/\/([^\<\>\"\'\n\s]+)\b\/?\)/gi); fu_lgl(newgenmatch, function(id){ var datanew=newgenmatch[""+id+""]; var newresult = datanew.match(/\[([^\<\>\[\]]+)\]\(\bhttps?:\/\/([^\<\>\"\'\n\s]+)\b\/?\)/); var realurl=newresult[2]; var aliasname=newresult[1]; if (realurl==tomatchagainst){ foundandcustom=true; contents=contents.replace(datanew, "<a href='"+data["url_clean"]+"' target='_blank' rel='noreferrer' data-title='"+data["url_clean"]+"'>"+aliasname+"</a>");}}); var newgenmatch = contents.match(/\(\bhttps?:\/\/([^\<\>\"\'\n\s]+)\b\/?\)/gi); fu_lgl(newgenmatch, function(id){ var datanew=newgenmatch[""+id+""]; var newresult = datanew.match(/\(\bhttps?:\/\/([^\<\>\"\'\n\s]+)\b\/?\)/); var realurl=newresult[1]; if (realurl==tomatchagainst){ foundandcustom=true; contents=contents.replace(datanew, "<action type='inview_load_metadata_light' element='"+meta_id+"' url='"+data["url_clean"]+"'></action><text id='"+meta_id+"'><a href='"+data["url_clean"]+"' target='_blank' rel='noreferrer' data-title='"+data["url_clean"]+"'>"+data["url_display"]+"</a></text>");}}); if (foundandcustom==false){ contents=contents.replace(data["url_original"], "<a href='"+data["url_clean"]+"' target='_blank' rel='noreferrer'>"+data["url_display"]+"</a>");}}else{ contents=contents.replace(data["url_original"], "<div><action type='inview_load_metadata' element='"+meta_id+"' url='"+data["url_clean"]+"'></action><div id='"+meta_id+"'><p><a href='"+data["url_clean"]+"' target='_blank' rel='noreferrer'>"+data["url_display"]+"</a></p></div></div>");}} }}); return contents;} function fu_ltt(contents){ var matches = contents.match(/(\<p dir\=\"auto\"\>)(.*?)(\<\/p\>)/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\<p dir\=\"auto\"\>)(.*?)(\<\/p\>)/); var conresult=result[0]; var emojifound=false; var emojmatches = conresult.match(/\<img alt='([^\<\>]+)' emojidata='([^\<\>]+)' emoji='true' ([^\<\>]+)\>/gi); fu_lgl(emojmatches, function(id){ emojifound=true; var emojdata=emojmatches[""+id+""]; var emojresult = emojdata.match(/\<img alt='([^\<\>]+)' emojidata='([^\<\>]+)' emoji='true' ([^\<\>]+)\>/); conresult=conresult.replace(emojresult[0], "");}); if (emojifound==true){ if (conresult=="<p dir=\"auto\"></p>"){ contents=contents.replace(result[0], "<p dir=\"auto\"><text style=\"font-size:2em;\">"+result[2]+"</text></p>");}} }); return contents;} function fu_maf(contents){ var matches = contents.match(/\[\[(.*?)\]\]/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\[\[(.*?)\]\]/); contents=contents.replace(result[0], "");}); return contents;} function fu_hyf(contents){ var matches = contents.match(/href\=\'\/([^\<\n\s\']+)\'/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/href\=\'\/([^\<\n\s\']+)\'/); var link=result[1]; contents=contents.replace("/"+link, "https://hey.cafe/" +link);}); var matches = contents.match(/href\=\"\/([^\<\n\s\"]+)\"/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/href\=\"\/([^\<\n\s\"]+)\"/); var link=result[1]; contents=contents.replace("/"+link, "https://hey.cafe/" +link);}); return contents;} function fu_xnf(contents){ var sendback=false; contents=contents.replace(/\s\s/g, "\n"); contents=contents.trim(); var matches = contents.match(/(\#\#\s)([^\n\<\>]+)(\s\#\#)/gi); fu_lgl(matches, function(id){ if (sendback==false){ var data=matches[""+id+""]; var result = data.match(/(\#\#\s)([^\n\<\>]+)(\s\#\#)/); sendback=result[2].trim();}}); return sendback;} function fu_kwg(contents){ var sendback=false; var urlmatches = contents.match(/\bhttps?:\/\/([^\<\>\"\'\n\s]+)\b\/?/gi); fu_lgl(urlmatches, function(id){ var data=urlmatches[""+id+""]; data=data.replaceAll("&#34;", ""); data=data.replaceAll("&#39;", ""); data=data.replaceAll("&gt;", ""); data=data.replaceAll("&lt;", ""); contents=contents.replace(data, "");}); var title=fu_xnf(contents); if (title!=false){ contents=contents.replace("## "+title+" ##", "");}
contents=contents.replace(/\s\s/g, "\n"); contents=contents.trim(); var matches = contents.match(/(.[^\n\t]+)/gi); fu_lgl(matches, function(id){ if (sendback==false){ var data=matches[""+id+""]; var result = data.match(/(.[^\n\t]+)/); sendback=result[0].trim();}}); return sendback;} function fu_qix(contents){ var contents=fu_wwb(contents); var title=fu_xnf(contents); var description=fu_kwg(contents); var urltitle=""; if (title==false){ if (description==false){ var urltitle=fu_wwb(Array.from(contents).slice(0, 70).join(''));}else{ urltitle=description;}}else{ urltitle=title;} var pretrim=fu_wwb(urltitle); urltitle=fu_wwb(Array.from(urltitle).slice(0, 70).join('')); urltitle=fu_wwb(urltitle); if (pretrim!=urltitle){ urltitle=urltitle.replace(/\s([^\s]*)$/,"");}
urltitle=urltitle.toLowerCase(); urltitle=urltitle.replace(/[^a-z0-9]+/gi, "-"); urltitle=urltitle.replace("--", "-"); urltitle=urltitle.replace(/\-$/,""); if (urltitle!=""){ return urltitle;}else{ return false;}} function fu_drn(elem, e){ if (e.originalEvent && e.originalEvent.clipboardData && e.originalEvent.clipboardData.getData){ e.preventDefault(); var text = e.originalEvent.clipboardData.getData('text/plain'); window.document.execCommand('insertText', false, text);} else if (e.clipboardData && e.clipboardData.getData){ e.preventDefault(); var text = e.clipboardData.getData('text/plain'); window.document.execCommand('insertText', false, text);}} function fu_nhd(contents){ var matches = contents.match(/\<div([^\<\>]+)\>([^\<\>]+)\<\/div\>/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<div([^\<\>]+)\>([^\<\>]+)\<\/div\>/); contents=contents.replace(result[0], ""+fu_nhd(result[2])+"");}); var matches = contents.match(/\<span([^\<\>]+)\>([^\<\>]+)\<\/span\>/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<span([^\<\>]+)\>([^\<\>]+)\<\/span\>/); contents=contents.replace(result[0], ""+fu_nhd(result[2])+"");}); var matches = contents.match(/\<strong([^\<\>]+)\>([^\<\>]+)\<\/strong\>/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<strong([^\<\>]+)\>([^\<\>]+)\<\/strong\>/); contents=contents.replace(result[0], ""+fu_nhd(result[2])+"");}); var matches = contents.match(/\<i([^\<\>]+)\>([^\<\>]+)\<\/i\>/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<i([^\<\>]+)\>([^\<\>]+)\<\/i\>/); contents=contents.replace(result[0], ""+fu_nhd(result[2])+"");}); var matches = contents.match(/\<font([^\<\>]+)\>([^\<\>]+)\<\/font\>/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<font([^\<\>]+)\>([^\<\>]+)\<\/font\>/); contents=contents.replace(result[0], ""+fu_nhd(result[2])+"");}); var matches = contents.match(/\<text([^\<\>]+)\>([^\<\>]+)\<\/text\>/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<text([^\<\>]+)\>([^\<\>]+)\<\/text\>/); contents=contents.replace(result[0], ""+fu_nhd(result[2])+"");}); return contents;} function fu_ohp(contents){ var matches = contents.match(/\<img alt="([^\<\>]+)" emojidata="([^\<\>]+)" emoji="true" ([^\<\>]+)\>/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<img alt="([^\<\>]+)" emojidata="([^\<\>]+)" emoji="true" ([^\<\>]+)\>/); contents=contents.replace(result[0], ""+fu_qdo(result[2])+"");}); var matches = contents.match(/\<text class="mention([^\<\>]+)" id="([^\<\>]+)" data="([^\<\>]+)">([^\<\>]+)\<\/text\>/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<text class="mention([^\<\>]+)" id="([^\<\>]+)" data="([^\<\>]+)">([^\<\>]+)\<\/text\>/); contents=contents.replace(result[0], ""+result[4]+"");}); var matches = contents.match(/\<text class="cafe([^\<\>]+)" id="([^\<\>]+)" data="([^\<\>]+)">([^\<\>]+)\<\/text\>/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<text class="cafe([^\<\>]+)" id="([^\<\>]+)" data="([^\<\>]+)">([^\<\>]+)\<\/text\>/); contents=contents.replace(result[0], ""+result[4]+"");}); var matches = contents.match(/\<text class="tag([^\<\>]+)" id="([^\<\>]+)" data="([^\<\>]+)">([^\<\>]+)\<\/text\>/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<text class="tag([^\<\>]+)" id="([^\<\>]+)" data="([^\<\>]+)">([^\<\>]+)\<\/text\>/); contents=contents.replace(result[0], ""+result[4]+"");}); var matches = contents.match(/\<text class="emoji([^\<\>]+)" id="([^\<\>]+)" data="([^\<\>]+)">([^\<\>]+)\<\/text\>/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<text class="emoji([^\<\>]+)" id="([^\<\>]+)" data="([^\<\>]+)">([^\<\>]+)\<\/text\>/); contents=contents.replace(result[0], ""+result[4]+"");}); var matches = contents.match(/\<text class="([^\<\>]+)" data="([^\<\>]+)">(.+)\<\/text\>/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/\<text class="([^\<\>]+)" data="([^\<\>]+)">(.+)\<\/text\>/); contents=contents.replace(result[0], " ");}); return contents;} function fu_hph(contents){ return contents;} var s_webp=null; var s_imagecache="https://proxy.heycafecdn.com/ext_image/webp/"; var s_blank_image="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="; var s_blank_colour="rgb(240,240,240)"; function fu_ikw(){ fu_jda(); var elements = ac("optimizer_img"); for (var i = 0, len = elements.length; i < len; i++){ if (elements[i]!=undefined){ if (fu_hgy(elements[i])){ if (elements[i].getAttribute("optimizer_preview")!=undefined){ if (elements[i].getAttribute("optimizer_preview")=="done"){ var source=elements[i].getAttribute("source"); fu_man("image",elements[i], source); elements[i].classList.remove("optimizer_img");}} }} } var elements = ac("optimizer_bg"); for (var i = 0, len = elements.length; i < len; i++){ if (elements[i]!=undefined){ if (fu_hgy(elements[i])){ if (elements[i].getAttribute("optimizer_preview")!=undefined){ if (elements[i].getAttribute("optimizer_preview")=="done"){ var source=elements[i].getAttribute("source"); fu_man("background",elements[i], source); elements[i].classList.remove("optimizer_bg");}} }} }} function fu_sgp(){ if (s_webp==null){ var elem = document.createElement('canvas'); if (!!(elem.getContext && elem.getContext('2d'))){ var velem=elem.toDataURL('image/webp').indexOf('data:image/webp')==0; s_webp=velem;}else{ s_webp=false;} if (s_webp==false){ s_imagecache="https://proxy.heycafecdn.com/ext_image/jpeg/";} return s_webp;}else{ return s_webp;}} function fu_man(type, element, source){ fu_sgp(); var size = fu_kzh(element); if (element.getAttribute("size")!=undefined){ size=element.getAttribute("size");} if (element.getAttribute("original")!=undefined){ var content = source;}else{ var content = ""+s_imagecache+"?url="+ae(source)+"&size="+size+"";} if (element!=null){ fu_yju(type,element,source,content);}} function fu_yju(type,element,source,image){ var preloadimage = new Image(); preloadimage.onload = function(){ if (element!=null){ if (type=="background"){ element.setAttribute("style", "background-image: url('"+preloadimage.src+"');");} if (type=="image"){ element.setAttribute("src", ""+preloadimage.src+""); fu_lhu(element);}} }; preloadimage.src = image;} function fu_lhu(element){ if (element!=null){ element.setAttribute("width", "auto"); element.setAttribute("height", "auto"); setTimeout(function(){ element.setAttribute("width", fu_vhx(element)); element.setAttribute("height", fu_auo(element));}, 350);}} function fu_kzh(element){ var size = fu_pbe(element); if (size <= 24){ size = 24;} var desn = window.devicePixelRatio; if (desn >= 1){ return size * desn;}else{ return size;}} function fu_bgg(element){ if (element.parentElement!=undefined){ if (element.parentElement.clientWidth!=0){ return element.parentElement.clientWidth;}else{ return fu_bgg(element.parentElement);}}else{ return 0;}} function fu_lfb(element){ if (element.parentElement!=undefined){ if (element.parentElement.clientHeight!=0){ return element.parentElement.clientHeight;}else{ return fu_lfb(element.parentElement);}}else{ return 0;}} function fu_pbe(element,whatiwant){ var widthsize=1; var heightsize=1; if (element.hasAttribute("useparent")==false){ var widthsize = element.clientWidth; var heightsize = element.clientHeight;} if (element.style.maxWidth!=""){ if (element.style.maxWidth=="100%"){ widthsize=fu_bgg(element);}else{ if (element.style.maxWidth.includes("px")==true){ widthsize=element.style.maxWidth; widthsize=widthsize.replace("px", "");} if (element.style.maxWidth.includes("%")==true){ widthsize=fu_bgg(element); widthsize=(widthsize * (element.style.maxWidth.replace("%", "") / 100));}} } if (element.style.maxHeight!=""){ if (element.style.maxHeight=="100%"){ heightsize=fu_lfb(element);}else{ if (element.style.maxHeight.includes("px")==true){ heightsize=element.style.maxHeight; heightsize=heightsize.replace("px", "");} if (element.style.maxHeight.includes("%")==true){ heightsize=fu_lfb(element); heightsize=(heightsize * (element.style.maxHeight.replace("%", "") / 100));}} } if (widthsize <= 30){ widthsize = fu_bgg(element);} if (heightsize <= 30){ heightsize = fu_lfb(element);} if (isNaN(heightsize)){ heightsize=400;} if (isNaN(widthsize)){ widthsize=400;} if (whatiwant==undefined){ if (widthsize <= heightsize){ return heightsize;}else{ return widthsize;}}else{ if (whatiwant=="width"){ return widthsize;} if (whatiwant=="height"){ return heightsize;}} } function fu_vhx(element){ return fu_pbe(element,"width");} function fu_auo(element){ return fu_pbe(element,"height");} function fu_wqv(){ window.scrollBy(0, 1); window.scrollBy(0, 0); fu_ikw();} function fu_jda(){ var elements = ac("optimizer_img"); for (var i = 0, len = elements.length; i < len; i++){ if (elements[i]!=undefined){ if (fu_hgy(elements[i])){ if (elements[i].getAttribute("optimizer_preview")==undefined){ var maxsize=fu_kzh(elements[i]); elements[i].setAttribute("optimizer_preview", "loading"); if (maxsize<=700){ maxsize=(maxsize*3);}
fu_wdg(maxsize,maxsize,s_blank_colour,function(preview){ if (elements[i]!=undefined){ if (elements[i].getAttribute("optimizer_preview")=="loading"){ elements[i].setAttribute("src", preview); elements[i].setAttribute("optimizer_preview", "set"); elements[i].setAttribute("optimizer_size", maxsize); setTimeout(function(element){ element.setAttribute("optimizer_preview", "done"); fu_ikw();}, 50, elements[i]);}} });}} }} var elements = ac("optimizer_bg"); for (var i = 0, len = elements.length; i < len; i++){ if (elements[i]!=undefined){ if (fu_hgy(elements[i])){ if (elements[i].getAttribute("optimizer_preview")==undefined){ var width=fu_vhx(elements[i]); var height=fu_auo(elements[i]); elements[i].setAttribute("optimizer_preview", "loading"); fu_wdg(width,height,s_blank_colour,function(preview){ if (elements[i]!=undefined){ if (elements[i].getAttribute("optimizer_preview")=="loading"){ elements[i].setAttribute("style", "background-image: url('"+preview+"');"); elements[i].setAttribute("optimizer_preview", "set"); setTimeout(function(element){ element.setAttribute("optimizer_preview", "done"); fu_ikw();}, 50, elements[i]);}} });}} }} } function fu_hgy(el,topcheck){ if (topcheck==undefined){ topcheck=true;} var offset=window.innerHeight; var overridescroll=false; if (el.hasAttribute("nowait")){ var inviewcheck=el.getAttribute("nowait"); if (inviewcheck=="true"){ overridescroll=true;}} if (aa("container_modl")){ var isinmodl=fu_muv(aa("container_modl"),el); if (isinmodl==true){ overridescroll=true;}} if (overridescroll==false){ var top = el.offsetTop; var left = el.offsetLeft; var width = el.offsetWidth; var height = el.offsetHeight; while(el.offsetParent){ el = el.offsetParent; top += el.offsetTop; left += el.offsetLeft;} if (topcheck==true){ if (top < window.pageYOffset + (window.innerHeight+offset)){ return true;}} if (top < (window.pageYOffset + (window.innerHeight+offset)) && left < (window.pageXOffset + window.innerWidth) && (top + height) > window.pageYOffset && (left + width) > window.pageXOffset){ return true;}}else{ return true;}} function fu_wdg(width,height,colour,callback){ var canvas = document.createElement('canvas'); canvas.height = height; canvas.width = width; canvas.style.backgroundColor = colour; var ctx = canvas.getContext('2d'); ctx.beginPath(); ctx.rect(0, 0, width, height); ctx.fillStyle = colour; ctx.fill(); callback(canvas.toDataURL());}
function fu_udu(content,container,spoiler){ var spoilercss=""; var spoilermessage=false; if (spoiler==undefined){ spoiler=false;} if (spoiler==true){ spoilercss="spoiler";} var ammount=Object.keys(content).length; var imagecount=0; var onimage=0; var filecount=0; var onfile=0; fu_lgl(content, function(id){ var data=content[""+id+""]; if (data["type"]=="file"){ filecount=filecount+1;} if (data["type"]=="image"){ imagecount=imagecount+1;}}); fu_lgl(content, function(id){ var data=content[""+id+""]; var attachment_id=id; var alttext="false"; var alttext_image="No alt text provided"; if (data["alt"]!="false"){ alttext=data["alt"]; alttext_image=data["alt"];} if (data["type"]=="file"){ onfile=onfile+1; var preview=""; var previewtype="file"; if (data["preview"]!=false){ preview="<div class='media' style='max-width:200px;margin: 0px;margin-bottom: 10px;'><img source='"+data["preview"]["file"]+"' class='optimizer_img "+spoilercss+"' alt='"+alttext_image+"' title='"+alttext_image+"'></div>";} if (data["name"].endsWith(".png")==true || data["name"].endsWith(".jpeg")==true || data["name"].endsWith(".jpg")==true || data["name"].endsWith(".gif")==true){ previewtype="image"; preview="<div class='media' style='max-width:200px;margin: 0px;margin-bottom: 10px;'><img source='"+data["file"]+"' class='optimizer_img "+spoilercss+"' alt='"+alttext_image+"' title='"+alttext_image+"'></div>";} if (data["name"].endsWith(".md")==true || data["name"].endsWith(".txt")==true){ previewtype="content";} if (data["mime"]=="application/octet-stream" || data["mime"].startsWith("video")==true){ if (data["preview"]!=false){ preview=""+data["preview"]["file"]+""; previewtype="video";}} if (preview!=""){ if (spoiler==true && spoilermessage==false){ spoilermessage=true; fu_qak(container,"<bubble class=\"alt1\" style='margin-bottom: 0px;padding: 15px;'>Media preview is hidden as it contains spoilers.</bubble>");}} if (previewtype=="image"){ fu_qak(container,"<div id='attachment_"+attachment_id+"'><div onclick=\"javascript:fu_zbs('"+data["file"]+"','"+data["name"]+"')\" class='attachent'>"+preview+""+data["name"]+"</div>");} if (previewtype=="file"){ fu_qak(container,"<div id='attachment_"+attachment_id+"'><div onclick=\"javascript:fu_zbs('"+data["file"]+"','"+data["name"]+"')\" class='attachent'>"+preview+""+data["name"]+"</div>");} if (previewtype=="content"){ fu_qak(container,"<div id='attachment_"+attachment_id+"'><div id='loading'></div></div>"); fu_nrq(""+data["file"]+"",function(result){ var contents = fu_irl(result); var title=fu_xnf(contents); var description=fu_kwg(contents); if (title==false){ title="No title for content";} if (description==false){ description="No description preview for content";}
fu_oen("attachment_"+attachment_id+""); fu_qak("attachment_"+attachment_id+"","<div onclick=\"javascript:fu_ufu('"+attachment_id+"','attachment_"+attachment_id+"','"+data["file"]+"')\" class='attachent'><div style='font-size: 1.2em;margin-bottom: 10px;font-weight: 600;'>"+title+"</div>"+description+"</div>");},10000,false);} if (previewtype=="video"){ var playid="mediaplay_"+fu_sjw(30)+""; var emb_html=fu_qti("<div class='aspectcase sixteenbynine'><div class='content'><video style=\"width: 100%;height: 100%;\" controls=\"\" autoplay=\"\" poster=\""+preview+"\" playsinline><source src=\""+data["file"]+"\">Your browser does not support the video tag.</video></div></div>"); fu_qak(container,"<div id='"+playid+"'><div class='media'><div class='media_backing optimizer_bg aspectcase sixteenbynine' source='"+preview+"' size='6'><div class='content'><a title='Play video' href=\"javascript:fu_qbb('"+playid+"','internal','false','"+emb_html+"');\"><div class='playbuttoncase'><span class='playbutton'></span></div><img source='"+preview+"' src='"+s_blank_image+"' class='optimizer_img "+spoilercss+"' alt='"+alttext_image+"' title='"+alttext_image+"'></a></div></div></div></div>");}} if (data["type"]=="image"){ onimage=onimage+1; if (spoiler==true && spoilermessage==false){ spoilermessage=true; fu_qak(container,"<bubble class=\"alt1\" style='margin-bottom: 0px;padding: 15px;'>Media preview is hidden as it contains spoilers.</bubble>");} if (aa("file_"+data["name"]+"")){ fu_qak("file_"+data["name"]+"","<div class='media' style='display: inline-block;width: auto;max-width: 100%;'><a href=\"javascript:fu_lwj('"+data["file"]+"','image',true,'"+fu_qti(alttext)+"');\"><img style='max-width: 100%;max-height: 400px;height: auto;width: auto;' source='"+data["file"]+"' class='optimizer_img' alt='"+alttext_image+"' title='"+alttext_image+"'></a></div>");}else{ if (imagecount<=1){ fu_qak(container,"<div class='media' style='display: inline-block;width: auto;max-width: 100%;'><a href=\"javascript:fu_lwj('"+data["file"]+"','image',true,'"+fu_qti(alttext)+"');\"><img style='max-width: 100%;max-height: 400px;height: auto;width: auto;' source='"+data["file"]+"' class='optimizer_img' alt='"+alttext_image+"' title='"+alttext_image+"'></a></div>");}else{ if (onimage==1){ fu_qak(container,"<div id='"+container+"_photoblock' class='collage'></div>"); fu_qak(""+container+"_photoblock","<div class='media' style='display: inline-block;width: auto;margin-right:10px;'><a href=\"javascript:fu_lwj('"+data["file"]+"','image',true,'"+fu_qti(alttext)+"');\"><img style='max-height: 400px;height: auto;width: auto;' source='"+data["file"]+"' class='optimizer_img' alt='"+alttext_image+"' title='"+alttext_image+"'></a></div>");}else{ if (imagecount==onimage){ fu_qak(""+container+"_photoblock","<div class='media' style='display: inline-block;width: auto;'><a href=\"javascript:fu_lwj('"+data["file"]+"','image',true,'"+fu_qti(alttext)+"');\"><img style='max-height: 400px;height: auto;width: auto;' source='"+data["file"]+"' class='optimizer_img' alt='"+alttext_image+"' title='"+alttext_image+"'></a></div>");}else{ fu_qak(""+container+"_photoblock","<div class='media' style='display: inline-block;width: auto;margin-right:10px;'><a href=\"javascript:fu_lwj('"+data["file"]+"','image',true,'"+fu_qti(alttext)+"');\"><img style='max-height: 400px;height: auto;width: auto;' source='"+data["file"]+"' class='optimizer_img' alt='"+alttext_image+"' title='"+alttext_image+"'></a></div>");}} }} }});} function fu_ufu(id,container,url){ fu_oen(container); fu_qak(container,"<hr></hr><div><div class='content' id='attachment_content_full_"+id+"'><div id='loading'></div></div></bubble>"); fu_nrq(""+url+"",function(result){ var contents = fu_irl(result); contents=fu_hww(contents); contents=fu_maf(contents); contents=fu_nns(contents); contents=fu_ctl(contents); contents=fu_ltt(contents); fu_oen("attachment_content_full_"+id+""); fu_qak("attachment_content_full_"+id+"",""+contents+"");},10000,false);} function fu_zbs(url,name){ fu_uti(); fu_qak("container_modl","<h1>Open attachment</h1>"); fu_qak("container_modl","<bubble class='alt1'><strong>Warning!!</strong> Not all attachments are checked to be safe, only open files from accounts you trust. Files may open in a new tab if the file type cannot be previewed here.</bubble>"); fu_qak("container_modl","<bubble onclick=\"javascript:fu_czh('"+url+"','"+name+"');\"><strong style='display: inline-block;margin-bottom: 10px;'>Yes open "+name+"</strong><BR>Will open file in a new tab or show on page</bubble>");} function fu_czh(url,name){ fu_uti(); fu_qak("container_modl","<h1>Attachment "+name+"</h1>"); var viewtype="newtab"; if (name.endsWith(".mov")==true){ viewtype="video";} if (name.endsWith(".mp4")==true){ viewtype="video";} if (name.endsWith(".gif")==true){ viewtype="image";} if (name.endsWith(".png")==true){ viewtype="image";} if (name.endsWith(".jpeg")==true){ viewtype="image";} if (name.endsWith(".md")==true){ viewtype="content";} if (name.endsWith(".txt")==true){ viewtype="content";} if (viewtype=="newtab"){ window.open(url, '_blank').focus(); fu_hbj();} if (viewtype=="video"){ fu_lwj(url,'video',true);} if (viewtype=="image"){ fu_lwj(url,'image',true);} if (viewtype=="content"){ fu_lwj(url,'content',true);}} function fu_jhz(container,username){ fu_knz("https://"+s_hostname+"/get_cafe_info?query="+username+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen(container); fu_qak(container,"<a href='/!"+response["response_data"]["alias"]+"' "+fu_pae(response["response_data"])+"><img source='"+response["response_data"]["avatar"]+"' class='avatar optimizer_img' alt='Avatar for café "+response["response_data"]["name"]+"' style='display: inline-block;max-width: 16px;max-height: 16px;margin-bottom: -2px;'> "+response["response_data"]["name"]+"</a>");}else{ fu_oen(container); fu_qak(container,"<a href='/!"+username+"'>!"+username+"</a>");}},false,true);}
function fu_wck(content,container,pinned){ var refresh=false; var refresh_both=false; if (pinned==undefined){ pinned=false;} if (aa("comment_"+content["id"]+"")!=null){ refresh=true;} var time=fu_hms(content["date_created"]); var timelocal=fu_tlv(content["date_created"]); var contents=content["contents"]; contents=fu_hww(contents); contents=fu_maf(contents); contents=fu_nns(contents); contents=fu_ctl(contents); contents=fu_ltt(contents); var didreaction=""; if (content["count_you_reactions"]!="0"){ didreaction=" important";} var reactions=""; if (content["count_reactions"]>=1){ if (s_app_stats=="true"){ reactions="&ensp;"+content["count_reactions"]+"";}} var badges=""; var namebadge=""; if (content["info_pinned"]!="0"){ badges=""+badges+"<div class='badge pin'>"+fu_slu("pin-angle-fill")+"</div>";} if (content["account"]["verified"]=="1"){ if (content["account"]["type"]=="person"){ namebadge=" <span class='verified_badge'>"+fu_slu("patch-check-fill")+"</span>";} if (content["account"]["type"]=="business"){ namebadge=" <span class='business_badge'>"+fu_slu("patch-check-fill")+"</span>";}} if (content["account"]["type"]=="robot"){ if (content["account"]["verified"]=="1"){ namebadge=" <span class='verified_robot_badge'>"+fu_slu("robot")+"</span>";}else{ namebadge=" <span class='robot_badge'>"+fu_slu("robot")+"</span>";}} if (content["cafe"]!=false){ if (content["cafe"]["you_moderator"]==true && content["cafe"]["you_admin"]==false){ badges=""+badges+"<div class='badge moderator'>Mod</div>";} if (content["cafe"]["you_admin"]==true){ badges=""+badges+"<div class='badge admin'>Admin</div>";}} if (content["info_hidden_global"]=="0" && content["info_hidden_cafe"]=="0"){ var headercontrols=""; var actioncontrols=""; var translatecontrols=""; var reaction_icon=""+fu_slu("hand-thumbs-up")+""; if (content["you_last_reaction"]!=false){ reaction_icon=fu_xqn(content["you_last_reaction"]);} if (su_id!=null){ if (su_id==content["account"]["id"]){ headercontrols="<div class='action' onclick=\"javascript:fu_fbe('"+content["conversation"]+"','"+content["id"]+"');\">Edit</div>";}else{ headercontrols="<div class='action' onclick=\"javascript:fu_fbe('"+content["conversation"]+"','"+content["id"]+"');\">&#8943;</div>";}} if (su_id!=null){ actioncontrols="<div tabindex='0' class='action' onclick=\"javascript:fu_kdn('"+content["conversation"]+"','"+content["id"]+"');\">"+fu_slu("chat")+"&ensp;Reply</div>&ensp;<div tabindex='0' class='action' onclick=\"javascript:fu_fcn('','"+ae(fu_qti("https://hey.cafe/conversation/"+content["conversation"]+":"+content["id"]+""))+"');\" data-title='Share'>"+fu_slu("repeat")+"</div>&ensp;<div tabindex='0' class='action"+didreaction+"' onclick=\"javascript:fu_xuk('"+content["conversation"]+"','"+content["id"]+"');\" data-title='React'>"+reaction_icon+""+reactions+"</div>";} if (content["info_language"]!="check"){ if (content["info_language"]!="unk"){ if (content["info_language"]!=su_language){ if (su_language!=null){ translatecontrols="<action type='inview_load_translate' target='"+su_language+"' source='"+content["info_language"]+"' container='comment_translate_"+content["id"]+"' text='"+fu_qti(content["contents"])+"'></action><div class='loading'></div>";}} }} setTimeout(function(){ if (content["attachments"]!=false){ if (content["contents"].includes("{media_spoiler}")){ fu_udu(content["attachments"],"comment_attachments_"+content["id"]+"",true);}else{ fu_udu(content["attachments"],"comment_attachments_"+content["id"]+"",false);}} }, 200); if (content["reactions"]!=false){ setTimeout(function(){ if (s_width>=700){ fu_lgl(content["reactions"].slice(0, 5), function(id){ fu_bqo(content["reactions"][""+id+""],"comment_reactions_mini_"+content["id"]+"","mini");});}}, 200);} var structure="<div class='header'><a href=\"javascript:fu_fvt('"+content["account"]["alias"]+"');\"><img source=\""+content["account"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for "+content["account"]["name"]+"' "+fu_wfk(content["account"])+"></a>"+headercontrols+"<strong>"+fu_ctl(content["account"]["name"])+""+namebadge+"</text></strong><div class='meta'><span class='timestamp' onclick=\"javascript:fu_euy('/conversation/"+content["conversation"]+":"+content["id"]+"')\"><timestamp time='"+content["date_created"]+"' data-title='"+timelocal+"'>"+time+"</timestamp></span>"+badges+"</div></div><div class='content_case'><div class='content' id='comment_content_"+content["id"]+"'>"+contents+"</div><div class='translate' id='comment_translate_"+content["id"]+"'>"+translatecontrols+"</div><div class='attachments' id='comment_attachments_"+content["id"]+"'></div></div><div class='footer'><div class='footer_mini' id='comment_footer_mini_"+content["id"]+"'></div>"+actioncontrols+"<div class='minireactions' id='comment_reactions_mini_"+content["id"]+"'></div></div>";}else{ var structure="<div class='header'><img source=\""+content["account"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for ----'><div class='action' onclick=\"javascript:fu_fbe('"+content["conversation"]+"','"+content["id"]+"');\">&#8943;</div></div><strong>----</strong><span class='meta'> · <span onclick=\"javascript:fu_euy('/conversation/"+content["conversation"]+":"+content["id"]+"')\">"+time+"</span></span><p>This comment has been hidden by moderators</p>";} var renderdone=false; if (content["comment"]!="false"){ if (refresh==false){ renderdone=true; setTimeout(function(){ fu_sqq(container,"comment_"+content["id"]+"","comment_replys_"+content["comment"]+"",fu_qti("<div class='comment' id='comment_"+content["id"]+"'>"+structure+"</div><div class='comment_reply_case' id='comment_replys_"+content["id"]+"'></div>"),0);}, 10);}} if (renderdone==false){ if (refresh==false){ fu_qak(container,"<div class='comment' id='comment_"+content["id"]+"'>"+structure+"</div><div class='comment_reply_case' id='comment_replys_"+content["id"]+"'></div>");}else{ fu_oen("comment_"+content["id"]+""); fu_qak("comment_"+content["id"]+"",""+structure+""); if (aa("comment_"+content["id"]+"_pinned")!=null){ fu_oen("comment_"+content["id"]+"_pinned"); fu_qak("comment_"+content["id"]+"_pinned",""+structure+"");}} }} function fu_sqq(container,mycase,replycase,content,retry){ if (retry==undefined){ retry=1;}else{ retry=retry+1;} if (aa(mycase)==null){ if (aa(replycase)!=null){ fu_qpc(replycase,fu_qdo(content));}else{ if (retry<=15){ setTimeout("fu_sqq('"+container+"','"+mycase+"','"+replycase+"','"+content+"',"+retry+");", 10);}else{ fu_qak(container,fu_qdo(content));}} }} function fu_oxg(comment){ var refresh=false; if (aa("comment_"+comment+"")!=null){ refresh=true;}
fu_knz("https://"+s_hostname+"/get_comment_info?query="+comment+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_wck(response["response_data"],"comment_"+comment+"");}else{ if (aa("comment_"+comment+"")!=null){ aa("comment_"+comment+"").remove();}} });} function fu_amh(convo,id,retry){ if (retry==undefined){ retry=1;}else{ retry=retry+1;} var clean = ac("highlight"); for (var i = 0; i < clean.length; i++){ clean.item(i).classList.remove("highlight");} if (aa("comment_"+id+"")){ aa("comment_"+id+"").classList.add("highlight"); var el = aa("comment_"+id+""); var bodyRect = document.body.getBoundingClientRect(); var elemRect = el.getBoundingClientRect(); var offset=elemRect.top - bodyRect.top; window.scroll({ top: (offset - 100), left: 0, behavior: 'smooth' });}else{ if (retry<=10){ setTimeout("fu_amh('"+convo+"','"+id+"',"+retry+");", 200);}} } function fu_nzs(conversation,count,comment){ fu_knz("https://"+s_hostname+"/get_conversation_comments?query="+conversation+"&count="+count+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ var firstcheckrender=true; var render_frame_id=fu_sjw(20); if (response["response_data"]["comments"]!=false){ var offset=count*3; fu_lgl(response["response_data"]["comments"], function(id){ offset=offset-3; if (firstcheckrender==true){ firstcheckrender=false; if (count>=5){ fu_qpc("conversation_livecomments_"+conversation+"","<div id='checkup_item_canview'></div><action type=\"inview_item_checkup\" item_type=\"comments\" item_last=\""+id+"\" item_resource=\""+conversation+"\" item_resource_sub=\"false\" item_function=\"fu_nzs('"+conversation+"','"+count+"','"+comment+"');\"></action>");} if (aa('conversation_comments_'+conversation+'_loaded')==undefined){ fu_oen("conversation_comments_"+conversation+""); fu_qak("conversation_comments_"+conversation+"","<div id='conversation_comments_"+conversation+"_loaded'></div><div id='conversation_comments_render_"+render_frame_id+"'></div>");}else{ fu_qpc("conversation_comments_"+conversation+"","<div id='conversation_comments_render_"+render_frame_id+"'></div>");}} if (aa('comment_'+id+'')==undefined){ if (response["response_data"]["comments"][""+id+""]["comment"]!="false"){ setTimeout(function(){ fu_wck(response["response_data"]["comments"][""+id+""],"conversation_comments_render_"+render_frame_id+"");}, offset);}else{ fu_wck(response["response_data"]["comments"][""+id+""],"conversation_comments_render_"+render_frame_id+"");}} if (comment==id){ if (aa("comment_"+comment+"")){ aa("comment_"+comment+"").classList.add("highlight");}}
fu_ikw(); setTimeout("fu_ikw();", 500);});}} });} function fu_rhr(container,conversation,comment,header){ if (header==undefined){ header=true;} if (fu_low('generate_conversation_load_preview_comment_'+comment+'')==null){ fu_knz("https://"+s_hostname+"/get_comment_info?query="+comment+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_paa('generate_conversation_load_preview_comment_'+comment+'',response["response_data"]); fu_pjh(container,response["response_data"],header);}else{ fu_oen(container); fu_qak(container,"<a href='https://hey.cafe/conversation/"+conversation+":"+comment+"' target='_blank' rel='noreferrer'>hey.cafe/conversation/"+conversation+":"+comment+"</a>");}});}else{ fu_pjh(container,fu_low('generate_conversation_load_preview_comment_'+comment+''),header);}} function fu_pjh(container,content,header){ if (content["info_hidden_global"]=="0" && content["info_hidden_cafe"]=="0"){ var time=fu_hms(content["date_created"]); var timelocal=fu_tlv(content["date_created"]); var contents=content["contents"]; contents=fu_hww(contents); contents=fu_maf(contents); contents=fu_nns(contents); contents=fu_ctl(contents); contents=fu_ltt(contents); var headermeta=""; fu_oen(container); if (header==true){ fu_qak(container,"<div class=\"minibubble preview miniframe\" onclick=\"javascript:fu_euy('/conversation/"+content["conversation"]+":"+content["id"]+"')\">"+headermeta+"<div class='header'><a href=\"javascript:fu_fvt('"+content["account"]["alias"]+"');\"><img source=\""+content["account"]["avatar"]+"\" class=\"avatar optimizer_img\" style='width:30px;height:30px;margin-left: 0px;' alt='Avatar for "+content["account"]["name"]+"' "+fu_wfk(content["account"])+"></a><div class='meta'><span class='timestamp' onclick=\"javascript:fu_euy('/conversation/"+content["conversation"]+":"+content["id"]+"')\"><timestamp time='"+content["date_created"]+"' data-title='"+timelocal+"'>"+time+"</timestamp></span></div><strong>"+fu_ctl(content["account"]["name"])+"</strong></div><div class='content'>"+contents+"<div id='"+container+"_attachments'></div></div></div>");}else{ fu_qak(container,"<div class=\"minibubble preview miniframe\"><div class='content'>"+contents+"<div id='"+container+"_attachments'></div></div></div>");} if (content["attachments"]!=false){ fu_udu(content["attachments"],""+container+"_attachments");}}else{ fu_oen(container); fu_qak(container,"Sorry this content has been hidden...");}} function fu_ddm(conversation){ fu_knz("https://"+s_hostname+"/get_conversation_comments?query="+conversation+"&pinned=true",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("conversation_comments_pinned_"+conversation+""); if (response["response_data"]["comments"]!=false){ fu_lgl(response["response_data"]["comments"], function(id){ fu_wck(response["response_data"]["comments"][""+id+""],"conversation_comments_pinned_"+conversation+"",true);});}} });} var generateConversation_full_keepupdated=false; function fu_clo(content,container,mode,comment){ var refresh=false; if (aa("conversation_"+content["id"]+"")!=null){ refresh=true;} if (mode==undefined){ mode="normal";} if (comment==undefined){ comment=null;} var time=fu_hms(content["date_created"]); var timelocal=fu_tlv(content["date_created"]); var contents=content["contents"]; contents=fu_hww(contents); contents=fu_maf(contents); contents=fu_nns(contents); contents=fu_ctl(contents); contents=fu_ltt(contents); var headermeta=""; if (content["cafe"]!=false){ if (s_width>=700){ headermeta="<div tabindex='0' class='cafeheader' onclick=\"javascript:fu_euy('/!"+content["cafe"]["alias"]+"');\"><img source=\""+content["cafe"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for café "+content["cafe"]["name"]+"'> Posted to <strong>"+fu_ctl(content["cafe"]["name"])+"</strong></div>";}else{ headermeta="<div tabindex='0' class='cafeheader' onclick=\"javascript:fu_euy('/!"+content["cafe"]["alias"]+"');\"><img source=\""+content["cafe"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for café "+content["cafe"]["name"]+"'> <strong>"+fu_ctl(content["cafe"]["name"])+"</strong></div>";}} var didreaction=""; if (content["count_you_reactions"]!="0"){ didreaction=" important";} var hideiflocked=""; if (content["info_locked"]!="0"){ hideiflocked=" style='display:none;'"; headermeta=""+headermeta+"<div class='cafeheader'>This conversation has been "+fu_ctl("🔒")+" locked and can no longer be commented on</div>";} var comments=""; if (content["count_comments"]>=1){ if (s_app_stats=="true"){ comments="&ensp;"+content["count_comments"]+"";}} var reactions=""; if (content["count_reactions"]>=1){ if (s_app_stats=="true"){ reactions="&ensp;"+content["count_reactions"]+"";}} var badges=""; var namebadge=""; var tagdata=""; if (content["info_pinned"]!="0"){ badges=""+badges+"<div class='badge pin'>"+fu_slu("pin-angle-fill")+"</div>";} if (content["account"]["verified"]=="1"){ if (content["account"]["type"]=="person"){ namebadge=" <span class='verified_badge'>"+fu_slu("patch-check-fill")+"</span>";} if (content["account"]["type"]=="business"){ namebadge=" <span class='business_badge'>"+fu_slu("patch-check-fill")+"</span>";}} if (content["account"]["type"]=="robot"){ if (content["account"]["verified"]=="1"){ namebadge=" <span class='verified_robot_badge'>"+fu_slu("robot")+"</span>";}else{ namebadge=" <span class='robot_badge'>"+fu_slu("robot")+"</span>";}} if (content["cafe"]!=false){ if (content["cafe"]["you_moderator"]==true && content["cafe"]["you_admin"]==false){ badges=""+badges+"<div class='badge moderator'>Mod</div>";} if (content["cafe"]["you_admin"]==true){ badges=""+badges+"<div class='badge admin'>Admin</div>";}} if (content["tag"]!=false){ if (content["cafe"]!=false){ tagdata="<div class='tagged' onclick=\"javascript:fu_euy('/!"+content["cafe"]["alias"]+"/tag/"+content["tag"]["id"]+"')\">"+fu_ctl(content["tag"]["emoji"])+" "+fu_ctl(content["tag"]["name"])+"</div>";}else{ tagdata="<div class='tagged' onclick=\"javascript:fu_euy('/@"+content["account"]["alias"]+"/tag/"+content["tag"]["id"]+"')\">"+fu_ctl(content["tag"]["emoji"])+" "+fu_ctl(content["tag"]["name"])+"</div>";}} if (content["info_hidden_global"]=="0" && content["info_hidden_cafe"]=="0"){ var headercontrols=""; var actioncontrols=""; var reaction_icon=""+fu_slu("hand-thumbs-up")+""; if (content["you_last_reaction"]!=false){ reaction_icon=fu_xqn(content["you_last_reaction"]);} if (su_id!=null){ if (su_id==content["account"]["id"]){ headercontrols="<div class='action' onclick=\"javascript:fu_azm('"+content["id"]+"');\">Edit</div>";}else{ headercontrols="<div class='action' onclick=\"javascript:fu_azm('"+content["id"]+"');\">&#8943;</div>";}} if (su_id==null){ actioncontrols="<div tabindex='0' class='action' onclick=\"javascript:fu_spa('conversation','"+content["id"]+"');\" data-title='Share External'>"+fu_slu("box-arrow-up")+"</div>";}else{ actioncontrols="<div tabindex='0' class='action'"+hideiflocked+" onclick=\"javascript:fu_ncj('conversation_footer_extras_"+content["id"]+"','"+content["id"]+"',false);\" data-title='Comment'>"+fu_slu("chat")+""+comments+"</div>&ensp;<div tabindex='0' class='action' onclick=\"javascript:fu_fcn('','"+ae(fu_qti("https://hey.cafe/conversation/"+content["id"]+""))+"');\" data-title='Share'>"+fu_slu("repeat")+"</div>&ensp;<div tabindex='0' class='action"+didreaction+"'"+hideiflocked+" onclick=\"javascript:fu_ehe('"+content["id"]+"');\" data-title='React'>"+reaction_icon+""+reactions+"</div>&ensp;<div tabindex='0' class='action' onclick=\"javascript:fu_spa('conversation','"+content["id"]+"');\" data-title='Share External'>"+fu_slu("box-arrow-up")+"</div>";} if (mode!="clean"){ var structure=""+headermeta+"<div class='header'>"+headercontrols+""+tagdata+"<a href=\"javascript:fu_fvt('"+content["account"]["alias"]+"');\"><img source=\""+content["account"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for "+content["account"]["name"]+"' "+fu_wfk(content["account"])+"></a><strong>"+fu_ctl(content["account"]["name"])+""+namebadge+"</text></strong><div class='meta'><span class='timestamp' tabindex='0' onclick=\"javascript:fu_euy('/conversation/"+content["id"]+"')\"><timestamp time='"+content["date_created"]+"' data-title='"+timelocal+"'>"+time+"</timestamp></span>"+badges+"</div></div><div class='content_case'><div class='content' id='conversation_content_"+content["id"]+"'>"+contents+"</div><div class='translate' id='conversation_translate_"+content["id"]+"'></div><div class='attachments' id='conversation_attachments_"+content["id"]+"'></div></div><div class='footer'><div class='footer_mini' id='conversation_footer_mini_"+content["id"]+"'></div>"+actioncontrols+"<div class='minireactions' id='conversation_footer_reactions_mini_"+content["id"]+"'></div></div><div class='footer_extras' id='conversation_footer_extras_"+content["id"]+"'></div><div class='footer_reactions' id='conversation_footer_reactions_"+content["id"]+"'></div><div id='conversation_livecomments_"+content["id"]+"'></div><div class='footer_comments' id='conversation_comments_pinned_"+content["id"]+"'></div><div class='footer_comments' id='conversation_comments_"+content["id"]+"'></div><div class='section_extra' id='conversation_footer_more_"+content["id"]+"'></div>";}else{ var structure=""+headermeta+"<div class='content'><div id='conversation_content_"+content["id"]+"'>"+contents+"</div><div id='conversation_translate_"+content["id"]+"'></div><div id='conversation_attachments_"+content["id"]+"'></div></div>"+tagdata+"<span class='timestamp' onclick=\"javascript:fu_euy('/conversation/"+content["id"]+"')\"><timestamp time='"+content["date_created"]+"' data-title='"+timelocal+"'>"+time+"</timestamp></span><div class='footer'><div class='footer_mini' id='conversation_footer_mini_"+content["id"]+"'></div>"+actioncontrols+"</div><div class='section_extra' id='conversation_footer_more_"+content["id"]+"'></div>";} if (refresh==false){ fu_qak(container,"<bubble class='conversation "+mode+"' mode='"+mode+"' id='conversation_"+content["id"]+"'>"+structure+"</bubble>");}else{ fu_oen("conversation_"+content["id"]+""); fu_qak("conversation_"+content["id"]+"",""+structure+"");} if (content["info_language"]!="check"){ if (content["info_language"]!="unk"){ if (content["info_language"]!=su_language){ if (su_language!=null){ fu_qak("conversation_translate_"+content["id"]+"","<action type='inview_load_translate' target='"+su_language+"' source='"+content["info_language"]+"' container='conversation_translate_"+content["id"]+"' text='"+fu_qti(content["contents"])+"'></action><div class='loading'></div>");}} }} if (content["attachments"]!=false){ if (content["contents"].includes("{media_spoiler}")){ fu_udu(content["attachments"],"conversation_attachments_"+content["id"]+"",true);}else{ fu_udu(content["attachments"],"conversation_attachments_"+content["id"]+"",false);}} if (content["reactions"]!=false){ if (s_width>=700){ fu_lgl(content["reactions"].slice(0, 5), function(id){ fu_bqo(content["reactions"][""+id+""],"conversation_footer_reactions_mini_"+content["id"]+"","mini");});}} if (mode=="full"){ if (content["reactions"]!=false){ fu_qak("conversation_footer_reactions_"+content["id"]+"","<div id='conversation_footer_reactions_"+content["id"]+"_list'></div>"); fu_lgl(content["reactions"], function(id){ fu_bqo(content["reactions"][""+id+""],"conversation_footer_reactions_"+content["id"]+"_list","full");});}} if (content["count_comments"]>=1){ if (mode!="clean"){ if (mode=="full"){ fu_qak("conversation_comments_pinned_"+content["id"]+"","<action type='inview_load_comments_pinned' conversation='"+content["id"]+"'></action><div class='loading'></div>");} var loadcount=2; if (mode=="full"){ loadcount=200;}
fu_qak("conversation_comments_"+content["id"]+"","<action type='inview_load_comments' conversation='"+content["id"]+"' count='"+loadcount+"' comment='"+comment+"'></action><div class='loading'></div>"); if (content["count_comments"]>=3){ if (loadcount<=2){ fu_qak("conversation_footer_more_"+content["id"]+"","<div class='footer' style='margin-top:15px;'><div class='action' onclick=\"fu_euy('/conversation/"+content["id"]+"');\">View more comments</div></div>");}} if (comment!=null){ fu_amh(content["id"],comment);}} }}else{ var message="<div class='header'><div class='action' onclick=\"javascript:fu_azm('"+content["id"]+"');\">&#8943;</div><img source=\""+content["account"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for ----'></a><h4>----</h4><div class='meta'><span>shared "+time+"</span></div></div><p>This conversation has been hidden by moderators.</p>"; if (refresh==false){ fu_qak(container,"<bubble class='conversation "+mode+"' id='conversation_"+content["id"]+"'>"+message+"</bubble>");}else{ fu_oen("conversation_"+content["id"]+""); fu_qak("conversation_"+content["id"]+"",""+message+"");}} } function fu_wre(conversation){ var refresh=false; var mode="normal"; if (aa("conversation_"+conversation+"")!=null){ refresh=true; mode=aa("conversation_"+conversation+"").getAttribute('mode');}
fu_knz("https://"+s_hostname+"/get_conversation_info?query="+conversation+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_clo(response["response_data"],"conversation_"+conversation+"",mode);}else{ if (aa("conversation_"+conversation+"")!=null){ aa("conversation_"+conversation+"").remove();}} });} function fu_khk(container,conversation,header){ if (header==undefined){ header=true;} if (fu_low('generate_conversation_load_preview_conversation_'+conversation+'')==null){ fu_knz("https://"+s_hostname+"/get_conversation_info?query="+conversation+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_paa('generate_conversation_load_preview_conversation_'+conversation+'',response["response_data"]); fu_ute(container,response["response_data"],header);}else{ fu_oen(container); fu_qak(container,"<a href='https://hey.cafe/conversation/"+conversation+"' target='_blank' rel='noreferrer'>hey.cafe/conversation/"+conversation+"</a>");}});}else{ fu_ute(container,fu_low('generate_conversation_load_preview_conversation_'+conversation+''),header);}} function fu_ute(container,content,header){ if (content["info_hidden_global"]=="0" && content["info_hidden_cafe"]=="0"){ var time=fu_hms(content["date_created"]); var timelocal=fu_tlv(content["date_created"]); var contents=content["contents"]; contents=fu_hww(contents); contents=fu_maf(contents); contents=fu_nns(contents); contents=fu_ctl(contents); contents=fu_ltt(contents); var headermeta=""; if (content["cafe"]!=false){ }
fu_oen(container); if (header==true){ fu_qak(container,"<div class=\"minibubble preview miniframe\" onclick=\"javascript:fu_euy('/conversation/"+content["id"]+"')\">"+headermeta+"<div class='header'><a href=\"javascript:fu_fvt('"+content["account"]["alias"]+"');\"><img source=\""+content["account"]["avatar"]+"\" class=\"avatar optimizer_img\" style='width:30px;height:30px;margin-left: 0px;' alt='Avatar for "+content["account"]["name"]+"' "+fu_wfk(content["account"])+"></a><div class='meta'><span class='timestamp' onclick=\"javascript:fu_euy('/conversation/"+content["id"]+"')\"><timestamp time='"+content["date_created"]+"' data-title='"+timelocal+"'>"+time+"</timestamp></span></div><strong>"+fu_ctl(content["account"]["name"])+"</text></strong></div><div class='content'>"+contents+"<div id='"+container+"_attachments'></div></div></div>");}else{ fu_qak(container,"<div class=\"minibubble preview miniframe\"><div class='content'>"+contents+"<div id='"+container+"_attachments'></div></div></div>");} if (content["attachments"]!=false){ fu_udu(content["attachments"],""+container+"_attachments");}}else{ fu_oen(container); fu_qak(container,"Sorry this content has been hidden...");}}
function fu_nzd(container,text){ fu_knz("https://"+s_hostname+"/get_system_emoji_lookup?query="+text+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["emoji"]!=""){ fu_oen(container); fu_qak(container,fu_ctl(response["response_data"]["emoji"]));}else{ fu_oen(container); fu_qak(container,":"+text+":");}}else{ fu_oen(container); fu_qak(container,":"+text+":");}},false,true);}
function fu_wfk(data){ return "data-title=\"<img source='"+data["avatar"]+"' class='avatar optimizer_img' style='float:left;margin-right:10px;max-width:40px;'><div style='margin-bottom:10px;font-size:1.2em;'><strong>"+data["name"]+"</strong><BR><text>&#64;</text>"+data["alias"]+"</div>"+data["bio"]+"\"";} function fu_pae(data){ return "data-title=\"<img source='"+data["avatar"]+"' class='avatar optimizer_img' style='float:left;margin-right:10px;max-width:40px;'><div style='margin-bottom:10px;font-size:1.2em;'><strong>"+data["name"]+"</strong><BR><text>&#33;</text>"+data["alias"]+"</div>"+data["bio"]+"\"";}
function fu_bqo(content,container,type){ if (type==undefined){ type="full";} if (type=="myown"){ fu_qak(container,"<div class='reaction'><div class='reactcontent' data-title='"+content["account_name"]+"'>"+fu_xqn(content["reaction"])+"</div></div>");} if (type=="full"){ fu_qak(container,"<div class='reaction'><div class='reactcontent' data-title='"+content["account_name"]+"'>"+fu_xqn(content["reaction"])+"</div><a href=\"javascript:fu_fvt('"+content["account_alias"]+"');\"><img source='"+content["account_avatar"]+"' class='optimizer_img avatar' alt='Profile image for "+content["account_name"]+"'></a></div>");} if (type=="mini"){ fu_qak(container,"<div class='reaction' style='margin: 0px;margin-left:5px;'><div class='reactcontent' data-title='"+content["account_name"]+"' style='width: 29px;height: 29px;font-size: 1em;line-height: 25px;'>"+fu_xqn(content["reaction"])+"</div></div>");}} function fu_bap(content,container,type){ if (content["status"]=="active"){ var memberstatus=""; var statusmode=false; if (content["you_member"]!=undefined){ if (content["you_member"]==false){ if (content["you_request"]==true){ statusmode="pending";}}else{ statusmode="member";}} if (content["self_member"]!=undefined){ if (content["self_member"]==false){ if (content["self_request"]==true){ statusmode="pending";}}else{ statusmode="member";}} if (statusmode!=false){ if (statusmode=="member"){ memberstatus="<div class=\"tab solidhover\" style=\"float:right;padding:5px;font-size:0.7em;padding-left: 10px;padding-right: 10px;margin-left: 5px;margin-right: 10px;margin-top: 10px;\"><trans>Member</trans></div>";} if (statusmode=="pending"){ memberstatus="<div class=\"tab solidhover\" style=\"float:right;padding:5px;font-size:0.7em;padding-left: 10px;padding-right: 10px;margin-left: 5px;margin-right: 10px;margin-top: 10px;\"><trans>Pending</trans></div>";}} var header=""; header="<div class=\"aspectcase thirtybyeight\"><div class=\"cover optimizer_bg content\" source=\""+content["header"]+"\">"+memberstatus+"</div></div>"; if (type=="halfsize"){ fu_qak(container,"<bubble class='halfsized profile' onclick=\"javascript:fu_euy('/!"+content["alias"]+"');\">"+header+"<img source='"+content["avatar"]+"' class='optimizer_img avatar main' alt='Café image for "+content["name"]+"'><h1 style='max-width: calc(100% - 0px);'>"+fu_ctl(content["name"])+"</h1><h2>!"+content["alias"]+"</h2><div class='minibubble' style='font-size: 0.8em;font-weight: 400;'>"+fu_ctl(fu_fud(fu_yaa(content["bio"])))+"</div></bubble>");} if (type=="list"){ fu_qak(container,"<bubble onclick=\"javascript:fu_euy('/!"+content["alias"]+"');\" style='cursor: pointer;overflow:hidden;'><img source='"+content["avatar"]+"' class='optimizer_img avatar' style='width:40px;height:40px;margin-left: -5px;margin-top: -5px;margin-bottom: 15px;float:left;margin-right:15px;' alt='Avatar image for cafe "+content["name"]+"'><h3 style='margin-top: 0px;'>"+fu_ctl(content["name"])+"</h3><div class='minibubble' style='font-size: 0.8em;font-weight: 400;padding: 10px;'>"+fu_ctl(fu_fud(fu_yaa(content["bio"])))+"</div></bubble>");}} } function fu_hnn(content,container,type){ if (content["status"]=="active"){ if (su_alias!=content["alias"]){ if (su_id!=null){ if (content["you_following"]==false){ var follow_control="";}else{ var follow_control="<div class=\"tab solidhover\" style=\"float:right;padding:5px;font-size:0.7em;padding-left: 10px;padding-right: 10px;margin-left: 5px;margin-right: 0px;margin-top: 0px;\"><trans>Following</trans></div>";}}else{ var follow_control="";}}else{ var follow_control="";} var verified=""; if (content["verified"]=="1"){ if (content["type"]=="person"){ verified=" <span class='verified_badge'>"+fu_slu("patch-check-fill")+"</span>";} if (content["type"]=="business"){ verified=" <span class='business_badge'>"+fu_slu("patch-check-fill")+"</span>";}} if (content["type"]=="robot"){ if (content["verified"]=="1"){ verified=" <span class='verified_robot_badge'>"+fu_slu("robot")+"</span>";}else{ verified=" <span class='robot_badge'>"+fu_slu("robot")+"</span>";}} if (type=="halfsize"){ fu_qak(container,"<bubble class='halfsized profile' onclick=\"javascript:fu_fvt('"+content["alias"]+"');\"><img source='"+content["avatar"]+"' class='optimizer_img avatar main' alt='Profile image for "+content["name"]+"'>"+follow_control+"<h1>"+fu_ctl(content["name"])+""+verified+"</h1><h2>@"+content["alias"]+"</h2><div class='minibubble' style='font-size: 0.8em;font-weight: 400;'>"+fu_ctl(fu_fud(fu_yaa(content["bio"])))+"</div></bubble>");} if (type=="list"){ fu_qak(container,"<bubble onclick=\"javascript:fu_fvt('"+content["alias"]+"');\" style='cursor: pointer;overflow:hidden;'><img source='"+content["avatar"]+"' class='optimizer_img avatar' style='width:40px;height:40px;margin-left: -5px;margin-top: -5px;margin-bottom: 15px;float:left;margin-right:15px;' alt='Avatar image for cafe "+content["name"]+"'>"+follow_control+"<h3 style='margin-top: 0px;'>"+fu_ctl(content["name"])+""+verified+"</h3><div class='minibubble' style='font-size: 0.8em;font-weight: 400;padding: 10px;'>"+fu_ctl(fu_fud(fu_yaa(content["bio"])))+"</div></bubble>");}} }
function fu_ajr(container,username){ fu_knz("https://"+s_hostname+"/get_account_info?query="+username+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen(container); fu_qak(container,"<a href='/@"+response["response_data"]["alias"]+"' "+fu_wfk(response["response_data"])+"><img source='"+response["response_data"]["avatar"]+"' class='avatar optimizer_img' alt='Avatar for "+response["response_data"]["name"]+"' style='display: inline-block;max-width: 16px !important;max-height: 16px !important;margin-bottom: -2px;'> "+fu_ctl(response["response_data"]["name"])+"</a>");}else{ fu_oen(container); fu_qak(container,"<a class='' href='/@"+username+"'>@"+username+"</a>");}},false,true);}
function fu_qqa(content,container){ var refresh=false; if (aa("message_"+content["id"]+"")!=null){ refresh=true;} var time=fu_hms(content["date_created"]); var timelocal=fu_tlv(content["date_created"]); var contents=content["contents"]; var actioncontrols=""; var headermeta=""; var styletype="other"; var stylebackground="normal"; if (content["info_update"]=="1"){ stylebackground="update"; contents=fu_ctl(contents);}else{ contents=fu_hww(contents); contents=fu_maf(contents); contents=fu_nns(contents); contents=fu_ctl(contents); contents=fu_ltt(contents);} if (content["account"]["alias"]==su_alias){ styletype="myself";} var structure=""+headermeta+"<div class='header'><a href=\"javascript:fu_fvt('"+content["account"]["alias"]+"');\"><img source=\""+content["account"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for "+content["account"]["name"]+"'></a></div><div class='content_case "+stylebackground+"'><div class='content' id='message_content_"+content["id"]+"'>"+contents+"</div><div class='translate' id='message_translate_"+content["id"]+"'></div><div class='attachments' id='message_attachments_"+content["id"]+"'></div></div><div class='footer'><div class='meta'><span class='timestamp' tabindex='0'><timestamp time='"+content["date_created"]+"' data-title='"+timelocal+"'>"+time+"</timestamp></span></div><div class='action' onclick=\"javascript:actionMessage('"+content["id"]+"');\">&#8943;</div>"+actioncontrols+"<div class='minireactions' id='messsage_reactions_mini_"+content["id"]+"'></div></div>"; if (refresh==false){ fu_qak(container,"<bubble class='conversation message "+styletype+"' id='message_"+content["id"]+"'>"+structure+"</bubble>");}else{ } if (refresh==false){ if (content["attachments"]!=false){ fu_udu(content["attachments"],"message_attachments_"+content["id"]+"",false);} if (content["reactions"]!=false){ fu_lgl(content["reactions"], function(id){ fu_bqo(content["reactions"][""+id+""],"message_reactions_mini_"+content["id"]+"","mini");});}} }
function fu_syb(element,url,light){ var meta_allowed=true; var render_inline_type=false; if (url.endsWith(".jpeg") || url.endsWith(".jpg") || url.endsWith(".png") || url.endsWith(".gif") || url.endsWith(".webp")){ render_inline_type="image"; meta_allowed=false;} if (url.endsWith(".mp4")){ render_inline_type="video"; meta_allowed=false;} if (render_inline_type=="image"){ fu_oen(element); fu_qak(element,"<div class='media' style='display: inline-block;width: auto;max-width: 100%;'><a href=\"javascript:fu_lwj('"+url+"','image');\"><img style='max-width: 100%;max-height: 400px;height: auto;width: auto;' source='"+url+"' class='optimizer_img' alt='External linked image'></a></div>");} if (render_inline_type=="video"){ fu_oen(element); fu_qak(element,"<div><a href=\""+url+"\" target='_blank' style='line-break: normal;'>"+url+"</a></div>");} if (meta_allowed==true){ fu_oen(element); if (light==false){ fu_qak(element,"<div class='embed'><div class='loading'></div></div>");} if (aa(element)){ var randhostname=fu_bpp(); fu_knz("https://"+randhostname+"/get_bot_website_meta?query="+fu_qti(url)+"",function(result){ var response = fu_leh(result); if (response["fail"]==undefined){ if (response["system_api_error"]==false){ fu_tia(element,url,response["response_data"],light);}}else{ fu_oen(element); setTimeout(function(){ fu_syb(element,url);}, 3000);}},false,true);}} } function fu_tia(element,url,data,light){ if (aa(element)){ fu_oen(element); var trueurl=data["url"]; var view="preview"; var preview_noinfo=false; var org_description=data["description"]; var org_title=fu_ctl(data["title"]); if (url.includes("/t.co/")){ url=trueurl;}
url=url.replace("http://", "https://"); if (url.includes("twitch.tv")){ view="twitch";} if (url.includes("twitch.tv") && url.includes("/videos/")){ view="twitchvid";} if (url.includes("youtube.com") || url.includes("youtu.be")){ if (url.includes("/watch?") || url.includes("live/") || url.includes("embed/") || url.includes("youtu.be/")){ view="youtubevideo";}} if (url.includes("music.apple.com")){ if (url.includes("/album/")){ view="applemusic_album";}} if (url.includes("music.apple.com")){ if (url.includes("/album/")){ if (org_description.includes("/Song/")){ view="applemusic_song";}}} if (url.includes("music.apple.com")){ if (url.includes("/album/")){ if (url.includes("/\?i\=/")){ view="applemusic_song";}}} if (url.includes("music.apple.com")){ if (url.includes("/station/")){ view="applemusic_station";}} if (data["title"]!=undefined){ if (data["title"]=="false"){ if (data["description"]=="false"){ preview_noinfo=true;}} var url_preview_text=data["url"]; url_preview_text=url_preview_text.replace("https://", ""); url_preview_text=url_preview_text.replace("http://", ""); url_preview_text=url_preview_text.replace("www.", ""); if (data["title"]=="false"){ data["title"]="No title found...";} if (data["description"]=="false"){ data["description"]="No description...";}
data["title"]=fu_ctl(data["title"]); data["description"]=fu_skr(data["description"]); data["description"]=fu_yaa(data["description"],true); data["description"]=fu_ctl(data["description"]); var image=""; if (data["image"]!="false"){ if (data["image"].includes("http")==false){ if (data["image"].includes("//")==false){ var hostname=fu_rgf(url); if (data["image"].charAt(0)=="/"){ data["image"]="https://"+hostname+""+data["image"]+"";}else{ data["image"]="https://"+hostname+"/"+data["image"]+"";}} }} if (data["image"]!="false"){ image="<img source='"+data["image"]+"' class='optimizer_img' alt='Preview image provided by website'>";} if (light==true){ view="light";} if (view=="light"){ fu_qak(element,"<a href='"+url+"' tabindex=\"0\" target='_blank' rel='noreferrer' data-title='"+url+"'>"+data["title"]+"</a>");} if (view=="internal"){ fu_qak(element,"<div style='margin-top: 10px;margin-bottom:10px;'><div class='window'><a href='"+url+"' tabindex=\"0\" target='_blank' rel='noreferrer'><strong>"+data["title"]+"</strong></a><p>"+data["description"]+"</p><div style='font-weight: 500;font-size: 0.8em;overflow:hidden; white-space:nowrap;text-overflow: ellipsis;'>"+url_preview_text+"</div></div></div>");} if (view=="preview"){ if (preview_noinfo==false){ if (image!=""){ image="<div class='preview'>"+image+"</div>";}
fu_qak(element,"<div class='embed' tabindex=\"0\" onclick=\"javascript:fu_euy('"+trueurl+"');\">"+image+"<strong style='font-size: 1.2em;'>"+data["title"]+"</strong><p>"+data["description"]+"</p><div style='font-weight: 500;font-size: 0.8em;overflow:hidden; white-space:nowrap;text-overflow: ellipsis;'><a href='"+trueurl+"' target='_blank' rel='noreferrer'>"+url_preview_text+"</a></div></div>");}else{ fu_qak(element,"<p><a href='"+url+"' tabindex=\"0\" target='_blank' rel='noreferrer'>"+url_preview_text+"</a></p>");}} if (view=="youtubevideo"){ var foundid =url.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/); var videoid=(foundid&&foundid[7].length==11)? foundid[7] : false; if (videoid==false){ var foundidtwo=url.match(/^.*youtu.be\/([^#&?]*).*/); var videoid=(foundidtwo&&foundidtwo[1].length==11)? foundidtwo[1] : false;} if (videoid==false){ var foundidtwo=url.match(/^.*youtube\.com\/live\/([^#&?]*).*/); var videoid=(foundidtwo&&foundidtwo[1].length==11)? foundidtwo[1] : false;} if (videoid!=false){ var playid="mediaplay_"+fu_sjw(30)+""; generated=true; fu_qak(element,"<div class='loading'></div>"); var randhostname=fu_bpp(); fu_knz("https://"+randhostname+"/get_bot_youtube_video_meta?query="+fu_qti(videoid)+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["title"]!="false"){ var emb_html=fu_qti("<div class='aspectcase sixteenbynine'><div class='content'><iframe allow=\"autoplay *; encrypted-media *; fullscreen *\" src=\"https://www.youtube.com/embed/"+videoid+"?autoplay=1\"></iframe></div></div>"); fu_oen(element); fu_qak(element,"<div class='embed youtube'><div id='"+playid+"'><div class='media' style='position: relative;'><div class=\"aspectcase sixteenbynine\"><div class=\"content\"><a title='Play Youtube video' href=\"javascript:fu_qbb('"+playid+"','external','Youtube','"+emb_html+"');\" tabindex=\"0\"><div class='playbuttoncase'><span class='playbutton'></span></div><div class='cover optimizer_bg content' source='https://img.youtube.com/vi/"+videoid+"/maxresdefault.jpg'></div></a></div></div></div></div><div style='margin-top:10px;' id='"+element+"_yt_userdata'><a href='"+url+"' target='_blank' rel='noreferrer'><strong style='font-size: 1.1em;'>"+response["response_data"]["title"]+"</strong></a></div></div>"); if (response["response_data"]["author_url"]!="false"){ fu_knz("https://"+s_hostname+"/get_bot_website_meta?query="+fu_qti(response["response_data"]["author_url"])+"",function(result){ var author = fu_leh(result); if (author["system_api_error"]==false){ fu_oen(""+element+"_yt_userdata"); fu_qak(""+element+"_yt_userdata","<div style='overflow:hidden;'><div style='display:inline-block;float:left;margin-right:10px;width:50px;padding-right: 10px;'><a href='"+response["response_data"]["author_url"]+"' target='_blank' rel='noreferrer'><img source='"+author["response_data"]["image"]+"' class='optimizer_img media' style='border-radius:100%;width:60px;height:60px;'></a></div><a href='"+url+"' target='_blank' rel='noreferrer'><strong style='font-size: 1.1em;'>"+response["response_data"]["title"]+"</strong></a><div style='margin-top:5px;'>"+response["response_data"]["author"]+": "+data["description"]+"</div></div>");}},false,true);}}else{ fu_oen(element); var emb_html=fu_qti("<div class='aspectcase sixteenbynine'><div class='content'><iframe allow=\"autoplay *; encrypted-media *; fullscreen *\" src=\"https://www.youtube.com/embed/"+videoid+"?autoplay=1\"></iframe></div></div>"); fu_qak(element,"<div class='embed youtube'><div id='"+playid+"'><div class='media' style='position: relative;'><div class=\"aspectcase sixteenbynine\"><div class=\"content\"><a title='Play Youtube video' tabindex=\"0\" href=\"javascript:fu_qbb('"+playid+"','external','Youtube','"+emb_html+"');\"><div class='playbuttoncase'><span class='playbutton'></span></div><div class='cover optimizer_bg content' source='https://img.youtube.com/vi/"+videoid+"/maxresdefault.jpg'></div></a></div></div></div></div><div style='margin-top:10px;' id='"+element+"_yt_userdata'></div></div>");}} },false,true);}} if (view=="applemusic_song"){ data["image"]=data["image"].replace("1200x1200bf", "1200x630wp"); data["image"]=data["image"].replace("-60.jpg", "-100.jpg"); var playid="mediaplay_"+fu_sjw(30)+""; generated=true; embedurl=url; embedurl=embedurl.replace("www.", ""); embedurl=embedurl.replace("embed.", ""); embedurl=embedurl.replace("http://", ""); embedurl=embedurl.replace("https://", ""); var emb_html=fu_qti('<iframe allow="autoplay *; encrypted-media *; fullscreen *" frameborder="0" height="150" style="width:100%;height: 150px;background:transparent;" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation" src="https://embed.'+embedurl+'"></iframe>'); fu_qak(element,"<div class='embed applemusic'><div id='"+playid+"'><div class='media' style='position: relative;'><a title='Play song from Apple Music' href=\"javascript:fu_qbb('"+playid+"','external','Apple Music','"+emb_html+"');\"><div class='playbuttoncase'><span class='playbutton'></span></div><img source='"+data["image"]+"' src='"+s_blank_image+"' class='optimizer_img' alt='Preview image for song on Apple Music'></a></div></div><div style='margin-top:10px;'><a href='"+url+"' target='_blank' rel='noreferrer'><strong style='font-size: 1.1em;'>"+data["title"]+"</strong></a><div style='margin-top:5px;'>"+data["description"]+"</div></div></div>");} if (view=="applemusic_album"){ data["image"]=data["image"].replace("1200x1200bf", "1200x630wp"); data["image"]=data["image"].replace("-60.jpg", "-100.jpg"); var playid="mediaplay_"+fu_sjw(30)+""; generated=true; embedurl=url; embedurl=embedurl.replace("www.", ""); embedurl=embedurl.replace("embed.", ""); embedurl=embedurl.replace("http://", ""); embedurl=embedurl.replace("https://", ""); var emb_html=fu_qti('<iframe allow="autoplay *; encrypted-media *; fullscreen *" frameborder="0" height="450" style="width:100%;height: 450px;background:transparent;" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation" src="https://embed.'+embedurl+'"></iframe>'); fu_qak(element,"<div class='embed applemusic'><div id='"+playid+"'><div class='media' style='position: relative;'><a title='Play album from Apple Music' href=\"javascript:fu_qbb('"+playid+"','external','Apple Music','"+emb_html+"');\"><div class='playbuttoncase'><span class='playbutton'></span></div><img source='"+data["image"]+"' src='"+s_blank_image+"' class='optimizer_img' alt='Preview image for song on Apple Music'></a></div></div><div style='margin-top:10px;'><a href='"+url+"' target='_blank' rel='noreferrer'><strong style='font-size: 1.1em;'>"+data["title"]+"</strong></a><div style='margin-top:5px;'>"+data["description"]+"</div></div></div>");} if (view=="applemusic_station"){ data["image"]=data["image"].replace("-60.jpg", "-100.jpg"); var playid="mediaplay_"+fu_sjw(30)+""; generated=true; embedurl=url; embedurl=embedurl.replace("www.", ""); embedurl=embedurl.replace("embed.", ""); embedurl=embedurl.replace("http://", ""); embedurl=embedurl.replace("https://", ""); var emb_html=fu_qti('<iframe allow="autoplay *; encrypted-media *; fullscreen *" frameborder="0" height="450" style="width:100%;height: 450px;background:transparent;" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation" src="https://embed.'+embedurl+'"></iframe>'); fu_qak(element,"<div class='embed applemusic'><div id='"+playid+"'><div class='media' style='position: relative;'><a title='Play station from Apple Music' href=\"javascript:fu_qbb('"+playid+"','external','Apple Music','"+emb_html+"');\"><div class='playbuttoncase'><span class='playbutton'></span></div><img source='"+data["image"]+"' src='"+s_blank_image+"' class='optimizer_img' alt='Preview image for song on Apple Music'></a></div></div><div style='margin-top:10px;'><a href='"+url+"' target='_blank' rel='noreferrer'><strong style='font-size: 1.1em;'>"+data["title"]+"</strong></a><div style='margin-top:5px;'>"+data["description"]+"</div></div></div>");} if (view=="twitch"){ if (image!=""){ image="<div class='preview'>"+image+"</div>";}
fu_qak(element,"<div class='embed twitch'>"+image+"<a href='"+url+"' target='_blank' rel='noreferrer'><strong>"+data["title"]+"</strong></a><p>"+data["description"]+"</p><div style='font-weight: 500;font-size: 0.8em;overflow:hidden; white-space:nowrap;text-overflow: ellipsis;'><a href='"+trueurl+"' target='_blank' rel='noreferrer'>"+url_preview_text+"</a></div></div>");} if (view=="twitchvid"){ var playid="mediaplay_"+fu_sjw(30)+""; var foundid = url.match(/(\/videos\/)([^&\n?#\/]+)/); var videoid=foundid[2]; generated=true; var emb_html=fu_qti("<div class='aspectcase sixteenbynine'><div class='content'><iframe allow=\"autoplay *; encrypted-media *; fullscreen *\" src=\"https://player.twitch.tv/?video="+videoid+"&parent="+s_domain+"\"></iframe></div></div>"); fu_qak(element,"<div class='embed twitch'><div id='"+playid+"'><div class='media' style='position: relative;'><div class=\"aspectcase sixteenbynine\"><div class=\"content\"><a title='Play media from Twitch' href=\"javascript:fu_qbb('"+playid+"','external','Twitch','"+emb_html+"');\"><div class='playbuttoncase'><span class='playbutton'></span></div><img source='"+data["image"]+"' src='"+s_blank_image+"' class='optimizer_img' alt='Preview image for Twitch'></a></div></div></div></div><div style='margin-top:10px;'><a href='"+url+"' target='_blank' rel='noreferrer'><strong style='font-size: 1.1em;'>"+data["title"]+"</strong></a><div style='margin-top:5px;'>"+data["description"]+"</div></div></div>");}} } if (aa(element)!=undefined){ if (aa(element).innerHTML==""){ fu_qak(element,"<p><a href='"+url+"' target='_blank' rel='noreferrer'>"+url_preview_text+"</a></p>");}} if (url.includes("twitch.tv") && url.includes("/videos/")){ if (url.includes("delayupdate=true")==false){ if (data["title"]=="Twitch"){ setTimeout(function(){ if (aa(element)){ if (url.includes("?")){ fu_syb(element,""+url+"&delayupdate=true");}else{ fu_syb(element,""+url+"?delayupdate=true");}} }, 1500);}} }}
function fu_qbw(element,source,target,text,replace){ if (aa(element)){ var postdata={}; postdata["text"]=ae(fu_qti(fu_qmj(text))); postdata["target"]=target; postdata["source"]=source; postdata=fu_mmy(postdata); var hashsource=""+target+"_"+source+"_"+text+""; var hash=hashsource.hashCode(); fu_oen(element); fu_qak(element,"<div style='margin-top:10px;margin-bottom:10px;'><div class='translatebubble'>Translating...<div style='margin-top:10px;font-size:0.7em;opacity: 0.6;'>From "+source+" to "+target+" (beta)</div></div></div></div>"); if (fu_hty('translate_'+hash+'')==null){ fu_hhf("https://"+s_hostname+"/get_bot_language_translate",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_rmn('translate_'+hash+'',response["response_data"]); fu_tem(element,response["response_data"]);}else{ fu_oen(element); fu_qak(element,"<div style='margin-top:10px;margin-bottom:10px;'><div class='translatebubble'>Unable to translate...<div style='margin-top:10px;font-size:0.7em;opacity: 0.6;'>Translated from "+source+" to "+target+" (beta)</div></div></div></div>");}
fu_qaf();},false);}else{ var response=fu_hty('translate_'+hash+''); fu_tem(element,response);}} } function fu_tem(element,response){ fu_oen(element); fu_qak(element,"<div style='margin-top:10px;margin-bottom:10px;'><div class='translatebubble'>"+response["text"]+"<div style='margin-top:10px;font-size:0.7em;opacity: 0.6;'>Translated from "+response["source"]+" to "+response["target"]+" (beta)</div></div></div>");}
function fu_fbe(conversation,comment){ fu_uqy(); fu_uti(); fu_qak("container_modl","<h1>Comment actions</h1>"); fu_knz("https://"+s_hostname+"/get_comment_info?query="+comment+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["account"]["alias"]==su_alias){ var options=""; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_gcn('"+conversation+"','"+comment+"');\"><strong style='display: inline-block;margin-bottom: 10px;'>Attach photo</strong><BR>Upload a photo to attach, you can have more than one.</div>"; if (su_pro==true){ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_vkt('"+conversation+"','"+comment+"');\"><strong style='display: inline-block;margin-bottom: 10px;'>Edit</strong><BR>Edit the contents of this comment.</div>";}else{ if (s_device!="NativeiOSApp"){ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_eax(true);\"><strong style='display: inline-block;margin-bottom: 10px;'>"+fu_ctl("🔒")+" Edit</strong><BR>Edit the contents of this comment.</div>";}} if (response["response_data"]["info_pinned"]=="0"){ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_skf('"+conversation+"','"+comment+"','0');\"><strong style='display: inline-block;margin-bottom: 10px;'>Pin</strong><BR>Pin the comment to the top of the conversation.</div>";}else{ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_skf('"+conversation+"','"+comment+"','1');\"><strong style='display: inline-block;margin-bottom: 10px;'>Unpin</strong><BR>Unpin the comment.</div>";}
options=""+options+"<div class='minibubble' onclick=\"javascript:fu_xih('"+conversation+"','"+comment+"');\"><strong style='display: inline-block;margin-bottom: 10px;'>Delete</strong><BR>When you delete something it will be gone forever!</div>"; fu_qak("container_modl","<bubble>"+options+"</bubble>"); if (response["response_data"]["attachments"]!=false){ fu_qak("container_modl","<h2>Attachments</h2>"); fu_lgl(response["response_data"]["attachments"], function(id){ var data=response["response_data"]["attachments"][""+id+""]; var preview=""; if (data["name"].endsWith(".png")==true){ preview="<div class='media' style='max-width:200px;margin: 10px;'><img source='"+data["file"]+"' class='optimizer_img' alt='Attachment preview'></div>";} if (data["name"].endsWith(".jpeg")==true){ preview="<div class='media' style='max-width:200px;margin: 10px;'><img source='"+data["file"]+"' class='optimizer_img' alt='Attachment preview'></div>";} if (data["name"].endsWith(".jpg")==true){ preview="<div class='media' style='max-width:200px;margin: 10px;'><img source='"+data["file"]+"' class='optimizer_img' alt='Attachment preview'></div>";} if (data["name"].endsWith(".gif")==true){ preview="<div class='media' style='max-width:200px;margin: 10px;'><img source='"+data["file"]+"' class='optimizer_img' alt='Attachment preview'></div>";} var alt=""; if (data["alt"]!="false"){ var alt="<div class='minibubble'>"+fu_ctl(fu_yaa(data["alt"]))+"</div>";}
fu_qak("container_modl","<bubble><strong style='display:block;margin-bottom:15px;'>"+data["name"]+"</strong>"+alt+""+preview+"<a href=\"javascript:fu_zbs('"+data["file"]+"','"+data["name"]+"')\"><div class='button'>View</div></a> <a href=\"javascript:fu_saw('"+conversation+"','"+comment+"','"+data["id"]+"','"+fu_qti(preview)+"')\"><div class='button'>Edit Alt Text</div></a> <a href=\"javascript:fu_iqp('"+conversation+"','"+comment+"','"+data["id"]+"')\"><div class='button'>Delete</div></a></bubble>");});}}else{ var options=""; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_gvu('comment','"+comment+"','spam');\"><strong style='display: inline-block;margin-bottom: 10px;'>Spam</strong><BR>Anything that can be seen as spam.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_gvu('comment','"+comment+"','abuse');\"><strong style='display: inline-block;margin-bottom: 10px;'>Abuse</strong><BR>Content that may be harmful to others.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_gvu('comment','"+comment+"','other');\"><strong style='display: inline-block;margin-bottom: 10px;'>Other</strong><BR>Anything that does not fall under the other options.</div>"; fu_qak("container_modl","<div id='action_main_mod_message'></div><div id='action_sub_options'></div><div id='action_main_mod'></div><bubble class='alt1'>You can report a comment by using the actions below. Pick the option that makes the most sense so that the correct person gets notified of this report.</bubble>"); fu_qak("container_modl","<bubble>"+options+"</bubble>"); fu_knz("https://"+s_hostname+"/get_conversation_info?query="+conversation+"",function(result){ var conversationresponse = fu_leh(result); if (conversationresponse["system_api_error"]==false){ fu_knz("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var accountresponse = fu_leh(result); if (accountresponse["system_api_error"]==false){ if (accountresponse["response_data"]["admin"]=="1" || accountresponse["response_data"]["moderator"]=="1"){ fu_qak("action_main_mod_message","<bubble class='alt1' style='margin-bottom:15px;' onclick=\"fu_euy('https://admin.hey.cafe/comment?id="+comment+"');\">View content in the moderation pannel</bubble>");}} },false,true); if (conversationresponse["response_data"]["account"]["alias"]==su_alias){ var options=""; if (response["response_data"]["info_pinned"]=="0"){ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_skf('"+conversation+"','"+comment+"','0');\"><strong style='display: inline-block;margin-bottom: 10px;'>Pin</strong><BR>Pin the comment to the top of the conversation.</div>";}else{ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_skf('"+conversation+"','"+comment+"','1');\"><strong style='display: inline-block;margin-bottom: 10px;'>Unpin</strong><BR>Unpin the comment.</div>";}
fu_qak("action_sub_options","<bubble>"+options+"</bubble><hr></hr>");} if (conversationresponse["response_data"]["cafe"]!=false){ fu_knz("https://"+s_hostname+"/get_cafe_info?query="+conversationresponse["response_data"]["cafe"]["alias"]+"",function(result){ var caferesponse = fu_leh(result); if (caferesponse["system_api_error"]==false){ var options=""; if (caferesponse["response_data"]["you_admin"]=="1" || caferesponse["response_data"]["you_moderator"]=="1"){ if (response["response_data"]["info_hidden_global"]=="0"){ fu_qak("action_main_mod_message","<bubble class='alt1' style='margin-bottom:15px;' onclick=\"fu_euy('https://admin.hey.cafe/comment?id="+comment+"');\">View content in the moderation pannel</bubble>");}else{ fu_qak("action_main_mod_message","<bubble class='alt1'>This comment is hidden on the global level.</bubble>");}
fu_qak("action_main_mod","<h2>Café moderator menu</h2><bubble>"+options+"</bubble><hr></hr>");}}else{ fu_rfy("Not able to load your cafe data to generate the page...");}},false,true);}} },false,true);}
fu_qaf();}},false,true);} function fu_xuk(conversation,comment){ fu_oen("comment_footer_mini_"+comment+""); fu_qak("comment_footer_mini_"+comment+"","<div id='comm_reaction_bag_"+comment+"' class='horizontalscroll' style='margin-bottom:5px;padding: 0px;'></div>"); fu_lgl(sr, function(id){ var canuse=true; if (su_pro==false && sr[""+id+""]["pro"]==true){ canuse=false;} if (sr[""+id+""]["canpick"]==false){ canuse=false;} if (canuse==true){ fu_qak("comm_reaction_bag_"+comment+"","<div tabindex='0' class='action' onclick=\"javascript:fu_ldu('"+conversation+"','"+comment+"','"+id+"');\" style='margin-right:5px;text-align:center;'>"+fu_xqn(id)+"</div>");}}); fu_qak("comm_reaction_bag_"+comment+"","<div tabindex='0' class='action' onclick=\"javascript:fu_wdc('"+conversation+"','"+comment+"');\" style='margin-right:5px;text-align:center;font-size: 1em;'>Clear Reactions</div>");} function fu_skf(conversation,comment,current){ fu_uqy(); fu_hbj(); var postdata={}; if (current=="1"){ var level="off";}else{ var level="on";}
postdata["comment"]=comment; postdata["mode"]=level; postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_comment_pin",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_wre(conversation); if (level=="on"){ fu_ygh("Comment has been pinned");}else{ fu_ygh("Comment pin has been remove");}}else{ fu_ygh(response["system_api_error"]);}
fu_qaf();},true);} function fu_ldu(conversation,comment,reaction){ fu_uqy(); var postdata={}; postdata["comment"]=comment; postdata["conversation"]=conversation; postdata["reaction"]=reaction; postdata=fu_mmy(postdata); fu_oen("comment_footer_mini_"+comment+""); fu_hhf("https://"+s_hostname+"/post_comment_react",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oxg(comment); fu_ygh("Reaction has been sent");}else{ fu_oxg(comment); fu_ygh(response["system_api_error"]);}
fu_qaf();},true);} function fu_wdc(conversation,comment){ fu_uqy(); var postdata={}; postdata["comment"]=comment; postdata["conversation"]=conversation; postdata=fu_mmy(postdata); fu_oen("comment_footer_mini_"+comment+""); fu_hhf("https://"+s_hostname+"/post_comment_delete_react",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oxg(comment); fu_ygh("Your reactions have been removed");}else{ fu_oxg(comment); fu_ygh(response["system_api_error"]);}
fu_qaf();},true);} function fu_xih(conversation,comment){ fu_uqy(); fu_hbj(); var postdata={}; postdata["comment"]=comment; postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_comment_delete",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oxg(comment); fu_ygh("Your comment has been deleted");}else{ fu_ygh(response["system_api_error"]);}
fu_qaf();},true);} function fu_iqp(conversation,comment,attachment){ fu_uqy(); fu_hbj(); var postdata={}; postdata["comment"]=comment; postdata["attachment"]=attachment; postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_comment_delete_attachment",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oxg(comment); fu_ygh("Your comment attachment has been deleted");}else{ fu_ygh(response["system_api_error"]);}
fu_qaf();},true);} function fu_saw(conversation,comment,attachment,preview){ fu_uqy(); fu_uti(); preview=fu_qdo(preview); fu_knz("https://"+s_hostname+"/get_comment_info?query="+comment+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_qak("container_modl","<h1>Edit attachment alt</h1>"); var contentstoedit=response["response_data"]["attachments"][""+attachment+""]["alt"]; contentstoedit=contentstoedit.replace(/\s\s/g, "\n"); contentstoedit=contentstoedit.replace(/~~/g, "\t"); if (contentstoedit=="false"){ contentstoedit="";} var sizemax=200; fu_qak("container_modl","<bubble class='alt1'>Once you are done and happy with the changes you can tap update.</bubble>"); fu_qak("container_modl",'<bubble><form name="edit" onsubmit="return isValidForm()"><div style="text-align:center;"><div>'+preview+'</div><textarea class="input fullsize" name="content" size="50" maxlength="5000" placeholder="Describe what the file content looks like" charcost="true" charcostcase="edit_costbox" maxsize="'+sizemax+'">'+contentstoedit+'</textarea><BR><BR><div id="edit_costbox" class="tab nohover" style="float: right;margin-top: 5px;"></div><input type="submit" name="submit" onclick="fu_nzc(\''+comment+'\',\''+attachment+'\',this.form); return false;" style="float: left;width: 150px;padding-top:10px;padding-bottom:10px;" value="Update"></div></form></bubble>'); fu_qaf();}},false,true);} function fu_nzc(comment,attachment,form){ fu_uqy(); fu_hbj(); var data=fu_fhg(form); var postdata={}; postdata["comment"]=comment; postdata["attachment"]=attachment; postdata["content"]=ae(fu_qti(data["content"])); postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_comment_edit_alt_attachment",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oxg(comment); fu_ygh("Your attachment alt text has been edited");}else{ fu_ygh(response["system_api_error"]);}
fu_qaf();},true);} function fu_vkt(conversation,comment){ fu_uqy(); fu_uti(); fu_knz("https://"+s_hostname+"/get_comment_info?query="+comment+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_qak("container_modl","<h1>Edit content</h1>"); var contentstoedit=response["response_data"]["contents"]; contentstoedit=contentstoedit.replace(/\s\s/g, "\n"); contentstoedit=contentstoedit.replace(/~~/g, "\t"); var sizemax=s_char_reg; if (su_pro==true){ var sizemax=s_char_pro;}
fu_qak("container_modl",'<bubble class=\'conversation\'><form name="edit" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea class="input fullsize" name="content" size="50" maxlength="5000" placeholder="You will need some content..." charcost="true" charcostcase="edit_costbox" maxsize="'+sizemax+'">'+contentstoedit+'</textarea><BR><BR><div id="edit_costbox" class="tab nohover" style="float: right;margin-top: 5px;"></div><input type="submit" name="submit" onclick="fu_eda(\''+conversation+'\',\''+comment+'\',this.form); return false;" style="float: left;width: 200px;" value="Update Comment"></div></form></bubble>'); fu_qaf();}},false,true);} function fu_eda(conversation,comment,form){ fu_uqy(); fu_hbj(); var data=fu_fhg(form); var postdata={}; postdata["comment"]=comment; postdata["content"]=ae(fu_qti(data["content"])); postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_comment_edit",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oxg(comment); fu_ygh("Your comment has been edited");}else{ if (response["system_api_error"]=="notpro"){ fu_ygh("You are not pro so are unable to use this action");}else{ fu_ygh(response["system_api_error"]);}}
fu_qaf();},true);} function fu_gcn(conversation,comment){ fu_uqy(); fu_uti(); fu_knz("https://"+s_hostname+"/get_comment_info?query="+comment+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_qak("container_modl","<h1>Attach photo</h1>"); fu_qak("container_modl",'<bubble><form name="edit" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea id="imagedata_source" activated="true" style="position:fixed;left:0px;top:-200px;" name="photo"></textarea><div id="uploader_previewarea"></div><input type="file" onchange="fu_xzu(this,\'imagedata_source\',\'uploader_previewarea\',false,\'images\')" /><BR><BR><input type="submit" name="submit" onclick="fu_mpt(\''+conversation+'\',\''+comment+'\',this.form); return false;" value="Attach"></div></form></bubble>'); fu_qaf();}},false,true);} function fu_mpt(conversation,comment,form){ fu_uqy(); fu_hbj(); var data=fu_fhg(form); var postdata={}; postdata["comment"]=comment; postdata["file"]=ae(data["photo"]); postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_comment_attach_photo",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_oxg(comment); fu_ygh("The photo has been attached to the comment");}else{ fu_oxg(comment); fu_ygh("The photo failed to get attached");}}else{ fu_ygh(response["system_api_error"]);}
fu_qaf();},true);}
function fu_kdn(conversation,comment,content){ fu_uti(); if (comment==undefined){ var comment="";} if (content==undefined){ var content=false;}
fu_qak("container_modl","<h1>New comment</h1>"); var random=fu_sjw(20); fu_qak("container_modl","<bubble id='convonew_"+random+"' class='conversation'>"); fu_ncj("convonew_"+random+"",conversation,comment,content);} function fu_ncj(rendercase,conversation,comment,content){ fu_oen(rendercase); var id=fu_sjw(20); if (content!=undefined && content!=false && content!="undefined"){ if (content!=""){ content=fu_qdo(decodeURIComponent(content));}}else{ content="";} if (su_pro==true){ var sizemax=s_char_pro;}else{ var sizemax=s_char_reg;} var editor=""; editor=''+editor+'<form name="convo_'+id+'" onsubmit="return isValidForm()">'; editor=''+editor+'<div style="text-align:center;"><div style=\'overflow: hidden;\'>'; editor=''+editor+'<textarea class="input fullsize" onpaste="javascript:fu_drn(this, event);" onfocusin="javascript:fu_vch(this, false);" beforeinput="javscript:fu_owk(this, event);" oninput="javascript:fu_vch(this, event)" name="content" maxlength="5000" placeholder="You have something to say?" maxsize="'+sizemax+'" forcefocus="true">'+content+'</textarea>'; editor=''+editor+'<div onclick="javascript:fu_wvf(\'convo_action_area_'+id+'\');" class="tab" style="float: right;margin-top:5px;">'+fu_slu("filetype-gif")+'</div>'; editor=''+editor+'<div onclick="javascript:fu_smz(\'convo_attach_photo_area_'+id+'\');" class="tab" style="float: right;margin-top:5px;">'+fu_slu("images")+'</div>'; editor=''+editor+'<div id="convo_submit_'+id+'"><input type="submit" name="submit" onclick="javascript:fu_ebe(\''+conversation+'\',\''+comment+'\',this.form); return false;" value="Comment" style="float: left;width: 150px;padding-top:10px;padding-bottom:10px;"></div>'; editor=''+editor+'</div><div class="minibubble spacing" id="convo_attach_photo_area_'+id+'"></div></div>'; editor=''+editor+'</form>'; editor=''+editor+'<div class="minibubble spacing" id="convo_action_area_'+id+'"></div>'; fu_qak(rendercase,editor);} function fu_ebe(conversation,comment,form){ fu_uqy(); fu_hbj(); var data=fu_fhg(form); var postdata={}; var sendurl=""; postdata["content"]=ae(fu_qti(data["content"])); postdata["conversation"]=conversation; if (comment!=false){ postdata["comment"]=comment;} if (data["photo"]!=undefined){ postdata["file"]=ae(data["photo"]);}
postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_comment_create"; fu_hhf(sendurl,postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (!sp.startsWith("/share")){ fu_wre(response["response_data"]["conversation"]); fu_amh(response["response_data"]["conversation"],response["response_data"]["id"]);}
fu_ygh("Your comment has been shared");}else{ if (response["system_api_error"]=="notpro"){ fu_kdn(conversation,comment,ae(fu_qti(data["content"]))); fu_ygh("You not pro so you can't create a comment of this size");}else{ fu_kdn(conversation,comment,ae(fu_qti(data["content"]))); fu_ygh(response["system_api_error"]);}}
fu_qaf();},true);}
function fu_azm(conversation){ fu_uqy(); fu_uti(); fu_qak("container_modl","<h1>Conversation actions</h1>"); fu_knz("https://"+s_hostname+"/get_conversation_info?query="+conversation+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ var options=""; if (response["response_data"]["account"]["alias"]==su_alias){ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_gnl('"+conversation+"');\"><strong style='display: inline-block;margin-bottom: 10px;'>Attach photo</strong><BR>Upload a photo to attach, you can have more than one.</div>"; if (su_pro==true){ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_mwi('"+conversation+"');\"><strong style='display: inline-block;margin-bottom: 10px;'>Attach file</strong><BR>Can attach any file type.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_aky('"+conversation+"');\"><strong style='display: inline-block;margin-bottom: 10px;'>Edit</strong><BR>Edit the contents of this conversation.</div>";}else{ if (s_device!="NativeiOSApp"){ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_eax(true);\"><strong style='display: inline-block;margin-bottom: 10px;'>"+fu_ctl("🔒")+" Attach file</strong><BR>Can attach any file type.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_eax(true);\"><strong style='display: inline-block;margin-bottom: 10px;'>"+fu_ctl("🔒")+" Edit</strong><BR>Edit the contents of this conversation.</div>";}} if (response["response_data"]["info_pinned"]=="0"){ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_jap('"+conversation+"','0');\"><strong style='display: inline-block;margin-bottom: 10px;'>Pin</strong><BR>Pin the conversation to the top of your profile or café.</div>";}else{ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_jap('"+conversation+"','1');\"><strong style='display: inline-block;margin-bottom: 10px;'>Unpin</strong><BR>Unpin the conversation.</div>";} if (response["response_data"]["info_locked"]=="0"){ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_nfl('"+conversation+"','0');\"><strong style='display: inline-block;margin-bottom: 10px;'>Lock</strong><BR>Lock the conversation from reactions and comments.</div>";}else{ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_nfl('"+conversation+"','1');\"><strong style='display: inline-block;margin-bottom: 10px;'>Unlock</strong><BR>Unlock the conversation and allow reactions and comments.</div>";}
options=""+options+"<div class='minibubble' onclick=\"javascript:fu_gtx('"+conversation+"');\"><strong style='display: inline-block;margin-bottom: 10px;'>Delete</strong><BR>When you delete something it will be gone forever!</div>"; fu_qak("container_modl","<bubble>"+options+"</bubble>"); fu_qak("container_modl","<h2>Tags</h2> <bubble id='ActionMainTags'></bubble>"); if (response["response_data"]["cafe"]==false){ fu_knz("https://"+s_hostname+"/get_account_info?query="+response["response_data"]["account"]["id"]+"",function(result){ var response_tags = fu_leh(result); if (response_tags["system_api_error"]==false){ var contentstags=""; if (response_tags["response_data"]["tags"]==false){ contentstags="<bubble class='alt1'>No tags have been created yet</bubble>";}else{ if (response["response_data"]["tag"]!=false){ contentstags=""+contentstags+"<div class='minibubble' onclick=\"javascript:fu_omd('"+conversation+"','false');\"><strong style='display: inline-block;margin-bottom: 10px;'>Remove Tag \""+fu_ctl(response["response_data"]["tag"]["emoji"])+" "+fu_ctl(response["response_data"]["tag"]["name"])+"\"</strong><BR>Will remove the current tag from the conversation.</div>";}
fu_lgl(response_tags["response_data"]["tags"], function(select){ contentstags=""+contentstags+"<div class='minibubble' onclick=\"javascript:fu_omd('"+conversation+"','"+response_tags["response_data"]["tags"][""+select+""]["id"]+"');\"><strong style='display: inline-block;margin-bottom: 10px;'>"+fu_ctl(response_tags["response_data"]["tags"][""+select+""]["emoji"])+" "+fu_ctl(response_tags["response_data"]["tags"][""+select+""]["name"])+"</strong><BR>Set the tag on the conversation.</div>";});}
fu_qak("ActionMainTags",""+contentstags+"");}},false,true);}else{ fu_knz("https://"+s_hostname+"/get_cafe_info?query="+response["response_data"]["cafe"]["id"]+"",function(result){ var response_tags = fu_leh(result); if (response_tags["system_api_error"]==false){ var contentstags=""; if (response_tags["response_data"]["tags"]==false){ contentstags="<bubble class='alt1'>No tags have been created yet</bubble>";}else{ if (response["response_data"]["tag"]!=false){ contentstags=""+contentstags+"<div class='minibubble' onclick=\"javascript:fu_omd('"+conversation+"','false');\"><strong style='display: inline-block;margin-bottom: 10px;'>Remove Tag \""+fu_ctl(response["response_data"]["tag"]["emoji"])+" "+fu_ctl(response["response_data"]["tag"]["name"])+"\"</strong><BR>Will remove the current tag from the conversation.</div>";}
fu_lgl(response_tags["response_data"]["tags"], function(select){ if (response_tags["response_data"]["tags"][""+select+""]["staff"]=="false" || response_tags["response_data"]["you_admin"]=="1" || response_tags["response_data"]["you_moderator"]=="1"){ contentstags=""+contentstags+"<div class='minibubble' onclick=\"javascript:fu_omd('"+conversation+"','"+response_tags["response_data"]["tags"][""+select+""]["id"]+"');\"><strong style='display: inline-block;margin-bottom: 10px;'>"+fu_ctl(response_tags["response_data"]["tags"][""+select+""]["emoji"])+" "+fu_ctl(response_tags["response_data"]["tags"][""+select+""]["name"])+"</strong><BR>Set the tag on the conversation.</div>";}});}
fu_qak("ActionMainTags",""+contentstags+"");}},false,true);} if (response["response_data"]["attachments"]!=false){ fu_qak("container_modl","<h2>Attachments</h2>"); fu_lgl(response["response_data"]["attachments"], function(id){ var data=response["response_data"]["attachments"][""+id+""]; var preview=""; if (data["name"].endsWith(".png")==true){ preview="<div class='media' style='max-width:200px;margin: 10px;'><img source='"+data["file"]+"' class='optimizer_img' alt='Attachment preview'></div>";} if (data["name"].endsWith(".jpeg")==true){ preview="<div class='media' style='max-width:200px;margin: 10px;'><img source='"+data["file"]+"' class='optimizer_img' alt='Attachment preview'></div>";} if (data["name"].endsWith(".jpg")==true){ preview="<div class='media' style='max-width:200px;margin: 10px;'><img source='"+data["file"]+"' class='optimizer_img' alt='Attachment preview'></div>";} if (data["name"].endsWith(".gif")==true){ preview="<div class='media' style='max-width:200px;margin: 10px;'><img source='"+data["file"]+"' class='optimizer_img' alt='Attachment preview'></div>";} var primary=""; if (data["primary"]=="1"){ primary=""+fu_ctl("⭐️")+"";} var alt=""; if (data["alt"]!="false"){ var alt="<div class='minibubble'>"+fu_ctl(fu_yaa(data["alt"]))+"</div>";}
fu_qak("container_modl","<bubble><strong style='display:block;margin-bottom:15px;'>"+data["name"]+" "+primary+"</strong>"+alt+""+preview+"<a href=\"javascript:fu_zbs('"+data["file"]+"','"+data["name"]+"')\"><div class='button'>View</div></a> <a href=\"javascript:fu_guq('"+conversation+"','"+data["id"]+"','"+fu_qti(preview)+"')\"><div class='button'>Edit Alt Text</div></a> <a href=\"javascript:fu_vou('"+conversation+"','"+data["id"]+"')\"><div class='button'>Make Primary</div></a> <a href=\"javascript:fu_ozg('"+conversation+"','"+data["id"]+"')\"><div class='button'>Delete</div></a></bubble>");});}}else{ var options=""; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_gvu('conversation','"+conversation+"','spam');\"><strong style='display: inline-block;margin-bottom: 10px;'>Spam</strong><BR>Anything that can be seen as spam.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_gvu('conversation','"+conversation+"','abuse');\"><strong style='display: inline-block;margin-bottom: 10px;'>Abuse</strong><BR>Content that may be harmful to others.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_gvu('conversation','"+conversation+"','other');\"><strong style='display: inline-block;margin-bottom: 10px;'>Other</strong><BR>Anything that does not fall under the other options.</div>"; fu_qak("container_modl","<div id='action_main_mod_message'></div><div id='action_main_mod'></div><bubble class='alt1'>You can report a conversation by using the actions below. Pick the option that makes the most sense so that the correct person gets notified of this report.</bubble><bubble>"+options+"</bubble>"); fu_knz("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var accountresponse = fu_leh(result); if (accountresponse["system_api_error"]==false){ if (accountresponse["response_data"]["admin"]=="1" || accountresponse["response_data"]["moderator"]=="1"){ fu_qak("action_main_mod_message","<bubble class='alt1' style='margin-bottom:15px;' onclick=\"fu_euy('https://admin.hey.cafe/conversation?id="+conversation+"');\">View content in the moderation pannel</bubble>");}} },false,true); if (response["response_data"]["cafe"]!=false){ fu_knz("https://"+s_hostname+"/get_cafe_info?query="+response["response_data"]["cafe"]["alias"]+"",function(result){ var caferesponse = fu_leh(result); if (caferesponse["system_api_error"]==false){ if (caferesponse["response_data"]["you_admin"]=="1" || caferesponse["response_data"]["you_moderator"]=="1"){ var options=""; if (response["response_data"]["info_pinned"]=="0"){ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_jap('"+conversation+"','0');\"><strong style='display: inline-block;margin-bottom: 10px;'>Pin</strong><BR>Pin the conversation to the top of your profile or café.</div>";}else{ options=""+options+"<div class='minibubble' onclick=\"javascript:fu_jap('"+conversation+"','1');\"><strong style='display: inline-block;margin-bottom: 10px;'>Unpin</strong><BR>Unpin the conversation.</div>";} if (response["response_data"]["info_hidden_global"]=="0"){ fu_qak("action_main_mod_message","<bubble class='alt1' style='margin-bottom:15px;' onclick=\"fu_euy('https://admin.hey.cafe/conversation?id="+conversation+"');\">View content in the moderation pannel</bubble>");}else{ fu_qak("action_main_mod_message","<bubble class='alt1'>This conversation is hidden on the global level.</bubble>");}
fu_qak("action_main_mod","<h2>Café moderator menu</h2><bubble>"+options+"</bubble><bubble id='ActionMainTags'></bubble><hr></hr>"); fu_qak("ActionMainTags","<h2 style='margin-top:0px;'>Tags</h2>"); var contentstags=""; if (caferesponse["response_data"]["tags"]==false){ contentstags="<bubble class='alt1'>No tags have been created yet</bubble>";}else{ if (response["response_data"]["tag"]!=false){ contentstags=""+contentstags+"<div class='minibubble' onclick=\"javascript:fu_omd('"+conversation+"','false');\"><strong style='display: inline-block;margin-bottom: 10px;'>Remove Tag \""+fu_ctl(response["response_data"]["tag"]["emoji"])+" "+fu_ctl(response["response_data"]["tag"]["name"])+"\"</strong><BR>Will remove the current tag from the conversation.</div>";}
fu_lgl(caferesponse["response_data"]["tags"], function(select){ contentstags=""+contentstags+"<div class='minibubble' onclick=\"javascript:fu_omd('"+conversation+"','"+caferesponse["response_data"]["tags"][""+select+""]["id"]+"');\"><strong style='display: inline-block;margin-bottom: 10px;'>"+fu_ctl(caferesponse["response_data"]["tags"][""+select+""]["emoji"])+" "+fu_ctl(caferesponse["response_data"]["tags"][""+select+""]["name"])+"</strong><BR>Set the tag on the conversation.</div>";});}
fu_qak("ActionMainTags",""+contentstags+"");}}else{ fu_rfy("Not able to load your cafe data to generate the page...");}},false,true);}}
fu_qaf();}},false,true);} function fu_omd(conversation,tag){ fu_uqy(); fu_hbj(); var postdata={}; postdata["conversation"]=conversation; postdata["tag"]=tag; postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_conversation_tag",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_wre(conversation); fu_ygh("The tag has been updated on the conversation");}else{ fu_wre(conversation); fu_ygh(response["system_api_error"]);}
fu_qaf();},true);} function fu_ehe(conversation){ fu_oen("conversation_footer_mini_"+conversation+""); fu_qak("conversation_footer_mini_"+conversation+"","<div id='conv_reaction_bag_"+conversation+"' class='horizontalscroll' style='margin-bottom:5px;padding: 0px;'></div>"); fu_lgl(sr, function(id){ var canuse=true; if (su_pro==false && sr[""+id+""]["pro"]==true){ canuse=false;} if (sr[""+id+""]["canpick"]==false){ canuse=false;} if (canuse==true){ fu_qak("conv_reaction_bag_"+conversation+"","<div tabindex='0' class='action' onclick=\"javascript:fu_qui('"+conversation+"','"+id+"');\" style='margin-right:5px;text-align:center;'>"+fu_xqn(id)+"</div>");}}); fu_qak("conv_reaction_bag_"+conversation+"","<div tabindex='0' class='action' onclick=\"javascript:fu_emc('"+conversation+"');\" style='margin-right:5px;text-align:center;font-size: 1em;'>Clear Reactions</div>");} function fu_qui(conversation,reaction){ fu_uqy(); var postdata={}; postdata["conversation"]=conversation; postdata["reaction"]=reaction; postdata=fu_mmy(postdata); fu_oen("conversation_footer_mini_"+conversation+""); fu_hhf("https://"+s_hostname+"/post_conversation_react",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_wre(conversation); fu_ygh("Your reaction has been sent");}else{ fu_wre(conversation); fu_ygh(response["system_api_error"]);}
fu_qaf();},true);} function fu_emc(conversation){ fu_uqy(); var postdata={}; postdata["conversation"]=conversation; postdata=fu_mmy(postdata); fu_oen("conversation_footer_mini_"+conversation+""); fu_hhf("https://"+s_hostname+"/post_conversation_delete_react",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_wre(conversation); fu_ygh("Your reactions have been removed");}else{ fu_wre(conversation); fu_ygh(response["system_api_error"]);}
fu_qaf();},true);} function fu_jap(conversation,current){ fu_uqy(); fu_hbj(); var postdata={}; if (current=="1"){ var level="off";}else{ var level="on";}
postdata["conversation"]=conversation; postdata["mode"]=level; postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_conversation_pin",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_wre(conversation); if (level=="on"){ fu_ygh("Conversation has been pinned");}else{ fu_ygh("Conversation pin has been remove");}}else{ fu_ygh(response["system_api_error"]);}
fu_qaf();},true);} function fu_nfl(conversation,current){ fu_uqy(); fu_hbj(); var postdata={}; if (current=="1"){ var level="off";}else{ var level="on";}
postdata["conversation"]=conversation; postdata["mode"]=level; postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_conversation_lock",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_wre(conversation); if (level=="on"){ fu_ygh("Conversation has been locked");}else{ fu_ygh("Conversation lock has been remove");}}else{ fu_ygh(response["system_api_error"]);}
fu_qaf();},true);} function fu_gtx(conversation){ fu_uqy(); fu_hbj(); var postdata={}; postdata["conversation"]=conversation; postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_conversation_delete",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_euy("/"); fu_ygh("Your conversation has been deleted");}else{ fu_ygh(response["system_api_error"]);}
fu_qaf();},true);} function fu_ozg(conversation,attachment){ fu_uqy(); fu_hbj(); var postdata={}; postdata["conversation"]=conversation; postdata["attachment"]=attachment; postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_conversation_delete_attachment",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_wre(conversation); fu_ygh("Your conversation attachment has been deleted");}else{ fu_ygh(response["system_api_error"]);}
fu_qaf();},true);} function fu_vou(conversation,attachment){ fu_uqy(); fu_hbj(); var postdata={}; postdata["conversation"]=conversation; postdata["attachment"]=attachment; postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_conversation_primary_attachment",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_wre(conversation); fu_ygh("Your conversation attachment has been made primary");}else{ fu_ygh(response["system_api_error"]);}
fu_qaf();},true);} function fu_guq(conversation,attachment,preview){ fu_uqy(); fu_uti(); preview=fu_qdo(preview); fu_knz("https://"+s_hostname+"/get_conversation_info?query="+conversation+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_qak("container_modl","<h1>Edit attachment alt</h1>"); var contentstoedit=response["response_data"]["attachments"][""+attachment+""]["alt"]; contentstoedit=contentstoedit.replace(/\s\s/g, "\n"); contentstoedit=contentstoedit.replace(/~~/g, "\t"); if (contentstoedit=="false"){ contentstoedit="";} var sizemax=200; fu_qak("container_modl","<bubble class='alt1'>Once you are done and happy with the changes you can tap update.</bubble>"); fu_qak("container_modl",'<bubble><form name="edit" onsubmit="return isValidForm()"><div style="text-align:center;"><div>'+preview+'</div><textarea class="input fullsize" name="content" size="50" maxlength="5000" placeholder="Describe what the file content looks like" charcost="true" charcostcase="edit_costbox" maxsize="'+sizemax+'">'+contentstoedit+'</textarea><BR><BR><div id="edit_costbox" class="tab nohover" style="float: right;margin-top: 5px;"></div><input type="submit" name="submit" onclick="fu_wai(\''+conversation+'\',\''+attachment+'\',this.form); return false;" style="float: left;width: 150px;padding-top:10px;padding-bottom:10px;" value="Update"></div></form></bubble>'); fu_qaf();}},false,true);} function fu_wai(conversation,attachment,form){ fu_uqy(); fu_hbj(); var data=fu_fhg(form); var postdata={}; postdata["conversation"]=conversation; postdata["attachment"]=attachment; postdata["content"]=ae(fu_qti(data["content"])); postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_conversation_edit_alt_attachment",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_wre(conversation); fu_ygh("Your attachment alt text has been edited");}else{ fu_ygh(response["system_api_error"]);}
fu_qaf();},true);} function fu_aky(conversation){ fu_uqy(); fu_uti(); fu_knz("https://"+s_hostname+"/get_conversation_info?query="+conversation+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_qak("container_modl","<h1>Edit content</h1>"); var contentstoedit=response["response_data"]["contents"]; contentstoedit=contentstoedit.replace(/\s\s/g, "\n"); contentstoedit=contentstoedit.replace(/~~/g, "\t"); var sizemax=s_char_reg; if (su_pro==true){ var sizemax=s_char_pro;}
fu_qak("container_modl","<bubble class='alt1'>Once you are done and happy with the changes you can tap update.</bubble>"); fu_qak("container_modl",'<bubble><form name="edit" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea class="input fullsize" name="content" size="50" maxlength="5000" placeholder="You will need some content..." charcost="true" charcostcase="edit_costbox" maxsize="'+sizemax+'">'+contentstoedit+'</textarea><BR><BR><div id="edit_costbox" class="tab nohover" style="float: right;margin-top: 5px;"></div><input type="submit" name="submit" onclick="fu_ava(\''+conversation+'\',this.form); return false;" style="float: left;width: 150px;padding-top:10px;padding-bottom:10px;" value="Update"></div></form></bubble>'); fu_qaf();}},false,true);} function fu_ava(conversation,form){ fu_uqy(); fu_hbj(); var data=fu_fhg(form); var postdata={}; postdata["conversation"]=conversation; postdata["content"]=ae(fu_qti(data["content"])); postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_conversation_edit",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_wre(conversation); fu_ygh("Your conversation has been edited");}else{ if (response["system_api_error"]=="notpro"){ fu_ygh("You are not pro so are unable to use this action");}else{ fu_ygh(response["system_api_error"]);}}
fu_qaf();},true);} function fu_gnl(conversation){ fu_uqy(); fu_uti(); fu_knz("https://"+s_hostname+"/get_conversation_info?query="+conversation+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_qak("container_modl","<h1>Attach photo</h1>"); fu_qak("container_modl",'<bubble><form name="edit" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea id="imagedata_source" activated="true" style="position:fixed;left:0px;top:-2000px;" name="photo"></textarea><div id="uploader_previewarea"></div><input type="file" onchange="fu_xzu(this,\'imagedata_source\',\'uploader_previewarea\',\'uploader_readytosend\',\'images\')" /><BR><BR><input type="submit" name="submit" id="uploader_readytosend" onclick="fu_vlo(\''+conversation+'\',this.form); return false;" value="Attach" disabled></div></form></bubble>'); fu_qaf();}},false,true);} function fu_vlo(conversation,form){ fu_uqy("Attaching Photo..."); fu_hbj(); var data=fu_fhg(form); var postdata={}; postdata["conversation"]=conversation; postdata["file"]=ae(data["photo"]); postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_conversation_attach_photo",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_wre(conversation); fu_ygh("The photo has been attached to the conversation");}else{ fu_wre(conversation); fu_ygh("The photo failed to get attached");}}else{ fu_ygh(response["system_api_error"]);}
fu_qaf();},true);} function fu_mwi(conversation){ fu_uqy(); fu_uti(); fu_knz("https://"+s_hostname+"/get_conversation_info?query="+conversation+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_qak("container_modl","<h1>Attach file</h1>"); fu_qak("container_modl",'<bubble><form name="edit" onsubmit="return isValidForm()"><div style="text-align:center;">If you upload a video file it will take a second after to make the thumbnail.<BR><BR><textarea id="imagedata_source" activated="true" style="position:fixed;left:0px;top:-200px;" name="file"></textarea><div id="uploader_previewarea"></div><input type="file" onchange="fu_xzu(this,\'imagedata_source\',\'uploader_previewarea\',\'uploader_readytosend\')" /><BR><BR><input type="submit" name="submit" id="uploader_readytosend" onclick="fu_ijc(\''+conversation+'\',this.form); return false;" value="Attach" disabled></div></form></bubble>'); fu_qaf();}},false,true);} function fu_ijc(conversation,form){ fu_uqy("Attaching File..."); fu_hbj(); var data=fu_fhg(form); var postdata={}; postdata["conversation"]=conversation; postdata["file"]=ae(data["file"]); postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_conversation_attach_file",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_wre(conversation); fu_ygh("The file has been attached to the conversation");}else{ fu_wre(conversation); fu_ygh("The file failed to get attached, it might be a file type not allowed");}}else{ fu_ygh(response["system_api_error"]);}
fu_qaf();},true);}
function fu_fcn(cafe,content,tag){ fu_uti(); if (tag==undefined){ var tag="false";} if (cafe==undefined){ var cafe="false";} if (cafe==""){ var cafe="false";} if (content==undefined){ var content=false;}
fu_qak("container_modl","<h1>New conversation</h1>"); var random=fu_sjw(20); fu_qak("container_modl","<bubble id='convonew_"+random+"' class='conversation'>"); fu_eou("convonew_"+random+"",cafe,tag,content);} function fu_eou(rendercase,cafe,tag,content){ fu_oen(rendercase); var id=fu_sjw(20); if (tag==undefined){ tag="false";} if (content!=undefined && content!=false && content!="undefined"){ if (content!=""){ content=fu_qdo(decodeURIComponent(content));}}else{ content="";} if (su_pro==true){ var sizemax=s_char_pro;}else{ var sizemax=s_char_reg;} var editor=''; editor=''+editor+'<form name="convo_'+id+'" onsubmit="return isValidForm()"><div style="text-align:center;">'; editor=''+editor+'<div id="convo_cafearea_'+id+'"></div>'; editor=''+editor+'<div style=\'overflow: hidden;\'>'; editor=''+editor+'<textarea class="input fullsize" formid="'+id+'" onpaste="javascript:fu_drn(this, event);" onfocusin="javascript:fu_vch(this, false);" beforeinput="javscript:fu_owk(this, event);" oninput="javascript:fu_vch(this, event)" name="content" maxlength="5000" placeholder="What is on your mind?" maxsize="'+sizemax+'">'+content+'</textarea>'; editor=''+editor+'<div onclick="javascript:fu_wvf(\'convo_action_area_'+id+'\');" class="tab" style="float: right;margin-top: 5px;" data-title="Find GIF">'+fu_slu("filetype-gif")+'</div>'; editor=''+editor+'<div onclick="javascript:fu_smz(\'convo_attach_photo_area_'+id+'\');" class="tab" style="float: right;margin-top: 5px;" data-title="Attach Photo">'+fu_slu("images")+'</div>'; editor=''+editor+'<div id="convo_submit_'+id+'"><input type="submit" name="submit" onclick="javascript:fu_rqr(this.form,\''+cafe+'\'); return false;" value="Share" style="float: left;width: 150px;padding-top:10px;padding-bottom:10px;"></div>'; editor=''+editor+'</div></div>'; editor=''+editor+'<div class="minibubble spacing" id="convo_attach_photo_area_'+id+'"></div>'; editor=''+editor+'</form>'; editor=''+editor+'<div class="minibubble spacing" id="convo_action_area_'+id+'"></div>'; fu_qak(rendercase,editor); fu_qpq("convo_cafearea_"+id+"",cafe,"javascript:fu_oap('convo_cafearea_"+id+"','convo_submit_"+id+"');");} function fu_gos(cafe,previewcase,submit){ fu_oen(submit); fu_qak(submit,'<input type="submit" name="submit" onclick="javascript:fu_rqr(this.form,\''+cafe+'\'); return false;" value="Share" style="float: left;width: 150px;padding-top:10px;padding-bottom:10px;">'); fu_qpq(previewcase,cafe,"javascript:fu_oap('"+previewcase+"','"+submit+"');");} function fu_oap(previewcase,submit,offset){ fu_oen(previewcase); var user_id=fu_sjw(20); var cafes_id=fu_sjw(20); fu_qak(previewcase,"<div id='loadcafes_"+user_id+"'><div class='loading'></div></div>"); fu_qak(previewcase,"<div id='loadcafes_"+cafes_id+"' style='overflow: hidden;'><div class='loading'></div></div>"); if (offset==undefined){ offset=0;} var start=(offset*10); fu_knz("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_leh(result); var options=""; if (response["system_api_error"]==false){ options=""+options +"<div class='cafeheader' style='text-align:left;' onclick=\"javascript:fu_gos('false','"+previewcase+"','"+submit+"')\"><img source=\""+response["response_data"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for account "+response["response_data"]["name"]+"'>Post to <strong>"+fu_ctl(response["response_data"]["name"])+"</strong> @"+response["response_data"]["alias"]+"</div>";}
fu_oen("loadcafes_"+user_id+""); fu_qak("loadcafes_"+user_id+"",options);},false,true); fu_knz("https://"+s_hostname+"/get_account_cafes?query="+su_id+"&start="+start+"&count=10",function(result){ var caferesponse = fu_leh(result); if (caferesponse["system_api_error"]==false){ var options=""; var counted=0; if (caferesponse["response_data"]["cafes"]!=false){ fu_lgl(caferesponse["response_data"]["cafes"], function(id){ counted=counted+1; if (caferesponse["response_data"]["cafes"][""+id+""]["you_member"]==true){ if (caferesponse["response_data"]["cafes"][""+id+""]["member_create"]=="1"){ options=""+options +"<div class='cafeheader' style='text-align:left;' onclick=\"javascript:fu_gos('"+id+"','"+previewcase+"','"+submit+"')\"><img source=\""+caferesponse["response_data"]["cafes"][""+id+""]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for café "+caferesponse["response_data"]["cafes"][""+id+""]["name"]+"'>Post to <strong>"+fu_ctl(caferesponse["response_data"]["cafes"][""+id+""]["name"])+"</strong> !"+caferesponse["response_data"]["cafes"][""+id+""]["alias"]+"</div>";}else{ if (caferesponse["response_data"]["cafes"][""+id+""]["you_admin"]==true){ options=""+options +"<div class='cafeheader' style='text-align:left;' onclick=\"javascript:fu_gos('"+id+"','"+previewcase+"','"+submit+"')\"><img source=\""+caferesponse["response_data"]["cafes"][""+id+""]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for café "+caferesponse["response_data"]["cafes"][""+id+""]["name"]+"'>Post to <strong>"+fu_ctl(caferesponse["response_data"]["cafes"][""+id+""]["name"])+"</strong> !"+caferesponse["response_data"]["cafes"][""+id+""]["alias"]+"</div>";}} }}); if (counted==10){ if (start!=0){ options=""+options +"<div onclick=\"javascript:fu_oap('"+previewcase+"','"+submit+"',"+(offset-1)+")\" class=\"tab\" style=\"float: left;margin-bottom: 10px;\">Back</div>";}
options=""+options +"<div onclick=\"javascript:fu_oap('"+previewcase+"','"+submit+"',"+(offset+1)+")\" class=\"tab\" style=\"float: right;margin-bottom: 10px;\">Next</div>";}}else{ if (start==0){ options=""+options +"<div>You have no cafés to post to.</div>";}else{ options=""+options +"<div>No more to find, <a href=\"javascript:fu_oap('"+previewcase+"','"+submit+"',"+(offset-1)+")\">tap to go back</a></div>";}}
fu_oen("loadcafes_"+cafes_id+""); fu_qak("loadcafes_"+cafes_id+"",options);}},false);} function fu_qpq(previewcase,cafe,link){ fu_qak(previewcase,"<div class='cafeheader' style='text-align:left;'>Loading...</div>"); if (cafe!="false"){ fu_knz("https://"+s_hostname+"/get_cafe_info?query="+cafe+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen(previewcase); fu_qak(previewcase,"<div class='cafeheader' id='"+previewcase+"_"+response["response_data"]["id"]+"' style='text-align:left;' onclick=\""+link+"\"><img source=\""+response["response_data"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for café "+response["response_data"]["name"]+"'>Posting to <strong>"+fu_ctl(response["response_data"]["name"])+"</strong> !"+response["response_data"]["alias"]+"</div>");}},false,true);}else{ fu_knz("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen(previewcase); fu_qak(previewcase,"<div class='cafeheader' id='"+previewcase+"_"+response["response_data"]["id"]+"' style='text-align:left;' onclick=\""+link+"\"><img source=\""+response["response_data"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for account "+response["response_data"]["name"]+"'>Posting to <strong>"+fu_ctl(response["response_data"]["name"])+"</strong> @"+response["response_data"]["alias"]+"</div>");}},false,true);}} function fu_rqr(form,cafe){ fu_uqy(); fu_hbj(); var data=fu_fhg(form); var postdata={}; var sendurl=""; postdata["cafe"]=cafe; postdata["content"]=ae(fu_qti(data["content"])); if (data["photo"]!=undefined){ postdata["file"]=ae(data["photo"]);}
postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_conversation_create"; fu_hhf(sendurl,postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (!sp.startsWith("/share")){ if (s_width<=799){ fu_euy("/conversation/"+response["response_data"]["id"]+"");}else{ window.scrollTo({ top: 0, behavior: 'smooth' }); fu_qqc();}}
fu_ygh("Your conversation has been shared");}else{ if (response["system_api_error"]=="notpro"){ fu_fcn(cafe,ae(fu_qti(data["content"]))); fu_ygh("You are not Pro so you can't create a conversation of this size");}else{ fu_fcn(cafe,ae(fu_qti(data["content"]))); fu_ygh(response["system_api_error"]);}}
fu_qaf();},true);}
function fu_kuc(container,textarea){ if (aa("action_editor_preview_results")){ fu_oen(container);}else{ fu_oen(container); var contents=aa(textarea).value; contents=fu_hww(contents); contents=fu_maf(contents); contents=fu_nns(contents); contents=fu_ctl(contents); contents=fu_ltt(contents); fu_qak(container,'<a style="float:right;" href="javascript:fu_oen(\''+container+'\');">Close</a><h3 style="margin-top:0px;text-align: left;">Preview</h3><bubble class="conversation" style="padding:0px;margin:0px;" id="action_editor_preview_results">'+contents+'</bubble>');}} function fu_smz(container,showalert){ fu_oen(container); fu_qak(container,'<a style="float:right;" href="javascript:fu_oen(\''+container+'\');">Close</a><h3 style="margin-top:0px;text-align: left;">Attach Photo</h3><textarea id="imagedata_source" activated="true" style="position:fixed;left:0px;top:-2000px;" name="photo"></textarea><div id="uploader_previewarea"></div><input type="file" onchange="fu_xzu(this,\'imagedata_source\',\'uploader_previewarea\',false,\'images\')" />');} function fu_wvf(container){ if (aa("action_editor_gif_results")){ fu_oen(container);}else{ fu_oen(container); fu_qak(container,'<a style="float:right;" href="javascript:fu_oen(\''+container+'\');">Close</a><h3 style="margin-top:0px;text-align: left;">Search for GIF</h3><form action="#" onsubmit="javascript:fu_ynw(this,\''+container+'\');"><input type="text" name="search" style="max-width: calc(100% - 24px);" placeholder="Search for a GIF..."></form></div><div style="line-height: 0px;" id="action_editor_gif_results"></div>');}} function fu_ynw(form,container){ event.preventDefault(); var data=fu_fhg(form); fu_oen("action_editor_gif_results"); fu_qak("action_editor_gif_results","<div class='loading'></div>"); var giflimit=12; fu_knz("https://"+s_hostname+"/get_bot_giphy_search?query="+ae(fu_qti(data["search"]))+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("action_editor_gif_results"); fu_qak("action_editor_gif_results","<div style='margin-top:20px;'></div>"); fu_lgl(response["response_data"], function(id){ if (giflimit>=1){ giflimit=giflimit-1; var content=response["response_data"][""+id+""]; fu_qak("action_editor_gif_results",'<div style="display:inline-block;width:25%;"><div style="padding:2px;"><bubble style="padding:0px;margin:0px;cursor: pointer;" onclick="javascript:fu_qnv(\''+content["image_large"]+'\',\''+container+'\');"><div style="position: absolute; width: 100%; top: 20px;"><div class="loading"></div></div><div class="aspectcase eightbyfive"><div class="media_bg content" style="background-repeat: no-repeat;background-size: contain;background-position-x: center;background-position-y: center;background-image: url(\'https://proxy.heycafecdn.com/ext_image/gif/?url='+content["image_preview"]+'&quality=raw\');"></div></div></bubble></div></div>');}});}else{ fu_rfy("Not able to load any gifs...");}},false,true);} function fu_qnv(url,container){ fu_oen(container); if (s_body_livearea_last!=false){ if (aa(s_body_livearea_last)){ var valuenow=aa(s_body_livearea_last).value; valuenow=valuenow+" "+url; aa(s_body_livearea_last).value=valuenow;}} }
function fu_gvu(type,resource,level){ fu_uqy(); fu_hbj(); var postdata={}; postdata["type"]=type; postdata["resource"]=resource; postdata["level"]=level; postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_account_report",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_ygh("The report has been sent in, we may or may not update you on the outcome");}else{ fu_ygh(response["system_api_error"]);}
fu_qaf();});}function fu_vzw(){ fu_uqy(); fu_crv("full"); var alias=null; var page=null; var subpage=null; var arr = sp.split('/'); if (arr!=null){ if (arr[1]!=undefined){ alias=arr[1].replace("!", "");} if (arr[2]!=undefined){ page=arr[2];} if (arr[3]!=undefined){ subpage=arr[3];}} if (alias!=null){ var defaultheader="<div class='aspectcase thirtybyeight'><div class='cover optimizer_bg content' source='https://cdn.hey.cafe/file/HeyCafe/defaults/header_cafe.jpg'></div></div><img source='https://cdn.hey.cafe/file/HeyCafe/defaults/avatar_cafe.png' class='optimizer_img avatar main' alt='Default image'><h1>Loading...</h1><h2>!"+alias+"</h2><div class='loading'></div></div>"; fu_qak("container_content","<bubble class='profile'><div id='PageCafeHeader'>"+defaultheader+"</div></bubble><div class='horizontalscroll' id='PageCafeMenu'></div><div id='PageCafeTagMenu'></div>"); fu_knz("https://"+s_hostname+"/get_cafe_info?query="+alias+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("PageCafeHeader"); var specialboxes=""; if (response["response_data"]["you_banned"]==true){ fu_ygh("Sorry you are not allowed to view this café"); fu_euy("/");} if (su_id!=null){ if (response["response_data"]["you_member"]==false){ if (response["response_data"]["you_request"]==false){ if (response["response_data"]["mode"]=="private"){ var member_control="<a href=\"javascript:fu_hkf('"+alias+"');\"><div class='button'>+&ensp;Request To Join</div></a>";}else{ var member_control="<a href=\"javascript:fu_hkf('"+alias+"');\"><div class='button'>+&ensp;Join</div></a>";}}else{ var member_control="";}}else{ var member_control="<a href=\"javascript:fu_mcb('"+alias+"');\"><div class='button'>-&ensp;Leave</div></a>";}}else{ var member_control="";} if (su_alias!=response["response_data"]["alias"]){ if (su_id!=null){ if (response["response_data"]["you_member"]==true){ if (response["response_data"]["you_request"]==false){ if (response["response_data"]["you_subscribed"]==false){ specialboxes=specialboxes+"<div onclick=\"javascript:fu_kth('"+alias+"');\" class='specialbox'>"+fu_slu("send-check")+" Subscribe</div>";}else{ specialboxes=specialboxes+"<div onclick=\"javascript:fu_dqq('"+alias+"');\" class='specialbox'>"+fu_slu("send-slash")+" Unsubscribe</div>";}} }} }
specialboxes=specialboxes+"<div class='specialbox' onclick=\"javascript:fu_skd('"+alias+"');\">"+fu_ctl("📋")+" <trans>RSS</trans></div>"; var settings=""; if (response["response_data"]["you_admin"]){ if (response["response_data"]["you_admin"]==true){ settings="<a href=\"javascript:fu_euy('/settings/"+response["response_data"]["id"]+"/members');\"><div class=\"tab\">"+fu_ctl("🙋🏽")+"&ensp;Members</div></a><a href=\"javascript:fu_euy('/settings/"+response["response_data"]["id"]+"');\"><div class=\"tab\">"+fu_ctl("⚙️")+"&ensp;Edit Café</div></a>";}}
fu_pcc(""+response["response_data"]["name"]+" (!"+response["response_data"]["alias"]+")"); fu_ccz(response["response_data"]["bio"]); fu_zmx(response["response_data"]["avatar"]); var staff=""; if (su_admin=="1" || su_moderator=="1"){ staff="<a href=\"https://admin.hey.cafe/cafe?id="+alias+"\"><div class=\"tab important alt3\">Inspect</div></a>";} if (response["response_data"]["you_member"]==false){ staff=""+staff+"<a href=\"javascript:fu_ogi('"+response["response_data"]["id"]+"');\"><div class=\"tab important alt1\">Report</div></a>";} if (specialboxes!=""){ specialboxes="<div style='padding-top:10px;'>"+specialboxes+"</div>";} var bioextras=""; if (response["response_data"]["member_feed"]=="0"){ bioextras=fu_ctl('<div class="extra">⚠️ This Café has member feeds turned off, this means that no conversations will show on your profile or on the main feed.</div>');} if (response["response_data"]["you_member"]==false){ if (response["response_data"]["you_request"]==true){ var bioextras=""+bioextras+"<div class=\"extra\"><strong>Your member request is pending</strong></div>";}}
fu_qak("PageCafeHeader","<div class='aspectcase thirtybyeight'><div class='cover optimizer_bg content' source='"+response["response_data"]["header"]+"'>"+staff+""+settings+"</div></div><a href=\"javascript:fu_lwj('"+response["response_data"]["avatar"]+"','image',true,'"+fu_qti("Café image for "+response["response_data"]["name"]+"")+"');\"><img source='"+response["response_data"]["avatar"]+"' class='optimizer_img avatar main' alt='Café image for "+response["response_data"]["name"]+"'></a><h1>"+fu_ctl(response["response_data"]["name"])+"</h1><h2>!"+response["response_data"]["alias"]+"</h2>"+member_control+"<div class='minibubble'>"+fu_ctl(fu_fud(fu_yaa(response["response_data"]["bio"],true)))+""+bioextras+""+specialboxes+"</div>"); fu_qaf(); if (response["response_data"]["you_member"]==false){ if (response["response_data"]["mode"]=="private"){ if (response["response_data"]["you_request"]==false){ fu_qak("PageCafeMenu","<bubble class='alt1'>This is a private café and you will need make a request to join. You will need to wait for a moderator to approve the request.</bubble>");}}else{ fu_qak("PageCafeMenu","<bubble class='alt1'>This is a public café and will cost nothing to join. Even public cafés are moderated so remember to post content that is appropriate to the this community.</bubble>");}}
fu_oen("PageCafeMenu"); fu_qak("PageCafeMenu","<a href='/!"+alias+"'><div class='tab'>Conversations</div></a>"); if (response["response_data"]["about"]!=false){ fu_qak("PageCafeMenu","<a href='/!"+alias+"/about'><div class='tab'>About</div></a>");}
fu_qak("PageCafeMenu","<a href='/!"+alias+"/pinned'><div class='tab'>Pins</div></a>"); fu_qak("PageCafeMenu","<a href='/!"+alias+"/members'><div class='tab'>Members</div></a>"); fu_qak("PageCafeMenu","<a href='/!"+alias+"/admins'><div class='tab'>Admins</div></a>"); fu_qak("PageCafeMenu","<a href='/!"+alias+"/moderators'><div class='tab'>Moderators</div></a>"); if (page==null || page=="tag" || page=="pinned"){ if (response["response_data"]["tags"]!=false){ fu_oen("PageCafeTagMenu"); fu_qak("PageCafeTagMenu","<div class='horizontalscroll' id='PageCafeTagMenu_contents'></div>"); fu_lgl(response["response_data"]["tags"], function(select){ fu_qak("PageCafeTagMenu_contents","<a href='/!"+alias+"/tag/"+response["response_data"]["tags"][""+select+""]["id"]+"'><div class='tab'>"+fu_ctl(response["response_data"]["tags"][""+select+""]["emoji"])+" "+fu_ctl(response["response_data"]["tags"][""+select+""]["name"])+"</div></a>");});}} if (page==null){ fu_qak("container_content","<h2>Conversations</h2>"); if (response["response_data"]["you_member"]==true){ fu_qak("container_content","<div></div>"); fu_qak("container_content","<bubble id='inline_convo_genrate_case' class='conversation'></bubble>"); fu_eou("inline_convo_genrate_case",response["response_data"]["id"]); fu_qak("container_content","<div style='margin-top:20px;'></div>");} if (response["response_data"]["you_member"]==false && response["response_data"]["public_view"]=="0"){ fu_qak("container_content","<bubble class='alt1'>We can only show conversations to members for this café.</bubble>");}else{ fu_qak("container_content","<div id='PageCafeConvoMainPin_"+alias+"'></div>"); fu_qak("container_content","<div id='PageCafeConvoGenerateCase_"+alias+"'></div>"); fu_qak("container_content","<div id='PageCafeConvo_"+alias+"'><div class='loading'></div></div>"); fu_ldm(0,alias,"false","false"); fu_knz("https://"+s_hostname+"/get_cafe_conversations?query="+alias+"&count=1&pinned=true",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["conversations"]!=false){ fu_lgl(response["response_data"]["conversations"], function(id){ fu_clo(response["response_data"]["conversations"][""+id+""],"PageCafeConvoMainPin_"+alias+"");});}} });}} if (page=="pinned"){ fu_qak("container_content","<h2>Pins</h2>"); if (response["response_data"]["you_member"]==false && response["response_data"]["public_view"]=="0"){ fu_qak("container_content","<bubble class='alt1'>We can only show conversations to members for this café.</bubble>");}else{ fu_qak("container_content","<div id='PageCafeConvoGenerateCase_"+alias+"'></div>"); fu_qak("container_content","<div id='PageCafeConvo_"+alias+"'><div class='loading'></div></div>"); fu_ldm(0,alias,"true","false");}} if (page=="tag"){ if (response["response_data"]["tags"]!=false){ if (response["response_data"]["tags"][""+subpage+""]!=undefined){ fu_qak("container_content","<h2>"+fu_ctl(response["response_data"]["tags"][""+subpage+""]["emoji"])+" "+fu_ctl(response["response_data"]["tags"][""+subpage+""]["name"])+"</h2>"); if (response["response_data"]["you_member"]==false && response["response_data"]["public_view"]=="0"){ fu_qak("container_content","<bubble class='alt1'>We can only show conversations to members for this café.</bubble>");}else{ fu_qak("container_content","<div id='PageCafeConvoGenerateCase_"+alias+"'></div>"); fu_qak("container_content","<div id='PageCafeConvo_"+alias+"'><div class='loading'></div></div>"); fu_ldm(0,alias,"false",subpage);}}else{ fu_euy("/e/404");}}else{ fu_euy("/e/404");}} if (page=="about"){ fu_qak("container_content","<h2>About</h2><div id='PageCafeAbout'><div class='loading'></div></div>"); fu_knz("https://"+s_hostname+"/get_cafe_info?query="+alias+"",function(result){ var response = fu_leh(result); fu_oen("PageCafeAbout"); if (response["system_api_error"]==false){ if (response["response_data"]["about"]==false){ var contsabout="No about page content set.";}else{ var contsabout=response["response_data"]["about"]; contsabout=fu_hww(contsabout); contsabout=fu_maf(contsabout); contsabout=fu_nns(contsabout); contsabout=fu_ctl(contsabout); contsabout=fu_ltt(contsabout);}
fu_qak("PageCafeAbout","<bubble class='conversation' style='padding-top:0px;padding-bottom:0px;'><div class='content'>"+contsabout+"</div></bubble>");}});} if (page=="members"){ fu_qak("container_content","<div id='PageCafeMembers'><div class='loading'></div></div>"); fu_knz("https://"+s_hostname+"/get_cafe_members?query="+alias+"&status=active&count=200",function(result){ var responmem = fu_leh(result); if (responmem["system_api_error"]==false){ fu_oen("PageCafeMembers"); fu_qak("PageCafeMembers","<h2>Members</h2>"); if (responmem["response_data"]["members"]!=false){ fu_lgl(responmem["response_data"]["members"], function(id){ fu_hnn(responmem["response_data"]["members"][""+id+""],"PageCafeMembers","halfsize");});}else{ fu_qak("container_content","<bubble class='alt1'>This café has no members.</bubble>");}} });} if (page=="admins"){ fu_qak("container_content","<div id='PageCafeMembers'><div class='loading'></div></div>"); fu_knz("https://"+s_hostname+"/get_cafe_members?query="+alias+"&type=admin&status=active&count=200",function(result){ var responmem = fu_leh(result); if (responmem["system_api_error"]==false){ fu_oen("PageCafeMembers"); fu_qak("PageCafeMembers","<h2>Admins</h2>"); if (responmem["response_data"]["members"]!=false){ fu_lgl(responmem["response_data"]["members"], function(id){ fu_hnn(responmem["response_data"]["members"][""+id+""],"PageCafeMembers","halfsize");});}else{ fu_qak("container_content","<bubble class='alt1'>This café has no admins... That can't happen, how did you do that?</bubble>");}} });} if (page=="moderators"){ fu_qak("container_content","<div id='PageCafeMembers'><div class='loading'></div></div>"); fu_knz("https://"+s_hostname+"/get_cafe_members?query="+alias+"&type=moderator&status=active&count=200",function(result){ var responmem = fu_leh(result); if (responmem["system_api_error"]==false){ fu_oen("PageCafeMembers"); fu_qak("PageCafeMembers","<h2>Moderators</h2>"); if (responmem["response_data"]["members"]!=false){ fu_lgl(responmem["response_data"]["members"], function(id){ fu_hnn(responmem["response_data"]["members"][""+id+""],"PageCafeMembers","halfsize");});}else{ fu_qak("container_content","<bubble class='alt1'>This café has no moderators.</bubble>");}} });}}else{ if (response["system_api_error"]=="notfound"){ fu_vqw();}else{ fu_rfy("Network error");}} },false,true);}else{ fu_vqw();}} function fu_vqw(){ fu_oen("container_content"); fu_qaf(); if (su_id!=null){ var alias=false; var arr = sp.split('/'); if (arr!=null){ if (arr[1]!=undefined){ alias=arr[1].replace("@", "");}}
fu_pcc("No "+alias+" café"); fu_qak("container_content","<h1>No "+alias+" café</h1>"); fu_qak("container_content","<a href=\"javascript:fu_czw('"+alias+"');\"><div class='tab' style='margin-left:0px;'>Create new café</div></a>"); fu_qak("container_content","<div style='margin-top:20px;'></div>"); fu_qak("container_content","<bubble>This is your chance to make the café for "+alias+"! Cafés are one of the main ways to find users with similar interests, and members can post directly into the café. Cafés can also be private if that is a better fit for it's use, and can be moderated by the creator and can have staff.</bubble>");}else{ fu_euy("/e/404");}} function fu_hkf(alias){ var postdata={}; postdata["cafe"]=alias; postdata=fu_mmy(postdata); fu_uqy(); fu_hhf("https://"+s_hostname+"/post_cafe_join",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]=="wait"){ fu_ygh("The request to join the café !"+alias+" has been made"); fu_qqc();}else{ fu_ygh("You have joined the café !"+alias+""); fu_qqc();}}else{ if (response["system_api_error"]=="notfound"){ fu_ygh("We can't find that café");}}
fu_qaf();});} function fu_mcb(alias){ var postdata={}; postdata["cafe"]=alias; postdata=fu_mmy(postdata); fu_uqy(); fu_hhf("https://"+s_hostname+"/post_cafe_leave",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_ygh("You have left the café !"+alias+""); fu_qqc();}else{ if (response["system_api_error"]=="notfound"){ fu_ygh("We can't find that café");}}
fu_qaf();});} function fu_ldm(offset,alias,pinned,tagged){ fu_oen("PageCafeConvo_"+alias+""); fu_qak("PageCafeConvo_"+alias+"","<div class='loading'></div>"); fu_qak("PageCafeConvoGenerateCase_"+alias+"","<div id='PageCafeConvoGenerate_"+alias+"_"+offset+"'></div>"); var pinnedlink=""; if (pinned=="true"){ pinnedlink="&pinned=true";}else{ pinnedlink="&pinned=false";} var taggedlink=""; if (tagged!="false"){ taggedlink="&tag="+tagged+"";}
fu_knz("https://"+s_hostname+"/get_cafe_conversations?query="+alias+"&count=40&start="+offset+""+pinnedlink+""+taggedlink+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["conversations"]!=false){ fu_lgl(response["response_data"]["conversations"], function(id){ fu_clo(response["response_data"]["conversations"][""+id+""],"PageCafeConvoGenerate_"+alias+"_"+offset+"");}); setTimeout(function(){ fu_oen("PageCafeConvo_"+alias+""); fu_qak("PageCafeConvo_"+alias+"","<action type='inview_loadmore_pagecafe' offset='"+(parseInt(offset)+40)+"' alias='"+alias+"' pinned='"+pinned+"' tagged='"+tagged+"'></action>");}, 400);}else{ fu_oen("PageCafeConvo_"+alias+""); if (offset==0){ fu_qak("PageCafeConvo_"+alias+"","<bubble class='alt1'>Sorry we can't find any conversations.</bubble>");}} }});} function fu_ogi(alias){ fu_uti(); var options=""; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_gvu('cafe','"+alias+"','spam');\"><strong style='display: inline-block;margin-bottom: 10px;'>Spam</strong><BR>Anything that can be seen as spam.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_gvu('cafe','"+alias+"','abuse');\"><strong style='display: inline-block;margin-bottom: 10px;'>Abuse</strong><BR>Content that may be harmful to others.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_gvu('cafe','"+alias+"','impersonation');\"><strong style='display: inline-block;margin-bottom: 10px;'>Impersonation</strong><BR>If trying to pass or act like someone else.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_gvu('cafe','"+alias+"','other');\"><strong style='display: inline-block;margin-bottom: 10px;'>Other</strong><BR>Anything that does not fall under the other options.</div>"; fu_qak("container_modl","<bubble class='alt1'>You can report a café by using the actions below. Pick the option that makes the most sense so that the correct person gets notified of this report.</bubble>"); fu_qak("container_modl","<bubble>"+options+"</bubble>");} function fu_kth(alias){ var postdata={}; postdata["cafe"]=alias; postdata=fu_mmy(postdata); fu_uqy(); fu_hhf("https://"+s_hostname+"/post_cafe_subscribe",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_ygh("You are now subscribed to !"+alias+""); fu_qqc();}else{ if (response["system_api_error"]=="notfound"){ fu_ygh("We can't find that café");} if (response["system_api_error"]=="notmember"){ fu_ygh("You are not a member of the café !"+alias+"");}}
fu_qaf();});} function fu_dqq(alias){ var postdata={}; postdata["cafe"]=alias; postdata=fu_mmy(postdata); fu_uqy(); fu_hhf("https://"+s_hostname+"/post_cafe_unsubscribe",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_ygh("You are now not subscribed to !"+alias+""); fu_qqc();}else{ if (response["system_api_error"]=="notfound"){ fu_ygh("We can't find that café");}}
fu_qaf();});} function fu_skd(alias){ fu_uti(); fu_qak("container_modl","<h1><trans>RSS Feed</trans></h1><bubble><trans>You can use the RSS feed in any RSS reader or in tools like IFTTT to auto share to other services when new conversations are posted. You can click the link below to copy to clipbard.</trans><pre style=\"white-space: pre-wrap;white-space: -moz-pre-wrap;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;margin-bottom: 0px;\" onclick=\"fu_nib('CopyContentClickURL');\"><code id='CopyContentClickURL'>https://endpoint.hey.cafe/rss/cafe?query="+alias+"</code></pre></bubble>");}function fu_whs(){ if (fu_qgu()==true){ fu_uqy(); fu_crv("full"); fu_pcc("Cafés"); fu_qak("container_content","<a href='javascript:fu_czw();'><div class='tab' style='float:right;margin-left:0px;'>Create Café</div></a>",true); fu_qak("container_content","<a href='/explore/cafes'><div class='tab' style='float:right;margin-left:0px;'>Find</div></a>",true); fu_qak("container_content","<h1>Cafés</h1>",true); fu_qak("container_content","<div class='horizontalscroll' style='margin-bottom:20px;' id='MenuFeed'></div>"); fu_qak("MenuFeed","<a href='/feed'><div class='tab'>Conversations</div></a>",true); fu_qak("MenuFeed","<a href='/cafes'><div class='tab current'>Cafés</div></a>",true); fu_qak("MenuFeed","<a href='/tags'><div class='tab'>Discussions</div></a>",true); fu_qak("container_content","<div></div>"); fu_qak("container_content","<div style='margin-top:20px;'></div>"); fu_qak("container_content","<div id='PageCafesConversationsGenerateCase'></div>"); fu_qak("container_content","<div id='PageCafesBottomLoader'></div>"); fu_emq(0); fu_qaf();}} function fu_emq(offset){ fu_oen("PageCafesBottomLoader"); fu_qak("PageCafesBottomLoader","<div class='loading'></div>"); fu_knz("https://"+s_hostname+"/get_feed_conversations?count=40&rule=cafe&start="+offset+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["conversations"]!=false){ var firstcheckrender=true; if (aa('conversations_loaded')==undefined){ var render_frame_id=fu_sjw(20); fu_qak("PageCafesConversationsGenerateCase","<div id='conversations_loaded'></div><div id='conversations_render_"+render_frame_id+"'></div>");}else{ var render_frame_id=fu_sjw(20); if (offset==0){ fu_qpc("PageCafesConversationsGenerateCase","<div id='conversations_render_"+render_frame_id+"'></div>");}else{ fu_qak("PageCafesConversationsGenerateCase","<div id='conversations_render_"+render_frame_id+"'></div>");}}
fu_lgl(response["response_data"]["conversations"], function(id){ if (offset==0){ if (firstcheckrender==true){ firstcheckrender=false; if (aa('checkup_item_canview')!=undefined){ aa('checkup_item_canview').remove();}
fu_qpc("PageCafesConversationsGenerateCase","<div id='checkup_item_canview'></div><action type=\"inview_item_checkup\" item_type=\"conversations\" item_last=\""+id+"\" item_resource=\"cafes\" item_resource_sub=\"false\" item_function=\"fu_emq('"+offset+"');\"></action>");}}
fu_clo(response["response_data"]["conversations"][""+id+""],"conversations_render_"+render_frame_id+"");}); setTimeout(function(){ fu_oen("PageCafesBottomLoader"); fu_qak("PageCafesBottomLoader","<action type='inview_loadmore_pagecafes' offset='"+(parseInt(offset)+40)+"'></action>");}, 400);}else{ fu_oen("PageCafesBottomLoader"); if (offset==0){ fu_qak("PageCafesBottomLoader","<bubble class='alt1'>Sorry we can't find any café conversations to share with you.</bubble>",true);}} }else{ fu_rfy("Not able to load");}});} function fu_czw(alias){ fu_uti(); if (alias==undefined){ alias="";}
fu_qak("container_modl","<h1>Create café</h1>"); fu_qak("container_modl",'<bubble>Cafés can private or public, and once your new café is ready it will be private by default. You can change any details at any time.<BR><BR><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="name" size="50" maxlength="50" placeholder="Name"><BR><input type="text" class="input" name="alias" size="50" maxlength="50" placeholder="Alias" value="'+alias+'"><BR><BR><input type="submit" name="submit" onclick="fu_mmh(this.form); return false;" value="Create"></div></form></bubble>');} function fu_mmh(form){ fu_uqy(); fu_hbj(); var data=fu_fhg(form); var postdata={}; postdata["alias"]=data["alias"]; postdata["name"]=data["name"]; postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_cafe_create",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_qkr("Your café has been created! It's private by default so you will need to make public or invite only before anyone can see it."); fu_euy("/!"+data["alias"]);}else{ fu_qkr(response["system_api_error"]);}
fu_qaf();});} function fu_gmc(){ fu_uqy(); fu_crv("full"); var id=null; var comment=null; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ id=arr[2];} if (id.includes(":")){ var comm_arr = id.split(':'); if (comm_arr!=null){ id=comm_arr[0]; if (comm_arr[1]!=undefined){ comment=comm_arr[1];}} }} if (id!=null){ fu_qak("container_content","<h1>Conversation</h1>"); fu_qak("container_content","<div id='PageConversationCase'><div class='loading'></div></div>"); fu_knz("https://"+s_hostname+"/get_conversation_info?query="+id+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("PageConversationCase"); var title=fu_xnf(response["response_data"]["contents"]); var description=fu_kwg(response["response_data"]["contents"]); if (title==false){ if (description==false){ var text=fu_wwb(Array.from(response["response_data"]["contents"]).slice(0, 70).join('')); fu_pcc(""+response["response_data"]["account"]["name"]+": "+text+"");}else{ fu_pcc(""+response["response_data"]["account"]["name"]+": "+description+"");}}else{ fu_pcc(""+response["response_data"]["account"]["name"]+": "+title+"");} if (description==false){ fu_ccz(response["response_data"]["contents"]);}else{ fu_ccz(description);}
fu_zmx(response["response_data"]["account"]["avatar"]); if (comment==null){ fu_pmd("/conversation/"+response["response_data"]["id"]+"",true);}else{ fu_pmd("/conversation/"+response["response_data"]["id"]+":"+comment+"",true);} var urlspace=fu_qix(response["response_data"]["contents"]); if (urlspace!=false){ if (comment==null){ fu_pmd("/conversation/"+response["response_data"]["id"]+"/"+urlspace+"",true);}else{ fu_pmd("/conversation/"+response["response_data"]["id"]+":"+comment+"/"+urlspace+"",true);}} var imagefound=false; if (response["response_data"]["attachments"]!=false){ fu_lgl(response["response_data"]["attachments"], function(id){ if (imagefound==false){ if (response["response_data"]["attachments"][id]["type"]=="image"){ fu_zmx(response["response_data"]["attachments"][id]["file"]);}} });} if (su_id==null){ fu_qak("PageConversationCase","<div style='margin-bottom:15px;'><bubble class=\"alt1\">"+fu_ctl('👋')+" Hello! You can <a tabindex='0' href=\"javascript:s_loginrestore='/conversation/"+response["response_data"]["id"]+"'; fu_euy('/login');\">login</a> or <a tabindex='0' href=\"javascript:s_loginrestore='/conversation/"+response["response_data"]["id"]+"'; fu_euy('/register');\">join</a> to interact with this conversation.</bubble></div>");} if (response["response_data"]["account"]["id"]==su_id){ fu_qak("PageConversationCase","<div class='horizontalscroll' id='ConversationMenu'></div>"); fu_qak("ConversationMenu","<a href=\"javascript:fu_gnl('"+response["response_data"]["id"]+"');\"><div class='tab'>Attach photo</div></a>"); if (su_pro==true){ fu_qak("ConversationMenu","<a href=\"javascript:fu_mwi('"+response["response_data"]["id"]+"');\"><div class='tab'>Attach file</div></a>"); fu_qak("ConversationMenu","<a href=\"javascript:fu_aky('"+response["response_data"]["id"]+"');\"><div class='tab'>Edit Content</div></a>");}else{ if (s_device!="NativeiOSApp"){ fu_qak("ConversationMenu","<a href=\"javascript:fu_eax(true);\"><div class='tab'>"+fu_ctl("🔒")+" Attach file</div></a>"); fu_qak("ConversationMenu","<a href=\"javascript:fu_eax(true);\"><div class='tab'>"+fu_ctl("🔒")+" Edit Content</div></a>");}}
fu_qak("ConversationMenu","<a href=\"javascript:fu_azm('"+response["response_data"]["id"]+"');\"><div class='tab'>More Options</div></a>"); fu_qak("PageConversationCase","<div style='margin-top:20px;'></div>");}
fu_clo(response["response_data"],"PageConversationCase","full",comment);}else{ if (response["system_api_error"]=="notfound"){ fu_euy("/e/404");}else{ fu_rfy("Network connection failed");}} });}
fu_qaf();}
function fu_zcl(){ fu_crv("simple"); fu_pcc("Debug"); fu_qak("container_content","<h1>Debug & Help</h1>"); fu_qak("container_content","<bubble>The debug menu allows you access to some tools and developer services allowing you to enable advanced features. Everything here is only on this session and will revert if the page is reloaded.</bubble>"); var debug_controls=""; debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:fu_qkr('Test notification, hello how are you?','🔔');\">"+fu_ctl('🔔')+" Show a test notification</div>"; debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:fu_ygh('Test alert, hello how are you?');\">"+fu_ctl('🚨')+" Show a test alert</div>"; if (s_domain=="beta.hey.cafe"){ debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:fu_xuo('ses_s_beta'); fu_ygh('Going to STABLE mode'); window.location.replace('https://hey.cafe/');\">"+fu_ctl('🔥')+" Switch to STABLE app<div style='margin-top: 5px;font-size: 0.8em;'>Are you having bugs? Go to the STABLE version!</div></div>";}else{ debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:fu_scx('ses_s_beta', 'true', 60); fu_ygh('Going to BETA mode'); window.location.replace('https://beta.hey.cafe/');\">"+fu_ctl('😎')+" Switch to BETA app<div style='margin-top: 5px;font-size: 0.8em;'>Warning the BETA version may have bugs!</div></div>";} if (s_debug==false){ debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:s_debug=true; fu_ygh('Debugging turned ON'); fu_euy('/');\">"+fu_ctl('🪵')+" Turn ON debugging<div style='margin-top: 5px;font-size: 0.8em;'>Will send some important into into console for debuging reasons.</div></div>";}else{ debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:s_debug=false; fu_ygh('Debugging turned OFF'); fu_euy('/');\">"+fu_ctl('🔥')+" Turn OFF debugging<div style='margin-top: 5px;font-size: 0.8em;'>Don't like the slowdown with console logging on? Turn it off!</div></div>";} if (s_gestures=="on"){ debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:fu_qex('ses_s_gestures', 'off'); s_gestures='off'; fu_ygh('Gestures turned OFF'); fu_euy('/');\">"+fu_ctl('👎')+" Turn OFF gestures<div style='margin-top: 5px;font-size: 0.8em;'>Are the gestures messing with your device? You can turn them off, this is a debug option as it's stored as a cookie per device only.</div></div>";}else{ debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:fu_kym('ses_s_gestures'); s_gestures='on'; fu_ygh('Gestures turned ON'); fu_euy('/');\">"+fu_ctl('👍')+" Turn ON gestures<div style='margin-top: 5px;font-size: 0.8em;'>Want to have the swipe to go back gesture? Turn them back on!</div></div>";} if (s_lowpowerdevice==false){ debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:s_lowpowerdevice=true; fu_qkr('Low power mode turned on','🔋');\">"+fu_ctl('🔋')+" Low powermode on<div style='margin-top: 5px;font-size: 0.8em;'>Turns off some high render features like our input suggestions.</div></div>";}else{ debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:s_lowpowerdevice=false; fu_qkr('Low power mode turned off','🔋');\">"+fu_ctl('🔋')+" Low powermode off<div style='margin-top: 5px;font-size: 0.8em;'>Turns on some high render features like our input suggestions.</div></div>";}
debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:fu_ggj(); fu_euy('/logout'); fu_qkr('All cookies have been removed, might need to refresh','🍪');\">"+fu_ctl('🍪')+" Clear all cookies<div style='margin-top: 5px;font-size: 0.8em;'>Will require a reload and will log out but should clear any cookie related problems.</div></div>"; debug_controls=debug_controls+"<div class='minibubble' onclick=\"javascript:fu_zzf(); fu_qkr('Removing workers...','🤖');\">"+fu_ctl('🤖')+" Clear all workers<div style='margin-top: 5px;font-size: 0.8em;'>This will uninstall the service worker.</div></div>"; fu_qak("container_content","<bubble style='margin-top:50px;'><h2 style='margin-top:0px;'>Controls</h2>"+debug_controls+"</div>"); var debug_data=""; debug_data=fu_efe(debug_data,"Main -> Domain",s_domain); debug_data=fu_efe(debug_data,"Main -> Endpoint",s_hostname); debug_data=fu_efe(debug_data,"Main -> Timestamp",s_timestamp); debug_data=fu_efe(debug_data,"Main -> Referral",s_referral); debug_data=fu_efe(debug_data,"Main -> Login Restore",s_loginrestore); debug_data=fu_efe(debug_data,"Main -> Login Message",s_loginmessage); debug_data=fu_efe(debug_data,"Main -> Debug",s_debug); debug_data=fu_efe(debug_data,"Main -> Auth Session",s_authsession); debug_data=fu_efe(debug_data,"Main -> iFrame Source",s_iframesource); debug_data=fu_efe(debug_data,"Main -> PWA",s_pwa); debug_data=fu_efe(debug_data,"Main -> PWA Can",s_pwa_can); debug_data=fu_efe(debug_data,"Main -> Embed",s_embed); debug_data=fu_efe(debug_data,"Main -> Mode",s_mode); debug_data=fu_efe(debug_data,"Main -> Version",s_version); debug_data=fu_efe(debug_data,"Browser -> Width",s_width); debug_data=fu_efe(debug_data,"Browser -> Page",sp); debug_data=fu_efe(debug_data,"Browser -> Low Power",s_lowpowerdevice); debug_data=fu_efe(debug_data,"User -> Session",su_session); debug_data=fu_efe(debug_data,"User -> Alias",su_alias); debug_data=fu_efe(debug_data,"User -> ID",su_id); debug_data=fu_efe(debug_data,"User -> Name",su_name); debug_data=fu_efe(debug_data,"User -> Language",su_language); debug_data=fu_efe(debug_data,"User -> Header",su_header); debug_data=fu_efe(debug_data,"User -> Avatar",su_avatar); debug_data=fu_efe(debug_data,"User -> Pro",su_pro); debug_data=fu_efe(debug_data,"User -> Admin",su_admin); debug_data=fu_efe(debug_data,"User -> Moderator",su_moderator); debug_data=fu_efe(debug_data,"Device -> Useragent",window.navigator.userAgent.toLowerCase()); debug_data=fu_efe(debug_data,"Device -> Type",s_device); fu_qak("container_content","<bubble style='margin-top:50px;'><h2 style='margin-top:0px;'>Debug Data</h2>This data can be sent to staff for help if you are having application problems, or just used for your own use or if you are a curious developer.<div style='margin-top: 15px;font-size: 0.8em;'>"+debug_data+"</div><BR><BR><a href='/'>Exit debug mode</a></div>");} function fu_efe(current,title,data){ var returnstring=current; if (data==true){ data="true";} if (data==false){ data="false";} if (data==null){ data="null";} if (data==undefined){ data="undefined";} returnstring=""+returnstring+"<div>"+title+": "+data+"</div>"; return returnstring;} function fu_zzf(){ navigator.serviceWorker.getRegistrations().then(function(registrations){ for(let registration of registrations){ registration.unregister(); fu_ygh("We removed a worker from your system!");}});}function fu_dbr(){ if (fu_qgu()==true){ fu_uqy(); fu_agt(); if (su_id!=null){ fu_crv("simple"); fu_pcc("Delete Account"); fu_qak("container_header","<h1>Hey.Café</h1>"); fu_qak("container_content",'<bubble class="alt1" style="text-align: center;font-weight: 600;">'+fu_ctl(fu_yaa("We are so sorry to see you go @"+su_alias+", once you delete your account it can NOT be recovered."))+'</bubble>'); fu_qak("container_content",'<bubble><h2 style="text-align:center;margin-top:0px;">Delete Account</h2><form name="delete" onsubmit="return isValidForm()"><div style="text-align:center;padding-top:50px;"><input type="password" class="input" name="password" size="30" autocomplete="current-password" placeholder="Password"><BR><BR><input type="submit" name="submit" onclick="fu_rco(this.form); return false;" value="Delete Account"></div></form><BR><BR><div style="text-align:center;"><a href="/">Oh! I want to keep my account!</a></div></bubble>');}else{ fu_euy("/");}
fu_qaf();}} function fu_rco(form){ fu_uqy(); var data=fu_fhg(form); var postdata={}; postdata["password"]=ae(fu_qti(data["password"])); postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_account_delete",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_ygh("Your account is now gone"); fu_euy("/logout");}else{ fu_ygh("Details did not work, try again");}
fu_qaf();});}function fu_qsc(){ var type=null; var resource=null; var design=null; var tag=null; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ type=arr[2];} if (arr[3]!=undefined){ resource=arr[3];} if (arr[4]!=undefined){ if (arr[4]!=""){ design=arr[4];}} if (arr[5]!=undefined){ if (arr[5]!=""){ tag=arr[5];}} } if (type=="builder"){ fu_mng();}else{ fu_crv("embed"); s_embed=true;} if (design=="screenshot"){ fu_yax("screenshot", "body", "background:"+cpc_background+" !important;"); fu_yax("screenshot", "#container_contentcase", "max-width: 750px;"); fu_yax("screenshot", ".conversation .header .meta", "display:none !important;"); fu_yax("screenshot", ".conversation .header strong", "padding-top: 15px;display: block;font-size: 1.2em;margin-left: 77px;"); fu_yax("screenshot", ".conversation", "margin-top: max(calc(50vh - calc(50% - 30px)),0px);margin-bottom:0px !important;");} if (design=="clean"){ fu_yax("clean", ".conversation:last-of-type", "margin-bottom:0px;"); fu_yax("clean", ".conversation .timestamp", "padding-left: 10px;padding-right: 10px;font-size:0.8em;background:"+cpc_alt_background+";"); fu_yax("clean", ".conversation .tagged", "float: none;display:inline-block;padding: 3px;padding-left: 10px;padding-right: 10px;font-size:0.8em;background:"+cpc_alt_background+";"); fu_yax("clean", ".conversation .header", "display:none;"); fu_yax("clean", ".conversation .cafeheader", "font-size: 0.8em;"); fu_yax("clean", ".conversation .cafeheader .avatar", "margin-top: -3px;"); fu_yax("clean", ".conversation .content", "padding-top: 0px;"); fu_yax("clean", ".conversation .content p:first-of-type", "margin-top: 0px;"); fu_yax("clean", ".conversation .cafe", "display:none;"); fu_yax("clean", ".conversation .footer", "display:none;"); fu_yax("clean", ".conversation .footer_comments", "display:none;"); fu_yax("clean", ".conversation .section_extra", "display:none;"); fu_yax("clean", ".conversation .reactions", "display:none;");} if (type=="cafe_feed_pinned"){ fu_yax("clean", ".conversation .cafeheader", "display:none;");} if (type=="cafe_feed"){ fu_yax("clean", ".conversation .cafeheader", "display:none;");} if (type=="conversation"){ fu_qak("container_content","<div class='loading'></div>"); fu_knz("https://"+s_hostname+"/get_conversation_info?query="+resource+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("container_content"); fu_clo(response["response_data"],"container_content");}else{ fu_oen("container_content"); fu_qak("container_content","<bubble class='alt1'>Sorry we can't find this conversation.</bubble>");}});} if (type=="conversation_full"){ fu_qak("container_content","<div class='loading'></div>"); fu_knz("https://"+s_hostname+"/get_conversation_info?query="+resource+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("container_content"); fu_clo(response["response_data"],"container_content","full");}else{ fu_oen("container_content"); fu_qak("container_content","<bubble class='alt1'>Sorry we can't find this conversation.</bubble>");}});} if (type=="conversation_comments"){ fu_qak("container_content","<div class='loading'></div>"); fu_knz("https://"+s_hostname+"/get_conversation_info?query="+resource+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["count_comments"]!="0"){ fu_oen("container_content"); fu_qak("container_content","<bubble class='conversation' style='padding-top: 0px;padding-bottom: 0px;'><div id='conversation_comments_"+resource+"'></div></bubble>"); fu_qak("conversation_comments_"+resource+"","<action type='inview_load_comments' conversation='"+resource+"' count='"+100+"' comment='false'></action><div class='loading'></div>");}else{ fu_oen("container_content"); fu_qak("container_content","<bubble class='alt1'>Sorry we have no comments yet.</bubble>");}}else{ fu_oen("container_content"); fu_qak("container_content","<bubble class='alt1'>Sorry we can't find this conversation.</bubble>");}});} if (type=="profile"){ fu_qak("container_content","<div class='loading'></div>"); fu_knz("https://"+s_hostname+"/get_account_info?query="+resource+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("container_content"); fu_qak("container_content","<bubble class='profile'><div class='aspectcase twentyonebynine'><div class='cover optimizer_bg content' source='"+response["response_data"]["header"]+"'></div></div><img source='"+response["response_data"]["avatar"]+"' class='optimizer_img avatar main' alt='Profile image for "+response["response_data"]["name"]+"'><h1>"+response["response_data"]["name"]+"</h1><h2>@"+response["response_data"]["alias"]+"</h2><div class='minibubble' style='margin-top:10px;'>"+fu_yaa(response["response_data"]["bio"])+"</div></div></bubble>");}else{ fu_oen("container_content"); fu_qak("container_content","<bubble class='alt1'>Sorry we can't find this profile</bubble>");}});} if (type=="profile_feed"){ fu_qak("container_content","<div class='loading'></div>"); if (tag!=null){ var taggedlink="&tag="+tag+"";}else{ var taggedlink="";}
fu_knz("https://"+s_hostname+"/get_account_conversations?query="+resource+"&count=20&start=0&pinned=false"+taggedlink+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["conversations"]!=false){ fu_oen("container_content"); fu_lgl(response["response_data"]["conversations"], function(id){ if (design=="clean"){ fu_clo(response["response_data"]["conversations"][""+id+""],"container_content","clean");}else{ fu_clo(response["response_data"]["conversations"][""+id+""],"container_content");}});}else{ fu_oen("container_content"); fu_qak("container_content","<bubble class='alt1'>Sorry we can't find any conversations.</bubble>");}} });} if (type=="profile_feed_pinned"){ fu_qak("container_content","<div class='loading'></div>"); if (tag!=null){ var taggedlink="&tag="+tag+"";}else{ var taggedlink="";}
fu_knz("https://"+s_hostname+"/get_account_conversations?query="+resource+"&count=20&start=0&pinned=true"+taggedlink+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["conversations"]!=false){ fu_oen("container_content"); fu_lgl(response["response_data"]["conversations"], function(id){ if (design=="clean"){ fu_clo(response["response_data"]["conversations"][""+id+""],"container_content","clean");}else{ fu_clo(response["response_data"]["conversations"][""+id+""],"container_content");}});}else{ fu_oen("container_content"); fu_qak("container_content","<bubble class='alt1'>Sorry we can't find any conversations.</bubble>");}} });} if (type=="cafe_feed"){ fu_qak("container_content","<div class='loading'></div>"); if (tag!=null){ var taggedlink="&tag="+tag+"";}else{ var taggedlink="";}
fu_knz("https://"+s_hostname+"/get_cafe_conversations?query="+resource+"&count=20&start=0&pinned=false"+taggedlink+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["conversations"]!=false){ fu_oen("container_content"); fu_lgl(response["response_data"]["conversations"], function(id){ if (design=="clean"){ fu_clo(response["response_data"]["conversations"][""+id+""],"container_content","clean");}else{ fu_clo(response["response_data"]["conversations"][""+id+""],"container_content");}});}else{ fu_oen("container_content"); fu_qak("container_content","<bubble class='alt1'>Sorry we can't find any conversations.</bubble>");}} });} if (type=="cafe_feed_pinned"){ fu_qak("container_content","<div class='loading'></div>"); if (tag!=null){ var taggedlink="&tag="+tag+"";}else{ var taggedlink="";}
fu_knz("https://"+s_hostname+"/get_cafe_conversations?query="+resource+"&count=20&start=0&pinned=true"+taggedlink+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["conversations"]!=false){ fu_oen("container_content"); fu_lgl(response["response_data"]["conversations"], function(id){ if (design=="clean"){ fu_clo(response["response_data"]["conversations"][""+id+""],"container_content","clean");}else{ fu_clo(response["response_data"]["conversations"][""+id+""],"container_content");}});}else{ fu_oen("container_content"); fu_qak("container_content","<bubble class='alt1'>Sorry we can't find any conversations.</bubble>");}} });}} function fu_mng(){ fu_crv("full"); fu_pcc("Embed Builder"); fu_qak("container_content","<h1>Embed Builder</h1>",true); fu_qak("container_content","<div class='horizontalscroll' style='margin-bottom:20px;' id='MenuEmbed'></div>"); fu_qak("MenuEmbed","<a href=\"/embed/builder\"><div class='tab'>Info</div></a>",true); fu_qak("MenuEmbed","<a href=\"javascript:fu_mws();\"><div class='tab'>Full Embed</div></a>",true); fu_qak("MenuEmbed","<a href=\"javascript:fu_tuf();\"><div class='tab'>Badge Embed</div></a>",true); fu_qak("container_content","<bubble><trans>The Embed Builder is a simple tool that allows you to generate simple embeds you can place on your own website. We beleve everyone should build a website to show off your own personality. If you need a place to build a site you can do so over on our other service NodeHost for free.</trans><BR><BR><div id='options_embedmaker'></div></bubble>"); fu_qak("options_embedmaker","<div class='minibubble' onclick='javascript:fu_mws();'><h3 style='margin-top: 0px;margin-bottom:10px;'><trans>Full Embed</trans></h3><trans>This embed type is more dynamic and can show content like conversations and profile previews.</trans></div>"); fu_qak("options_embedmaker","<div class='minibubble' onclick='javascript:fu_tuf();'><h3 style='margin-top: 0px;margin-bottom:10px;'><trans>Badge Embed</trans></h3><trans>Badges are small embeds that can be simple like displaying follower count.</trans></div>");} function fu_tuf(){ fu_crv("full"); fu_pcc("Badge Embed"); fu_qak("container_content","<h1>Badge Embed</h1>",true); fu_qak("container_content","<div class='horizontalscroll' style='margin-bottom:20px;' id='MenuEmbed'></div>"); fu_qak("MenuEmbed","<a href=\"/embed/builder\"><div class='tab'>Info</div></a>",true); fu_qak("MenuEmbed","<a href=\"javascript:fu_mws();\"><div class='tab'>Full Embed</div></a>",true); fu_qak("MenuEmbed","<a href=\"javascript:fu_tuf();\"><div class='tab'>Badge Embed</div></a>",true); fu_qak("container_content",'<bubble><div id="builder_options"></div><div id="builder_values"></div><div id="builder_code"></div></bubble>'); fu_qak("container_content","<bubble style='text-align:center;'><div id='embed_preview'>No embed selected...</div></bubble>"); fu_yow(false);} function fu_yow(resourcetype){ fu_oen("builder_options"); fu_oen("builder_values"); fu_oen("builder_code"); if (resourcetype==false){ fu_qak("builder_options","<trans>Select from the options below to generate a preview and see more options.</trans><BR><BR>"); fu_qak("builder_options","<div class='minibubble' onclick=\"javascript:fu_yow('account');\"><h3 style='margin-top: 0px;margin-bottom:10px;'><trans>Account</trans></h3><trans>Badges generated based on a profile like the number of followers.</trans></div>"); fu_qak("builder_options","<div class='minibubble' onclick=\"javascript:fu_yow('cafe');\"><h3 style='margin-top: 0px;margin-bottom:10px;'><trans>Café</trans></h3><trans>Badges generated based on the info around a café like number of members.</trans></div>");} if (resourcetype!=false){ fu_qak("builder_code",'<HR></HR>You can put this on your website to embed this content directly. You can click the box below to copy to clipboard.<pre style="white-space: pre-wrap;white-space: -moz-pre-wrap;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;" onclick="fu_nib(\'CopyContentClickEmbed\');"><code id="CopyContentClickEmbed"></code></pre>'); if (resourcetype=="account"){ var default_resource="hey"; if (su_alias!=null){ default_resource=su_alias;} var types="<select name=\"type\">"; types=""+types+"<option value=\"name\" selected=\"selected\">Name</option>"; types=""+types+"<option value=\"follow\">Follow</option>"; types=""+types+"<option value=\"info_followers\">Info / Followers</option>"; types=""+types+"<option value=\"info_conversations\">Info / Conversations</option>"; types=""+types+"<option value=\"info_following\">Info / Following</option>"; types=""+types+"</select>"; fu_qak("builder_values",'<form name="login" onsubmit="return isValidForm()"><div style="text-align:center;">'+types+'<BR><input type="text" class="input" name="resource" size="50" maxlength="50" placeholder="Resource" value="'+default_resource+'"><BR><BR><input type="submit" name="submit" onclick="fu_zgh(\'account\',this.form); return false;" value="Update"></div></form>'); fu_zgh("account");} if (resourcetype=="cafe"){ var default_resource="cats"; var types="<select name=\"type\">"; types=""+types+"<option value=\"name\" selected=\"selected\">Name</option>"; types=""+types+"<option value=\"join\">Join</option>"; types=""+types+"<option value=\"info_members\">Info / Members</option>"; types=""+types+"</select>"; fu_qak("builder_values",'<form name="login" onsubmit="return isValidForm()"><div style="text-align:center;">'+types+'<BR><input type="text" class="input" name="resource" size="50" maxlength="50" placeholder="Resource" value="'+default_resource+'"><BR><BR><input type="submit" name="submit" onclick="fu_zgh(\'cafe\',this.form); return false;" value="Update"></div></form>'); fu_zgh("cafe");}} } function fu_zgh(resourcetype,form){ var data=false; var code='unknown...'; if (form!=undefined){ data=fu_fhg(form);}else{ if (resourcetype=="account"){ data=[]; data["type"]="name"; data["resource"]="hey"; if (su_alias!=null){ data["resource"]=su_alias;}} if (resourcetype=="cafe"){ data=[]; data["type"]="name"; data["resource"]="cats";}} if (resourcetype=="account"){ var code='&#60;script src="https://hey.cafe/application/external/badge.js" content="'+data["type"]+'" account="'+data["resource"]+'"&#62;&#60;/script&#62;'; fu_oen("CopyContentClickEmbed"); fu_qak("CopyContentClickEmbed",code); var newelem=document.createElement('script'); newelem.src='https://hey.cafe/application/external/badge.js?v='+fu_sjw(10); newelem.setAttribute('content',data["type"]); newelem.setAttribute('account',data["resource"]); fu_oen("embed_preview"); aa("embed_preview").appendChild(newelem);} if (resourcetype=="cafe"){ var code='&#60;script src="https://hey.cafe/application/external/badge.js" content="'+data["type"]+'" cafe="'+data["resource"]+'"&#62;&#60;/script&#62;'; fu_oen("CopyContentClickEmbed"); fu_qak("CopyContentClickEmbed",code); var newelem=document.createElement('script'); newelem.src='https://hey.cafe/application/external/badge.js?v='+fu_sjw(10); newelem.setAttribute('content',data["type"]); newelem.setAttribute('cafe',data["resource"]); fu_oen("embed_preview"); aa("embed_preview").appendChild(newelem);}} function fu_mws(){ fu_crv("full"); fu_pcc("Full Embed"); fu_qak("container_content","<h1>Full Embed</h1>",true); fu_qak("container_content","<div class='horizontalscroll' style='margin-bottom:20px;' id='MenuEmbed'></div>"); fu_qak("MenuEmbed","<a href=\"/embed/builder\"><div class='tab'>Info</div></a>",true); fu_qak("MenuEmbed","<a href=\"javascript:fu_mws();\"><div class='tab'>Full Embed</div></a>",true); fu_qak("MenuEmbed","<a href=\"javascript:fu_tuf();\"><div class='tab'>Badge Embed</div></a>",true); fu_qak("container_content",'<bubble><div id="builder_options"></div><div id="builder_values"></div><div id="builder_code"></div></bubble>'); fu_qak("container_content","<bubble style='text-align:center;'><div id='embed_preview'>No embed selected...</div></bubble>"); fu_bof(false);} function fu_bof(resourcetype){ fu_oen("builder_options"); fu_oen("builder_values"); fu_oen("builder_code"); if (resourcetype==false){ fu_qak("builder_options","<trans>Select from the options below to generate a preview and see more options.</trans><BR><BR>"); fu_qak("builder_options","<div class='minibubble' onclick=\"javascript:fu_bof('account');\"><h3 style='margin-top: 0px;margin-bottom:10px;'><trans>Account</trans></h3><trans>Embeds generated based on a profile like a list of conversations, pins, and more.</trans></div>"); fu_qak("builder_options","<div class='minibubble' onclick=\"javascript:fu_bof('cafe');\"><h3 style='margin-top: 0px;margin-bottom:10px;'><trans>Café</trans></h3><trans>Embeds generated based on a café like a list of conversations, pins, and more.</trans></div>"); fu_qak("builder_options","<div class='minibubble' onclick=\"javascript:fu_bof('conversation');\"><h3 style='margin-top: 0px;margin-bottom:10px;'><trans>Conversation</trans></h3><trans>Embeds generated based on a conversation.</trans></div>");} if (resourcetype!=false){ fu_qak("builder_code",'<HR></HR>You can put this on your website to embed this content directly. You can click the box below to copy to clipboard.<pre style="white-space: pre-wrap;white-space: -moz-pre-wrap;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;" onclick="fu_nib(\'CopyContentClickEmbed\');"><code id="CopyContentClickEmbed"></code></pre>'); if (resourcetype=="account"){ var default_resource="hey"; if (su_alias!=null){ default_resource=su_alias;} var types="<select name=\"type\">"; types=""+types+"<option value=\"profile\" selected=\"selected\">Profile</option>"; types=""+types+"<option value=\"profile_feed\">Feed</option>"; types=""+types+"<option value=\"profile_feed_pinned\">Feed / Pinned</option>"; types=""+types+"<option value=\"profile_feed_clean\">Feed (Clean)</option>"; types=""+types+"<option value=\"profile_feed_pinned_clean\">Feed / Pinned (Clean)</option>"; types=""+types+"</select>"; fu_qak("builder_values",'<form name="login" onsubmit="return isValidForm()"><div style="text-align:center;">'+types+'<BR><input type="text" class="input" name="resource" size="50" maxlength="50" placeholder="Resource" value="'+default_resource+'"><BR><BR><input type="submit" name="submit" onclick="fu_ckv(\'account\',this.form); return false;" value="Update"></div></form>'); fu_ckv("account");} if (resourcetype=="cafe"){ var default_resource="cats"; var types="<select name=\"type\">"; types=""+types+"<option value=\"cafe_feed\" selected=\"selected\">Feed</option>"; types=""+types+"<option value=\"cafe_feed_pinned\">Feed / Pinned</option>"; types=""+types+"<option value=\"cafe_feed_clean\">Feed (clean)</option>"; types=""+types+"<option value=\"cafe_feed_pinned_clean\">Feed / Pinned (clean)</option>"; types=""+types+"</select>"; fu_qak("builder_values",'<form name="login" onsubmit="return isValidForm()"><div style="text-align:center;">'+types+'<BR><input type="text" class="input" name="resource" size="50" maxlength="50" placeholder="Resource" value="'+default_resource+'"><BR><BR><input type="submit" name="submit" onclick="fu_ckv(\'cafe\',this.form); return false;" value="Update"></div></form>'); fu_ckv("cafe");} if (resourcetype=="conversation"){ var default_resource="n0jw4b8mdgwavxzvqiu175zvg"; var types="<select name=\"type\">"; types=""+types+"<option value=\"conversation\" selected=\"selected\">Feed Style</option>"; types=""+types+"<option value=\"conversation_full\">Full Style</option>"; types=""+types+"<option value=\"conversation_clean\">Feed Style (Clean)</option>"; types=""+types+"</select>"; fu_qak("builder_values",'<form name="login" onsubmit="return isValidForm()"><div style="text-align:center;">'+types+'<BR><input type="text" class="input" name="resource" size="50" maxlength="50" placeholder="Resource" value="'+default_resource+'"><BR><BR><input type="submit" name="submit" onclick="fu_ckv(\'conversation\',this.form); return false;" value="Update"></div></form>'); fu_ckv("conversation");}} } function fu_ckv(resourcetype,form){ var data=false; var code='unknown...'; var design=false; if (form!=undefined){ data=fu_fhg(form);}else{ if (resourcetype=="account"){ data=[]; data["type"]="profile"; data["resource"]="hey"; if (su_alias!=null){ data["resource"]=su_alias;}} if (resourcetype=="cafe"){ data=[]; data["type"]="cafe_feed"; data["resource"]="cats";} if (resourcetype=="conversation"){ data=[]; data["type"]="conversation"; data["resource"]="n0jw4b8mdgwavxzvqiu175zvg";}} if (data["type"]=="profile_feed_clean"){ data["type"]="profile_feed"; design="clean";} if (data["type"]=="profile_feed_pinned_clean"){ data["type"]="profile_feed_pinned"; design="clean";} if (data["type"]=="cafe_feed_clean"){ data["type"]="cafe_feed"; design="clean";} if (data["type"]=="cafe_feed_pinned_clean"){ data["type"]="cafe_feed_pinned"; design="clean";} if (data["type"]=="conversation_clean"){ data["type"]="conversation"; design="clean";} if (design!=false){ var codedesign=" design=\""+design+"\"";}else{ var codedesign="";} if (resourcetype=="account"){ var code='&#60;script src="https://hey.cafe/application/external/embed.js" content="'+data["type"]+'" resource="'+data["resource"]+'"'+codedesign+'&#62;&#60;/script&#62;'; fu_oen("CopyContentClickEmbed"); fu_qak("CopyContentClickEmbed",code); var newelem=document.createElement('script'); newelem.src='https://hey.cafe/application/external/embed.js?v='+fu_sjw(10); newelem.setAttribute('content',data["type"]); newelem.setAttribute('resource',data["resource"]); if (design!=false){ newelem.setAttribute('design',design);}
fu_oen("embed_preview"); aa("embed_preview").appendChild(newelem);} if (resourcetype=="cafe"){ var code='&#60;script src="https://hey.cafe/application/external/embed.js" content="'+data["type"]+'" resource="'+data["resource"]+'"'+codedesign+'&#62;&#60;/script&#62;'; fu_oen("CopyContentClickEmbed"); fu_qak("CopyContentClickEmbed",code); var newelem=document.createElement('script'); newelem.src='https://hey.cafe/application/external/embed.js?v='+fu_sjw(10); newelem.setAttribute('content',data["type"]); newelem.setAttribute('resource',data["resource"]); if (design!=false){ newelem.setAttribute('design',design);}
fu_oen("embed_preview"); aa("embed_preview").appendChild(newelem);} if (resourcetype=="conversation"){ var code='&#60;script src="https://hey.cafe/application/external/embed.js" content="'+data["type"]+'" resource="'+data["resource"]+'"'+codedesign+'&#62;&#60;/script&#62;'; fu_oen("CopyContentClickEmbed"); fu_qak("CopyContentClickEmbed",code); var newelem=document.createElement('script'); newelem.src='https://hey.cafe/application/external/embed.js?v='+fu_sjw(10); newelem.setAttribute('content',data["type"]); newelem.setAttribute('resource',data["resource"]); if (design!=false){ newelem.setAttribute('design',design);}
fu_oen("embed_preview"); aa("embed_preview").appendChild(newelem);}}function fu_mpm(){ fu_uqy(); fu_crv("simple"); s_checkups=false; var error_code="000"; var error_title="Fail!"; var error_emoji="⚠️"; var error_message="Sorry but we don't know what the error is that sent you to this page..."; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ error_code=arr[2];}} if (error_code=="400"){ error_title="Bad Request"; error_emoji="👎"; error_message="The request made was bad, this may be due to trying to load the login or request pages via iframes.";} if (error_code=="404"){ error_title="Content not found!"; error_emoji="🙀"; error_message="Sorry but this page or content can not be found at this time.";} if (error_code=="500"){ error_title="Server error"; error_emoji="🔥"; error_message="We had a full system meltdown for some reason and the application is not able to make server reqests.";}
fu_pcc("Oh no! "+error_title+""); fu_qak("container_header","<h1>Oh no! "+error_title+"</h1>"); fu_qak("container_header","<div style='text-align:center;'><a href=\"javascript: fu_euy('/'); fu_pml();\"><div class='tab' style='margin-left:0px;'>"+fu_ctl("👈")+" Back to Hey.Café Application</div></a></div>"); fu_qak("container_content",'<bubble style="text-align:center;">'+error_message+'<BR><div style="font-size:6em;margin-bottom:30px;margin-top:40px;">'+fu_ctl(error_emoji)+'</div><BR><code>'+shl_url+'</code></bubble>'); fu_dba(); fu_qaf();}function fu_tmm(){ fu_uqy(); fu_crv("full"); var page="all"; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ page=arr[2];}}
fu_pcc("Explore"); fu_qak("container_content","<h1>Explore</h1><div id='PageExploreMenuTextSpace'></div>",true); fu_qak("container_content","<div class='horizontalscroll' id='PageExploreMenu'></div>"); if (su_id!=null){ fu_qak("PageExploreMenu","<a href='/explore/accounts'><div class='tab'>Accounts</div></a>",true); fu_qak("PageExploreMenu","<a href='/explore/cafes'><div class='tab'>Cafés</div></a>",true); fu_qak("PageExploreMenu","<a href='/explore/suggested_accounts'><div class='tab'>Suggested Accounts</div></a>",true); fu_qak("PageExploreMenu","<a href='/explore/suggested_cafes'><div class='tab'>Suggested Cafés</div></a>",true); fu_qak("PageExploreMenu","<a href='/explore/conversations'><div class='tab'>Conversations</div></a>",true);}else{ fu_qak("PageExploreMenu","<a href='/explore'><div class='tab'>Recent</div></a>",true); fu_qak("PageExploreMenu","<a href='/explore/accounts'><div class='tab'>Accounts</div></a>",true); fu_qak("PageExploreMenu","<a href='/explore/cafes'><div class='tab'>Cafés</div></a>",true); fu_qak("PageExploreMenu","<a href='/explore/conversations'><div class='tab'>Conversations</div></a>",true);} if (page=="all"){ if (su_id!=null){ fu_euy("/explore/accounts");}else{ fu_qak("container_content","<h2>Recent Active Accounts</h2><div id='PageExploreListAccounts'><div class='loading'></div></div>",true); fu_qak("container_content","<h2>Recent Active Cafés</h2><div id='PageExploreListCafes'><div class='loading'></div></div>",true); fu_qak("container_content","<h2>Recent Conversations</h2><div id='PageExploreConversations'></div><div id='PageExploreConversationsGenerateCase'></div>",true); fu_ara(false,4); fu_xam(false,4); fu_ayv(false,20,0);}} if (page=="accounts"){ fu_qak("container_content","<h2>Accounts</h2><div id='PageExploreListAccounts'><div class='loading'></div></div>",true); fu_ara(false,80);} if (page=="suggested_accounts"){ fu_qak("container_content","<h2>Suggested Accounts</h2><div id='PageExploreListAccounts'><div class='loading'></div></div>",true); fu_ara("suggest",80);} if (page=="cafes"){ fu_qak("container_content","<h2>Cafés</h2><div id='PageExploreListCafes'><div class='loading'></div></div>",true); fu_xam(false,80);} if (page=="suggested_cafes"){ fu_qak("container_content","<h2>Suggested Cafés</h2><div id='PageExploreListCafes'><div class='loading'></div></div>",true); fu_xam("suggest",80);} if (page=="conversations"){ fu_qak("container_content","<h2>Conversations</h2><div id='PageExploreConversations'></div><div id='PageExploreConversationsGenerateCase'></div>",true); if (su_id!=null){ fu_ayv(true,80,0);}else{ fu_ayv(true,40,0);}}
fu_qaf();} function fu_xam(mode,count){ var url="https://"+s_hostname+"/get_explore_cafes?count="+count+""; if (mode=="all"){ url="https://"+s_hostname+"/get_explore_cafes?all=true&count="+count+"";} if (mode=="suggest"){ url="https://"+s_hostname+"/get_explore_cafes?suggest=true&count="+count+"";}
fu_knz(url,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["cafes"]!=false){ fu_oen("PageExploreListCafes"); fu_lgl(response["response_data"]["cafes"], function(id){ fu_bap(response["response_data"]["cafes"][""+id+""],"PageExploreListCafes","halfsize");});}} });} function fu_ara(mode,count){ var url="https://"+s_hostname+"/get_explore_accounts?count="+count+""; if (mode=="all"){ url="https://"+s_hostname+"/get_explore_accounts?all=true&count="+count+"";} if (mode=="suggest"){ url="https://"+s_hostname+"/get_explore_accounts?suggest=true&count="+count+"";}
fu_knz(url,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["accounts"]!=false){ fu_oen("PageExploreListAccounts"); fu_lgl(response["response_data"]["accounts"], function(id){ fu_hnn(response["response_data"]["accounts"][""+id+""],"PageExploreListAccounts","halfsize");});}} });} function fu_ayv(loadmore,count,start){ if (start==0){ fu_qak("PageExploreConversationsGenerateCase","<div id='PageExploreConversationsGenerate_"+start+"'><div class='loading'></div></div>");}else{ fu_oen("PageExploreConversationsGenerate_"+start+""); fu_qak("PageExploreConversationsGenerate_"+start+"","<div class='loading'></div>");}
fu_knz("https://"+s_hostname+"/get_explore_conversations?count="+count+"&start="+start+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("PageExploreConversationsGenerate_"+start+""); if (response["response_data"]["conversations"]!=false){ var bounce=1; fu_lgl(response["response_data"]["conversations"], function(id){ fu_clo(response["response_data"]["conversations"][""+id+""],"PageExploreConversationsGenerate_"+start+"");}); if (loadmore==true){ fu_qak("PageExploreConversationsGenerateCase","<div id='PageExploreConversationsGenerate_"+(start+count)+"'><input type=\"submit\" name=\"submit\" onclick=\"fu_ayv(true,"+count+","+(start+count)+"); return false;\" value=\"Load More\" style=\"margin:0px;padding: 10px;\"></div>");}}else{ fu_oen("PageExploreConversations"); fu_qak("PageExploreConversationsGenerateCase","<bubble class='alt1'>Sorry we can't find any conversations to show you.</bubble>",true);}} });}function fu_wjy(){ if (fu_qgu()==true){ fu_uqy(); fu_crv("full"); fu_pcc("Conversations"); fu_qak("container_content","<a href='javascript:fu_spm(\"feed\",\""+fu_qti("false")+"\");'><div class='tab' style='float:right;margin-left:0px;'>"+fu_slu("view-list")+"</div></a>"); fu_qak("container_content","<h1>Conversations</h1>",true); fu_qak("container_content","<div class='horizontalscroll' style='margin-bottom:20px;' id='MenuFeed'></div>"); fu_qak("MenuFeed","<a href='/feed'><div class='tab current'>Conversations</div></a>",true); fu_qak("MenuFeed","<a href='/cafes'><div class='tab'>Cafés</div></a>",true); fu_qak("MenuFeed","<a href='/tags'><div class='tab'>Discussions</div></a>",true); fu_qak("container_content","<div></div>"); fu_qak("container_content","<bubble id='inline_convo_genrate_case' class='conversation'></bubble>"); fu_eou("inline_convo_genrate_case","false"); if (s_pwa_can==true && s_pwa==false){ fu_qak("container_content","<a href='javascript:fu_brc();'><div class='tab' style='margin-left:0px;'>Install APP</div></a>",true);}
fu_qak("container_content","<div style='margin-top:20px;'></div>"); fu_qak("container_content","<div id='PageFeedConversationsGenerateCase'></div>"); fu_qak("container_content","<div id='PageFeedBottomLoader'></div>"); fu_bau(0); fu_qaf();}} function fu_bau(offset){ fu_oen("PageFeedBottomLoader"); fu_qak("PageFeedBottomLoader","<div class='loading'></div>"); fu_knz("https://"+s_hostname+"/get_feed_conversations?count=40&start="+offset+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["conversations"]!=false){ var firstcheckrender=true; if (aa('conversations_loaded')==undefined){ var render_frame_id=fu_sjw(20); fu_qak("PageFeedConversationsGenerateCase","<div id='conversations_loaded'></div><div id='conversations_render_"+render_frame_id+"'></div>");}else{ var render_frame_id=fu_sjw(20); if (offset==0){ fu_qpc("PageFeedConversationsGenerateCase","<div id='conversations_render_"+render_frame_id+"'></div>");}else{ fu_qak("PageFeedConversationsGenerateCase","<div id='conversations_render_"+render_frame_id+"'></div>");}}
fu_lgl(response["response_data"]["conversations"], function(id){ if (offset==0){ if (firstcheckrender==true){ firstcheckrender=false; if (aa('checkup_item_canview')!=undefined){ aa('checkup_item_canview').remove();}
fu_qpc("PageFeedConversationsGenerateCase","<div id='checkup_item_canview'></div><action type=\"inview_item_checkup\" item_type=\"conversations\" item_last=\""+id+"\" item_resource=\"feed\" item_resource_sub=\"false\" item_function=\"fu_bau('"+offset+"');\"></action>");}}
fu_clo(response["response_data"]["conversations"][""+id+""],"conversations_render_"+render_frame_id+"");}); setTimeout(function(){ fu_oen("PageFeedBottomLoader"); fu_qak("PageFeedBottomLoader","<action type='inview_loadmore_pagefeed' offset='"+(parseInt(offset)+40)+"'></action>");}, 400);}else{ fu_oen("PageFeedBottomLoader"); if (offset==0){ fu_ene();}} }else{ fu_rfy("Not able to load");}});} function fu_ene(){ fu_knz("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("PageFeedConversationsGenerateCase"); if (response["response_data"]["email_verified"]=="0"){ fu_qak("PageFeedConversationsGenerateCase","<bubble onclick='javascript:fu_spm(\"verify\",\""+fu_qti(response["response_data"]["email_verified"])+"\")' class='alt1'><strong>Tap here to verify email address</strong><BR><BR>Verify your email to get started, once your email is verified you will have access to the settings area to finish setting up your account.</bubble>",true);}else{ fu_qak("PageFeedConversationsGenerateCase","<bubble class='alt1'>Sorry we can't find any conversations to share with you.</bubble>",true);} if (response["response_data"]["email_updates"]=="0"){ fu_qak("PageFeedConversationsGenerateCase","<bubble class='alt3' onclick='javascript:fu_zzy(\"email_updates\",[\"on\"])'>"+fu_ctl('📧')+" <span>Email updates are turned off, you can tap here to turn them on. (not required)</span></bubble>",true);}}else{ fu_rfy("Not able to load your user data to generate page...");}});} function fu_brc(){ fu_hbj(); fu_uti(); fu_qak("container_modl","<h1>Install App</h1>",true); fu_qak("container_modl","<bubble>Hey welcome to our site, but did you know you can install on your device (iOS, iPadOS and Android) just in a few taps. This entire site is one minified app. Here is the information on how to install for both iOS/iPadOS and Android</bubble>",true); fu_qak("container_modl","<bubble><h2 style='margin-top:0px;'>iOS / iPadOS</h2><span>Install is simple, in Safari on the bottom or top of the screen you will see a icon of an arrow leaving a box (share). If you tap on share you will find an option called Add to Home Screen. Just tap this and tap Add on the top right of the window and the app will be installed.</span></bubble>",true); fu_qak("container_modl","<bubble><h2 style='margin-top:0px;'>Android</h2><span>In Chrome tap the menu icon in the top right (3 dots) and tap Add to homescreen.</span></bubble>",true);}function fu_ehh(){ fu_crv("full"); var page=""; var subpage=""; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ page=arr[2];} if (arr[3]!=undefined){ subpage=arr[3];}}
fu_pcc("Help"); fu_qak("container_content","<h1>Help</h1><div id='PageHelpMenuTextSpace'></div>",true); if (page==""){ fu_qak("container_content","<bubble id='PageHelpTags'><div class='loading'></div></bubble>");}else{ fu_qak("container_content","<div class='horizontalscroll' id='PageHelpTags'></div>");}
fu_knz("https://"+s_hostname+"/get_cafe_info?query=heycafedocs",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["tags"]!=false){ fu_oen("PageHelpTags"); fu_lgl(response["response_data"]["tags"], function(select){ if (page==""){ fu_qak("PageHelpTags","<div class='minibubble' onclick=\"javascript:fu_euy('/help/tag/"+response["response_data"]["tags"][""+select+""]["id"]+"');\"><div style=\"font-size:2.3em;float:left;margin-right:15px;\">"+fu_ctl(response["response_data"]["tags"][""+select+""]["emoji"])+"</div><h3 style=\"margin-top: 0px;margin-bottom: 5px;font-weight:400;\">"+fu_ctl(response["response_data"]["tags"][""+select+""]["name"])+"</h3><div style=\"font-size:0.8em;font-weight:400;\">...</div></div>");}else{ fu_qak("PageHelpTags","<a href='/help/tag/"+response["response_data"]["tags"][""+select+""]["id"]+"'><div class='tab'>"+fu_ctl(response["response_data"]["tags"][""+select+""]["emoji"])+" "+fu_ctl(response["response_data"]["tags"][""+select+""]["name"])+"</div></a>");}});}} },false,true); if (page=="tag"){ fu_qak("container_content","<div id='PageHelpHeaderTags'><div class='loading'></div></div><bubble id='PageHelpContents'><div class='loading'></div></bubble>"); fu_knz("https://"+s_hostname+"/get_cafe_info?query=heycafedocs",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("PageHelpHeaderTags"); if (response["response_data"]["tags"]!=false){ if (response["response_data"]["tags"][""+subpage+""]!=undefined){ fu_qak("PageHelpHeaderTags","<h2>"+fu_ctl(response["response_data"]["tags"][""+subpage+""]["emoji"])+" "+fu_ctl(response["response_data"]["tags"][""+subpage+""]["name"])+"</h2>");}} }},false,true); fu_knz("https://"+s_hostname+"/get_cafe_conversations?query=heycafedocs&count=40&tag="+subpage+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("PageHelpContents"); if (response["response_data"]["conversations"]!=false){ fu_lgl(response["response_data"]["conversations"], function(id){ var title=fu_xnf(response["response_data"]["conversations"][""+id+""]["contents"]); var description=fu_kwg(response["response_data"]["conversations"][""+id+""]["contents"]); fu_qak("PageHelpContents","<div class='minibubble' onclick=\"javascript:fu_euy('/help/article/"+response["response_data"]["conversations"][""+id+""]["id"]+"');\"><h3 style=\"margin-top: 0px;margin-bottom: 5px;font-weight:400;\">"+fu_ctl(title)+"</h3><div style=\"font-size:0.8em;font-weight:400;\">"+fu_ctl(description)+"</div></div>");});}else{ fu_qak("PageHelpContents","<bubble class='alt1'><trans>Sorry we can't find any articles.</trans></bubble>");}} });} if (page=="article"){ if (subpage!=""){ fu_kly(subpage);}} if (page=="goto"){ if (subpage=="pro"){ fu_euy('/help/article/i31mr2u08iq9ry0');} if (subpage=="rules"){ fu_euy('/help/article/y7ejainr9ooj5gv');} if (subpage=="dmca"){ fu_euy('/help/article/qoxd9jd1fgd7qmw');} if (subpage=="privacy"){ fu_euy('/help/article/st33pz17no5q8j4');} if (subpage=="use"){ fu_euy('/help/article/jw5d1jgd33dtldi');} if (subpage=="terms"){ fu_euy('/help/article/f67qys1j59m1zwo');} if (subpage=="refunds"){ fu_euy('/help/article/t90b7e9dxiwib1n');}} if (page==""){ fu_qak("container_content","<bubble id='PageHelpOther'></bubble>"); fu_qak("PageHelpOther","<div class='minibubble' onclick=\"javascript:fu_euy('/referral');\"><div style=\"font-size:2.3em;float:left;margin-right:15px;\">"+fu_ctl("👋")+"</div><h3 style=\"margin-top: 0px;margin-bottom: 5px;font-weight:400;\"><trans>Invite Friends</trans></h3><div style=\"font-size:0.8em;font-weight:400;\"><trans>Invite and bring your friends over to the better social network.</trans></div></div>"); fu_qak("PageHelpOther","<div class='minibubble' onclick=\"javascript:fu_euy('/home/personal_site');\"><div style=\"font-size:2.3em;float:left;margin-right:15px;\">"+fu_ctl("🧑🏽‍💻")+"</div><h3 style=\"margin-top: 0px;margin-bottom: 5px;font-weight:400;\"><trans>Personal Site</trans></h3><div style=\"font-size:0.8em;font-weight:400;\"><trans>All users get a free linkshare site that uses your bio or about page content.</trans></div></div>"); fu_qak("PageHelpOther","<div class='minibubble' onclick=\"javascript:fu_euy('/embed/builder');\"><div style=\"font-size:2.3em;float:left;margin-right:15px;\">"+fu_ctl("🧱")+"</div><h3 style=\"margin-top: 0px;margin-bottom: 5px;font-weight:400;\"><trans>Embed Builder</trans></h3><div style=\"font-size:0.8em;font-weight:400;\"><trans>If you have a website and want to embed a conversation, profile info, or even just a badge with followers we have that.</trans></div></div>");}} function fu_kly(id){ fu_qak("container_content","<div id='PageConversationCase_"+id+"'><div class='loading'></div></div>"); fu_knz("https://"+s_hostname+"/get_conversation_info?query="+id+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["cafe"]["alias"]=="heycafedocs"){ fu_oen("PageConversationCase_"+id+""); var title=fu_xnf(response["response_data"]["contents"]); var description=fu_kwg(response["response_data"]["contents"]); if (title!=false){ fu_pcc(""+title+" / Help");}else{ title="Missing title"; fu_pcc("Help");} if (description==false){ fu_ccz(response["response_data"]["contents"]);}else{ fu_ccz(description);} var imagefound=false; if (response["response_data"]["attachments"]!=false){ fu_lgl(response["response_data"]["attachments"], function(id){ if (imagefound==false){ if (response["response_data"]["attachments"][id]["type"]=="image"){ fu_zmx(response["response_data"]["attachments"][id]["file"]);}} });} var contents=response["response_data"]["contents"]; contents=fu_hww(contents); contents=fu_maf(contents); contents=fu_nns(contents); contents=fu_ctl(contents); contents=fu_ltt(contents); contents=contents.replace("<p dir=\"auto\"><heading>"+title+"</heading></p>", ""); fu_qak("PageConversationCase_"+id+"","<h2>"+title+"</h2><bubble class='conversation normal' mode='normal' id='conversation_"+response["response_data"]["id"]+"'><div class='content' id='conversation_content_"+response["response_data"]["id"]+"'>"+contents+"</div><div class='attachments' id='conversation_attachments_"+response["response_data"]["id"]+"'></div></bubble>"); if (response["response_data"]["attachments"]!=false){ fu_udu(response["response_data"]["attachments"],"conversation_attachments_"+response["response_data"]["id"]+"",false);}}else{ fu_oen("PageConversationCase_"+id+""); fu_qak("PageConversationCase_"+id+"","<bubble class='alt1'>Error loading page contents</bubble>");}} });}function fu_auy(){ fu_uqy(); if (s_logout_reload==true){ fu_pml();} if (sp.startsWith("/home")){ fu_uyn();}else{ if (su_id==null){ fu_pwd();}else{ fu_euy("/feed");}}
fu_qaf();} function fu_pwd(){ if (s_device!="NativeiOSApp"){ fu_crv("splash"); fu_qak("container_header","<h1 style='font-size: 1.6em;margin-top: 5px;'>Hey.Café</h1>"); if (s_referral!=false){ fu_qak("container_content","<bubble class=\"alt1\" style='padding: 15px;font-weight: 500;text-align: center;margin-bottom:30px;'>Hey it's amazing to see you here, @"+s_referral+" sent you an invite. Join our community and hang out with us.</bubble>",true);}
fu_qak("container_content",'<bubble class="hero_bubble"><h2 class="herotext_large">A better social network</h2><h3 class="herotext_medium">Hey.Café is a new social network designed to be easy to use. When you join you can create new conversations and join communities that we call cafés based on your interests, and it\'s free to use.</h3><a href="/register"><div class="tab important" style="margin-left:0px;font-size: 1.5em;">Join Now '+fu_slu("arrow-right")+'</div></a></bubble>',true); fu_qak("container_content",'<div class="floatbox"><div id="float_content3" class="floatbox_b"></div><div id="float_content4" class="floatbox_a ml"></div></div>'); fu_qak("container_content",'<div class="floatbox"><div id="float_content1" class="floatbox_a mr"></div><div id="float_content2" class="floatbox_b"></div></div>'); fu_qak("container_content",'<div class="floatbox"><div id="float_content5" class="floatbox_d mr"></div><div id="float_content6" class="floatbox_c"></div></div>'); fu_qak("container_content",'<div style="margin-top:40px;margin-bottom:30px;"><h2 style="font-size: 2.5em;margin-bottom: 10px;">More features</h2><h3>We have so many different amazing features that we can\'t share them all in one page.</h3></div>'); fu_qak("container_content",'<bubble><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_ctl("🏡")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">Free personal site</h2>Keep people up to date on you all from one place, and it\'s 100% free. One link to rule them all and we make it easy and fast to keep it updated with all the links to your other networks, media, and anything else.<BR><BR><a href="/home/personal_site"><div class="button">Learn more</div></a></div></bubble>'); fu_qak("float_content1",'<bubble class="subhero_bubble alt6"><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_ctl("☕️")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">Social networking for everyone</h2>Hey.Café is a safe space with rules aginst spam, abuse, and hate against race or sexual identity. You can view our <a href="/help/goto/rules">rules here</a>.</div></bubble>'); fu_qak("float_content2",'<bubble class="subhero_bubble alt2"><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_ctl("🔒")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">No ads</h2>We want everyone to feel safe and in control of your data, and that is why everything has been built from the ground up.<BR><BR>The service contains <strong>no ads</strong> at all. Your data is your data and we don\'t want it, and we don\'t sell it.</div></bubble>'); fu_qak("float_content4",'<bubble class="subhero_bubble alt3"><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_ctl("🌎")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">Communities</h2>Relax and join local groups that we call cafés. We have groups for developers, photographers and just about everything else.<BR><BR>Maybe even you will create a new café to share content with others who share the same interests.</div></bubble>'); fu_qak("float_content3",'<bubble class="subhero_bubble alt4"><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_ctl("😎")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">Funded by cool users we call Pros</h2>That is correct, we are fully user funded, and no you don\'t need to pay anything to use Hey.Café. Users who purchase Pro keep the service ad free for everyone and get a few extra perks.<BR><BR>Some of the Pro perks include larger conversations, larger comments, and more reactions like '+fu_ctl("😎🎉🔥🤯🌹🖖💡🕹🌈🏆")+'.</div></bubble>'); fu_qak("float_content6",'<bubble class="subhero_bubble alt5"><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_ctl("👩🏽‍💻")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">Built for developers</h2>We are still growing and expanding our API but it is 100% free with no limits for anyone to use. View the resources we provide over on the <a href="/help/">help section</a>.<BR><div class="minibubble" style="background: rgba(255,255,255,0.5);border: 0px solid #ffffff;margin-top:15px;"><div style="margin-bottom:5px;"><strong>Sign in with Hey.Café</strong></div>Ability to allow users to login to your service using a Hey.Café account. Learn how to use and setup by visiting <a href="/help/article/f831jy8674jize1">the docs</a>.</div><div class="minibubble" style="background: rgba(255,255,255,0.5);border: 0px solid #ffffff;margin-top:10px;"><div style="margin-bottom:5px;"><strong>Open & public API calls</strong></div>Easily fetch some basic public information about accounts or conversations that can use it to generate custom views or applications. Learn more via <a href="/help/tag/4mqqq4xl3a4ir0t">the docs</a>.</div></div></bubble>'); fu_qak("float_content5",'<bubble class="subhero_bubble alt7"><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_ctl("🔗")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">Embed on your website</h2>You can embed content, profiles and more on your own website with our easy embed system. On any conversation just tap share and you will see an embed code.<BR><BR>You can learn more about the format and the other ways to embed on our <a href="/help/article/wosrhx8c8cpypuw">documentation</a>.<BR><BR>We have a free self hosted blogging system using our API coming soon.</div></bubble>');}else{ fu_peb();}} function fu_uyn(){ if (su_id==null){ fu_crv("splash"); fu_qak("container_header","<h1 style='font-size: 1.6em;margin-top: 5px;'>Hey.Café</h1>");}else{ fu_crv("full");} var page=null; var pagefound=false; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ page=arr[2];}} if (page=="personal_site"){ pagefound=true; fu_pcc("Personal Site"); if (su_id!=null){ fu_qak("container_content",'<h1>Personal Site</h1>');}
fu_qak("container_content",'<bubble class="hero_bubble"><h2 class="herotext_large">Your own little homepage on the internet</h2><h3 class="herotext_medium">All users get free access to a free personal site that you can customize with content like links, videos, images and more all from your Hey.Café profile.</h3></bubble>'); if (su_id==null){ fu_qak("container_content","<div style='text-align:left;margin-bottom: 30px;'><a href=\"javascript: fu_euy('/');\"><div class='tab' style='margin-left:0px;'>"+fu_ctl("👈")+" Learn more about Hey.Café</div></a></div>");}else{ fu_qak("container_content","<bubble class='alt1'><h2 style=\"margin-top:0px;\">Your site is all setup</h2>Here is the link to your personal page you can share <a href='https://"+su_alias+".myhey.cafe'>"+su_alias+".myhey.cafe</a>.<BR><BR>You can manage your page in a few different ways, by default we use your profile bio and website link if you have one, but if you update your about page content we will use that. Your About page content will also show on your profile.<BR><BR><a href='/settings/me/about'><div class='button'>Update my About Page</div></a></bubble>"); fu_qak("container_content","<hr></hr>");} if (su_id==null){ fu_qak("container_content",'<bubble class="subhero_bubble alt0"><div style="font-size: 0.7em;margin: -15px;margin-bottom: 15px;padding: 5px;"><div style="float: left;background: rgb(236,106,94);padding: 5px;border-radius: 100%;margin-top: 7px;margin-left: 5px;"></div><div style="float: left;background: rgb(244,191,79);padding: 5px;border-radius: 100%;margin-top: 7px;margin-left: 5px;"></div><div style="float: left;background: rgb(97,197,84);padding: 5px;border-radius: 100%;margin-top: 7px;margin-left: 5px;"></div><div style="background: rgba(208, 208, 208, 0.5);padding: 5px;border-radius: 8px;display: inline-block;margin-left: 15px;width: calc(100% - 70px);">'+fu_slu("lock-fill")+'&ensp;https://anthony.myhey.cafe</div></div><div class="aspectcase sixteenbynine"><div class="content" style="overflow:hidden;margin: -15px;width: calc(100% + 30px);height: calc(100% + 30px);"><iframe src="https://anthony.myhey.cafe" scrolling="no" style="overflow:hidden;width: calc(100% + 54%);height: calc(100% + 54%);transform: scale(0.65);transform-origin: 0 0;"></iframe></div></div></bubble>');}else{ fu_qak("container_content",'<bubble class="alt0"><div class="aspectcase sixteenbynine"><div class="content" style="overflow:hidden;margin: -15px;width: calc(100% + 30px);height: calc(100% + 30px);"><iframe src="https://'+su_alias+'.myhey.cafe" scrolling="no" style="overflow:hidden;width: calc(100% + 54%);height: calc(100% + 54%);transform: scale(0.65);transform-origin: 0 0;"></iframe></div></div></bubble>'); fu_qak("container_content","<hr></hr>");}
fu_qak("container_content",'<bubble><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_ctl("😎")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">Free to use</h2>Yes it\'s free to use, and you can use it how you like without paying a cent.</div></bubble>'); fu_qak("container_content",'<bubble><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_ctl("🫵")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">More about you</h2>You can put in lots of text and content, so you can easily share a bit about yourself along with links, videos, images and more.</div></bubble>'); fu_qak("container_content",'<bubble><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_ctl("🏡")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">Where to find you</h2>Make it your one link you give people that you can keep updated with all your social media links and other important information.</div></bubble>'); fu_qak("container_content",'<bubble><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_ctl("😌")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">Clean and simple</h2>With a clean and simple design that is both mobile and dark mode ready, you don\'t need to know anything about making websites to use. We generate the way it looks based on your account avatar and banner with a clean and simple look.</div></bubble>'); fu_qak("container_content",'<bubble><div style=\'background:rgba(255,255,255,0.5);float: left;margin-right: 20px;width: 50px;height: 50px;padding: 15px;border-radius: 100%;font-size: 3.1em;overflow: hidden;\'><div style=\'margin-left: -7px;margin-top: -5px;\'>'+fu_ctl("⚡️")+'</div></div><div style="overflow: hidden;"><h2 style="margin-top:0px;">Formatting</h2>With formatting you can create lists, titles, code blocks, drop downs, and even embed a video or image with just a link. You can learn more about our formatting by <a href="/help/article/zfsjvyi0jg7m1gb">tapping here</a>.</div></bubble>'); if (su_id!=null){ fu_qak("container_content","<hr></hr><h2 style='margin-top:40px;'>Share to social</h2>"); var urlcontent="https://"+su_alias+".myhey.cafe"; var conversationcontent="You can find out more about me and what I do by visiting my homepage"; fu_qak("container_content","<bubble class='alt3'>"+conversationcontent+" https://"+su_alias+".myhey.cafe</bubble>"); var buttons=fu_enx(urlcontent,conversationcontent); fu_qak("container_content","<bubble>"+buttons+"</bubble>");}} if (pagefound==false){ fu_euy("/e/404");}}function fu_peb(){ fu_xbz(); fu_uqy(); fu_agt(); fu_crv("simple"); fu_pcc("Login"); fu_qak("container_header","<h1>Hey.Café</h1>"); if (s_loginmessage!=false){ fu_qak("container_content",'<bubble class="alt1" style="text-align: center;font-weight: 600;">'+s_loginmessage+'</bubble>');}
fu_qak("container_content",'<bubble><h2 style="text-align:center;margin-top:0px;">Login</h2><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;padding-top:50px;"><input type="text" class="input" name="username" size="30" maxlength="30" placeholder="Alias / Username" autocomplete="username" value=""><BR><input type="password" class="input" name="password" size="30" autocomplete="current-password" placeholder="Password"><BR><BR><input type="submit" name="submit" onclick="fu_dqp(this.form); return false;" value="Login"></div></form><BR><BR><div style="text-align:center;"><a href="/register">Oh! I need to create an account</a><BR><BR><a href="javascript:fu_xkk();">I forgot my details</a></div></bubble>'); fu_qaf();} function fu_wlv(how,alias,password){ fu_uqy(); var message=""; if (how=="app"){ message="Open your 2FA app and enter the code in the box below and tap login, this code is time limited.";} if (how=="email"){ message="We just sent you an email with a 2FA login code, enter the code in the box below and tap login.";}
fu_crv("simple"); fu_pcc("Login"); fu_qak("container_header","<h1>Hey.Café</h1>"); if (s_loginmessage!=false){ fu_qak("container_content",'<bubble class=\'alt1\'>'+s_loginmessage+'</bubble>');}
fu_qak("container_content",'<bubble class=\'alt0\'>'+message+'</bubble><bubble><h2 style="text-align:center;margin-top:0px;">Login (2FA)</h2><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;padding-top:50px;"><div style="display:none;"><input type="text" class="input" name="username" size="30" maxlength="30" placeholder="Alias / Username" autocomplete="username" value="'+alias+'"><BR><input type="password" class="input" name="password" autocomplete="current-password" size="30" placeholder="Password" value="'+password+'"><BR><BR></div><input type="text" class="input" name="code" size="30" maxlength="30" placeholder="2FA Code" autocomplete="one-time-code"><BR><BR><input type="submit" name="submit" onclick="fu_dqp(this.form); return false;" value="Login"></div></form><BR><BR><div style="text-align:center;"><a href="/register">Oh! I need to create an account</a><BR><BR><a href="javascript:fu_xkk();">I forgot my login</a></div></bubble>'); fu_qaf();} function fu_dqp(form){ fu_uqy(); var data=fu_fhg(form); var postdata={}; postdata["alias"]=data["username"]; postdata["password"]=ae(fu_qti(data["password"])); if (data["code"]!=undefined){ postdata["code"]=data["code"];}
postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_account_login",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ su_id=response["response_data"]["id"]; su_alias=response["response_data"]["alias"]; su_name=response["response_data"]["name"]; su_language=response["response_data"]["language"]; su_session=response["response_data"]["session"]; fu_kym("ses_su_session"); fu_kym("ses_su_alias"); fu_kym("ses_su_id"); fu_kym("ses_su_name"); fu_kym("ses_su_language"); fu_qex("ses_su_session", su_session); fu_qex("ses_su_alias", su_alias); fu_qex("ses_su_id", su_id); fu_qex("ses_su_name", su_name); fu_qex("ses_su_language", su_language); if (fu_mlq("ses_s_sessions")!=""){ var sessionstorage=fu_leh(fu_mlq("ses_s_sessions")); if (sessionstorage[""+su_id+""]==undefined){ sessionstorage[""+su_id+""]={};}
sessionstorage[""+su_id+""]["session"]=su_session; sessionstorage[""+su_id+""]["alias"]=su_alias; sessionstorage[""+su_id+""]["id"]=su_id; sessionstorage[""+su_id+""]["name"]=su_name; sessionstorage[""+su_id+""]["language"]=su_language; fu_kym("ses_s_sessions"); fu_qex("ses_s_sessions", fu_mmy(sessionstorage));}
su_avatar=response["response_data"]["account_avatar"]; su_header=response["response_data"]["account_header"]; su_pro=response["response_data"]["account_pro"]; su_admin=response["response_data"]["account_admin"]; su_moderator=["response_data"]["account_moderator"]; s_app_colour=response["response_data"]["app_colour"]; s_app_stats=response["response_data"]["app_stats"]; s_app_reducemotion=response["response_data"]["app_reducemotion"]; s_app_hidesuggestions=response["response_data"]["app_hidesuggestions"]; s_app_forcedisplay=response["response_data"]["app_forcedisplay"]; s_app_scaledisplay=response["response_data"]["app_scaledisplay"]; fu_ygh("Hey welcome "+response["response_data"]["name"]+"!"); fu_rcg(s_mode); fu_lmn(); sh=[]; if (s_loginrestore==false){ fu_euy("/feed");}else{ fu_euy(s_loginrestore); s_loginrestore=false;}}else{ if (response["system_api_error"]=="failed"){ fu_ygh("Login failed, the details given are not correct");} if (response["system_api_error"]=="notfound"){ fu_ygh("Login failed, the details given are not correct");} if (response["system_api_error"]=="banned"){ fu_ygh("Sorry but this account has been banned for not following the rules");} if (response["system_api_error"]=="2faapp_failed"){ fu_ygh("The app 2FA code was not valid");} if (response["system_api_error"]=="2faemail_failed"){ fu_ygh("The email 2FA code was not valid");} if (response["system_api_error"]=="2faapp_needed"){ fu_wlv("app",data["username"],data["password"]);} if (response["system_api_error"]=="2faemail_needed"){ fu_wlv("email",data["username"],data["password"]);}}
fu_qaf();});} function fu_xkk(){ fu_amz(); fu_uqy(); fu_crv("simple"); fu_pcc("Password Reset"); fu_qak("container_header","<h1>Hey.Café</h1>"); fu_qak("container_content",'<bubble><h2 style="text-align:center;margin-top:0px;">Password Reset</h2>Oh no, did you forget your login? That is alright because we will help you get it reset. Enter in your email and a new password and we will send you a code for any accounts you have if we find any.<BR><BR><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;padding-top:50px;"><input type="text" class="input" name="email" size="30" maxlength="100" placeholder="Email" value=""><BR><input type="password" class="input" name="password" size="30" placeholder="New Password"><BR><BR><input type="submit" name="submit" onclick="fu_cuc(this.form); return false;" value="Send Reset"></div></form><BR><BR><div style="text-align:center;"><a href="/register">Oh! I need to create an account</a><BR><BR><a href="/login">I know my login</a></div></bubble>'); fu_qaf();} function fu_cuc(form){ fu_uqy(); var data=fu_fhg(form); var postdata={}; postdata["email"]=ae(fu_qti(data["email"])); postdata["password"]=ae(fu_qti(data["password"])); postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_account_forgot",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_crv("simple"); fu_pcc("Password Reset"); fu_qak("container_header","<h1>Hey.Café</h1>"); if (s_device!="NativeiOSApp"){ fu_qak("container_header","<div style='text-align:center;'><a href='/'><div class='tab' style='margin-left:0px;'>Home</div></a><a href='/login'><div class='tab' style='margin-left:0px;'>Login</div></a><a href='/register'><div class='tab' style='margin-left:0px;'>Join</div></a></div>");}else{ fu_qak("container_header","<div style='text-align:center;'><a href='/login'><div class='tab' style='margin-left:0px;'>Login</div></a><a href='/register'><div class='tab' style='margin-left:0px;'>Join</div></a></div>");}
fu_qak("container_content",'<bubble><h2 style="text-align:center;margin-top:0px;">Password Reset</h2>Alright we sent you some codes if we found an account with the email address you gave us, check your email and you can enter one of the reset codes in the box below. Keep this page open.<BR><BR><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;padding-top:50px;"><input type="text" class="input" name="code" size="30" maxlength="100" placeholder="Code" value=""><BR><BR><input type="submit" name="submit" onclick="fu_pfb(this.form); return false;" value="Reset"></div></form></div></bubble>');}else{ fu_ygh("Sorry we had a problem with this reset request");}
fu_qaf();});} function fu_pfb(form){ fu_uqy(); var data=fu_fhg(form); var postdata={}; postdata["code"]=data["code"]; postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_account_forgot",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_ygh("Password has been reset, you can now login"); fu_euy("/login"); fu_pml();}else{ fu_ygh("Reset failed, the details given are not correct");}
fu_qaf();});}function fu_ceo(){ fu_xbz(); fu_uqy(); fu_agt(); fu_knz("https://"+s_hostname+"/post_account_logout",function(result){ var response = fu_leh(result); if (fu_mlq("ses_s_sessions")!=""){ sessionstorage=fu_leh(fu_mlq("ses_s_sessions")); sessionstorage[""+su_id+""]=null; fu_qex("ses_s_sessions", fu_mmy(sessionstorage));}
su_session=null; su_alias=null; su_id=null; su_name=null; su_language="en"; su_avatar=null; su_header=null; su_admin=false; su_moderator=false; s_loginrestore=false; s_app_colour="false"; s_app_stats="false"; s_app_reducemotion="false"; s_app_hidesuggestions="false"; s_app_forcedisplay="false"; s_app_scaledisplay="false"; fu_kym("ses_su_session"); fu_kym("ses_su_alias"); fu_kym("ses_su_id"); fu_kym("ses_su_name"); fu_kym("ses_su_language"); s_logout_reload=true; fu_euy("/"); fu_qaf(); if (fu_mlq("ses_s_sessions")!=""){ fu_nby();}});}
function fu_ppc(){ if (fu_qgu()==true){ fu_crv("full"); fu_uqy(); var chat=null; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ chat=arr[2];}} if (chat==null){ fu_pcc("Messages"); fu_qak("container_content","<h1>Messages</h1>",true); fu_qak("container_content","<div id='PageChatsList'></div><div id='PageChatsListMore'></div>"); fu_gsl(0);}else{ fu_jtg(chat);}
fu_qaf();}} function fu_awf(chat,name,account_name,account_alias){ fu_uti(); fu_qak("container_modl","<h1><trans>Join chat</trans></h1><bubble><p>Do you want to join the chat room <strong>"+fu_qdo(name)+"</strong> created by "+fu_ctl(fu_qdo(account_name))+" @"+fu_ctl(fu_qdo(account_alias))+"? We wont show you any content from a chat room unless you accept.</trans></p></bubble>"); fu_qak("container_modl","<bubble onclick=\"javascript:fu_sxw('"+chat+"');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("👍")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'><trans>Accept</trans></h3><trans>Accept and join the chat room.</trans></bubble>"); fu_qak("container_modl","<bubble onclick=\"javascript:fu_dfo('"+chat+"');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("👎")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'><trans>Leave</trans></h3><trans>Leave this chat room.</trans></bubble>");} function fu_gsl(offset){ var newlist=false; if (fu_wiu("PageChatsList")==""){ newlist=true; fu_qak("PageChatsList","<div class='loading'></div>");} var page=15*offset; fu_knz("https://"+s_hostname+"/get_chat_list?query="+su_alias+"&count=15&start="+page+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (newlist==true){ fu_oen("PageChatsList");} if (response["response_data"]["chats"]!=false){ var numberloaded=0; fu_lgl(response["response_data"]["chats"], function(id){ numberloaded=numberloaded+1; fu_jxb(response["response_data"]["chats"][""+id+""],'PageChatsList');}); fu_oen("PageChatsListMore"); if (numberloaded==15){ fu_qak("PageChatsListMore","<div style='text-align:center;'><input type=\"submit\" name=\"loadmore\" onclick=\"fu_gsl("+(offset+1)+")\" value=\"Load More\"></input></div>",true);}}else{ if (newlist==true){ fu_qak("PageChatsList","<bubble class='alt1'>You have no active chats.</bubble>",true);}else{ fu_qak("PageChatsList","<bubble class='alt1'>At the end of the chat list</bubble>",true); fu_oen("PageChatsListMore");}} }});} function fu_jxb(chat,container,invite,bubble){ var status=""; var icon=""; var weight=400; var subtext=""; var clickevent="javascript:fu_euy('/messages/"+chat["id"]+"');"; if (chat["info_emoji"]=="false"){ icon=fu_ctl("😀");}else{ icon=fu_ctl(chat["info_emoji"]);} if (chat["info_status"]=="waiting"){ icon=fu_ctl("👋"); status="<div class=\"tab solidhover\" style=\"float:right;padding:5px;font-size:0.8em;padding-left: 10px;padding-right: 10px;margin-left: 5px;margin-right: 0px;margin-top: 0px;\"><trans>Request</trans></div>"; subtext="Invite to chat room created by "+chat["account"]["name"]+" @"+chat["account"]["alias"]+"."; clickevent="javascript:fu_awf('"+chat["id"]+"','"+fu_qti(chat["info_name"])+"','"+fu_qti(chat["account"]["name"])+"','"+fu_qti(chat["account"]["alias"])+"');"; weight=600;} if (chat["info_status"]=="active"){ if (chat["date_lastseen"]<=chat["date_activity"]){ status="<div class=\"tab solidhover\" style=\"float:right;padding:5px;font-size:0.8em;padding-left: 10px;padding-right: 10px;margin-left: 5px;margin-right: 0px;margin-top: 0px;\"><trans>New Message</trans></div>"; weight=600;}}
fu_lgl(chat["members"], function(id){ if (chat["members"][""+id+""]["info_status"]=="active"){ subtext=""+subtext+"@"+chat["members"][""+id+""]["account_alias"]+" ";}}); if (invite!=undefined){ clickevent="javascript:fu_qlx('"+chat["id"]+"','"+invite+"');";}
fu_qak(container,"<bubble onclick=\""+clickevent+"\">"+status+"<div style='font-size:2.3em;float:left;margin-right:15px;'>"+icon+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;font-weight:"+weight+";'>"+fu_ctl(chat["info_name"])+"</h3><div style='font-size:0.8em;font-weight:"+weight+";'>"+fu_ctl(fu_fud(fu_yaa(subtext,true)))+"</div></bubble>");} function fu_jtg(chat){ fu_knz("https://"+s_hostname+"/get_chat_info?query="+chat+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_pcc(""+response["response_data"]["info_name"]+""); if (response["response_data"]["info_emoji"]=="false"){ icon=fu_ctl("😀");}else{ icon=fu_ctl(response["response_data"]["info_emoji"]);}
fu_qak("container_content","<div id='ChatHeaderArea' style='max-height:200px;'>"); fu_qak("ChatHeaderArea","<a href=\"javascript:fu_tpa('"+chat+"');\"><div class='tab' style='float:right;margin-left:0px;'><trans>Settings</trans></div></a>"); fu_qak("ChatHeaderArea","<h1>"+icon+" "+fu_ctl(response["response_data"]["info_name"])+"</h1>"); if (response["response_data"]["info_description"]!="false"){ fu_qak("ChatHeaderArea","<bubble class='hide_if_active_livearea'>"+fu_ctl(response["response_data"]["info_description"])+"</bubble>");}
fu_qak("container_content","<div id='PageChatHeader'></div><div id='PageChatControls'></div><div id='PageChatMessagesGenerateCase'></div><div id='PageChatMessages'><div class='loading'></div></div>"); fu_qak("PageChatControls",'<div id="PageChatControlsInput"></div>'); fu_rpe(chat); fu_qnu(0,chat);}else{ fu_euy("/messages");}});} function fu_rpe(chat){ fu_oen("PageChatControlsInput"); var editor=''; if (su_pro==true){ var sizemax=s_char_pro;}else{ var sizemax=s_char_reg;}
editor=''+editor+'<bubble class="conversation messageinput noanimation"><form name="messa" onsubmit="return isValidForm()"><div style="text-align:center;">'; editor=''+editor+'<div style=\'overflow: hidden;\'>'; editor=''+editor+'<textarea class="input fullsize" onpaste="javascript:fu_drn(this, event);" onfocusin="javascript:fu_vch(this, false);" beforeinput="javscript:fu_owk(this, event);" oninput="javascript:fu_vch(this, event)" name="content" maxlength="5000" placeholder="Message..." maxsize="'+sizemax+'" entersend="click_me_send"></textarea>'; editor=''+editor+'<div onclick="javascript:fu_smz(\'attach_photo_area_inline\');" class="tab" style="float: right;margin-top:5px;" data-title="Attach Photo">'+fu_slu("images")+'</div>'; editor=''+editor+'<div id="modl_newmessa_submit"><input type="submit" id="click_me_send" name="submit" onclick="javascript:fu_xcm(\''+chat+'\',this.form); return false;" value="Send" style="float: left;width: 110px;padding-top:10px;padding-bottom:10px;"></div>'; editor=''+editor+'</div></div>'; editor=''+editor+'<div class="minibubble spacing" id="attach_photo_area_inline"></div>'; editor=''+editor+'</form>'; editor=''+editor+'<div class="minibubble spacing" id="editor_action_area_inline"></div>'; editor=''+editor+'</bubble>'; fu_qak("PageChatControlsInput",editor);} function fu_qnu(offset,chat,noloader){ fu_oen("PageChatMessages"); if (noloader==undefined){ fu_qak("PageChatMessages","<div class='loading'></div>");}
fu_qak("PageChatMessagesGenerateCase","<div id='PageChatMessagesGenerate_"+offset+"'></div>"); fu_knz("https://"+s_hostname+"/get_chat_messages?query="+chat+"&count=40&start="+offset+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["messages"]!=false){ var firstcheckrender=true; if (aa('messages_loaded')==undefined){ var render_frame_id=fu_sjw(20); fu_qak("PageChatMessagesGenerateCase","<div id='messages_loaded'></div><div id='messages_render_"+render_frame_id+"'></div>");}else{ var render_frame_id=fu_sjw(20); if (offset==0){ fu_qpc("PageChatMessagesGenerateCase","<div id='messages_render_"+render_frame_id+"'></div>");}else{ fu_qak("PageChatMessagesGenerateCase","<div id='messages_render_"+render_frame_id+"'></div>");}}
fu_lgl(response["response_data"]["messages"], function(id){ if (offset==0){ if (firstcheckrender==true){ firstcheckrender=false; if (aa('checkup_item_canview')!=undefined){ aa('checkup_item_canview').remove();}
fu_qpc("PageChatMessagesGenerateCase","<div id='checkup_item_canview'></div><action type=\"inview_item_checkup\" item_type=\"messages\" item_last=\""+id+"\" item_resource=\""+chat+"\" item_resource_sub=\"false\" item_function=\"fu_qnu('"+offset+"','"+chat+"','yes');\"></action>");}}
fu_qqa(response["response_data"]["messages"][""+id+""],"messages_render_"+render_frame_id+"");}); setTimeout(function(){ fu_oen("PageChatMessages"); fu_qak("PageChatMessages","<action type='inview_loadmore_pagechat' offset='"+(parseInt(offset)+40)+"' chat='"+chat+"'></action>");}, 400);}else{ fu_oen("PageChatMessages"); if (offset==0){ fu_qak("PageChatMessages","<div id='ChatNoMessageReload'></div><bubble class='alt1'><trans>Sorry! We can't find any messages.</trans></bubble>");}} }});} function fu_sxw(chat){ var postdata={}; postdata["chat"]=chat; postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_chat_accept",postdata,function(result){ var response = fu_leh(result); if (response["response_data"]=="ok"){ fu_ygh("You have joined the chat room"); fu_euy("/messages/"+chat+"");}else{ fu_ygh("Unable to join chat room"); fu_qqc();}
fu_qaf();});} function fu_dfo(chat){ var postdata={}; postdata["chat"]=chat; postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_chat_leave",postdata,function(result){ var response = fu_leh(result); if (response["response_data"]=="ok"){ fu_ygh("You have left the chat room"); fu_euy("/messages");}else{ fu_ygh("Unable to leave chat room"); fu_qqc();}
fu_qaf();});} var appPageMessages_message_sending=false; function fu_xcm(chat,form){ if (appPageMessages_message_sending==false){ appPageMessages_message_sending=true; fu_uqy(); fu_hbj(); if (Array.isArray(form)==false){ var data=fu_fhg(form);}else{ var data=form;} var postdata={}; var sendurl=""; data["content"] = data["content"].replace(/(\r\n|\n|\r)/gm, ""); postdata["chat"]=chat; postdata["content"]=ae(fu_qti(data["content"])); if (data["photo"]!=undefined){ postdata["file"]=ae(data["photo"]);}
postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_chat_message_create",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ appPageMessages_message_sending=false; if (aa("ChatNoMessageReload")){ fu_euy("/messages/"+chat+"");}else{ if (aa(s_body_livearea_last)){ aa(s_body_livearea_last).blur(); aa(s_body_livearea_last).value=""; aa(s_body_livearea_last).removeAttribute('autofocus'); aa(s_body_livearea_last).style.height = '36px'; fu_oen("attach_photo_area_inline"); aa(s_body_livearea_last).setAttribute('autofocus', 'autofocus'); aa(s_body_livearea_last).focus(); aa("livearea_restore_"+s_body_livearea_last+"").remove(); fu_vch(aa(s_body_livearea_last), false);}else{ fu_euy("/messages/"+chat+"");}} }else{ appPageMessages_message_sending=false; var message="Unable to send message"; fu_ygh(message); fu_qqc();}
fu_qaf();});}} function fu_ddn(alias,form){ fu_uqy(); fu_hbj(); if (Array.isArray(form)==false){ var data=fu_fhg(form);}else{ var data=form;} var postdata={}; var sendurl=""; postdata["account"]=alias; postdata["name"]=ae(fu_qti(data["name"])); postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_chat_create",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_ygh("Chat has been created"); fu_euy("/messages/"+response["response_data"]+"");}else{ var message="Unable to create the chat room"; if (response["system_api_error"]=="waitingonchat"){ var message="You already are in a pending chat with this person";}
fu_ygh(message); fu_qqc();}
fu_qaf();});} function fu_qlx(chat,account){ fu_uqy(); fu_hbj(); var postdata={}; postdata["chat"]=chat; postdata["account"]=account; postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_chat_invite",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_ygh("Invite has been sent"); fu_euy("/messages/"+chat+"");}else{ fu_ygh("Not able to invite"); fu_qqc();}
fu_qaf();});} function fu_tpa(chat){ fu_uti(); fu_qak("container_modl","<div class='loading'></div>"); fu_knz("https://"+s_hostname+"/get_chat_info?query="+chat+"",function(result){ var response = fu_leh(result); fu_oen("container_modl"); if (response["system_api_error"]==false){ fu_qak("container_modl","<h1><trans>Chat settings</trans></h1><bubble id='ChatSettingsItems'></bubble>"); if (response["response_data"]["info_description"]=="false"){ response["response_data"]["info_description"]="No description...";} if (response["response_data"]["info_emoji"]=="false"){ response["response_data"]["info_emoji"]="😀";}
fu_qak("ChatSettingsItems","<div class=\"minibubble\" onclick=\"javascript:fu_klp('"+response["response_data"]["id"]+"','"+fu_qti(response["response_data"]["info_name"])+"');\"><h3 style='margin-top: 0px;margin-bottom: 5px;'><trans>Name</trans></h3>"+fu_ctl(response["response_data"]["info_name"])+"</div>"); fu_qak("ChatSettingsItems","<div class=\"minibubble\" onclick=\"javascript:fu_uoi('"+response["response_data"]["id"]+"','"+fu_qti(response["response_data"]["info_description"])+"');\"><h3 style='margin-top: 0px;margin-bottom: 5px;'><trans>Description</trans></h3>"+fu_ctl(response["response_data"]["info_description"])+"</div>"); fu_qak("ChatSettingsItems","<div class=\"minibubble\" onclick=\"javascript:fu_tzp('"+response["response_data"]["id"]+"','"+response["response_data"]["info_emoji"]+"');\"><h3 style='margin-top: 0px;margin-bottom: 5px;'><trans>Emoji</trans></h3>"+fu_ctl(response["response_data"]["info_emoji"])+"</div>"); fu_qak("ChatSettingsItems","<h2>Members</h2>",true); fu_lgl(response["response_data"]["members"], function(id){ fu_qak("ChatSettingsItems","<div class=\"minibubble\" onclick=\"javascript:fu_euy('/@"+response["response_data"]["members"][""+id+""]["account_alias"]+"');\"><img source=\""+response["response_data"]["members"][""+id+""]["account_avatar"]+"\" class=\"avatar optimizer_img\" style=\"float:left;margin-right:15px;width:44px;height:44px;\" alt='Avatar for account "+response["response_data"]["members"][""+id+""]["account_alias"]+"'><h3 style='margin-top: 0px;margin-bottom: 5px;'>"+fu_ctl(response["response_data"]["members"][""+id+""]["account_name"])+" @"+response["response_data"]["members"][""+id+""]["account_alias"]+"</h3>Last active "+fu_hms(response["response_data"]["members"][""+id+""]["date_lastseen"])+" & status is <strong>"+response["response_data"]["members"][""+id+""]["info_status"]+"</strong>.</div>");}); fu_qak("ChatSettingsItems","<h2>Personal</h2>",true); fu_qak("ChatSettingsItems","<div class=\"minibubble\" onclick=\"javascript:fu_dfo('"+response["response_data"]["id"]+"');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("💨")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'><trans>Leave</trans></h3><trans>Taping this will remove you without delay, poof.</trans></div>");}else{ fu_euy("/messages");}});} function fu_klp(chat,current){ fu_uti(); fu_qak("container_modl","<h1>Chat name</h1>",true); fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;margin-top:20px;"><input type="text" class="input" name="name" size="120" maxlength="120" placeholder="Name" value="'+fu_qdo(current)+'"><BR><BR><input type="submit" name="submit" onclick="fu_opj(\''+chat+'\',this.form); return false;" value="Update"></div></form></bubble>');} function fu_uoi(chat,current){ fu_uti(); if (current=="No description..."){ current="";}
fu_qak("container_modl","<h1>Chat description</h1>",true); fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;margin-top:20px;"><textarea class="input fullsize" name="description" size="200" maxlength="200" placeholder="Description">'+fu_qdo(current)+'</textarea><BR><BR><input type="submit" name="submit" onclick="fu_jsg(\''+chat+'\',this.form); return false;" value="Update"></div></form></bubble>');} function fu_tzp(chat,current){ fu_uti(); fu_qak("container_modl","<h1>Chat emoji</h1>",true); fu_qak("container_modl","<div style='text-align:center;font-size:4em;padding-bottom:35px;'>"+fu_ctl(current)+"</div><div id='emoji_load_in_case'></div>"); fu_qak("container_modl","<bubble onclick=\"javascript:fu_xun('"+chat+"','Activities');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("🏀")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Activities</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("container_modl","<bubble onclick=\"javascript:fu_xun('"+chat+"','Animals & Nature');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("🦊")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Animals & Nature</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("container_modl","<bubble onclick=\"javascript:fu_xun('"+chat+"','Flags');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("🇨🇦")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Flags</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("container_modl","<bubble onclick=\"javascript:fu_xun('"+chat+"','Food & Drink');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("🥤")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Food & Drink</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("container_modl","<bubble onclick=\"javascript:fu_xun('"+chat+"','Objects');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("💡")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Objects</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("container_modl","<bubble onclick=\"javascript:fu_xun('"+chat+"','People & Body');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("🤷‍♂️")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>People & Body</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("container_modl","<bubble onclick=\"javascript:fu_xun('"+chat+"','Smileys & Emotion');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("🫣")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Smileys & Emotion</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("container_modl","<bubble onclick=\"javascript:fu_xun('"+chat+"','Symbols');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("❤️")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Symbols</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("container_modl","<bubble onclick=\"javascript:fu_xun('"+chat+"','Travel & Places');\"><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("🚲")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Travel & Places</h3>Tap to load emojis you can pick from</bubble>");} function fu_xun(chat,search){ fu_oen("emoji_load_in_case"); fu_qak("emoji_load_in_case","<div class='loading'></div>"); fu_knz("https://"+s_hostname+"/get_system_emoji_category?category="+ae(search)+"&count=800",function(result){ var response = fu_leh(result); fu_oen("emoji_load_in_case"); fu_qak("emoji_load_in_case","<div id='emoji_actual_placement' style='text-align: center;margin-bottom:20px;'></div>"); if (response["system_api_error"]==false){ fu_lgl(response["response_data"], function(id){ fu_qak("emoji_actual_placement","<div style='display:inline-block;font-size:2em;padding:5px;'><bubble onclick=\"javascript:fu_oqc('"+chat+"','"+response["response_data"][""+id+""]["emoji"]+"');\">"+fu_ctl(response["response_data"][""+id+""]["emoji"])+"</bubble></div>");});}});} function fu_opj(chat,form){ fu_uqy(); fu_hbj(); if (Array.isArray(form)==false){ var data=fu_fhg(form);}else{ var data=form;} var postdata={}; var sendurl=""; postdata["chat"]=chat; postdata["name"]=ae(fu_qti(data["name"])); postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_chat_update_name",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_ygh("Chat name has been updated"); fu_euy("/messages/"+chat+"");}else{ fu_ygh("Not able to update name"); fu_qqc();}
fu_qaf();});} function fu_oqc(chat,emoji){ fu_uqy(); fu_hbj(); var postdata={}; postdata["chat"]=chat; postdata["emoji"]=ae(fu_qti(emoji)); postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_chat_update_emoji",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_ygh("Chat emoji been updated"); fu_euy("/messages/"+chat+"");}else{ fu_ygh("Not able to update emoji"); fu_qqc();}
fu_qaf();});} function fu_jsg(chat,form){ fu_uqy(); fu_hbj(); if (Array.isArray(form)==false){ var data=fu_fhg(form);}else{ var data=form;} var postdata={}; var sendurl=""; postdata["chat"]=chat; postdata["description"]=ae(fu_qti(data["description"])); postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_chat_update_description",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_ygh("Chat description has been updated"); fu_euy("/messages/"+chat+"");}else{ fu_ygh("Not able to update description"); fu_qqc();}
fu_qaf();});}
function fu_wqb(){ if (fu_qgu()==true){ var rule="new"; var rulename="New"; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ rule=arr[2];}} if (su_id!=null){ fu_crv("full"); var moreurl=""; if (rule=="old"){ moreurl="?seen=yes"; rulename="Old";} if (rule=="new"){ moreurl="?seen=no"; rulename="New";} if (rule=="reaction"){ moreurl="?type=reaction"; rulename="Reaction";} if (rule=="reaction"){ moreurl="?type=reaction"; rulename="Reaction";} if (rule=="comment_reply"){ moreurl="?type=comment_reply"; rulename="Comment & Reply";} if (rule=="account"){ moreurl="?type=account"; rulename="Accounts";} if (rule=="mention"){ moreurl="?type=mention"; rulename="Mention";} if (rule=="share"){ moreurl="?type=share"; rulename="Share";} if (rule=="edit"){ moreurl="?type=edit"; rulename="Edit";}
fu_pcc(""+rulename+" Notifications"); fu_qak("container_content","<h1>"+rulename+" Notifications</h1>",true); fu_qak("container_content","<div class='horizontalscroll' id='MenuNotifications'></div>"); fu_qak("MenuNotifications","<a href=\"javascript:fu_erk('all');\"><div class='tab important'>Mark all seen</div></a>",true); fu_qak("MenuNotifications","<a href=\"/notifications\"><div class='tab'>New</div></a>",true); fu_qak("MenuNotifications","<a href=\"/notifications/old\"><div class='tab'>Old</div></a>",true); fu_qak("MenuNotifications","<a href=\"/notifications/reaction\"><div class='tab'>Reactions</div></a>",true); fu_qak("MenuNotifications","<a href=\"/notifications/comment_reply\"><div class='tab'>Comments & Replies</div></a>",true); fu_qak("MenuNotifications","<a href=\"/notifications/mention\"><div class='tab'>Mentions</div></a>",true); fu_qak("MenuNotifications","<a href=\"/notifications/account\"><div class='tab'>Accounts</div></a>",true); fu_qak("MenuNotifications","<a href=\"/notifications/share\"><div class='tab'>Shares</div></a>",true); fu_qak("MenuNotifications","<a href=\"/notifications/edit\"><div class='tab'>Edits</div></a>",true); fu_qak("container_content","<div style='margin-top:20px;'><div id='PageNotificationContent'><div class='loading'></div></div></div>"); fu_knz("https://"+s_hostname+"/get_account_notifications"+moreurl+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("PageNotificationContent"); if (response["response_data"]["notifications"]!=false){ fu_qak("PageNotificationContent","<div id='list_gen_notifi'></div>"); fu_lgl(response["response_data"]["notifications"], function(id){ var notification=response["response_data"]["notifications"][""+id+""]; var time=fu_hms(notification["date_created"]); var activealert=""; var link=false; var runfunction=""; var content=notification["content"]; var matches = content.match(/(\[)([^\n\s\!\@\#\$\%\&\.\,\<\>]+)(\])/gi); fu_lgl(matches, function(id){ var data=matches[""+id+""]; var result = data.match(/(\[)([^\n\s\!\@\#\$\%\&\.\,\<\>]+)(\])/); if (result[2].includes("emoji")){ content=content.replace(result[0], ""+fu_xqn(result[2])+"");}else{ content=content.replace(result[0], "[unknown]");}}); if (notification["seen"]=="0"){ activealert="<div style='float:right;margin-left:10px;'>"+fu_ctl("🔔")+"</div>";} if (notification["type"]=="comment" || notification["type"]=="reply"){ link="/conversation/"+notification["resource"]+":"+notification["resource_sub"]+""; content="<strong>"+notification["from"]["name"]+"</strong> "+content+".";} if (notification["type"]=="reaction"){ if (notification["resource_sub"]!="false"){ link="/conversation/"+notification["resource"]+":"+notification["resource_sub"]+"";}else{ link="/conversation/"+notification["resource"]+"";}
content="<strong>"+notification["from"]["name"]+"</strong> "+content+".";} if (notification["type"]=="share"){ if (notification["resource_sub"]!="false"){ link="/conversation/"+notification["resource"]+":"+notification["resource_sub"]+"";}else{ link="/conversation/"+notification["resource"]+"";}
content="<strong>"+notification["from"]["name"]+"</strong> "+content+".";} if (notification["type"]=="edit"){ if (notification["resource_sub"]!="false"){ link="/conversation/"+notification["resource"]+":"+notification["resource_sub"]+"";}else{ link="/conversation/"+notification["resource"]+"";}
content="<strong>"+notification["from"]["name"]+"</strong> "+content+".";} if (notification["type"]=="mention"){ if (notification["resource_sub"]!="false"){ link="/conversation/"+notification["resource"]+":"+notification["resource_sub"]+"";}else{ link="/conversation/"+notification["resource"]+"";}
content="<strong>"+notification["from"]["name"]+"</strong> "+content+".";} if (notification["type"]=="chat_mention"){ if (notification["resource_sub"]!="false"){ link="/messages/"+notification["resource"]+"";}else{ link="/messages/"+notification["resource"]+"";}
content="<strong>"+notification["from"]["name"]+"</strong> "+content+".";} if (notification["type"]=="conversation"){ link="/conversation/"+notification["resource"]+""; content="<strong>"+notification["from"]["name"]+"</strong> "+content+".";} if (notification["type"]=="global"){ if (notification["resource_sub"]!="false"){ link="/conversation/"+notification["resource"]+":"+notification["resource_sub"]+"";}else{ link="/conversation/"+notification["resource"]+"";}
content="<strong>"+notification["from"]["name"]+"</strong> "+content+".";} if (notification["type"]=="account"){ runfunction="fu_fvt('"+notification["from"]["alias"]+"');"; content="<strong>"+notification["from"]["name"]+"</strong> "+content+".";} if (notification["type"]=="gift"){ runfunction="fu_fvt('"+notification["from"]["alias"]+"');"; content="<strong>"+notification["from"]["name"]+"</strong> "+content+".";} if (notification["type"]=="cafe"){ link="/!"+notification["resource"]+""; content="<strong>"+notification["from"]["name"]+"</strong> "+content+".";} if (notification["type"]=="moderation"){ content="<strong>Moderator action</strong>: Hey, "+content+".";} if (notification["type"]=="report"){ content="<strong>Report</strong>: Hey, "+su_name+". "+content+".";}
content=content.replace("..", "."); if (link!=false){ fu_qak("list_gen_notifi","<bubble class='notification' onclick=\"javascript:fu_euy('"+link+"');fu_erk('"+notification["id"]+"');"+runfunction+"\">"+activealert+"<img source='"+notification["from"]["avatar"]+"' class='avatar optimizer_img' style='float:left;height:50px;width:50px;margin-right:10px;' alt='Avatar for "+notification["from"]["name"]+"'>"+content+"<div class='conversation' id='notification_content_preview_"+id+"'></div><div class='meta'>Tap to view · "+time+"</div></bubble>");}else{ fu_qak("list_gen_notifi","<bubble class='notification' onclick=\"javascript:fu_qqc();fu_erk('"+notification["id"]+"');"+runfunction+"\">"+activealert+"<img source='"+notification["from"]["avatar"]+"' class='avatar optimizer_img' style='float:left;height:50px;width:50px;margin-right:10px;' alt='Avatar for "+notification["from"]["name"]+"'>"+content+"<div class='conversation' id='notification_content_preview_"+id+"'></div><div class='meta'>Tap to view · "+time+"</div></bubble>");} if (notification["type"]=="share" || notification["type"]=="conversation" || notification["type"]=="reaction" || notification["type"]=="mention" || notification["type"]=="global" || notification["type"]=="comment" || notification["type"]=="reply"){ if (notification["resource_sub"]!="false"){ fu_qak("notification_content_preview_"+id+"","<div><action type='inview_load_preview_comment' header='false' element='notification_content_preview_"+id+"' conversation='"+notification["resource"]+"' comment='"+notification["resource_sub"]+"'></action><div class='loading'></div></div>");}else{ fu_qak("notification_content_preview_"+id+"","<div><action type='inview_load_preview_conversation' header='false' element='notification_content_preview_"+id+"' conversation='"+notification["resource"]+"'></action><div class='loading'></div></div>");}} });}else{ fu_qak("PageNotificationContent","<bubble class='alt1'>You have no notifications waiting for you in this section.</bubble>",true);}}else{ fu_rfy("Not able to load your notifications to generate the page...");}});}} } function fu_erk(id){ var postdata={}; var sendurl=""; postdata["notification"]=ae(id); postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_notification_seen"; fu_hhf(sendurl,postdata,function(result){ var response = fu_leh(result); if (id=="all"){ fu_euy('/notifications');} if (response["system_api_error"]!=false){ fu_qkr("We had a problem marking the notification as seen.");}
fu_qaf();});} function fu_ttp(){ fu_uqy(); fu_crv("full"); var alias=null; var page=null; var subpage=null; var arr = sp.split('/'); if (arr!=null){ if (arr[1]!=undefined){ alias=arr[1].replace("@", "");} if (arr[2]!=undefined){ page=arr[2];} if (arr[3]!=undefined){ subpage=arr[3];}} if (alias=="everyone"){ fu_euy("/@"+su_alias+"");} if (alias!=null){ var defaultheader="<div class='aspectcase twentyonebynine'><div class='cover optimizer_bg content' source='https://cdn.hey.cafe/file/HeyCafe/defaults/header_account.jpg'></div></div><img source='https://cdn.hey.cafe/file/HeyCafe/defaults/avatar_account.png' class='optimizer_img avatar main' alt='Default image'><h1>Loading...</h1><h2>@"+alias+"</h2><div class='loading'></div></div>"; fu_qak("container_content","<bubble class='profile'><div id='PageProfileHeader'>"+defaultheader+"</div></bubble><div class='horizontalscroll' id='PageProfileMenu'></div><div id='PageProfileTagMenu'></div>"); if (alias=="an"){ fu_yax("special", "body", "background: #FFCC99;"); fu_yax("special", "*", "border-radius:0px !important;"); fu_yax("special", "#container_headercase", "background: rgb(42,77,208);"); fu_yax("special", ".minibubble", "border:2px solid rgb(112,163,243);"); fu_yax("special", "#container_menu", "color:#ffffff;background: rgb(112,163,243);"); fu_yax("special", ".header_logo, .header_bubble", "color:#ffffff !important;background: rgb(112,163,243);"); fu_yax("special", ".header_logo:hover, .header_bubble:hover", "color:#ffffff !important;background: rgb(112,163,243);"); fu_yax("special", ".tab, .tab:hover", "color:#ffffff !important;background: rgb(112,163,243);");}
fu_knz("https://"+s_hostname+"/get_account_info?query="+alias+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("PageProfileHeader"); var specialboxes=""; if (response["response_data"]["website"]!="false"){ var previewurl=response["response_data"]["website"]; previewurl=previewurl.replace("https://", ""); previewurl=previewurl.replace("http://", ""); var previewurl_text=fu_rgf("https://"+previewurl+""); previewurl_text=previewurl_text.replace("www.", ""); specialboxes=specialboxes+"<a href='https://"+previewurl+"'><div class='specialbox'>"+fu_ctl("🌎")+" "+previewurl_text+"</div></a>";} if (response["response_data"]["pronouns"]!="false"){ specialboxes=specialboxes+"<div class='specialbox' onclick=\"javascript:fu_gbh('"+alias+"');\">"+fu_ctl("☝️")+" "+fu_ctl(response["response_data"]["pronouns"])+"</div>";} if (response["response_data"]["following_you"]==true){ var follows_you_block="<div class=\"tab solidhover\"><trans>Follows You</trans></div>";}else{ var follows_you_block="";} if (response["response_data"]["admin"]=="1" || response["response_data"]["moderator"]=="1"){ var staff="<div class=\"tab solidhover important alt2\"><trans>Staff</trans></div>";}else{ var staff="";} if (su_admin=="1" || su_moderator=="1"){ staff=""+staff+"<a href=\"https://admin.hey.cafe/account?id="+alias+"\"><div class=\"tab important alt3\"><trans>Inspect</trans></div></a>";} if (response["response_data"]["you_following"]==false){ staff=""+staff+"<a href=\"javascript:fu_ohr('"+response["response_data"]["id"]+"');\"><div class=\"tab important alt1\"><trans>Report</trans></div></a>";} if (su_id!=null){ if (su_alias!=response["response_data"]["alias"]){ if (response["response_data"]["you_muted"]==false){ staff=""+staff+"<a href=\"javascript:fu_kry('"+alias+"');\"><div class=\"tab important alt1\"><trans>Block</trans></div></a>";}else{ staff=""+staff+"<a href=\"javascript:fu_yhv('"+response["response_data"]["you_muted_id"]+"','"+alias+"');\"><div class=\"tab important alt1\"><trans>Unblock</trans></div></a>";}} } if (response["response_data"]["pro"]=="1"){ var pro="<div class=\"tab solidhover\"><trans>Pro</trans> <img alt=\"😎\" emoji=\"true\" class=\"\" src=\"https://assets.heycafecdn.com/emoji/svg/1f60e.svg\" style=\"width: 1.2em;margin-left: 2px;margin-right: 2px;display: inline;vertical-align: text-top;\"></div>";}else{ var pro="";} if (su_alias!=response["response_data"]["alias"]){ if (su_id!=null){ if (response["response_data"]["you_following"]==false){ var follow_control="<a href=\"javascript:fu_bqj('"+alias+"');\"><div class='button'>+&ensp;<trans>Follow</trans></div></a>";}else{ var follow_control="<a href=\"javascript:fu_wln('"+alias+"');\"><div class='button'>-&ensp;<trans>Unfollow</trans></div></a>";}}else{ var follow_control="";}}else{ var follow_control="";} if (su_alias!=response["response_data"]["alias"]){ if (su_id!=null){ if (response["response_data"]["you_following"]==true){ if (response["response_data"]["you_subscribed"]==false){ specialboxes=specialboxes+"<div onclick=\"javascript:fu_kdx('"+alias+"');\" class='specialbox'>"+fu_slu("send-check")+" <trans>Subscribe</trans></div>";}else{ specialboxes=specialboxes+"<div onclick=\"javascript:fu_yko('"+alias+"');\" class='specialbox'>"+fu_slu("send-slash")+" <trans>Unsubscribe</trans></div>";}}
specialboxes=specialboxes+"<div onclick=\"javascript:fu_hzx('"+alias+"');\" class='specialbox important'>"+fu_slu("envelope")+" <trans>Message</trans></div>"; if (s_device!="NativeiOSApp"){ specialboxes=specialboxes+"<div onclick=\"javascript:fu_qre('"+alias+"');\" class='specialbox important'>"+fu_ctl("😎")+" <trans>Gift Pro</trans></div>";}} }
specialboxes=specialboxes+"<div class='specialbox' onclick=\"javascript:fu_nmd('"+alias+"');\">"+fu_ctl("📋")+" <trans>RSS</trans></div>"; var settings=""; if (su_alias==response["response_data"]["alias"]){ settings="<a href=\"javascript:fu_euy('/settings/me');\"><div class=\"tab\">"+fu_slu("gear")+"&ensp;<trans>Edit</trans></div></a>";} var verified=""; if (response["response_data"]["verified"]=="1"){ if (response["response_data"]["type"]=="person"){ verified=" <span class='verified_badge'>"+fu_slu("patch-check-fill")+"</span>";} if (response["response_data"]["type"]=="business"){ verified=" <span class='business_badge'>"+fu_slu("patch-check-fill")+"</span>";}} if (response["response_data"]["type"]=="robot"){ if (response["response_data"]["verified"]=="1"){ verified=" <span class='verified_robot_badge'>"+fu_slu("robot")+"</span>";}else{ verified=" <span class='robot_badge'>"+fu_slu("robot")+"</span>";}}
fu_pcc(""+response["response_data"]["name"]+" (@"+response["response_data"]["alias"]+")"); fu_ccz(response["response_data"]["bio"]); fu_zmx(response["response_data"]["avatar"]); if (page=="about"){ fu_pcc("About / "+response["response_data"]["name"]+" (@"+response["response_data"]["alias"]+")");} if (page=="pinned"){ fu_pcc("Pinned Conversations / "+response["response_data"]["name"]+" (@"+response["response_data"]["alias"]+")");} if (page=="cafes"){ fu_pcc("Cafes / "+response["response_data"]["name"]+" (@"+response["response_data"]["alias"]+")");} if (page=="following"){ fu_pcc("Following / "+response["response_data"]["name"]+" (@"+response["response_data"]["alias"]+")");} if (page=="followers"){ fu_pcc("Followers / "+response["response_data"]["name"]+" (@"+response["response_data"]["alias"]+")");} if (specialboxes!=""){ specialboxes="<div style='padding-top:10px;'>"+specialboxes+"</div>";}
fu_qak("PageProfileHeader","<div class='aspectcase twentyonebynine'><div class='cover optimizer_bg content' source='"+response["response_data"]["header"]+"'>"+pro+""+follows_you_block+""+staff+""+settings+"</div></div><a href=\"javascript:fu_lwj('"+response["response_data"]["avatar"]+"','image',true,'"+fu_qti("Profile image for "+response["response_data"]["name"]+"")+"');\"><img source='"+response["response_data"]["avatar"]+"' class='optimizer_img avatar main' alt='Profile image for "+response["response_data"]["name"]+"'></a><h1>"+fu_ctl(response["response_data"]["name"])+""+verified+"</h1><h2>@"+response["response_data"]["alias"]+"</h2>"+follow_control+"<div class='minibubble'>"+fu_ctl(fu_fud(fu_yaa(response["response_data"]["bio"],true)))+""+specialboxes+"</div></div>"); fu_qaf(); var count_conversations=""; var count_cafes_member=""; var count_following=""; var count_followers=""; if (s_app_stats=="true"){ count_conversations="&ensp;"+response["response_data"]["count_conversations"]+""; count_cafes_member="&ensp;"+response["response_data"]["count_cafes_member"]+""; count_following="&ensp;"+response["response_data"]["count_following"]+""; count_followers="&ensp;"+response["response_data"]["count_followers"]+"";}
fu_oen("PageProfileMenu"); fu_qak("PageProfileMenu","<a href='/@"+alias+"'><div class='tab'>Conversations</div></a>",true); if (response["response_data"]["about"]!=false){ fu_qak("PageProfileMenu","<a href='/@"+alias+"/about'><div class='tab'>About</div></a>",true);}
fu_qak("PageProfileMenu","<a href='/@"+alias+"/pinned'><div class='tab'>Pins</div></a>",true); fu_qak("PageProfileMenu","<a href='/@"+alias+"/cafes'><div class='tab'>Cafés</div></a>",true); fu_qak("PageProfileMenu","<a href='/@"+alias+"/following'><div class='tab'>Following</div></a>",true); fu_qak("PageProfileMenu","<a href='/@"+alias+"/followers'><div class='tab'>Followers</div></a>",true); if (page==null || page=="tag" || page=="pinned"){ if (response["response_data"]["tags"]!=false){ fu_oen("PageProfileTagMenu"); fu_qak("PageProfileTagMenu","<div class='horizontalscroll' id='PageProfileTagMenu_contents'></div>"); fu_lgl(response["response_data"]["tags"], function(select){ fu_qak("PageProfileTagMenu_contents","<a href='/@"+alias+"/tag/"+response["response_data"]["tags"][""+select+""]["id"]+"'><div class='tab'>"+fu_ctl(response["response_data"]["tags"][""+select+""]["emoji"])+" "+fu_ctl(response["response_data"]["tags"][""+select+""]["name"])+"</div></a>");});}} if (page==null){ fu_qak("container_content","<h2>Conversations</h2>",true); if (su_alias==alias){ fu_qak("container_content","<div></div>"); fu_qak("container_content","<bubble id='inline_convo_genrate_case' class='conversation'></bubble>"); fu_eou("inline_convo_genrate_case","false"); fu_qak("container_content","<div style='margin-top:20px;'></div>");}
fu_qak("container_content","<div id='PageProfileConvoMainPin_"+alias+"'></div>"); fu_qak("container_content","<div id='PageProfileConvoGenerateCase_"+alias+"'></div>"); fu_qak("container_content","<div id='PageProfileConvo_"+alias+"'><div class='loading'></div></div>"); fu_dxw(0,alias,"false","false"); fu_knz("https://"+s_hostname+"/get_account_conversations?query="+alias+"&count=1&pinned=true",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["conversations"]!=false){ fu_lgl(response["response_data"]["conversations"], function(id){ fu_clo(response["response_data"]["conversations"][""+id+""],"PageProfileConvoMainPin_"+alias+"");});}} });} if (page=="pinned"){ fu_qak("container_content","<h2>Pins</h2>",true); fu_qak("container_content","<div id='PageProfileConvoGenerateCase_"+alias+"'></div>"); fu_qak("container_content","<div id='PageProfileConvo_"+alias+"'><div class='loading'></div></div>"); fu_dxw(0,alias,"true","false");} if (page=="tag"){ if (response["response_data"]["tags"]!=false){ if (response["response_data"]["tags"][""+subpage+""]!=undefined){ fu_qak("container_content","<h2>"+fu_ctl(response["response_data"]["tags"][""+subpage+""]["emoji"])+" "+fu_ctl(response["response_data"]["tags"][""+subpage+""]["name"])+"</h2>"); fu_qak("container_content","<div id='PageProfileConvoGenerateCase_"+alias+"'></div>"); fu_qak("container_content","<div id='PageProfileConvo_"+alias+"'><div class='loading'></div></div>"); fu_dxw(0,alias,"false",subpage);}else{ fu_euy("/e/404");}}else{ fu_euy("/e/404");}} if (page=="about"){ fu_qak("container_content","<h2>About</h2><div id='PageProfileAbout'><div class='loading'></div></div>",true); fu_knz("https://"+s_hostname+"/get_account_info?query="+alias+"",function(result){ var response = fu_leh(result); fu_oen("PageProfileAbout"); if (response["system_api_error"]==false){ if (response["response_data"]["about"]==false){ var contsabout="No about page content set.";}else{ var contsabout=response["response_data"]["about"]; contsabout=fu_hww(contsabout); contsabout=fu_maf(contsabout); contsabout=fu_nns(contsabout); contsabout=fu_ctl(contsabout); contsabout=fu_ltt(contsabout);}
fu_qak("PageProfileAbout","<bubble class='conversation' style='padding-top:0px;padding-bottom:0px;'><div class='content'>"+contsabout+"</div></bubble>");}},false,true);} if (page=="cafes"){ fu_qak("container_content","<div id='PageProfileCafes'><div class='loading'></div></div>"); fu_knz("https://"+s_hostname+"/get_account_cafes?query="+alias+"&count=1000",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("PageProfileCafes"); fu_qak("PageProfileCafes","<h2>Café's</h2>",true); if (response["response_data"]["cafes"]!=false){ fu_lgl(response["response_data"]["cafes"], function(id){ fu_bap(response["response_data"]["cafes"][""+id+""],"PageProfileCafes","halfsize");});}else{ fu_qak("container_content","<bubble class='alt1'>This account is not a member in any cafés.</bubble>",true);}} });} if (page=="following"){ fu_qak("container_content","<div id='PageProfileFollowing'><div class='loading'></div></div>"); fu_knz("https://"+s_hostname+"/get_account_following?query="+alias+"&count=100",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("PageProfileFollowing"); fu_qak("PageProfileFollowing","<h2>Following</h2>",true); if (response["response_data"]["accounts"]!=false){ fu_lgl(response["response_data"]["accounts"], function(id){ fu_hnn(response["response_data"]["accounts"][""+id+""],"PageProfileFollowing","halfsize");});}else{ fu_qak("container_content","<bubble class='alt1'>This account is not following anyone.</bubble>",true);}} });} if (page=="followers"){ fu_qak("container_content","<div id='PageProfileFollowers'><div class='loading'></div></div>"); fu_knz("https://"+s_hostname+"/get_account_followers?query="+alias+"&count=100",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("PageProfileFollowers"); fu_qak("PageProfileFollowers","<h2>Followers</h2>",true); if (response["response_data"]["accounts"]!=false){ fu_lgl(response["response_data"]["accounts"], function(id){ fu_hnn(response["response_data"]["accounts"][""+id+""],"PageProfileFollowers","halfsize");});}else{ fu_qak("container_content","<bubble class='alt1'>This account has no followers.</bubble>",true);}} });}}else{ if (response["system_api_error"]=="notfound"){ fu_ord();}else{ fu_rfy("Network error");}} },false,true);}else{ fu_ord();}} function fu_ord(){ fu_oen("container_content"); fu_qaf(); if (su_id!=null){ var alias=false; var arr = sp.split('/'); if (arr!=null){ if (arr[1]!=undefined){ alias=arr[1].replace("@", "");}}
fu_pcc("No "+alias+" account"); fu_qak("container_content","<h1>No "+alias+" account</h1>"); fu_qak("container_content","<bubble>Hey this person can't be found... But maybe you can invite someone who can use this alias/username.</bubble>"); fu_qak("container_content","<bubble class='alt1' onclick='javascript:fu_euy(\"/referral\");'>Tap here to see your referral link, and options to invite friends.</bubble>");}else{ fu_euy("/e/404");}} function fu_dxw(offset,alias,pinned,tagged){ fu_oen("PageProfileConvo_"+alias+""); fu_qak("PageProfileConvo_"+alias+"","<div class='loading'></div>"); fu_qak("PageProfileConvoGenerateCase_"+alias+"","<div id='PageProfileConvoGenerate_"+alias+"_"+offset+"'></div>"); var pinnedlink=""; if (pinned=="true"){ pinnedlink="&pinned=true";}else{ pinnedlink="&pinned=false";} var taggedlink=""; if (tagged!="false"){ taggedlink="&tag="+tagged+"";}
fu_knz("https://"+s_hostname+"/get_account_conversations?query="+alias+"&count=40&start="+offset+""+pinnedlink+""+taggedlink+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["conversations"]!=false){ fu_lgl(response["response_data"]["conversations"], function(id){ fu_clo(response["response_data"]["conversations"][""+id+""],"PageProfileConvoGenerate_"+alias+"_"+offset+"");}); setTimeout(function(){ fu_oen("PageProfileConvo_"+alias+""); fu_qak("PageProfileConvo_"+alias+"","<action type='inview_loadmore_pageprofile' offset='"+(parseInt(offset)+40)+"' alias='"+alias+"' pinned='"+pinned+"' tagged='"+tagged+"'></action>");}, 400);}else{ fu_oen("PageProfileConvo_"+alias+""); if (offset==0){ fu_qak("PageProfileConvo_"+alias+"","<bubble class='alt1'>Sorry! We can't find any conversations.</bubble>");}} }});} function fu_bqj(alias){ var postdata={}; postdata["account"]=alias; postdata=fu_mmy(postdata); fu_uqy(); fu_hhf("https://"+s_hostname+"/post_account_follow",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_ygh("You are now following @"+alias+""); fu_qqc();}else{ if (response["system_api_error"]=="notfound"){ fu_ygh("We can't find that account");}}
fu_qaf();});} function fu_wln(alias){ var postdata={}; postdata["account"]=alias; postdata=fu_mmy(postdata); fu_uqy(); fu_hhf("https://"+s_hostname+"/post_account_unfollow",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_ygh("You are now not following @"+alias+""); fu_qqc();}else{ if (response["system_api_error"]=="notfound"){ fu_ygh("We can't find that account");}}
fu_qaf();});} function fu_qre(alias){ fu_uti(); fu_uqy(); if (su_id!=null){ fu_qak("container_modl","<h1>Gift Pro</h1>",true); fu_knz("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ var supporterbuttons=""; if (response["response_data"]["country"]!="false" && response["response_data"]["country"]!="Russia" && response["response_data"]["state"]!="false"){ supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_ctl("☕️")+"<BR>1 Month</div>$2.48 USD</div><div class='minibubble' style='margin:5px;text-align:center;' onclick=\"javascript:fu_hbj(); window.open('https://lammcs.ca/service_purchase/?service=heycafe&country="+response["response_data"]["country"]+"&state="+response["response_data"]["state"]+"&amount=2.48&username="+response["response_data"]["alias"]+"&giftuser="+alias+"&good=true', '_blank');\">Purchase & Gift</div></div>"; supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_ctl("☕️")+"<BR>2 Months</div>$4.98 USD</div><div class='minibubble' style='margin:5px;text-align:center;' onclick=\"javascript:fu_hbj(); window.open('https://lammcs.ca/service_purchase/?service=heycafe&country="+response["response_data"]["country"]+"&state="+response["response_data"]["state"]+"&amount=4.98&username="+response["response_data"]["alias"]+"&giftuser="+alias+"&good=true', '_blank');\">Purchase & Gift</div></div>"; supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_ctl("☕️")+"<BR>6 Months</div>$12.48 USD</div><div class='minibubble' style='margin:5px;text-align:center;' onclick=\"javascript:fu_hbj(); window.open('https://lammcs.ca/service_purchase/?service=heycafe&country="+response["response_data"]["country"]+"&state="+response["response_data"]["state"]+"&amount=12.48&username="+response["response_data"]["alias"]+"&giftuser="+alias+"&good=true', '_blank');\">Purchase & Gift</div></div>"; supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_ctl("☕️")+"<BR>1 Year</div>$24.98 USD</div><div class='minibubble' style='margin:5px;text-align:center;' onclick=\"javascript:fu_hbj(); window.open('https://lammcs.ca/service_purchase/?service=heycafe&country="+response["response_data"]["country"]+"&state="+response["response_data"]["state"]+"&amount=24.98&username="+response["response_data"]["alias"]+"&giftuser="+alias+"&good=true', '_blank');\">Purchase & Gift</div></div>";}else{ supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_ctl("☕️")+"<BR>1 Month</div>$2.48 USD</div><div class='minibubble' style='margin:5px;text-align:center;'>"+fu_ctl("🔒")+" Purchase & Gift</div></div>"; supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_ctl("☕️")+"<BR>2 Months</div>$4.98 USD</div><div class='minibubble' style='margin:5px;text-align:center;'>"+fu_ctl("🔒")+" Purchase & Gift</div></div>"; supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_ctl("☕️")+"<BR>6 Months</div>$12.48 USD</div><div class='minibubble' style='margin:5px;text-align:center;'>"+fu_ctl("🔒")+" Purchase & Gift</div></div>"; supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_ctl("☕️")+"<BR>1 Year</div>$24.98 USD</div><div class='minibubble' style='margin:5px;text-align:center;'>"+fu_ctl("🔒")+" Purchase & Gift</div></div>"; supporterbuttons=""+supporterbuttons+"<BR><BR><bubble class=\"alt1\">You have one more step, you need to first set your Country and State/Province in settings for tax reasons before you can make any purchases. <a href='/settings/me'>Visit settings</a> to change your information, this info will NOT display on your profile.</bubble>";}
fu_qak("container_modl","<bubble><h2 style='margin-top:0px;'>Why gift Pro and help support Hey.Café?</h2>When you or others go Pro you also gain more features like larger conversations, better quality photos, ability to edit conversations and comments, a fancy profile badge, and more. You can learn more about what you get with Pro <a href='/help/goto/pro'>here</a>, and you can read our refund policy <a href='/help/goto/refunds'>here</a>. If a user already has Pro the time will be added to any current Pro they have.<BR><BR>"+supporterbuttons+"</bubble>"); fu_qaf();}else{ fu_rfy("Not able to load profile data");}},false,true);}} function fu_ohr(alias){ fu_uti(); var options=""; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_gvu('account','"+alias+"','spam');\"><strong style='display: inline-block;margin-bottom: 10px;'>Spam</strong><BR>Anything that can be seen as spam.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_gvu('account','"+alias+"','abuse');\"><strong style='display: inline-block;margin-bottom: 10px;'>Abuse</strong><BR>Content that may be harmful to others.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_gvu('account','"+alias+"','impersonation');\"><strong style='display: inline-block;margin-bottom: 10px;'>Impersonation</strong><BR>If trying to pass or act like someone else.</div>"; options=""+options+"<div class='minibubble' onclick=\"javascript:fu_gvu('account','"+alias+"','other');\"><strong style='display: inline-block;margin-bottom: 10px;'>Other</strong><BR>Anything that does not fall under the other options.</div>"; fu_qak("container_modl","<bubble class='alt1'>You can report a account by using the actions below. Pick the option that makes the most sense so that the correct person gets notified of this report.</bubble>"); fu_qak("container_modl","<bubble>"+options+"</bubble>");} function fu_kdx(alias){ var postdata={}; postdata["account"]=alias; postdata=fu_mmy(postdata); fu_uqy(); fu_hhf("https://"+s_hostname+"/post_account_subscribe",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_ygh("You are now subscribed to @"+alias+""); fu_qqc();}else{ if (response["system_api_error"]=="notfound"){ fu_ygh("We can't find that account");} if (response["system_api_error"]=="notfollow"){ fu_ygh("You are not following @"+alias+"");}}
fu_qaf();});} function fu_yko(alias){ var postdata={}; postdata["account"]=alias; postdata=fu_mmy(postdata); fu_uqy(); fu_hhf("https://"+s_hostname+"/post_account_unsubscribe",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_ygh("You are now not subscribed to @"+alias+""); fu_qqc();}else{ if (response["system_api_error"]=="notfound"){ fu_ygh("We can't find that account");}}
fu_qaf();});} function fu_kry(alias){ var postdata={}; postdata["type"]="account"; postdata["resource"]=ae(fu_qti(alias)); postdata=fu_mmy(postdata); fu_uqy(); fu_hhf("https://"+s_hostname+"/post_account_update_mute_create",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_ygh("You have blocked @"+alias+""); fu_qqc();}else{ fu_ygh("We had a problem creating this filter rule");}
fu_qaf();});} function fu_yhv(id,alias){ var postdata={}; postdata["id"]=id; postdata=fu_mmy(postdata); fu_uqy(); fu_hhf("https://"+s_hostname+"/post_account_update_mute_delete",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_ygh("You have unblocked @"+alias+""); fu_qqc();}else{ fu_ygh("We had a problem removing this filter rule");}
fu_qaf();});} function fu_hkq(alias){ fu_uti(); fu_qak("container_modl","<div class='loading'></div>"); fu_knz("https://"+s_hostname+"/get_account_info?query="+alias+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("container_modl"); if (response["response_data"]["website"]!="false"){ var previewurl=response["response_data"]["website"]; previewurl=previewurl.replace("https://", ""); previewurl=previewurl.replace("http://", ""); window.open("https://"+previewurl+"", '_blank').focus(); fu_hbj();}else{ fu_qak("container_modl","<bubble class='alt1'>This account has no linked website</bubble>");}} },false,true);} function fu_nmd(alias){ fu_uti(); fu_qak("container_modl","<h1><trans>RSS Feed</trans></h1><bubble><trans>You can use the RSS feed in any RSS reader or in tools like IFTTT to auto share to other services when new conversations are posted. You can click the link below to copy to clipbard.</trans><pre style=\"white-space: pre-wrap;white-space: -moz-pre-wrap;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;margin-bottom: 0px;\" onclick=\"fu_nib('CopyContentClickURL');\"><code id='CopyContentClickURL'>https://endpoint.hey.cafe/rss/account?query="+alias+"</code></pre></bubble>");} function fu_gbh(alias){ fu_uti(); fu_qak("container_modl","<div class='loading'></div>"); fu_knz("https://"+s_hostname+"/get_account_info?query="+alias+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("container_modl"); if (response["response_data"]["pronouns"]!="false"){ fu_qak("container_modl","<h1><trans>Pronouns</trans></h1><bubble><p>"+fu_ctl(response["response_data"]["name"])+" has provided the pronouns <strong>"+response["response_data"]["pronouns"]+"</strong> to be used.</p><p>You can also set your own in settings.</p></bubble>");}else{ fu_qak("container_modl","<bubble class='alt1'>This account has not specified any pronouns</bubble>",true);}} },false,true);} function fu_hzx(alias){ fu_uti(); fu_qak("container_modl","<div class='loading'></div>"); fu_knz("https://"+s_hostname+"/get_account_info?query="+alias+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("container_modl"); fu_qak("container_modl","<h1>Message</h1>"); fu_qak("container_modl","<bubble class='alt3'>Keep in mind they must accept the request, until then they wont see any of the message contents.</bubble><bubble><div id='modl_chats_makenew'></div></bubble><div id='modl_chats_list'><div class='loading'></div></div><div id='modl_chats_list_invite'><div class='loading'></div></div>"); fu_knz("https://"+s_hostname+"/get_chat_account?query="+alias+"",function(result_c){ var response_chats = fu_leh(result_c); if (response_chats["system_api_error"]==false){ fu_oen("modl_chats_list"); fu_qak("modl_chats_makenew",'<form name="login" onsubmit="return isValidForm()"><div style="text-align:center;margin-top:20px;"><input type="text" class="input" name="name" size="120" maxlength="120" placeholder="Subject for new chat room" value=""><BR><input type="submit" name="submit" onclick="fu_ddn(\''+alias+'\',this.form); return false;" value="Start Messaging"></div></form>'); fu_qak("modl_chats_list","<h2>Current</h2>"); if (response_chats["response_data"]["chats"]==false){ fu_qak("modl_chats_list","<bubble class='alt1'>You do not have any active messages with "+fu_ctl(response["response_data"]["name"])+".</bubble>");}else{ fu_lgl(response_chats["response_data"]["chats"], function(id){ fu_jxb(response_chats["response_data"]["chats"][""+id+""],'modl_chats_list');});}} }); fu_knz("https://"+s_hostname+"/get_chat_list?query="+su_alias+"&count=10",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("modl_chats_list_invite"); if (response["response_data"]["chats"]!=false){ fu_qak("modl_chats_list_invite","<h2>Invite to chat</h2>"); fu_lgl(response["response_data"]["chats"], function(id){ var caninvite=true; fu_lgl(response["response_data"]["chats"][""+id+""]["members"], function(subid){ if (response["response_data"]["chats"][""+id+""]["members"][""+subid+""]["account_alias"]==alias){ caninvite=false;}}); if (caninvite==true){ fu_jxb(response["response_data"]["chats"][""+id+""],'modl_chats_list_invite',alias);}});}} });}},false,true);} function fu_fvt(alias){ fu_uti(); fu_qak("container_modl","<div class='loading'></div>"); fu_knz("https://"+s_hostname+"/get_account_info?query="+alias+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("container_modl"); var specialboxes=""; if (response["response_data"]["website"]!="false"){ var previewurl=response["response_data"]["website"]; previewurl=previewurl.replace("https://", ""); previewurl=previewurl.replace("http://", ""); previewurl=previewurl.replace("www.", ""); var previewurl_text=fu_rgf("https://"+previewurl+""); specialboxes=specialboxes+"<a href='https://"+previewurl+"'><div class='specialbox'>"+fu_ctl("🌎")+" "+previewurl_text+"</div></a>";} if (response["response_data"]["pronouns"]!="false"){ specialboxes=specialboxes+"<div class='specialbox' onclick=\"javascript:fu_gbh('"+alias+"');\">"+fu_ctl("☝️")+" "+fu_ctl(response["response_data"]["pronouns"])+"</div>";} if (response["response_data"]["following_you"]==true){ var follows_you_block="<div class=\"tab solidhover\"><trans>Follows You</trans></div>";}else{ var follows_you_block="";} if (response["response_data"]["admin"]=="1" || response["response_data"]["moderator"]=="1"){ var staff="<div class=\"tab solidhover important alt2\"><trans>Staff</trans></div>";}else{ var staff="";} if (response["response_data"]["pro"]=="1"){ var pro="<div class=\"tab solidhover\"><trans>Pro</trans> <img alt=\"😎\" emoji=\"true\" class=\"\" src=\"https://assets.heycafecdn.com/emoji/svg/1f60e.svg\" style=\"width: 1.2em;margin-left: 2px;margin-right: 2px;display: inline;vertical-align: text-top;\"></div>";}else{ var pro="";} if (su_alias!=response["response_data"]["alias"]){ if (su_id!=null){ if (response["response_data"]["you_following"]==false){ var follow_control="<a href=\"javascript:fu_bqj('"+alias+"');\"><div class='button'>+&ensp;<trans>Follow</trans></div></a>";}else{ var follow_control="<a href=\"javascript:fu_wln('"+alias+"');\"><div class='button'>-&ensp;<trans>Unfollow</trans></div></a>";}}else{ var follow_control="";}}else{ var follow_control="";} if (su_alias!=response["response_data"]["alias"]){ if (su_id!=null){ if (response["response_data"]["you_following"]==true){ if (response["response_data"]["you_subscribed"]==false){ specialboxes=specialboxes+"<div onclick=\"javascript:fu_kdx('"+alias+"');\" class='specialbox'>"+fu_slu("send-check")+" <trans>Subscribe</trans></div>";}else{ specialboxes=specialboxes+"<div onclick=\"javascript:fu_yko('"+alias+"');\" class='specialbox'>"+fu_slu("send-slash")+" <trans>Unsubscribe</trans></div>";}}
specialboxes=specialboxes+"<div onclick=\"javascript:fu_hzx('"+alias+"');\" class='specialbox important'>"+fu_slu("envelope")+" <trans>Message</trans></div>";}} var verified=""; if (response["response_data"]["verified"]=="1"){ if (response["response_data"]["type"]=="person"){ verified=" <span class='verified_badge'>"+fu_slu("patch-check-fill")+"</span>";} if (response["response_data"]["type"]=="business"){ verified=" <span class='business_badge'>"+fu_slu("patch-check-fill")+"</span>";}} if (response["response_data"]["type"]=="robot"){ if (response["response_data"]["verified"]=="1"){ verified=" <span class='verified_robot_badge'>"+fu_slu("robot")+"</span>";}else{ verified=" <span class='robot_badge'>"+fu_slu("robot")+"</span>";}} if (specialboxes!=""){ specialboxes="<div style='padding-top:10px;'>"+specialboxes+"</div>";}
fu_qak("container_modl","<bubble class='profile'><div class='aspectcase thirtybyeight'><div class='cover optimizer_bg content' source='"+response["response_data"]["header"]+"'>"+pro+""+follows_you_block+""+staff+"</div></div><a href=\"javascript:fu_lwj('"+response["response_data"]["avatar"]+"','image',true,'"+fu_qti("Profile image for "+response["response_data"]["name"]+"")+"');\"><img source='"+response["response_data"]["avatar"]+"' class='optimizer_img avatar main' alt='Profile image for "+response["response_data"]["name"]+"'></a><h1>"+fu_ctl(response["response_data"]["name"])+""+verified+"</h1><h2>@"+response["response_data"]["alias"]+"</h2>"+follow_control+"<div class='minibubble'>"+fu_ctl(fu_fud(fu_yaa(response["response_data"]["bio"],true)))+""+specialboxes+"</div></div><div style='padding: 15px;'><div style='width:50%;'><input type=\"submit\" name=\"submit\" onclick=\"fu_euy('/@"+response["response_data"]["alias"]+"'); return false;\" value=\"View Profile\" style='margin:0px;padding: 10px;'></div></div></bubble>");}},false,true);}function fu_hbn(){ if (sp.startsWith("/p/")){ var newpage=sp.replace("/p/", "/@");} if (sp.startsWith("/c/")){ var newpage=sp.replace("/c/", "/!");}
fu_euy(newpage);}function fu_tfe(){ if (su_id==null){ fu_crv("full"); var alias=false; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ alias=arr[2];}}
s_referral=alias; fu_qex("ses_s_referral", s_referral); fu_euy("/");}else{ var canshow=true; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ alias=arr[2]; canshow=false; fu_euy("/@"+alias+"");}} if (canshow==true){ fu_crv("full"); fu_pcc("Referral"); fu_qak("container_content","<h1>Invite Friends</h1>",true); fu_qak("container_content","<bubble>Hey with user help we can grow, and help protect the privacy of more people. You can find your link below to share and it will show your account to follow once they join.</bubble>",true); fu_qak("container_content","<bubble class='alt3'><h3 style='text-align:center;'>https://hey.cafe/r/"+su_alias+"</h3></bubble>"); fu_qak("container_content","<h2 style='margin-top:40px;'>Share to social</h2>",true); var urlcontent="https://hey.cafe/r/"+su_alias+""; var conversationcontent="Hey I am now on a new social network that is privacy focused, ad free, and a safe space to share."; fu_qak("container_content","<bubble class='alt3'>"+conversationcontent+" https://hey.cafe/r/"+su_alias+"</bubble>"); var buttons=fu_enx(urlcontent,conversationcontent); fu_qak("container_content","<bubble>"+buttons+"</bubble>"); fu_qak("container_content","<div id='PageProfileReferrals'><div class='loading'></div></div>"); fu_knz("https://"+s_hostname+"/get_account_referrals?query="+su_id+"&count=50",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("PageProfileReferrals"); fu_qak("PageProfileReferrals","<h2 style='margin-top:40px;'>Recent Referrals</h2>",true); if (response["response_data"]["accounts"]!=false){ fu_lgl(response["response_data"]["accounts"], function(id){ fu_hnn(response["response_data"]["accounts"][""+id+""],"PageProfileReferrals","halfsize");});}else{ fu_qak("PageProfileReferrals","<bubble class='alt1'>You have no referrals yet.</bubble>",true);}} });}} } function fu_cey(){ fu_xbz(); fu_amz(); fu_uqy(); fu_crv("simple"); fu_pcc("Create your account"); fu_qak("container_header","<h1>Hey.Café</h1>"); if (s_loginmessage!=false){ fu_qak("container_content",'<bubble class="alt1" style="text-align: center;font-weight: 600;">'+s_loginmessage+'</bubble>');}
fu_qak("container_content",'<bubble><h2 style="text-align:center;margin-top:0px;">Create your account</h2><form name="register" onsubmit="return isValidForm()"><div style="text-align:center;padding-top:50px;"><input type="text" class="input" name="username" size="30" maxlength="30" placeholder="Alias / Username" value=""><BR><input type="text" class="input" name="name" size="30" placeholder="Name" value=""><BR><input type="text" class="input" name="email" size="30" placeholder="Email" value=""><BR><input type="password" class="input" name="password" size="30" autocomplete="new-password" placeholder="Password"><BR><BR><input type="submit" name="submit" onclick="fu_ukq(this.form); return false;" value="Join"></div></form></div></bubble>'); fu_qak("container_content",'<bubble>'+fu_ctl('👋')+' By creating an account you agree to our <a href="/help/goto/privacy">privacy policy</a>, <a href="/help/goto/use">appropriate use policy</a>, <a href="/help/goto/terms">terms and conditions</a>, <a href="/help/goto/refunds">refund policy</a> and our <a href="/help/goto/rules">content rules</a>.<BR><BR>'+fu_ctl('📧')+' Once your account is setup and verified we will only send important account emails. This will only be direct event alerts like if someone mentions you, and you can control this in settings any time.<BR><BR>'+fu_ctl('⚠️')+' We wont send junk messages or non important emails at any point for any reason.<BR><BR>'+fu_ctl('⏰')+' To register you need to be 13 years of age or older.</bubble>'); fu_qaf();} function fu_ukq(form){ fu_uqy(); var data=fu_fhg(form); var postdata={}; postdata["alias"]=data["username"]; postdata["name"]=ae(fu_qti(data["name"])); postdata["email"]=ae(fu_qti(data["email"])); postdata["password"]=ae(fu_qti(data["password"])); postdata["referral"]=s_referral; postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_account_register",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ su_session=response["system_account_session"]; su_alias=response["response_data"]["alias"]; su_id=response["response_data"]["id"]; su_name=response["response_data"]["name"]; su_language=response["response_data"]["language"]; su_avatar=response["response_data"]["avatar"]; su_header=response["response_data"]["header"]; fu_kym("ses_su_session"); fu_kym("ses_su_alias"); fu_kym("ses_su_id"); fu_kym("ses_su_name"); fu_kym("ses_su_language"); fu_qex("ses_su_session", su_session); fu_qex("ses_su_alias", su_alias); fu_qex("ses_su_id", su_id); fu_qex("ses_su_name", su_name); fu_qex("ses_su_language", su_language); if (fu_mlq("ses_s_sessions")!=""){ var sessionstorage=fu_leh(fu_mlq("ses_s_sessions")); sessionstorage[""+su_id+""]={}; sessionstorage[""+su_id+""]["session"]=su_session; sessionstorage[""+su_id+""]["alias"]=su_alias; sessionstorage[""+su_id+""]["id"]=su_id; sessionstorage[""+su_id+""]["name"]=su_name; sessionstorage[""+su_id+""]["language"]=su_language; fu_kym("ses_s_sessions"); fu_qex("ses_s_sessions", fu_mmy(sessionstorage));}
fu_ygh("Hey welcome "+response["response_data"]["name"]+"!"); fu_rcg(s_mode); fu_lmn(); if (s_loginrestore==false){ fu_euy("/feed");}else{ fu_euy(s_loginrestore); s_loginrestore=false;} setTimeout(function(){ fu_spm("verify",fu_qti("0"));}, 1000);}else{ fu_qkr("Account creation failed. "+response["system_api_error"]+"");}
fu_qaf();});} var pagerequest_autotoken=false; var pagerequest_autosend=true; function fu_bqa(){ fu_xbz(); fu_uqy(); fu_crv("simple"); fu_pcc("Access Request"); var type=""; var publisher=''; var reason=''; var domain=''; var sendback=''; var session=''; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ type=arr[2];}} if (su_id!=null){ fu_qak("container_content",'<bubble style="text-align:center;"><div class=\'loading\'></div></bubble>'); if (type=="login"){ if (arr!=null){ if (arr[3]!=undefined){ publisher=fu_qdo(decodeURIComponent(""+arr[3]+""));} if (arr[4]!=undefined){ reason=fu_qdo(decodeURIComponent(""+arr[4]+""));} if (arr[5]!=undefined){ sendback=fu_qdo(decodeURIComponent(""+arr[5]+"")); domain=fu_rgf(sendback);}else{ sendback=document.referrer; domain=fu_rgf(sendback);}}
fu_knz("https://"+s_hostname+"/get_account_sessions?query="+su_id+"&count=100",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["sessions"]!=false){ var found_tokensend=false; if (pagerequest_autosend==true){ fu_lgl(response["response_data"]["sessions"], function(id){ var sesreason=response["response_data"]["sessions"][""+id+""]["info_reason"]; var sespublisher=response["response_data"]["sessions"][""+id+""]["info_publisher"]; var sesdomain=response["response_data"]["sessions"][""+id+""]["info_domain"]; var sestype=response["response_data"]["sessions"][""+id+""]["info_type"]; if (type==sestype && reason==sesreason && domain==sesdomain){ found_tokensend=true; var sespermission_email=response["response_data"]["sessions"][""+id+""]["info_permission_email"]; var sespermission_location=response["response_data"]["sessions"][""+id+""]["info_permission_location"]; pagerequest_autotoken=fu_sjw(25); setTimeout("fu_hvm('"+type+"','"+fu_qti(publisher)+"','"+fu_qti(reason)+"','"+fu_qti(sendback)+"','"+sespermission_email+"','"+sespermission_location+"','"+pagerequest_autotoken+"');", 5000);}});} if (found_tokensend==false){ fu_oen("container_content"); fu_qak("container_header","<h2 style=\"text-align:center;margin-bottom: 0px;\">Sign in with Hey.Café</h2>"); var contentforpage=''; contentforpage=contentforpage+'<bubble style="text-align:center;">'; contentforpage=contentforpage+"<div id='request_imagebox' style='text-align:center;padding-bottom:15px;'><img src='"+s_imagecache+"?url="+su_avatar+"&size=200' class='avatar' style='width: 150px;height: 150px;' alt='Avatar image for account "+su_name+"'></div>"; contentforpage=contentforpage+'<div style="font-size: 1.4em;">'+domain+'</div>'; contentforpage=contentforpage+'<div style="padding-top:40px;padding-bottom:40px;padding-left: 20px;padding-right: 20px;font-size: 1.2em;"><strong>'+publisher+'</strong> is asking access to basic info about your account like your name, avatar, header, bio and username.<BR><BR>The service requested with the reason: '+fu_yaa(reason)+'.</div>'; contentforpage=contentforpage+'<input type="submit" name="submit" onclick="fu_hvm(\''+type+'\',\''+fu_qti(publisher)+'\',\''+fu_qti(reason)+'\',\''+fu_qti(sendback)+'\',false,false,false); return false;" value="Continue as '+su_name+'"><BR><BR><a href="javascript:fu_nby();">Change account first</a>'; contentforpage=contentforpage+'</bubble>'; fu_qak("container_content", contentforpage); fu_dff("http://"+domain);}else{ fu_oen("container_content"); var contentforpage=''; contentforpage=contentforpage+'<bubble style="text-align:center;">'; contentforpage=contentforpage+'You have already logged into this service before, we are sending you over in just a second...'; contentforpage=contentforpage+'<BR><BR>'; contentforpage=contentforpage+'<div class=\'loading\'></div>'; contentforpage=contentforpage+'<BR><BR>'; contentforpage=contentforpage+'<input type="submit" name="submit" onclick="pagerequest_autotoken=false; pagerequest_autosend=false; fu_bqa(); return false;" value="Cancel">'; contentforpage=contentforpage+'</bubble>'; fu_qak("container_content", contentforpage);}} }});} if (type=="permission"){ var sessionfound=false; var sesreason=false; var sespublisher=false; var sesdomain=false; if (arr!=null){ if (arr[3]!=undefined){ permission=decodeURIComponent(""+arr[3]+"");} if (arr[4]!=undefined){ session=decodeURIComponent(""+arr[4]+"");} if (arr[5]!=undefined){ sendback=fu_qdo(decodeURIComponent(""+arr[5]+"")); domain=fu_rgf(sendback);}else{ sendback=document.referrer; domain=fu_rgf(sendback);}}
fu_knz("https://"+s_hostname+"/get_account_sessions?query="+su_id+"&count=100",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["sessions"]!=false){ fu_lgl(response["response_data"]["sessions"], function(id){ if (id==session){ sesreason=response["response_data"]["sessions"][""+id+""]["info_reason"]; sespublisher=response["response_data"]["sessions"][""+id+""]["info_publisher"]; sesdomain=response["response_data"]["sessions"][""+id+""]["info_domain"];}});} if (sespublisher!=false){ fu_oen("container_content"); fu_qak("container_header","<h2 style=\"text-align:center;margin-bottom: 0px;\">Sign in with Hey.Café</h2>"); var message=false; if (permission=="email"){ var message='is requesting access to the email address you have set on your profile.';} if (permission=="location"){ var message='is requesting access to the location info you have set on your profile settings. This is not real time location info.';} if (permission=="all"){ var message='is requesting access to some of the info listed in your settings like the location info you have set and your email. This is not real time location info.';} var sendbackwithtoken=sendback; if (sendbackwithtoken.includes("loginkey=")==false){ if (sendbackwithtoken.includes("?")){ sendbackwithtoken=sendbackwithtoken+"&loginkey="+session+"&permission="+permission+"";}else{ sendbackwithtoken=sendbackwithtoken+"?loginkey="+session+"&permission="+permission+"";}}else{ sendbackwithtoken=sendbackwithtoken+"&permission="+permission+"";} if (message!=false){ var contentforpage=''; contentforpage=contentforpage+'<bubble style="text-align:center;">'; contentforpage=contentforpage+"<div id='request_imagebox' style='text-align:center;padding-bottom:15px;'><img src='"+s_imagecache+"?url="+su_avatar+"&size=200' class='avatar' style='width: 150px;height: 150px;' alt='Avatar image for account "+su_name+"'></div>"; contentforpage=contentforpage+'<div style="font-size: 1.4em;">'+domain+'</div>'; contentforpage=contentforpage+'<div style="padding-top:40px;padding-bottom:40px;padding-left: 20px;padding-right: 20px;font-size: 1.2em;"><strong>'+publisher+'</strong> '+message+'</div>'; contentforpage=contentforpage+'<input type="submit" name="submit" onclick="fu_eeb(\''+session+'\',\''+permission+'\',\''+fu_qti(sendback)+'\'); return false;" value="Share info"><BR><BR><a href="'+sendbackwithtoken+'">Do not share this info</a><BR><BR><a href="javascript:fu_nby();">Change account first</a>'; contentforpage=contentforpage+'</bubble>'; fu_qak("container_content", contentforpage); fu_dff("http://"+domain);}else{ fu_oen("container_content"); fu_qak("container_content",'<bubble style="text-align:center;">The permission type is not valid.</bubble>');}}else{ fu_oen("container_content"); fu_qak("container_content",'<bubble style="text-align:center;">Error with request, this session is not valid.<BR><BR>'+session+'</bubble>');}} });} if (type=="api"){ if (arr!=null){ if (arr[3]!=undefined){ publisher=fu_qdo(decodeURIComponent(""+arr[3]+""));} if (arr[4]!=undefined){ reason=fu_qdo(decodeURIComponent(""+arr[4]+""));} if (arr[5]!=undefined){ sendback=fu_qdo(decodeURIComponent(""+arr[5]+"")); domain=fu_rgf(sendback);}else{ sendback=document.referrer; domain=fu_rgf(sendback);}}
fu_knz("https://"+s_hostname+"/get_account_sessions?query="+su_id+"&count=100",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["sessions"]!=false){ var found_tokensend=false; if (pagerequest_autosend==true){ fu_lgl(response["response_data"]["sessions"], function(id){ var sesreason=response["response_data"]["sessions"][""+id+""]["info_reason"]; var sespublisher=response["response_data"]["sessions"][""+id+""]["info_publisher"]; var sesdomain=response["response_data"]["sessions"][""+id+""]["info_domain"]; var sestype=response["response_data"]["sessions"][""+id+""]["info_type"]; if (type==sestype && reason==sesreason && domain==sesdomain){ found_tokensend=true; pagerequest_autotoken=fu_sjw(25); setTimeout("fu_hvm('"+type+"','"+fu_qti(publisher)+"','"+fu_qti(reason)+"','"+fu_qti(sendback)+"',false,false,'"+pagerequest_autotoken+"');", 5000);}});} if (found_tokensend==false){ fu_oen("container_content"); fu_qak("container_header","<h2 style=\"text-align:center;margin-bottom: 0px;\">Share API Access</h2>"); var contentforpage=''; contentforpage=contentforpage+'<bubble style="text-align:center;">'; contentforpage=contentforpage+"<div id='request_imagebox' style='text-align:center;padding-bottom:15px;'><img src='"+s_imagecache+"?url="+su_avatar+"&size=200' class='avatar' style='width: 150px;height: 150px;' alt='Avatar image for account "+su_name+"'></div>"; contentforpage=contentforpage+'<div style="font-size: 1.4em;">'+domain+'</div>'; contentforpage=contentforpage+'<div style="padding-top:40px;padding-bottom:40px;padding-left: 20px;padding-right: 20px;font-size: 1.2em;"><strong>'+publisher+'</strong> is asking for an API key they can use to have full access to your account and can act as you. You should only share access like this with applications and services you trust.<BR><BR>The service requested with the reason: '+fu_yaa(reason)+'.</div>'; contentforpage=contentforpage+'<input type="submit" name="submit" onclick="fu_hvm(\''+type+'\',\''+fu_qti(publisher)+'\',\''+fu_qti(reason)+'\',\''+fu_qti(sendback)+'\',false,false,false); return false;" value="Continue as '+su_name+'"><BR><BR><a href="javascript:fu_nby();">Change account first</a>'; contentforpage=contentforpage+'</bubble>'; fu_qak("container_content", contentforpage); fu_dff("http://"+domain);}else{ fu_oen("container_content"); var contentforpage=''; contentforpage=contentforpage+'<bubble style="text-align:center;">'; contentforpage=contentforpage+'You have already logged into this service before, we are sending you over in just a second...'; contentforpage=contentforpage+'<BR><BR>'; contentforpage=contentforpage+'<div class=\'loading\'></div>'; contentforpage=contentforpage+'<BR><BR>'; contentforpage=contentforpage+'<input type="submit" name="submit" onclick="pagerequest_autotoken=false; pagerequest_autosend=false; fu_bqa(); return false;" value="Cancel">'; contentforpage=contentforpage+'</bubble>'; fu_qak("container_content", contentforpage);}} }});}}else{ s_loginrestore=sp; if (arr!=null){ if (arr[3]!=undefined){ publisher=fu_qdo(decodeURIComponent(""+arr[3]+""));}}
s_loginmessage="Login to your Hey.Café account first before you can login to "+publisher+"."; fu_euy("/login");}
fu_qaf();} function fu_dff(url){ var randhostname=fu_bpp(); fu_knz("https://"+randhostname+"/get_bot_website_meta?query="+fu_qti(url)+"",function(result){ var response = fu_leh(result); if (response["fail"]==undefined){ if (response["system_api_error"]==false){ fu_rox(url,response["response_data"]);}}else{ setTimeout(function(){ fu_dff(url);}, 3000);}},false,true);} function fu_rox(url,data){ var image=false; if (data["image"]!="false"){ image=data["logo"]; if (data["logo"].includes("http")==false){ if (data["logo"].includes("//")==false){ var hostname=fu_rgf(url); if (data["logo"].charAt(0)=="/"){ image="https://"+hostname+""+data["logo"]+"";}else{ image="https://"+hostname+"/"+data["logo"]+"";}} } if (image!=false){ fu_qak("request_imagebox", "<img src='"+s_imagecache+"?url="+image+"&size=200' class='avatar' style='width: 80px;height: 80px;margin-left: -40px;' alt='Site icon'>");}} if (image==false){ if (data["image"]!="false"){ image=data["image"]; if (data["image"].includes("http")==false){ if (data["image"].includes("//")==false){ var hostname=fu_rgf(url); if (data["image"].charAt(0)=="/"){ image="https://"+hostname+""+data["image"]+"";}else{ image="https://"+hostname+"/"+data["image"]+"";}} }} if (image!=false){ fu_qak("request_imagebox", "<img src='"+s_imagecache+"?url="+image+"&size=200' style='max-width: 100px;height: 80px;margin-left: -40px;border-radius:15px;' alt='Site image'>");}} } function fu_hvm(type,publisher,reason,sendback,permiss_email,permiss_location,token){ var cansend=true; if (token!=false){ if (pagerequest_autotoken!=token){ cansend=false;}} if (cansend==true){ fu_uqy(); var postdata={}; var sendurl=""; publisher=fu_qdo(publisher); reason=fu_qdo(reason); sendback=fu_qdo(sendback); var domain=fu_rgf(sendback); postdata["publisher"]=ae(fu_qti(publisher)); postdata["reason"]=ae(fu_qti(reason)); postdata["type"]=ae(type); postdata["domain"]=ae(fu_qti(domain)); if (permiss_email=="true"){ postdata["permission_email"]=ae("true");} if (permiss_location=="true"){ postdata["permission_location"]=ae("true");}
postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_session_create"; fu_hhf(sendurl,postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (sendback.includes("loginkey=")==false){ if (sendback.includes("?")){ sendback=sendback+"&loginkey="+response["response_data"]+"";}else{ sendback=sendback+"?loginkey="+response["response_data"]+"";}}
window.location.href = sendback;}else{ fu_qkr("Unable to create session. We can't send you to the service.");}
fu_qaf();});}} function fu_eeb(session,permission,sendback){ fu_uqy(); var postdata={}; var sendurl=""; sendback=fu_qdo(sendback); var domain=fu_rgf(sendback); postdata["session"]=ae(fu_qti(session)); postdata["permission"]=ae(fu_qti(permission)); postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_session_permission"; fu_hhf(sendurl,postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (sendback.includes("loginkey=")==false){ if (sendback.includes("?")){ sendback=sendback+"&loginkey="+session+"&permission="+permission+"";}else{ sendback=sendback+"?loginkey="+session+"&permission="+permission+"";}}else{ sendback=sendback+"&permission="+permission+"";}
window.location.href = sendback;}else{ fu_qkr("Unable to update session. We can't send you to the service.");}
fu_qaf();});}function fu_dsg(){ fu_uqy(); fu_crv("full"); var query=""; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ query=decodeURIComponent(arr[2]);}}
fu_pcc("Search"); fu_qak("container_content","<h1 id='title_update_search'>Search</h1>"); fu_qak("container_content",'<bubble class="alt0" style="padding: 0px;padding-left: 5px;padding-right: 5px;"><form action="#" onsubmit="javascript:fu_qrn(this);"><input type="text" name="search" style="max-width: calc(100% - 20px);" placeholder="Search..." value="'+query+'"></form></bubble><div id="search_results"></div>'); if (query!=""){ fu_nwk(query);}
fu_qaf();} function fu_oie(form,enter){ event.preventDefault(); var data=fu_fhg(form); var built=false; var dosearch=true; if (!aa("search_results")){ fu_oen("container_content"); fu_qpc("container_content",'<h1 id="title_update_search">Search</h1><div id="search_results"></div>');}else{ built=true;} if (enter!=undefined){ if (built==true){ dosearch=false;}} if (data["search"]!=""){ if (dosearch==true){ fu_oen("search_results"); event.preventDefault(); var data=fu_fhg(form); fu_nwk(data["search"]);}} } function fu_qrn(form){ event.preventDefault(); var data=fu_fhg(form); fu_nwk(data["search"]);} var search_query_id=""; function fu_nwk(query){ var newid=fu_sjw(30); search_query_id=newid; var search_had_results=false; fu_pmd("/search/"+ae(query)+"",true); fu_pcc("Searching for "+query +""); fu_oen("title_update_search"); fu_qak("title_update_search","Search: "+query+""); fu_oen("search_results"); fu_qak("search_results","<div id='search_results_accounts'></div><div id='search_results_cafes'></div><div id='search_results_conversations'><div class='loading'></div></div>"); fu_knz("https://"+s_hostname+"/get_search_accounts?search="+ae(fu_qti(query))+"&count=8",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("search_results_accounts"); if (response["response_data"]["accounts"]!=false){ if (newid==search_query_id){ fu_oen("search_results_no_results"); search_had_results=true; fu_qak("search_results_accounts","<h2 style='margin-top:0px;'>Accounts</h2>"); fu_lgl(response["response_data"]["accounts"], function(id){ var content=response["response_data"]["accounts"][""+id+""]; fu_hnn(content,"search_results_accounts","halfsize");});}} }else{ fu_rfy("Not able to load list...");}}); fu_knz("https://"+s_hostname+"/get_search_cafes?search="+ae(fu_qti(query))+"&count=8",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("search_results_cafes"); if (response["response_data"]["cafes"]!=false){ if (newid==search_query_id){ fu_oen("search_results_no_results"); search_had_results=true; fu_qak("search_results_cafes","<h2>Cafés</h2>"); fu_lgl(response["response_data"]["cafes"], function(id){ var content=response["response_data"]["cafes"][""+id+""]; fu_bap(content,"search_results_cafes","halfsize");});}} }else{ fu_rfy("Not able to load list...");}}); fu_knz("https://"+s_hostname+"/get_search_conversations?search="+ae(fu_qti(query))+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("search_results_conversations"); if (newid==search_query_id){ if (response["response_data"]["conversations"]!=false){ fu_qak("search_results_conversations","<h2>Conversations</h2>"); fu_lgl(response["response_data"]["conversations"], function(id){ fu_clo(response["response_data"]["conversations"][""+id+""],"search_results_conversations");});}else{ if (search_had_results==false){ fu_qak("search_results_conversations","<div id='search_results_no_results'><bubble class='alt1'>Sorry we have no search results!</bubble></div>");}} }}else{ fu_rfy("Not able to load list...");}});} function fu_dcf(){ if (fu_qgu()==true){ fu_crv("full"); var pageload=true; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ pageload=false; if (arr[2]=="me"){ fu_qwh();}else{ fu_xgh(arr[2]);}} } if (pageload==true){ fu_pcc("Settings"); fu_qak("container_content","<h1>Settings</h1>",true); fu_qak("container_content","<div id='SettingsExtras'></div>"); fu_qak("container_content","<div id='SettingsAccount'><div class='loading'></div></div>"); fu_qak("container_content","<div id='SettingsCafes'><div class='loading'></div></div>"); fu_qak("container_content","<bubble style='margin-top:50px;'><h2 style='margin-top:0px;'>Learn more</h2><span>Learn more about Hey.Café including our policys like our TOS and privacy policy.</span> <a href='/help/tag/s9vuh5tz2tj1efk'>You can view that here</a>.</div>",true); fu_knz("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("SettingsAccount"); fu_qak("SettingsAccount","<h2>Account</h2>",true); if (response["response_data"]["email_verified"]=="0"){ fu_qak("SettingsExtras","<div><bubble onclick='javascript:fu_spm(\"verify\",\""+fu_qti(response["response_data"]["email_verified"])+"\")' class='alt1'><strong>Tap here to verify email address</strong><BR><BR><span>Verify your email to get started, once your email is verified you will have access to more settings.</span></bubble>");}
fu_qak("SettingsAccount","<bubble onclick='javascript:fu_euy(\"/settings/me\");'><img source='"+response["response_data"]["avatar"]+"' class='avatar optimizer_img' style='float:left;height:50px;width:50px;margin-right:15px;'><h3 style='margin-top: 5px;margin-bottom: 0px;'>"+fu_ctl(response["response_data"]["name"])+"</h3><trans>Tap to view your settings.</trans></bubble>");}else{ fu_rfy("Not able to load your user data to generate on the settings page...");}}); fu_knz("https://"+s_hostname+"/get_account_cafes?query="+su_id+"&count=2000&admin=true",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("SettingsCafes"); if (response["response_data"]["cafes"]!=false){ var isincafe=false; fu_lgl(response["response_data"]["cafes"], function(id){ if (response["response_data"]["cafes"][""+id+""]["you_admin"]==true){ if (response["response_data"]["cafes"][""+id+""]["you_member"]==true){ if (isincafe==false){ isincafe=true; fu_qak("SettingsCafes","<h2>Cafés</h2><div id='s_cafe_list_gen'></div>",true);}
fu_qak("s_cafe_list_gen","<bubble onclick='javascript:fu_euy(\"/settings/"+id+"\");'><img source='"+response["response_data"]["cafes"][""+id+""]["avatar"]+"' class='avatar optimizer_img' style='float:left;height:50px;width:50px;margin-right:15px;'><h3 style='margin-top: 5px;margin-bottom: 0px;'>"+fu_ctl(response["response_data"]["cafes"][""+id+""]["name"])+"</h3><trans>Has "+response["response_data"]["cafes"][""+id+""]["members"]+" member(s) and is set to "+response["response_data"]["cafes"][""+id+""]["mode"]+" status.</trans></bubble>");}} });}else{ fu_qak("SettingsCafes","<h2 style='margin-top: 0px;'>Cafés</h2>",true); fu_qak("SettingsCafes","<bubble class='alt1'>You are not a moderator or admin of any Cafés yet.</bubble>",true);}}else{ fu_rfy("Not able to load your café data to generate on the settings page...");}});}} } function fu_xew(cafe){ if (cafe==undefined){ cafe="false";}
fu_uti(); fu_qak("container_modl","<h1>Create tag</h1>",true); fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="name" size="50" maxlength="50" placeholder="Name"><div style="position:fixed;top:-300px;opacity:0;"><input type="text" class="input" name="emoji" size="50" maxlength="50" id="emoji_picker_input" value="📕"></div><div style=\'text-align:center;font-size:4em;padding-top:35px;padding-bottom:35px;\' id=\'emoji_picker_current\'>'+fu_ctl("📕")+'</div><div id=\'emoji_load_in_case\'></div><div id=\'emoji_load_in_selectors\'></div><BR><BR><input type="submit" name="submit" onclick="fu_gre(\''+cafe+'\',this.form); return false;" value="Create"></div></form></bubble>'); fu_qak("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_oal('Activities');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("🏀")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Activities</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_oal('Animals & Nature');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("🦊")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Animals & Nature</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_oal('Flags');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("🇨🇦")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Flags</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_oal('Food & Drink');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("🥤")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Food & Drink</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_oal('Objects');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("💡")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Objects</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_oal('People & Body');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("🤷‍♂️")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>People & Body</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_oal('Smileys & Emotion');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("🫣")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Smileys & Emotion</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_oal('Symbols');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("❤️")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Symbols</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_oal('Travel & Places');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("🚲")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Travel & Places</h3>Tap to load emojis you can pick from</bubble>");} function fu_oal(search){ fu_oen("emoji_load_in_case"); fu_qak("emoji_load_in_case","<div class='loading'></div>"); fu_knz("https://"+s_hostname+"/get_system_emoji_category?category="+ae(search)+"&count=800",function(result){ var response = fu_leh(result); fu_oen("emoji_load_in_case"); fu_qak("emoji_load_in_case","<div id='emoji_actual_placement' style='text-align: center;margin-bottom:20px;'></div>"); if (response["system_api_error"]==false){ fu_lgl(response["response_data"], function(id){ fu_qak("emoji_actual_placement","<div style='display:inline-block;font-size:2em;padding:5px;'><bubble onclick=\"javascript:fu_xog('"+response["response_data"][""+id+""]["emoji"]+"');\">"+fu_ctl(response["response_data"][""+id+""]["emoji"])+"</bubble></div>");});}});} function fu_xog(emoji){ fu_oen("emoji_load_in_case"); fu_oen("emoji_picker_current"); fu_qak("emoji_picker_current",fu_ctl(emoji)); aa('emoji_picker_input').value=emoji;} function fu_gre(cafe,form){ fu_uqy(); fu_hbj(); if (Array.isArray(form)==false){ var data=fu_fhg(form);}else{ var data=form;} var postdata={}; var sendurl=""; postdata["cafe"]=cafe; postdata["name"]=ae(fu_qti(data["name"])); postdata["emoji"]=ae(fu_qti(data["emoji"])); postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_conversation_create_tag",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_ygh("The tag has been created");}
fu_qqc();}else{ var message="Unable to create tag: "+response["system_api_error"]+""; fu_ygh(message); fu_qqc();}
fu_qaf();});} function fu_asa(tag,emoji){ fu_uti(); fu_qak("container_modl","<h1>Update tag emoji</h1>",true); fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><div style="position:fixed;top:-300px;opacity:0;"><input type="text" class="input" name="emoji" size="50" maxlength="50" id="emoji_picker_input" value="'+emoji+'"></div><div style=\'text-align:center;font-size:4em;padding-top:35px;padding-bottom:35px;\' id=\'emoji_picker_current\'>'+fu_ctl(emoji)+'</div><div id=\'emoji_load_in_case\'></div><div id=\'emoji_load_in_selectors\'></div><BR><BR><input type="submit" name="submit" onclick="fu_ayz(\''+tag+'\',this.form); return false;" value="Update Emoji"></div></form></bubble>'); fu_qak("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_oal('Activities');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("🏀")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Activities</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_oal('Animals & Nature');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("🦊")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Animals & Nature</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_oal('Flags');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("🇨🇦")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Flags</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_oal('Food & Drink');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("🥤")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Food & Drink</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_oal('Objects');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("💡")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Objects</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_oal('People & Body');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("🤷‍♂️")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>People & Body</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_oal('Smileys & Emotion');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("🫣")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Smileys & Emotion</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_oal('Symbols');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("❤️")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Symbols</h3>Tap to load emojis you can pick from</bubble>"); fu_qak("emoji_load_in_selectors","<bubble onclick=\"javascript:fu_oal('Travel & Places');\" style='text-align:left;'><div style='font-size:2.3em;float:left;margin-right:15px;'>"+fu_ctl("🚲")+"</div><h3 style='margin-top: 0px;margin-bottom: 5px;'>Travel & Places</h3>Tap to load emojis you can pick from</bubble>");} function fu_dhc(tag,name){ fu_uti(); fu_qak("container_modl","<h1>Update tag name</h1>",true); fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="name" size="50" maxlength="50" placeholder="Name" value="'+name+'"><BR><BR><input type="submit" name="submit" onclick="fu_lpc(\''+tag+'\',this.form); return false;" value="Update"></div></form></bubble>');} function fu_hot(tag){ fu_uti(); fu_qak("container_modl","<h1>Delete tag</h1>",true); fu_qak("container_modl",'<bubble><div style="text-align:center;"><trans>Are you sure you want to delete the tag?</trans><BR><BR><input type="submit" name="submit" onclick="fu_bef(\''+tag+'\'); return false;" value="Delete"></div></form></bubble>');} function fu_fwm(tag,current){ fu_uti(); if (current=="true"){ fu_opw(tag,"false");} if (current=="false"){ fu_opw(tag,"true");}} function fu_ayz(tag,form){ fu_uqy(); fu_hbj(); if (Array.isArray(form)==false){ var data=fu_fhg(form);}else{ var data=form;} var postdata={}; var sendurl=""; postdata["tag"]=tag; postdata["emoji"]=ae(fu_qti(data["emoji"])); postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_conversation_update_tag",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_ygh("The tag has been updated");}
fu_qqc();}else{ var message="Unable to update tag: "+response["system_api_error"]+""; fu_ygh(message); fu_qqc();}
fu_qaf();});} function fu_lpc(tag,form){ fu_uqy(); fu_hbj(); if (Array.isArray(form)==false){ var data=fu_fhg(form);}else{ var data=form;} var postdata={}; var sendurl=""; postdata["tag"]=tag; postdata["name"]=ae(fu_qti(data["name"])); postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_conversation_update_tag",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_ygh("The tag has been updated");}
fu_qqc();}else{ var message="Unable to update tag: "+response["system_api_error"]+""; fu_ygh(message); fu_qqc();}
fu_qaf();});} function fu_opw(tag,setting){ fu_uqy(); fu_hbj(); var postdata={}; var sendurl=""; postdata["tag"]=tag; postdata["staff"]=setting; postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_conversation_update_tag",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_ygh("The tag has been updated");}
fu_qqc();}else{ var message="Unable to update tag: "+response["system_api_error"]+""; fu_ygh(message); fu_qqc();}
fu_qaf();});} function fu_bef(tag){ fu_uqy(); fu_hbj(); var postdata={}; var sendurl=""; postdata["tag"]=tag; postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_conversation_delete_tag",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_ygh("The tag has been deleted");}
fu_qqc();}else{ var message="Unable to delete tag: "+response["system_api_error"]+""; fu_ygh(message); fu_qqc();}
fu_qaf();});} function fu_qwh(){ fu_xbz(); fu_uqy(); if (su_id!=null){ fu_crv("full"); var tab="info"; var setting="all"; var arr = sp.split('/'); if (arr!=null){ if (arr[3]!=undefined){ var tab=arr[3];} if (arr[4]!=undefined){ var setting=arr[4];}}
fu_qak("container_content","<h1>Account Settings</h1>",true); fu_qak("container_content","<div class='horizontalscroll' style='margin-bottom:20px;' id='MenuSettings'></div>"); fu_qak("MenuSettings","<a href='/settings/me/info'><div class='tab'>Info</div></a>",true); fu_qak("MenuSettings","<a href='/settings/me/about'><div class='tab'>About Page</div></a>",true); fu_qak("MenuSettings","<a href='/settings/me/tags'><div class='tab'>Tags</div></a>",true); fu_qak("MenuSettings","<a href='/settings/me/security'><div class='tab'>Security</div></a>",true); fu_qak("MenuSettings","<a href='/settings/me/privacy'><div class='tab'>Privacy</div></a>",true); fu_qak("MenuSettings","<a href='/settings/me/rss'><div class='tab'>RSS Import</div></a>",true); fu_qak("MenuSettings","<a href='/settings/me/sessions'><div class='tab'>Sessions</div></a>",true); fu_qak("container_content","<div id='me_s_message'></div><div id='me_settings'><div class='loading'></div></div>"); if (tab=="info"){ fu_knz("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("me_settings"); fu_qak("me_settings","<h2>Main settings</h2>",true); su_session=response["system_account_session"]; su_alias=response["response_data"]["alias"]; su_id=response["response_data"]["id"]; su_name=response["response_data"]["name"]; su_language=response["response_data"]["language"]; fu_qex("ses_su_session", su_session); fu_qex("ses_su_alias", su_alias); fu_qex("ses_su_id", su_id); fu_qex("ses_su_name", su_name); fu_qex("ses_su_language", su_language); var langword="en"; if (response["response_data"]["language"]=="en"){ langword="English";} if (response["response_data"]["language"]=="pt"){ langword="Portuguese";} if (response["response_data"]["language"]=="es"){ langword="Spanish";} if (response["response_data"]["language"]=="zh"){ langword="Chinese";} if (response["response_data"]["language"]=="nl"){ langword="Dutch";} if (response["response_data"]["language"]=="fi"){ langword="Finnish";} if (response["response_data"]["language"]=="fr"){ langword="French";} if (response["response_data"]["language"]=="de"){ langword="German";} if (response["response_data"]["language"]=="id"){ langword="Indonesian";} if (response["response_data"]["language"]=="it"){ langword="Italian";} if (response["response_data"]["language"]=="ja"){ langword="Japanese";} if (response["response_data"]["language"]=="ko"){ langword="Korean";} if (response["response_data"]["language"]=="pl"){ langword="Polish";} if (response["response_data"]["language"]=="ru"){ langword="Russian";} if (response["response_data"]["language"]=="sv"){ langword="Swedish";} if (response["response_data"]["language"]=="uk"){ langword="Ukranian";} if (response["response_data"]["language"]=="vi"){ langword="Vietnamese";} if (response["response_data"]["language"]=="hu"){ langword="Hungarian";} if (response["response_data"]["email_verified"]=="0"){ fu_qak("me_s_message","<bubble onclick='javascript:fu_spm(\"verify\",\""+fu_qti(response["response_data"]["email_verified"])+"\")' style='margin-top:15px;' class='alt1'><strong>Tap here to verify email address</strong><BR><BR><span>Verify your email to get started, once your email is verified you will have access to more settings.<span></bubble>",true);} var controls=""; controls=""+controls+"<div class='minibubble' onclick='javascript:fu_spm(\"name\",\""+fu_qti(response["response_data"]["name"])+"\")'><strong><trans>Name</trans>:</strong> "+fu_ctl(response["response_data"]["name"])+"</div>"; controls=""+controls+"<div class='minibubble' onclick='javascript:fu_spm(\"alias\",\""+fu_qti(response["response_data"]["alias"])+"\")'><strong><trans>Alias / Username</trans>:</strong> "+response["response_data"]["alias"]+"</div>"; controls=""+controls+"<div class='minibubble' onclick='javascript:fu_spm(\"email\",\""+fu_qti(response["response_data"]["email"])+"\")'><strong><trans>Email</trans>:</strong> "+response["response_data"]["email"]+"</div>"; controls=""+controls+"<div class='minibubble' onclick='javascript:fu_spm(\"password\",\""+fu_qti("false")+"\")'><strong><trans>Password</trans>:</strong> **********</div>"; if (s_device!="NativeiOSApp"){ if (response["response_data"]["pro"]=="1"){ var prodays=fu_euw(Math.round((suc_pro_expire_seconds/86400))); controls=""+controls+"<div class='minibubble' onclick='javascript:fu_eax();'><strong><trans>Pro</trans>:</strong> <trans>You are Pro for the next "+prodays+" days!</trans></div>";}else{ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_eax();'><strong><trans>Pro</trans>:</strong> <trans>You are not Pro, become Pro and get acccess to lots of great features!</trans></div>";}}
controls=""+controls+"<div class='minibubble' onclick='javascript:fu_spm(\"bio\",\""+fu_qti(response["response_data"]["bio"])+"\")'><strong><trans>Bio</trans>:</strong> "+fu_ctl(fu_fud(fu_yaa(response["response_data"]["bio"])))+"</div>"; if (response["response_data"]["website"]!="false"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_spm(\"website\",\""+fu_qti(response["response_data"]["website"])+"\")'><strong><trans>Website</trans>:</strong> "+fu_ctl(fu_fud(fu_yaa(response["response_data"]["website"])))+"</div>";}else{ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_spm(\"website\",\""+fu_qti(response["response_data"]["website"])+"\")'><strong><trans>Website</trans>:</strong> <trans>Not set.</trans></div>";} if (response["response_data"]["pronouns"]!="false"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_spm(\"pronouns\",\""+fu_qti(response["response_data"]["pronouns"])+"\")'><strong><trans>Pronouns</trans>:</strong> "+fu_ctl(fu_fud(fu_yaa(response["response_data"]["pronouns"])))+"</div>";}else{ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_spm(\"pronouns\",\""+fu_qti(response["response_data"]["pronouns"])+"\")'><strong><trans>Pronouns</trans>:</strong> <trans>Not set.</trans></div>";} if (response["response_data"]["feed"]!="false"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_spm(\"feed\",\""+fu_qti(response["response_data"]["feed"])+"\")'><strong><trans>Feed Filter</trans>:</strong> "+response["response_data"]["feed"]+"</div>";}else{ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_spm(\"feed\",\""+fu_qti(response["response_data"]["feed"])+"\")'><strong><trans>Feed Filter</trans>:</strong> all</div>";}
controls=""+controls+"<div class='minibubble' onclick='javascript:fu_spm(\"language\",\""+fu_qti(response["response_data"]["language"])+"\")'><strong><trans>Language</trans>:</strong> "+langword+" / "+response["response_data"]["language"]+"</div>"; if (response["response_data"]["country"]!="false"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_spm(\"country\",\""+fu_qti(response["response_data"]["country"])+"\")'><strong><trans>Country</trans>:</strong> "+response["response_data"]["country"]+"</div>"; if (response["response_data"]["state"]!="false"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_spm(\"state\",\""+fu_qti(response["response_data"]["state"])+"\")'><strong><trans>Province</trans>:</strong> "+response["response_data"]["state"]+"</div>";}else{ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_spm(\"state\",\""+fu_qti(response["response_data"]["state"])+"\")'><strong><trans>Province</trans>:</strong> <trans>Not set.</trans></div>";}}else{ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_spm(\"country\",\""+fu_qti(response["response_data"]["country"])+"\")'><strong><trans>Country</trans>:</strong> <trans>Not set.</trans></div>";}
fu_qak("me_settings","<bubble>"+controls+"</bubble>"); if (response["response_data"]["email_verified"]=="1"){ var controls_profiledes=""; controls_profiledes=""+controls_profiledes+"<div class='minibubble' onclick='javascript:fu_spm(\"avatar\",\""+fu_qti(response["response_data"]["avatar"])+"\")'><strong><trans>Avatar</trans>:</strong> <img source='"+response["response_data"]["avatar"]+"' class='optimizer_img' style='display: block;margin:0px auto;max-height:100px;max-width: 100px;border-radius:100%;'></div>"; controls_profiledes=""+controls_profiledes+"<div class='minibubble' onclick='javascript:fu_spm(\"header\",\""+fu_qti(response["response_data"]["header"])+"\")'><strong><trans>Header</trans>:</strong> <img source='"+response["response_data"]["header"]+"' class='optimizer_img' style='display: block;margin:0px auto;max-width:300px;'></div>"; fu_qak("me_settings","<h2><trans>Profile Design</trans></h2><bubble><trans>To update any option or upload media just tap any of the boxes below. Header images for accounts are shown in a 21:9 aspect.</trans><BR><BR>"+controls_profiledes+"</bubble>"); var controls_appsetting=""; var controls_appsettingcolour=""; var colouroptions = ['false','155,82,246','225,127,163','216,106,90','190,78,50','228,157,118','243,199,116','108,177,138','80,131,97','137,180,235','88,134,237','68,112,218']; colouroptions.forEach(function(element, index){ var previewcol=s_accent; if (element!="false"){ previewcol=element;}
controls_appsettingcolour=""+controls_appsettingcolour+"<div class='minibubble' onclick='javascript:fu_zzy(\"app_colour\",[\""+element+"\"]);s_app_colour=\""+element+"\";fu_rcg(\""+s_mode+"\");' style='width: auto;display: inline-block;margin:5px;background:rgb("+previewcol+") !important;width: 60px;height: 60px;padding: 0px;color:rgba(255,255,255,0) !important;border-radius: 100%;'>X</div>";}); controls_appsetting=""+controls_appsetting+"<div class='minibubble'>"+controls_appsettingcolour+"</div>"; if (response["response_data"]["app_stats"]=="false"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_zzy(\"app_stats\",[\"true\"]);s_app_stats=\"true\";'><strong><trans>Stats</trans>:</strong> "+fu_ctl('👍')+"&ensp;<trans>No (help your sanity and keep stats hidden)</trans></div>";} if (response["response_data"]["app_stats"]=="true"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_zzy(\"app_stats\",[\"false\"]);s_app_stats=\"false\";'><strong><trans>Stats</trans>:</strong> "+fu_ctl('👎')+"&ensp;<trans>Yes</trans></div>";} if (response["response_data"]["app_reducemotion"]=="false"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_zzy(\"app_reducemotion\",[\"true\"]);s_app_reducemotion=\"true\";fu_rcg(\""+s_mode+"\");'><strong><trans>Reduce Motion</trans>:</strong> "+fu_ctl('❎')+"&ensp;<trans>No</trans></div>";} if (response["response_data"]["app_reducemotion"]=="true"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_zzy(\"app_reducemotion\",[\"false\"]);s_app_reducemotion=\"false\";fu_rcg(\""+s_mode+"\");'><strong><trans>Reduce Motion</trans>:</strong> "+fu_ctl('✅')+"&ensp;<trans>Yes</trans></div>";} if (response["response_data"]["app_hidesuggestions"]=="false"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_zzy(\"app_hidesuggestions\",[\"true\"]);s_app_hidesuggestions=\"true\";fu_rcg(\""+s_mode+"\");'><strong><trans>Hide Suggestions</trans>:</strong> "+fu_ctl('👍')+"&ensp;<trans>No</trans></div>";} if (response["response_data"]["app_hidesuggestions"]=="true"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_zzy(\"app_hidesuggestions\",[\"false\"]);s_app_hidesuggestions=\"false\";fu_rcg(\""+s_mode+"\");'><strong><trans>Hide Suggestions</trans>:</strong> "+fu_ctl('👎')+"&ensp;<trans>Yes</trans></div>";} if (response["response_data"]["app_forcedisplay"]=="false"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_zzy(\"app_forcedisplay\",[\"dark\"]);s_app_forcedisplay=\"dark\";fu_rcg(\""+s_mode+"\");'><strong><trans>Display Mode</trans>:</strong> "+fu_ctl('🌤️')+"&ensp;<trans>Auto</trans></div>";} if (response["response_data"]["app_forcedisplay"]=="dark"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_zzy(\"app_forcedisplay\",[\"light\"]);s_app_forcedisplay=\"light\";fu_rcg(\""+s_mode+"\");'><strong><trans>Display Mode</trans>:</strong> "+fu_ctl('☁️')+"&ensp;<trans>Dark</trans></div>";} if (response["response_data"]["app_forcedisplay"]=="light"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_zzy(\"app_forcedisplay\",[\"false\"]);s_app_forcedisplay=\"false\";fu_rcg(\""+s_mode+"\");'><strong><trans>Display Mode</trans>:</strong> "+fu_ctl('☀️')+"&ensp;<trans>Light</trans></div>";} if (response["response_data"]["app_scaledisplay"]=="false"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_zzy(\"app_scaledisplay\",[\"small\"]);s_app_scaledisplay=\"small\";fu_rcg(\""+s_mode+"\");'><strong><trans>Scale Mode</trans>:</strong> "+fu_ctl('🧐')+"&ensp;<trans>Off</trans></div>";} if (response["response_data"]["app_scaledisplay"]=="small"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_zzy(\"app_scaledisplay\",[\"medium\"]);s_app_scaledisplay=\"medium\";fu_rcg(\""+s_mode+"\");'><strong><trans>Scale Mode</trans>:</strong> "+fu_ctl('🧐')+"&ensp;<trans>Small</trans></div>";} if (response["response_data"]["app_scaledisplay"]=="medium"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_zzy(\"app_scaledisplay\",[\"large\"]);s_app_scaledisplay=\"large\";fu_rcg(\""+s_mode+"\");'><strong><trans>Scale Mode</trans>:</strong> "+fu_ctl('🧐')+"&ensp;<trans>Medium</trans></div>";} if (response["response_data"]["app_scaledisplay"]=="large"){ controls_appsetting=""+controls_appsetting+"<div class='minibubble' onclick='javascript:fu_zzy(\"app_scaledisplay\",[\"false\"]);s_app_scaledisplay=\"false\";fu_rcg(\""+s_mode+"\");'><strong><trans>Scale Mode</trans>:</strong> "+fu_ctl('🧐')+"&ensp;<trans>Large</trans></div>";}
fu_qak("me_settings","<h2><trans>App Settings</trans></h2><bubble>"+controls_appsetting+"</bubble>"); var controls_emails=""; if (response["response_data"]["email_updates"]=="0"){ controls_emails=""+controls_emails+"<div class='minibubble' onclick='javascript:fu_zzy(\"email_updates\",[\"on\"])'><strong><trans>Updates</trans>:</strong> "+fu_ctl('👎')+"&ensp;<trans>No</trans></div>";} if (response["response_data"]["email_updates"]=="1"){ controls_emails=""+controls_emails+"<div class='minibubble' onclick='javascript:fu_zzy(\"email_updates\",[\"off\"])'><strong><trans>Updates</trans>:</strong> "+fu_ctl('👍')+"&ensp;<trans>Yes</trans></div>";} if (response["response_data"]["email_notifications"]=="0"){ controls_emails=""+controls_emails+"<div class='minibubble' onclick='javascript:fu_zzy(\"email_notifications\",[\"on\"])'><strong><trans>Notifications</trans>:</strong> "+fu_ctl('👎')+"&ensp;<trans>No</trans></div>";} if (response["response_data"]["email_notifications"]=="1"){ controls_emails=""+controls_emails+"<div class='minibubble' onclick='javascript:fu_zzy(\"email_notifications\",[\"off\"])'><strong><trans>Notifications</trans>:</strong> "+fu_ctl('👍')+"&ensp;<trans>Yes</trans></div>";} if (response["response_data"]["email_messages"]=="0"){ controls_emails=""+controls_emails+"<div class='minibubble' onclick='javascript:fu_zzy(\"email_messages\",[\"on\"])'><strong><trans>Messages</trans>:</strong> "+fu_ctl('👎')+"&ensp;<trans>No</trans></div>";} if (response["response_data"]["email_messages"]=="1"){ controls_emails=""+controls_emails+"<div class='minibubble' onclick='javascript:fu_zzy(\"email_messages\",[\"off\"])'><strong><trans>Messages</trans>:</strong> "+fu_ctl('👍')+"&ensp;<trans>Yes</trans></div>";}
fu_qak("me_settings","<h2><trans>Emails</trans></h2><bubble><trans>The email settings for what emails we will send you based on events.</trans><BR><BR>"+controls_emails+"</bubble>"); var controls_special=""; controls_special=""+controls_special+"<div class='minibubble' onclick='javascript:fu_euy(\"/delete\")'>"+fu_ctl('🗑️')+"&ensp;<trans>Delete account</trans></div>"; fu_qak("me_settings","<h2><trans>Special</trans></h2><bubble>"+controls_special+"</bubble>");}
fu_qaf();}else{ fu_rfy("Not able to load settings");}});} if (tab=="about"){ fu_knz("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["email_verified"]=="1"){ fu_oen("me_settings"); var controls_about=""; if (response["response_data"]["about"]==false){ var contsabout="<trans>No about page content set.</trans>";}else{ var contsabout=response["response_data"]["about"];}
contsabout=fu_hww(contsabout); contsabout=fu_maf(contsabout); contsabout=fu_nns(contsabout); contsabout=fu_ctl(contsabout); contsabout=fu_ltt(contsabout); controls_about=""+contsabout+""; fu_qak("me_settings","<h2>About Page</h2>",true); fu_qak("me_settings","<bubble><span>The about page allows for extended content like a conversation. You can have multiple links, more mentions, formatting like lists and more.</span> <a href=\"/help/formatting\">You can also view the formating help page</a>.<BR><BR><span>This is also used for your personal site.</span> <a href='/home/personal_site'>Learn more about that here.</a><BR><BR><a href='javascript:fu_spm(\"about\",\""+fu_qti(response["response_data"]["about"])+"\")'><div class='button'>Edit content</div></a></bubble>",true); fu_qak("me_settings","<bubble class='conversation' style='padding-top:0px;padding-bottom:0px;'><div class='content'>"+controls_about+"</div></bubble>");}else{ fu_oen("me_settings"); fu_qak("me_settings","<h2>About Page</h2><bubble>You need to verify your email first.</bubble>",true);}
fu_qaf();}else{ fu_rfy("Not able to load settings");}});} if (tab=="tags"){ fu_knz("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["email_verified"]=="1"){ fu_oen("me_settings"); var contentstags=""; fu_qak("me_settings","<h2>Tags</h2><bubble><span>Tags allow for better conversation sorting, if you are Pro you can create up to 10 tags on your account.</span><BR><BR><div id='s_create_new_tag'></div></bubble>",true); var tagshavenow=0; if (response["response_data"]["tags"]!=false){ fu_lgl(response["response_data"]["tags"], function(select){ tagshavenow=tagshavenow+1;});} if (response["response_data"]["pro"]=="1"){ if (tagshavenow>=10){ fu_qak("s_create_new_tag",""+tagshavenow+"/10");}else{ fu_qak("s_create_new_tag","<a href='javascript:fu_xew(\"false\")'><div class='button'>New tag</div></a> "+tagshavenow+"/10");}}else{ fu_qak("s_create_new_tag","0/0");} if (response["response_data"]["tags"]==false){ contentstags="<bubble class='alt1'><trans>No tags have been created yet</trans></bubble>";}else{ fu_lgl(response["response_data"]["tags"], function(select){ contentstags=""+contentstags+"<bubble><div style=\"font-size:2.3em;float:left;margin-right:15px;\">"+fu_ctl(response["response_data"]["tags"][""+select+""]["emoji"])+"</div><h3 style=\"margin-top: 0px;margin-bottom: 5px;font-weight:400;\">"+fu_ctl(response["response_data"]["tags"][""+select+""]["name"])+"</h3><div style='font-size: 0.8em;'><a href='javascript:fu_asa(\""+response["response_data"]["tags"][""+select+""]["id"]+"\",\""+response["response_data"]["tags"][""+select+""]["emoji"]+"\")'><div class='button'><trans>Change Emoji</trans></div></a> <a href='javascript:fu_dhc(\""+response["response_data"]["tags"][""+select+""]["id"]+"\",\""+response["response_data"]["tags"][""+select+""]["name"]+"\")'><div class='button'><trans>Change Name</trans></div></a> <a href='javascript:fu_hot(\""+response["response_data"]["tags"][""+select+""]["id"]+"\")'><div class='button'><trans>Delete</trans></div></a></div></bubble>";});}
fu_qak("me_settings",""+contentstags+""); fu_qaf();}else{ fu_rfy("Not able to load settings");}}else{ fu_oen("me_settings"); fu_qak("me_settings","<h2>Tags</h2><bubble>You need to verify your email first.</bubble>",true);}});} if (tab=="privacy"){ fu_knz("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["email_verified"]=="1"){ fu_oen("me_settings"); var controls_privacy=""; if (response["response_data"]["hidden"]=="1"){ controls_privacy=""+controls_privacy+"<div class='minibubble' onclick='javascript:fu_zzy(\"hidden\",[\"off\"])'><strong>Show in explore:</strong> "+fu_ctl('👎')+"&ensp;No</div>";} if (response["response_data"]["hidden"]=="0"){ controls_privacy=""+controls_privacy+"<div class='minibubble' onclick='javascript:fu_zzy(\"hidden\",[\"on\"])'><strong>Show in explore:</strong> "+fu_ctl('👍')+"&ensp;Yes</div>";} if (response["response_data"]["invisible"]=="1"){ controls_privacy=""+controls_privacy+"<div class='minibubble' onclick='javascript:fu_zzy(\"invisible\",[\"off\"])'><strong>Show online status:</strong> "+fu_ctl('👎')+"&ensp;No</div>";} if (response["response_data"]["invisible"]=="0"){ controls_privacy=""+controls_privacy+"<div class='minibubble' onclick='javascript:fu_zzy(\"invisible\",[\"on\"])'><strong>Show online status:</strong> "+fu_ctl('👍')+"&ensp;Yes</div>";}
fu_qak("me_settings","<h2>Privacy</h2>",true); fu_qak("me_settings","<bubble><span>We have a few options for now, to control if you show in the who to follow and explore page, or if you are always seen as offline or invisible.</span><BR><BR>"+controls_privacy+"</bubble>",true);}else{ fu_oen("me_settings"); fu_qak("me_settings","<h2>Privacy</h2><bubble>You need to verify your email first.</bubble>",true);}
fu_qaf();}else{ fu_rfy("Not able to load settings");}});} if (tab=="security"){ fu_knz("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["email_verified"]=="1"){ fu_oen("me_settings"); fu_qak("me_settings","<h2>Security</h2><bubble>Security settings like 2FA can be found here but keep in mind sessions (active logins) can be found on the sessions page.</bubble>",true); var controls_2fa=""; if (response["response_data"]["2fa_type"]!="email"){ if (response["response_data"]["2fa_type"]=="off"){ if (response["response_data"]["2fa_validated"]!="0"){ controls_2fa=""+controls_2fa+"<div class='minibubble' onclick='javascript:fu_zzy(\"2fa_app\",[\"on\"])'><strong>2FA App:</strong> "+fu_ctl('👎')+"&ensp;No</div>";}else{ controls_2fa=""+controls_2fa+"<div class='minibubble' onclick='fu_spm(\"2fa_validate\",\""+fu_qti(response["response_data"]["2fa_validated"])+"\")'><strong>2FA App:</strong> "+fu_ctl('👎')+"&ensp;No (setup)</div>";}} if (response["response_data"]["2fa_type"]=="app"){ controls_2fa=""+controls_2fa+"<div class='minibubble' onclick='javascript:fu_zzy(\"2fa_app\",[\"off\"])'><strong>2FA App:</strong> "+fu_ctl('👍')+"&ensp;Yes</div>";}} if (response["response_data"]["2fa_type"]!="app"){ if (response["response_data"]["2fa_type"]=="off"){ controls_2fa=""+controls_2fa+"<div class='minibubble' onclick='javascript:fu_zzy(\"2fa_email\",[\"on\"])'><strong>2FA Email:</strong> "+fu_ctl('👎')+"&ensp;No</div>";} if (response["response_data"]["2fa_type"]=="email"){ controls_2fa=""+controls_2fa+"<div class='minibubble' onclick='javascript:fu_zzy(\"2fa_email\",[\"off\"])'><strong>2FA Email:</strong> "+fu_ctl('👍')+"&ensp;Yes</div>";}} var controls_2fa_access=""; if (response["response_data"]["2fa_validated"]!="0"){ controls_2fa_access="<a href='javascript:fu_spm(\"2fa_validate\",\""+fu_qti(response["response_data"]["2fa_validated"])+"\")'><trans>View your 2FA setup QR code by tapping here</trans></a>.";}
fu_qak("me_settings","<h2><trans>2FA</trans></h2><bubble><trans>2FA is a great way to protect your account, but if you lose access to your 2FA method you will be locked out. If you do get locked out contact us, we can help switch to email 2FA from app 2FA as long as we can verify who you are.</trans> "+controls_2fa_access+"<BR><BR>"+controls_2fa+"</bubble>");}else{ fu_oen("me_settings"); fu_qak("me_settings","<h2><trans>Security</trans></h2><bubble><trans>You need to verify your email first.</trans></bubble>");}
fu_qaf();}else{ fu_rfy("Not able to load settings");}});} if (tab=="rss"){ fu_knz("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["email_verified"]=="1"){ fu_oen("me_settings"); var controls_rssimport=""; fu_lgl(response["response_data"]["rssimports"], function(id){ var currentitem=""; var cur_id=response["response_data"]["rssimports"][""+id+""]["id"]; var cur_active=response["response_data"]["rssimports"][""+id+""]["info_active"]; var cur_url=response["response_data"]["rssimports"][""+id+""]["info_url"]; var cur_title=response["response_data"]["rssimports"][""+id+""]["info_title"]; var cur_description=response["response_data"]["rssimports"][""+id+""]["info_description"]; var cur_template=response["response_data"]["rssimports"][""+id+""]["info_template"]; var cur_cafe=response["response_data"]["rssimports"][""+id+""]["info_cafe"]; currentitem=""+currentitem+"</bubble><bubble><div>"; currentitem=""+currentitem+"<div style='float:right;padding-left:10px;padding-bottom:10px;'><a href=\"javascript:fu_yjc('"+cur_id+"')\"><trans>Delete</trans></a></div><h3 style='margin-top: 0px;margin-bottom:5px;'>"+cur_title+"</h3><strong>"+cur_url+"</strong><BR><BR>"+cur_description+"<BR><BR>"; if (cur_active=="0"){ currentitem=""+currentitem+"<div class='minibubble' onclick='javascript:fu_ofy(\""+cur_id+"\",\"active\",[\"on\"]);'><strong><trans>Active</trans>:</strong> "+fu_ctl('👎')+"&ensp;<trans>No</trans></div>";}else{ currentitem=""+currentitem+"<div class='minibubble' onclick='javascript:fu_ofy(\""+cur_id+"\",\"active\",[\"off\"]);'><strong><trans>Active</trans>:</strong> "+fu_ctl('👍')+"&ensp;<trans>Yes</trans></div>";}
currentitem=""+currentitem+"<div class='minibubble' onclick='javascript:fu_mkt(\""+cur_id+"\",\"template\",\""+cur_template+"\");'><strong><trans>Template</trans>:</strong> "+cur_template+"</div>"; if (cur_cafe=="false"){ currentitem=""+currentitem+"<div class='minibubble' onclick='javascript:fu_mkt(\""+cur_id+"\",\"cafe\",\""+cur_cafe+"\");'><strong><trans>Conversation location</trans>:</strong> <trans>Personal Café</trans></div>";}else{ currentitem=""+currentitem+"<div class='minibubble' onclick='javascript:fu_mkt(\""+cur_id+"\",\"cafe\",\""+cur_cafe+"\");'><strong><trans>Conversation location</trans>:</strong> "+fu_ctl(fu_fud(fu_yaa("!"+cur_cafe+"")))+"</div>";}
currentitem=""+currentitem+"<div id='preview_rssimport_"+cur_id+"'></div>"; currentitem=""+currentitem+"</div>"; controls_rssimport=""+controls_rssimport+""+currentitem+"";}); if (controls_rssimport==""){ controls_rssimport="<BR><BR><bubble class=\"alt1\"><trans>You have no RSS import rules setup.</trans></bubble>";}
fu_qak("me_settings","<h2><trans>RSS Imports</trans></h2><bubble><trans>RSS imports is an advanced feature that once setup makes Hey.Café create conversations based on RSS feed items. RSS feeds update only once per hour unless your account is Pro.</trans><BR><BR><a href='javascript:fu_pss();'><div class='button'><trans>Create new RSS import rule</trans></div></a>"+controls_rssimport+"</bubble>"); fu_lgl(response["response_data"]["rssimports"], function(id){ var cur_id=response["response_data"]["rssimports"][""+id+""]["id"]; var cur_url=response["response_data"]["rssimports"][""+id+""]["info_url"]; var cur_template=response["response_data"]["rssimports"][""+id+""]["info_template"]; fu_knz("https://"+s_hostname+"/get_account_rssimport_preview?query="+cur_id+"",function(result){ var rssresponse = fu_leh(result); if (rssresponse["system_api_error"]==false){ if (rssresponse["response_data"]["channel"]!=undefined){ if (rssresponse["response_data"]["channel"]["title"]!=undefined){ if (rssresponse["response_data"]["channel"]["item"]!=false){ fu_qak("preview_rssimport_"+cur_id+"","<BR><BR><strong><trans>Preview of template</trans></strong><BR>"); var numbertoshow=8; fu_lgl(rssresponse["response_data"]["channel"]["item"], function(id){ if (numbertoshow>=1){ numbertoshow=numbertoshow-1; fu_rqy(cur_id,rssresponse["response_data"]["channel"]["item"][""+id+""],cur_template);}});}}else{ fu_qak("preview_rssimport_"+cur_id+"","<trans>Not able to load RSS feed to generate a preview.</trans>");}}else{ fu_qak("preview_rssimport_"+cur_id+"","<trans>Not able to load RSS feed to generate a preview.</trans>");}}else{ fu_qak("preview_rssimport_"+cur_id+"","<trans>Not able to load RSS feed to generate a preview.</trans>");}});});}else{ fu_oen("me_settings"); fu_qak("me_settings","<h2><trans>RSS Imports</trans></h2><bubble><trans>You need to verify your email first.</trans></bubble>");}
fu_qaf();}else{ fu_rfy("Not able to load settings");}});} if (tab=="sessions"){ fu_knz("https://"+s_hostname+"/get_account_sessions?query="+su_id+"&count=200",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("me_settings"); fu_qak("me_settings","<h2>Sessions</h2>",true); fu_qak("me_settings","<bubble><trans>Sessions are what gives you app access to Hey.Café and lets applications use your account if you give it API access.</trans><BR><BR><a href=\"javascript:fu_hcs();\"><div class='button'><trans>Create new API key</trans></div></a></bubble>"); fu_qak("me_settings","<div id='SettingsSessions'></div>"); if (response["response_data"]["sessions"]!=false){ fu_lgl(response["response_data"]["sessions"], function(id){ var itemdomain="hey.cafe"; if (response["response_data"]["sessions"][""+id+""]["info_domain"]!="false"){ itemdomain=response["response_data"]["sessions"][""+id+""]["info_domain"];}
fu_qak("SettingsSessions","<bubble><a style='float:right;' href=\"javascript:fu_dvj('"+response["response_data"]["sessions"][""+id+""]["id"]+"');\"><trans>Remove</trans></a><h3 style='margin-top:0px;'>"+response["response_data"]["sessions"][""+id+""]["info_publisher"]+" / "+response["response_data"]["sessions"][""+id+""]["info_reason"]+"</h3><img source='https://logo.clearbit.com/"+itemdomain+"' class='avatar optimizer_img' style='float:left;height:85px;width:85px;margin-right:15px;border-radius:5px;'><div style='margin-bottom:5px;'><strong>Code:</strong> <code>"+response["response_data"]["sessions"][""+id+""]["id"]+"</code></div><div style='margin-bottom:5px;'><strong>Type:</strong> <code>"+response["response_data"]["sessions"][""+id+""]["info_type"]+"</code></div><div style='margin-bottom:5px;'><strong>Age:</strong> <code>"+fu_hms(response["response_data"]["sessions"][""+id+""]["date_created"])+"</code></div><div style='margin-bottom:5px;'><strong>IP:</strong> <code>"+response["response_data"]["sessions"][""+id+""]["info_ip"]+"</code></div><div style='margin-bottom:5px;'><strong>Useragent:</strong> <code>"+response["response_data"]["sessions"][""+id+""]["info_useragent"]+"</code></div></bubble>");});}
fu_qaf();}else{ fu_rfy("Not able to load settings");}});}} } function fu_rqy(cur_id,data,template){ var currentitem=""; if (data["title"]!=undefined){ template=template.replace("[title]", data["title"]);}else{ template=template.replace("[title]", "");} if (data["description"]!=undefined){ template=template.replace("[description]", data["description"]);}else{ template=template.replace("[description]", "");} if (data["link"]!=undefined){ template=template.replace("[link]", data["link"]);}else{ template=template.replace("[link]", "");} if (data["image"]!=undefined){ if (Array.isArray(data["image"])==true){ var images=""; fu_lgl(data["image"], function(id){ images=""+images+" "+data["image"][""+id+""]+"";}); template=template.replace("[image]", images);}else{ template=template.replace("[image]", data["image"]);}}else{ template=template.replace("[image]", "");} var matches = template.match(/\[linkonly\:if\:not\:([^\n\]]+)\]/gi); fu_lgl(matches, function(id){ var incldata=matches[""+id+""]; var reallink=data["link"]; var result = incldata.match(/\[linkonly\:if\:not\:([^\n\]]+)\]/); if (reallink.includes(result[1])){ template=template.replace(result[0], "");}else{ template=data["link"];}}); var matches = template.match(/\[linkonly\:if\:([^\n\]]+)\]/gi); fu_lgl(matches, function(id){ var incldata=matches[""+id+""]; var reallink=data["link"]; var result = incldata.match(/\[linkonly\:if\:([^\n\]]+)\]/); if (reallink.includes(result[1])){ template=data["link"];}else{ template=template.replace(result[0], "");}}); if (su_pro==true){ template=fu_fxz(template,s_char_pro);}else{ template=fu_fxz(template,s_char_reg);}
template=fu_hww(template); template=fu_maf(template); template=fu_nns(template); template=fu_ctl(template); template=fu_ltt(template); currentitem=""+currentitem+"<div class='conversation'><div class=\"minibubble\" style=\"padding-bottom: 0px;padding-top: 0px;margin-top: 10px;margin-bottom:10px;\">"; currentitem=""+currentitem+""+template+""; currentitem=""+currentitem+"</div></div>"; fu_qak("preview_rssimport_"+cur_id+"",currentitem);} function fu_hcs(name,value){ fu_uti(); fu_qak("container_modl","<h1>New Session / API Key</h1>",true); fu_qak("container_modl",'<bubble><trans>Once a session API key is created it can be used to access the same backend the main application can access with the key being provided in a header. You can read more on the Wave site. Warning keys give global account access.</trans><BR><BR><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="publisher" size="50" maxlength="200" placeholder="Publisher / App"><BR><input type="text" class="input" name="reason" size="50" maxlength="200" placeholder="Use / Reason"><BR><BR><input type="submit" name="submit" onclick="fu_wdb(this.form); return false;" value="Create"></div></form></bubble>');} function fu_wdb(form){ fu_uqy(); fu_hbj(); if (Array.isArray(form)==false){ var data=fu_fhg(form);}else{ var data=form;} var postdata={}; var sendurl=""; postdata["publisher"]=ae(fu_qti(data["publisher"])); postdata["reason"]=ae(fu_qti(data["reason"])); postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_session_create"; fu_hhf(sendurl,postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_ygh("New API session key has been created"); fu_qqc();}else{ fu_ygh("Unable to create session");}
fu_qaf();});} function fu_dvj(session){ fu_uqy(); fu_hbj(); var postdata={}; var sendurl=""; postdata["code"]=session; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_session_remove"; fu_hhf(sendurl,postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_ygh("Session removed");}
fu_qqc();}else{ fu_ygh("Unable to remove session");}
fu_qaf();});} function fu_pss(name,value){ fu_uti(); fu_qak("container_modl","<h1>New RSS import rule</h1>",true); fu_qak("container_modl",'<bubble><trans>Once you submit the URL for the RSS feed you will have the ability to update settings and see a import preview before items are imported.</trans><BR><BR><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="url" size="50" maxlength="255" placeholder="URL"><BR><BR><input type="submit" name="submit" onclick="fu_tvj(this.form); return false;" value="Create"></div></form></bubble>');} function fu_tvj(form){ fu_uqy(); fu_hbj(); if (Array.isArray(form)==false){ var data=fu_fhg(form);}else{ var data=form;} var postdata={}; var sendurl=""; postdata["url"]=data["url"]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_rssimport_create"; fu_hhf(sendurl,postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_ygh("RSS import rule created");}
fu_qqc();}else{ fu_ygh("Unable to create RSS import rule");}
fu_qaf();});} function fu_yjc(resource){ fu_uqy(); fu_hbj(); var postdata={}; var sendurl=""; postdata["resource"]=resource; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_rssimport_delete"; fu_hhf(sendurl,postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_ygh("RSS import rule deleted");}
fu_qqc();}else{ fu_ygh("Unable to delete RSS import rule");}
fu_qaf();});} function fu_mkt(resource,name,value){ fu_uti(); if (name=="template"){ fu_qak("container_modl","<h1>Edit template</h1>",true); fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea class="input fullsize" name="template" size="50" maxlength="200" placeholder="Template (default is [title] [link])">'+value+'</textarea><BR><BR><input type="submit" name="submit" onclick="fu_ofy(\''+resource+'\',\'template\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="cafe"){ fu_qak("container_modl","<h1>Pick conversation location</h1>",true); fu_knz("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_qak("container_modl","<bubble onclick=\"javascript:fu_ofy('"+resource+"','cafe',['false']);\"><img source='"+response["response_data"]["avatar"]+"' class='avatar optimizer_img' nowait='true' style='float:left;height:60px;width:60px;margin-right:15px;'><h2 style='margin-top: 5px;margin-bottom: 7px;'>"+fu_ctl(response["response_data"]["name"])+"</h2>Post to my personal café.</bubble>"); fu_knz("https://"+s_hostname+"/get_account_cafes?query="+su_id+"&count=1000",function(result){ var caferesponse = fu_leh(result); if (caferesponse["system_api_error"]==false){ if (caferesponse["response_data"]["cafes"]!=false){ fu_lgl(caferesponse["response_data"]["cafes"], function(id){ if (caferesponse["response_data"]["cafes"][""+id+""]["you_member"]==true){ if (caferesponse["response_data"]["cafes"][""+id+""]["member_create"]=="1"){ fu_qak("container_modl","<bubble onclick='javascript:fu_ofy(\""+resource+"\",\"cafe\",[\""+id+"\"]);'><img source='"+caferesponse["response_data"]["cafes"][""+id+""]["avatar"]+"' nowait='true' class='avatar optimizer_img' style='float:left;height:60px;width:60px;margin-right:15px;'><h2 style='margin-top: 5px;margin-bottom: 7px;'>"+fu_ctl(caferesponse["response_data"]["cafes"][""+id+""]["name"])+"</h2>Post to the "+caferesponse["response_data"]["cafes"][""+id+""]["alias"]+" café.</bubble>");}else{ if (caferesponse["response_data"]["cafes"][""+id+""]["you_admin"]==true){ fu_qak("container_modl","<bubble onclick='javascript:fu_ofy(\""+resource+"\",\"cafe\",[\""+id+"\"]);'><img source='"+caferesponse["response_data"]["cafes"][""+id+""]["avatar"]+"' nowait='true' class='avatar optimizer_img' style='float:left;height:60px;width:60px;margin-right:15px;'><h2 style='margin-top: 5px;margin-bottom: 7px;'>"+fu_ctl(caferesponse["response_data"]["cafes"][""+id+""]["name"])+"</h2>Post to the "+caferesponse["response_data"]["cafes"][""+id+""]["alias"]+" café.</bubble>");}} }});}
fu_qaf();}else{ fu_rfy("Not able to load your cafe data to generate the page...");}});}else{ fu_rfy("Not able to load your user data to generate the page...");}});}} function fu_ofy(resource,name,form){ fu_uqy(); fu_hbj(); if (Array.isArray(form)==false){ var data=fu_fhg(form);}else{ var data=form;} var postdata={}; var sendurl=""; postdata["resource"]=resource; if (name=="active"){ postdata["mode"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_rssimport_update_active";} if (name=="cafe"){ postdata["cafe"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_rssimport_update_cafe";} if (name=="template"){ postdata["template"]=ae(fu_qti(data["template"])); postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_rssimport_update_template";}
fu_hhf(sendurl,postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_ygh("Updated");} if (response["response_data"]=="taken"){ fu_ygh("This has been taken already");}
fu_qqc();}else{ fu_ygh("Unable to save data");}
fu_qaf();});} function fu_eax(featurelock){ fu_uti(); fu_uqy(); if (featurelock==undefined){ featurelock=false;} if (su_id!=null){ fu_qak("container_modl","<h1>Pro</h1>",true); fu_knz("https://"+s_hostname+"/get_account_info?query="+su_id+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["pro"]=="1"){ var prodays=fu_euw(Math.round((suc_pro_expire_seconds/86400))); fu_qak("container_modl","<bubble><trans>Wait... You aready have Pro! You are Pro for the next "+prodays+" days!</trans><BR><BR><trans>You now have access to a bunch of great features. To learn more about what you have access just visit the page linked below.</trans><BR><BR><a href='/help/goto/pro'><trans>What you get with pro.</trans></a><BR><BR><trans>Thank you so much! Pro helps us maintain the service and provide everything ad free for everyone!</trans></bubble>"); if (featurelock==true){ fu_qak("container_modl","<bubble class=\"alt1\">Hey you already have Pro and are trying to access a Pro function, all you need to do is refresh the page.</bubble>",true);}}else{ var supporterbuttons="<BR><BR><trans>Take your profile to the next level with Pro!</trans> <a href='/help/goto/pro'><trans>Learn more about what you get with Pro.</trans></a><BR><BR>"; if (s_device!="NativeiOSApp"){ if (response["response_data"]["country"]!="false" && response["response_data"]["country"]!="Russia" && response["response_data"]["state"]!="false"){ supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_ctl("☕️")+"<BR>2 Months</div>$4.98 USD</div><div class='minibubble' style='margin:5px;text-align:center;' onclick=\"javascript:fu_hbj(); window.open('https://lammcs.ca/service_purchase/?service=heycafe&country="+response["response_data"]["country"]+"&state="+response["response_data"]["state"]+"&amount=4.98&username="+response["response_data"]["alias"]+"&good=true', '_blank');\"><trans>Purchase</trans></div></div>"; supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_ctl("☕️")+"<BR>1 Year</div>$24.98 USD</div><div class='minibubble' style='margin:5px;text-align:center;' onclick=\"javascript:fu_hbj(); window.open('https://lammcs.ca/service_purchase/?service=heycafe&country="+response["response_data"]["country"]+"&state="+response["response_data"]["state"]+"&amount=24.98&username="+response["response_data"]["alias"]+"&good=true', '_blank');\"><trans>Purchase</trans></div></div>";}else{ supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_ctl("☕️")+"<BR>2 Months</div>$4.98 USD</div><div class='minibubble' style='margin:5px;text-align:center;'>"+fu_ctl("🔒")+" <trans>Purchase</trans></div></div>"; supporterbuttons=""+supporterbuttons+"<div style='width:50%;display:inline-block;'><div class='minibubble' style='margin:5px;text-align:center;'><div style='font-size:2em;'>"+fu_ctl("☕️")+"<BR>1 Year</div>$24.98 USD</div><div class='minibubble' style='margin:5px;text-align:center;'>"+fu_ctl("🔒")+" <trans>Purchase</trans></div></div>"; supporterbuttons=""+supporterbuttons+"<BR><BR><bubble class=\"alt1\"><trans>You have one more step, you need to first set your Country and State/Province in settings for tax reasons before you can make any purchases.</trans> <a href='/settings/me'><trans>Visit settings to change your information.</trans></a> <trans>This info will NOT display on your profile.</trans></bubble>";}}else{ supporterbuttons="";} if (featurelock==true){ fu_qak("container_modl","<bubble class=\"alt1\">"+fu_ctl("🔒 <trans>You need Pro to access this feature!</trans>")+"</bubble>");}
fu_qak("container_modl","<bubble><h2 style='margin-top:0px;'><trans>Why go Pro and help support Hey.Café?</trans></h2><trans>When you go Pro you also gain more features like larger conversations, better quality photos, ability to edit conversations and comments, a fancy profile badge, and more.</trans>"+supporterbuttons+"</bubble>");}
fu_qaf();}else{ fu_rfy("Not able to load settings");}});}} function fu_spm(name,value){ fu_uti(); value=fu_qdo(value); if (name=="name"){ fu_qak("container_modl","<h1>Name</h1>",true); fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="name" size="50" maxlength="50" placeholder="Name" value="'+value+'"><BR><BR><input type="submit" name="submit" onclick="fu_zzy(\'name\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="password"){ fu_qak("container_modl","<h1>Password</h1>",true); fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="password" class="input" name="oldpassword" size="30" autocomplete="current-password" placeholder="Current Password"><BR><input type="password" class="input" name="newpassword" size="30" autocomplete="new-password" placeholder="New Password"><BR><BR><input type="submit" name="submit" onclick="fu_zzy(\'password\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="alias"){ fu_qak("container_modl","<h1>Alias</h1>",true); fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="alias" size="50" maxlength="50" placeholder="Alias / Username" value="'+value+'"><BR><BR><input type="submit" name="submit" onclick="fu_zzy(\'alias\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="email"){ fu_qak("container_modl","<h1>Email</h1>",true); fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="email" size="50" maxlength="50" placeholder="Email" value="'+value+'"><BR><BR><input type="submit" name="submit" onclick="fu_zzy(\'email\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="2fa_validate"){ fu_knz("https://"+s_hostname+"/get_account_secret",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_qak("container_modl","<h1>Setup 2FA app</h1>",true); var urlforimage='http://qrickit.com/api/qr?qrsize=400&e=l&bgdcolor=ffffff&fgdcolor=7463EC&t=png&d='+ae(response["response_data"]["2fa_url"]); fu_qak("container_modl",'<bubble><div>Getting setup is easy, go to your 2FA app of choice like Authy, 1Password or any other 2FA app and scan the QR code. You can also enter the secret below manually in the app if it wont scan. When you have it setup enter a generated code in the box below to verify it was setup and enable 2FA on your account.</div><BR><BR><div style="text-align:center;"><img src="'+urlforimage+'" style="max-width:400px;"><BR><BR>Code: <strong>'+response["response_data"]["2fa_secret"]+'</strong><BR><BR><a href="'+response["response_data"]["2fa_url"]+'">Tap to add to 2FA App</a></div></bubble><bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="code" size="50" maxlength="50" placeholder="Code" value=""><BR><BR><input type="submit" name="submit" onclick="fu_zzy(\'2fa_validate\',this.form); return false;" value="Check"></div></form></bubble>',true);}});} if (name=="verify"){ fu_qak("container_modl","<h1>Verify email</h1>",true); fu_knz("https://"+s_hostname+"/post_account_update_email_sendcode",function(result){ var response = fu_leh(result); fu_agt(); if (response["system_api_error"]==false){ }else{ fu_rfy("Not able generate code for the settings page...");}}); fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div>We have sent you a code to your email address, enter it below to verify your account. Keep this window open or the code might not work.</div><BR><BR><div style="text-align:center;"><input type="text" class="input" name="code" size="50" maxlength="50" placeholder="Code" value=""><BR><BR><input type="submit" name="submit" onclick="fu_zzy(\'verify\',this.form); return false;" value="Verify"></div></form></bubble>',true);} if (name=="bio"){ fu_qak("container_modl","<h1>Bio</h1>",true); fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea class="input fullsize" name="bio" size="50" maxlength="350" placeholder="Bio">'+value+'</textarea><BR><BR><input type="submit" name="submit" onclick="fu_zzy(\'bio\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="about"){ fu_qak("container_modl","<h1>About page content</h1>",true); fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea class="input fullsize" name="about" size="50" maxlength="4500" placeholder="About page content">'+value+'</textarea><BR><BR><input type="submit" name="submit" onclick="fu_zzy(\'about\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="website"){ fu_qak("container_modl","<h1>Website</h1>",true); fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="website" size="50" maxlength="70" placeholder="Website" value="'+value+'"><BR><BR><input type="submit" name="submit" onclick="fu_zzy(\'website\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="pronouns"){ fu_qak("container_modl","<h1>Pronouns</h1>",true); fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="pronouns" size="50" maxlength="70" placeholder="Pronouns" value="'+value+'"><BR><BR><input type="submit" name="submit" onclick="fu_zzy(\'pronouns\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="avatar"){ fu_qak("container_modl","<h1>Avatar</h1>",true); fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea id="imagedata_source" activated="true" style="position:fixed;left:0px;top:-200px;" name="avatar"></textarea><div id="uploader_previewarea"></div><input type="file" onchange="fu_xzu(this,\'imagedata_source\',\'uploader_previewarea\',\'uploader_readytosend\',\'images\')" /><BR><BR><input type="submit" name="submit" id="uploader_readytosend" onclick="fu_zzy(\'avatar\',this.form); return false;" value="Save" disabled></div></form></bubble>');} if (name=="country"){ fu_qak("container_modl","<h1>Country</h1>",true); fu_knz("https://"+s_hostname+"/get_account_locations_countrys",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["countrys"]!=false){ var locations="<select name=\"country\">"; fu_lgl(response["response_data"]["countrys"], function(id){ locations=""+locations+"<option value=\""+response["response_data"]["countrys"][""+id+""]["name"]+"\">"+response["response_data"]["countrys"][""+id+""]["name"]+"</option>";}); locations=""+locations+"</select>"; fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;">'+locations+'<BR><BR><input type="submit" name="submit" onclick="fu_zzy(\'country\',this.form); return false;" value="Save"></div></form></bubble>');}}else{ fu_rfy("Not able to load your country list to generate on the settings page...");}});} if (name=="state"){ fu_qak("container_modl","<h1>Province</h1>",true); fu_knz("https://"+s_hostname+"/get_account_locations_states",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["states"]!=false){ var locations="<select name=\"state\">"; fu_lgl(response["response_data"]["states"], function(id){ locations=""+locations+"<option value=\""+response["response_data"]["states"][""+id+""]["name"]+"\">"+response["response_data"]["states"][""+id+""]["name"]+"</option>";}); locations=""+locations+"</select>"; fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;">'+locations+'<BR><BR><input type="submit" name="submit" onclick="fu_zzy(\'state\',this.form); return false;" value="Save"></div></form></bubble>');}}else{ fu_rfy("Not able to load your state list to generate on the settings page...");}});} if (name=="language"){ fu_qak("container_modl","<h1>Language</h1>",true); var locations="<select name=\"language\">"; locations=""+locations+"<option value=\"en\">English</option>"; locations=""+locations+"<option value=\"pt\">Portuguese</option>"; locations=""+locations+"<option value=\"es\">Spanish</option>"; locations=""+locations+"<option value=\"zh\">Chinese</option>"; locations=""+locations+"<option value=\"nl\">Dutch</option>"; locations=""+locations+"<option value=\"fi\">Finnish</option>"; locations=""+locations+"<option value=\"fr\">French</option>"; locations=""+locations+"<option value=\"de\">German</option>"; locations=""+locations+"<option value=\"id\">Indonesian</option>"; locations=""+locations+"<option value=\"it\">Italian</option>"; locations=""+locations+"<option value=\"ja\">Japanese</option>"; locations=""+locations+"<option value=\"ko\">Korean</option>"; locations=""+locations+"<option value=\"pl\">Polish</option>"; locations=""+locations+"<option value=\"ru\">Russian</option>"; locations=""+locations+"<option value=\"sv\">Swedish</option>"; locations=""+locations+"<option value=\"uk\">Ukranian</option>"; locations=""+locations+"<option value=\"vi\">Vietnamese</option>"; locations=""+locations+"<option value=\"hu\">Hungarian</option>"; locations=""+locations+"</select>"; fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;">'+locations+'<BR><BR><input type="submit" name="submit" onclick="fu_zzy(\'language\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="header"){ fu_qak("container_modl","<h1>Header</h1>",true); fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea id="imagedata_source" activated="true" style="position:fixed;left:0px;top:-200px;" name="header"></textarea><div id="uploader_previewarea"></div><input type="file" onchange="fu_xzu(this,\'imagedata_source\',\'uploader_previewarea\',\'uploader_readytosend\',\'images\')" /><BR><BR><input type="submit" name="submit" id="uploader_readytosend" onclick="fu_zzy(\'header\',this.form); return false;" value="Save" disabled></div></form></bubble>');} if (name=="feed"){ fu_qak("container_modl","<h1>Feed sort</h1>",true); var controls=""; controls=""+controls+"<div class='minibubble' onclick='javascript:fu_zzy(\"feed\",[\"all\"])'><h3 style='margin-top: 0px;margin-bottom: 10px;'><trans>All</trans></h3><trans>Show everything from accounts you follow and cafés where you are a member.</trans></div>"; controls=""+controls+"<div class='minibubble' onclick='javascript:fu_zzy(\"feed\",[\"notme\"])'><h3 style='margin-top: 0px;margin-bottom: 10px;'><trans>Not Me</trans></h3><trans>Show everything but just exclude my own content.</trans></div>"; controls=""+controls+"<div class='minibubble' onclick='javascript:fu_zzy(\"feed\",[\"account\"])'><h3 style='margin-top: 0px;margin-bottom: 10px;'><trans>Accounts</trans></h3><trans>Show everything only from accounts you follow.</trans></div>"; controls=""+controls+"<div class='minibubble' onclick='javascript:fu_zzy(\"feed\",[\"clean\"])'><h3 style='margin-top: 0px;margin-bottom: 10px;'><trans>Clean</trans></h3><trans>Show only profile updates, and conversations in cafés where you are a member.</trans></div>"; controls=""+controls+"<div class='minibubble' onclick='javascript:fu_zzy(\"feed\",[\"others\"])'><h3 style='margin-top: 0px;margin-bottom: 10px;'><trans>Others</trans></h3><trans>Show content from accounts you do not follow and not your own content.</trans></div>"; fu_qak("container_modl",'<bubble><div><trans>Changing your view settings for your feed will change for your entire account on every device you use. You can change this any time.</trans><div><BR><BR>'+controls+'</bubble>');}} function fu_zzy(name,form){ fu_uqy(); fu_hbj(); if (Array.isArray(form)==false){ var data=fu_fhg(form);}else{ var data=form;} var postdata={}; var sendurl=""; if (name=="email_updates"){ postdata["mode"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_email_updates";} if (name=="email_notifications"){ postdata["mode"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_email_notifications";} if (name=="email_messages"){ postdata["mode"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_email_messages";} if (name=="invisible"){ postdata["mode"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_invisible";} if (name=="hidden"){ postdata["mode"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_hidden";} if (name=="2fa_validate"){ postdata["code"]=data["code"]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_2fa_validate";} if (name=="2fa_email"){ postdata["mode"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_2fa_email";} if (name=="2fa_app"){ postdata["mode"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_2fa_app";} if (name=="feed"){ postdata["mode"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_feed";} if (name=="app_colour"){ postdata["colour"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_app_colour";} if (name=="app_stats"){ postdata["value"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_app_stats";} if (name=="app_reducemotion"){ postdata["value"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_app_reducemotion";} if (name=="app_hidesuggestions"){ postdata["value"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_app_hidesuggestions";} if (name=="app_forcedisplay"){ postdata["value"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_app_forcedisplay";} if (name=="app_scaledisplay"){ postdata["value"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_app_scaledisplay";} if (name=="name"){ postdata["name"]=ae(fu_qti(data["name"])); postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_name";} if (name=="password"){ postdata["old"]=ae(fu_qti(data["oldpassword"])); postdata["new"]=ae(fu_qti(data["newpassword"])); postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_password";} if (name=="alias"){ postdata["alias"]=data["alias"]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_alias";} if (name=="country"){ postdata["country"]=ae(fu_qti(data["country"])); postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_country";} if (name=="state"){ postdata["state"]=ae(fu_qti(data["state"])); postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_state";} if (name=="email"){ postdata["email"]=ae(fu_qti(data["email"])); postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_email";} if (name=="language"){ postdata["language"]=data["language"]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_language";} if (name=="verify"){ postdata["code"]=data["code"]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_email_verify";} if (name=="bio"){ postdata["bio"]=ae(fu_qti(data["bio"])); postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_bio";} if (name=="about"){ postdata["content"]=ae(fu_qti(data["about"])); postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_about";} if (name=="website"){ postdata["website"]=ae(fu_qti(data["website"])); postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_website";} if (name=="pronouns"){ postdata["pronouns"]=ae(fu_qti(data["pronouns"])); postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_pronouns";} if (name=="avatar"){ postdata["file"]=ae(data["avatar"]); postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_avatar";} if (name=="header"){ postdata["file"]=ae(data["header"]); postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_account_update_header";}
fu_hhf(sendurl,postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_ygh("Updated");} if (response["response_data"]=="taken"){ fu_ygh("This has been taken already");}
fu_qqc();}else{ var message="Unable to save data"; if (name=="verify"){ message="Sorry the code was wrong";}
fu_ygh(message); fu_qqc();}
fu_qaf();});}
function fu_xgh(id){ fu_xbz(); if (su_id!=null){ fu_crv("full"); var tab="info"; var setting="all"; var arr = sp.split('/'); if (arr!=null){ if (arr[3]!=undefined){ var tab=arr[3];} if (arr[4]!=undefined){ var setting=arr[4];}}
fu_qak("container_content","<h1>Café Settings</h1>",true); fu_qak("container_content","<div class='horizontalscroll' style='margin-bottom:20px;' id='MenuSettings'></div>"); fu_qak("MenuSettings","<a href='/settings/"+id+"/info'><div class='tab'>Info</div></a>",true); fu_qak("MenuSettings","<a href='/settings/"+id+"/about'><div class='tab'>About</div></a>",true); fu_qak("MenuSettings","<a href='/settings/"+id+"/tags'><div class='tab'>Tags</div></a>",true); fu_qak("MenuSettings","<a href='/settings/"+id+"/members'><div class='tab'>Members</div></a>",true); fu_qak("container_content","<div id='cafe_s_message'></div><div id='cafe_settings'><div class='loading'></div></div>"); fu_knz("https://"+s_hostname+"/get_cafe_members?query="+id+"&status=waiting",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["members"]!=false){ fu_qak("cafe_s_message","<bubble onclick='javascript:fu_euy(\"/settings/"+id+"/members/waiting\");' class=\"alt1\">You have some new members waiting to be allowed into the Café. Tap here to view the users that have requested access.</bubble>",true);}} }); if (tab=="info"){ fu_knz("https://"+s_hostname+"/get_cafe_info?query="+id+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("cafe_settings"); var controls=""; fu_qak("cafe_settings","<h2>Main settings</h2>",true); controls=""+controls+"<div class='minibubble' onclick='javascript:fu_chf(\""+id+"\",\"name\",\""+fu_qti(response["response_data"]["name"])+"\")'><strong><trans>Name</trans>:</strong> "+fu_ctl(response["response_data"]["name"])+"</div>"; controls=""+controls+"<div class='minibubble' onclick='javascript:fu_chf(\""+id+"\",\"alias\",\""+fu_qti(response["response_data"]["alias"])+"\")'><strong><trans>Alias</trans>:</strong> "+response["response_data"]["alias"]+"</div>"; controls=""+controls+"<div class='minibubble' onclick='javascript:fu_chf(\""+id+"\",\"bio\",\""+fu_qti(response["response_data"]["bio"])+"\")'><strong><trans>Bio</trans>:</strong> "+fu_ctl(fu_fud(fu_yaa(response["response_data"]["bio"])))+"</div>"; if (response["response_data"]["mode"]=="public"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_ano(\""+id+"\",\"mode\",[\"private\"])'><strong><trans>Mode</trans>:</strong> "+fu_ctl('👋')+"&ensp;<trans>Public, anyone can join</trans></div>";} if (response["response_data"]["mode"]=="private"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_ano(\""+id+"\",\"mode\",[\"public\"])'><strong><trans>Mode</trans>:</strong> "+fu_ctl('🔐')+"&ensp;<trans>Private, requests must be approved</trans></div>";} if (response["response_data"]["hidden"]=="1"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_ano(\""+id+"\",\"hidden\",[\"off\"])'><strong><trans>Show in explore</trans>:</strong> "+fu_ctl('👎')+"&ensp;<trans>No</trans></div>";} if (response["response_data"]["hidden"]=="0"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_ano(\""+id+"\",\"hidden\",[\"on\"])'><strong><trans>Show in explore</trans>:</strong> "+fu_ctl('👍')+"&ensp;<trans>Yes</trans></div>";} if (response["response_data"]["public_view"]=="0"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_ano(\""+id+"\",\"public_view\",[\"on\"])'><strong><trans>Public View Conversations</trans>:</strong> "+fu_ctl('👎')+"&ensp;<trans>No</trans></div>";} if (response["response_data"]["public_view"]=="1"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_ano(\""+id+"\",\"public_view\",[\"off\"])'><strong><trans>Public View Conversations</trans>:</strong> "+fu_ctl('👍')+"&ensp;<trans>Yes</trans></div>";} if (response["response_data"]["public_react"]=="0"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_ano(\""+id+"\",\"public_react\",[\"on\"])'><strong><trans>Public React</trans>:</strong> "+fu_ctl('👎')+"&ensp;<trans>No</trans></div>";} if (response["response_data"]["public_react"]=="1"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_ano(\""+id+"\",\"public_react\",[\"off\"])'><strong><trans>Public React</trans>:</strong> "+fu_ctl('👍')+"&ensp;<trans>Yes</trans></div>";} if (response["response_data"]["public_comment"]=="0"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_ano(\""+id+"\",\"public_comment\",[\"on\"])'><strong><trans>Public Comment</trans>:</strong> "+fu_ctl('👎')+"&ensp;<trans>No</trans></div>";} if (response["response_data"]["public_comment"]=="1"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_ano(\""+id+"\",\"public_comment\",[\"off\"])'><strong><trans>Public Comment</trans>:</strong> "+fu_ctl('👍')+"&ensp;<trans>Yes</trans></div>";} if (response["response_data"]["member_create"]=="0"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_ano(\""+id+"\",\"member_create\",[\"on\"])'><strong><trans>Member Create Conversations</trans>:</strong> "+fu_ctl('👎')+"&ensp;<trans>No</trans></div>";} if (response["response_data"]["member_create"]=="1"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_ano(\""+id+"\",\"member_create\",[\"off\"])'><strong><trans>Member Create Conversations</trans>:</strong> "+fu_ctl('👍')+"&ensp;<trans>Yes</trans></div>";} if (response["response_data"]["member_react"]=="0"){ if (response["response_data"]["public_react"]=="1"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_ano(\""+id+"\",\"member_react\",[\"on\"])'><strong><trans>Member React</trans>:</strong> "+fu_ctl('👍')+"&ensp;<trans>Yes, overwritten by public react on</trans></div>";}else{ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_ano(\""+id+"\",\"member_react\",[\"on\"])'><strong><trans>Member React</trans>:</strong> "+fu_ctl('👎')+"&ensp;<trans>No</trans></div>";}} if (response["response_data"]["member_react"]=="1"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_ano(\""+id+"\",\"member_react\",[\"off\"])'><strong><trans>Member React</trans>:</strong> "+fu_ctl('👍')+"&ensp;<trans>Yes</trans></div>";} if (response["response_data"]["member_comment"]=="0"){ if (response["response_data"]["public_comment"]=="1"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_ano(\""+id+"\",\"member_comment\",[\"on\"])'><strong><trans>Member Comment</trans>:</strong> "+fu_ctl('👍')+"&ensp;<trans>Yes, but overwritten by public comments</trans></div>";}else{ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_ano(\""+id+"\",\"member_comment\",[\"on\"])'><strong><trans>Member Comment</trans>:</strong> "+fu_ctl('👎')+"&ensp;<trans>No</trans></div>";}} if (response["response_data"]["member_comment"]=="1"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_ano(\""+id+"\",\"member_comment\",[\"off\"])'><strong><trans>Member Comment</trans>:</strong> "+fu_ctl('👍')+"&ensp;<trans>Yes</trans></div>";} var infoabout='<div style="margin-top: 5px;font-size: 0.8em;"><trans>If turned off conversations made by any members will not show on that persons feed and on the main feed (ideal setting is off for support groups).</trans></div>'; if (response["response_data"]["member_feed"]=="0"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_ano(\""+id+"\",\"member_feed\",[\"on\"])'><strong><trans>Member Feed</trans>:</strong> "+fu_ctl('👎')+"&ensp;<trans>No"+infoabout+"</trans></div>";} if (response["response_data"]["member_feed"]=="1"){ controls=""+controls+"<div class='minibubble' onclick='javascript:fu_ano(\""+id+"\",\"member_feed\",[\"off\"])'><strong><trans>Member Feed</trans>:</strong> "+fu_ctl('👍')+"&ensp;<trans>Yes"+infoabout+"</trans></div>";}
fu_qak("container_content","<bubble>"+controls+"</bubble>"); var controls_cafedes=""; controls_cafedes=""+controls_cafedes+"<div class='minibubble' onclick='javascript:fu_chf(\""+id+"\",\"avatar\",\""+fu_qti(response["response_data"]["avatar"])+"\")'><strong><trans>Avatar</trans>:</strong> <img source='"+response["response_data"]["avatar"]+"' class='optimizer_img' style='display: block;margin:0px auto;max-height:100px;max-width: 100px;border-radius:100%;'></div>"; controls_cafedes=""+controls_cafedes+"<div class='minibubble' onclick='javascript:fu_chf(\""+id+"\",\"header\",\""+fu_qti(response["response_data"]["header"])+"\")'><strong><trans>Header</trans>:</strong> <img source='"+response["response_data"]["header"]+"' class='optimizer_img' style='display: block;margin:0px auto;max-width:300px;'></div>"; fu_qak("container_content","<h2><trans>Café Design</trans></h2><bubble><trans>To update any option or upload media just tap any of the boxes below. Header images for cafés are shown in a 30:8 aspect.</trans><BR><BR>"+controls_cafedes+"</bubble>"); fu_qaf();}else{ fu_rfy("Not able to load settings");}});} if (tab=="about"){ fu_knz("https://"+s_hostname+"/get_cafe_info?query="+id+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("cafe_settings"); var controls_about=""; if (response["response_data"]["about"]==false){ var contsabout="<trans>No about page content set.</trans>";}else{ var contsabout=response["response_data"]["about"];}
contsabout=fu_hww(contsabout); contsabout=fu_maf(contsabout); contsabout=fu_nns(contsabout); contsabout=fu_ctl(contsabout); contsabout=fu_ltt(contsabout); controls_about=""+contsabout+""; fu_qak("cafe_settings","<h2><trans>About Page</trans></h2><bubble><trans>The about page allows for extended content like a conversation. This allows you to have multiple links and more mentions and formatting like lists and more. You can view the content below or click edit to make changes.</trans><BR><BR><a href='javascript:fu_chf(\""+id+"\",\"about\",\""+fu_qti(response["response_data"]["about"])+"\")'><div class='button'><trans>Edit content</trans></div></a></bubble><bubble class='conversation' style='padding-top:0px;padding-bottom:0px;'>"+controls_about+"</bubble>"); fu_qaf();}else{ fu_rfy("Not able to load settings");}});} if (tab=="tags"){ fu_knz("https://"+s_hostname+"/get_cafe_info?query="+id+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("cafe_settings"); var contentstags=""; fu_qak("cafe_settings","<h2><trans>Tags</trans></h2><bubble><span><trans>Tags allow for better conversation sorting, and cafés have access to a staff only setting. If a tag is set to staff only, only moderators and admins can set the tag on a conversation (for stuff like updates and announcements). This also makes it so any staff in a café can change any conversations tags any time by opening the 3 dot menu on that conversation.</trans></span><BR><BR><div id='s_create_new_tag'></div></bubble>"); var tagshavenow=0; if (response["response_data"]["tags"]!=false){ fu_lgl(response["response_data"]["tags"], function(select){ tagshavenow=tagshavenow+1;});} if (tagshavenow>=20){ fu_qak("s_create_new_tag",""+tagshavenow+"/20");}else{ fu_qak("s_create_new_tag","<a href='javascript:fu_xew(\""+id+"\")'><div class='button'><trans>New tag</trans></div></a> "+tagshavenow+"/20");} if (response["response_data"]["tags"]==false){ contentstags="<bubble class='alt1'><trans>No tags have been created yet</trans></bubble>";}else{ fu_lgl(response["response_data"]["tags"], function(select){ contentstags=""+contentstags+"<bubble><div style=\"font-size:2.3em;float:left;margin-right:15px;\">"+fu_ctl(response["response_data"]["tags"][""+select+""]["emoji"])+"</div><h3 style=\"margin-top: 0px;margin-bottom: 5px;font-weight:400;\">"+fu_ctl(response["response_data"]["tags"][""+select+""]["name"])+"</h3><div style='font-size: 0.8em;'><a href='javascript:fu_asa(\""+response["response_data"]["tags"][""+select+""]["id"]+"\",\""+response["response_data"]["tags"][""+select+""]["emoji"]+"\")'><div class='button'><trans>Change Emoji</trans></div></a> <a href='javascript:fu_dhc(\""+response["response_data"]["tags"][""+select+""]["id"]+"\",\""+response["response_data"]["tags"][""+select+""]["name"]+"\")'><div class='button'><trans>Change Name</trans></div></a> <a href='javascript:fu_fwm(\""+response["response_data"]["tags"][""+select+""]["id"]+"\",\""+response["response_data"]["tags"][""+select+""]["staff"]+"\")'><div class='button'><trans>Staff only: "+response["response_data"]["tags"][""+select+""]["staff"]+"</trans></div></a> <a href='javascript:fu_hot(\""+response["response_data"]["tags"][""+select+""]["id"]+"\")'><div class='button'><trans>Delete</trans></div></a></div></bubble>";});}
fu_qak("cafe_settings",""+contentstags+""); fu_qaf();}else{ fu_rfy("Not able to load settings");}});} if (tab=="members"){ var extra=""; if (setting=="active"){ extra="&status=active";} if (setting=="waiting"){ extra="&status=waiting";} if (setting=="banned"){ extra="&status=banned";} if (setting=="admin"){ extra="&type=admin";} if (setting=="moderator"){ extra="&type=moderator";}
fu_knz("https://"+s_hostname+"/get_cafe_members?query="+id+""+extra+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("cafe_settings"); fu_qak("cafe_settings","<h2>Members</h2>",true); fu_qak("cafe_settings","<div></div>"); fu_qak("cafe_settings","<a href='/settings/"+id+"/members/all'><div class='tab'>All</div></a>",true); fu_qak("cafe_settings","<a href='/settings/"+id+"/members/active'><div class='tab'>Active</div></a>",true); fu_qak("cafe_settings","<a href='/settings/"+id+"/members/waiting'><div class='tab'>Waiting</div></a>",true); fu_qak("cafe_settings","<a href='/settings/"+id+"/members/banned'><div class='tab'>Banned</div></a>",true); fu_qak("cafe_settings","<a href='/settings/"+id+"/members/admin'><div class='tab'>Admin</div></a>",true); fu_qak("cafe_settings","<a href='/settings/"+id+"/members/moderator'><div class='tab'>Moderator</div></a>",true); fu_qak("cafe_settings","<div style='margin-bottom:15px;'></div>"); if (response["response_data"]["members"]!=false){ fu_lgl(response["response_data"]["members"], function(select){ var data=response["response_data"]["members"][""+select+""]; var menu_status="<div onclick=\"javscript:fu_evf('"+id+"','"+data["id"]+"','"+fu_qti(data["name"])+"','"+data["avatar"]+"','"+data["member_status"]+"');\" class='minibubble'><strong>Member status:</strong> "+data["member_status"]+"</div>"; if (data["member_admin"]=="1"){ var menu_admin="<div onclick=\"javscript:fu_uuf('"+id+"','"+data["id"]+"','"+fu_qti(data["name"])+"','"+data["avatar"]+"','"+data["member_admin"]+"');\" class='minibubble'><strong>Admin status:</strong> yes</div>";}else{ var menu_admin="<div onclick=\"javscript:fu_uuf('"+id+"','"+data["id"]+"','"+fu_qti(data["name"])+"','"+data["avatar"]+"','"+data["member_admin"]+"');\" class='minibubble'><strong>Admin status:</strong> no</div>";} if (data["member_moderator"]=="1"){ var menu_moderator="<div onclick=\"javscript:fu_dyg('"+id+"','"+data["id"]+"','"+fu_qti(data["name"])+"','"+data["avatar"]+"','"+data["member_moderator"]+"');\" class='minibubble'><strong>Moderator status:</strong> yes</div>";}else{ var menu_moderator="<div onclick=\"javscript:fu_dyg('"+id+"','"+data["id"]+"','"+fu_qti(data["name"])+"','"+data["avatar"]+"','"+data["member_moderator"]+"');\" class='minibubble'><strong>Moderator status:</strong> no</div>";}
fu_qak("cafe_settings","<bubble><a href=\"/@"+data["alias"]+"\"><img source=\""+data["avatar"]+"\" style='width:60px;height:60px;float:left;margin-right:15px;margin-bottom:10px;' class=\"avatar optimizer_img\" alt='Avatar for "+data["name"]+"'></a><div style='margin-left: 75px;'><strong>"+data["name"]+"</strong>"+menu_status+""+menu_admin+""+menu_moderator+"</div></bubble>");});}else{ fu_qak("cafe_settings","<bubble class=\"alt1\">Sorry we can't find any members with the status "+setting+".</bubble>",true);}
fu_qaf();}else{ fu_rfy("Not able to load settings");}});}} } function fu_chf(id,name,value){ fu_uti(); value=fu_qdo(value); if (name=="name"){ fu_qak("container_modl","<h1>Name</h1>",true); fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="name" size="50" maxlength="50" placeholder="Name" value="'+value+'"><BR><BR><input type="submit" name="submit" onclick="fu_ano(\''+id+'\',\'name\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="alias"){ fu_qak("container_modl","<h1>Alias</h1>",true); fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><input type="text" class="input" name="alias" size="50" maxlength="50" placeholder="Alias" value="'+value+'"><BR><BR><input type="submit" name="submit" onclick="fu_ano(\''+id+'\',\'alias\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="bio"){ fu_qak("container_modl","<h1>Bio</h1>",true); fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea class="input" name="bio" size="50" maxlength="350" placeholder="Bio">'+value+'</textarea><BR><BR><input type="submit" name="submit" onclick="fu_ano(\''+id+'\',\'bio\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="about"){ fu_qak("container_modl","<h1>About page content</h1>",true); fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea class="input" name="about" size="50" maxlength="4500" placeholder="About page content">'+value+'</textarea><BR><BR><input type="submit" name="submit" onclick="fu_ano(\''+id+'\',\'about\',this.form); return false;" value="Save"></div></form></bubble>');} if (name=="avatar"){ fu_qak("container_modl","<h1>Avatar</h1>",true); fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea id="imagedata_source" activated="true" style="position:fixed;left:0px;top:-200px;" name="avatar"></textarea><div id="uploader_previewarea"></div><input type="file" onchange="fu_xzu(this,\'imagedata_source\',\'uploader_previewarea\',\'uploader_readytosend\',\'images\')" /><BR><BR><input type="submit" id="uploader_readytosend" name="submit" onclick="fu_ano(\''+id+'\',\'avatar\',this.form); return false;" value="Save" disabled></div></form></bubble>');} if (name=="header"){ fu_qak("container_modl","<h1>Header</h1>",true); fu_qak("container_modl",'<bubble><form name="login" onsubmit="return isValidForm()"><div style="text-align:center;"><textarea id="imagedata_source" activated="true" style="position:fixed;left:0px;top:-200px;" name="header"></textarea><div id="uploader_previewarea"></div><input type="file" onchange="fu_xzu(this,\'imagedata_source\',\'uploader_previewarea\',\'uploader_readytosend\',\'images\')" /><BR><BR><input type="submit" id="uploader_readytosend" name="submit" onclick="fu_ano(\''+id+'\',\'header\',this.form); return false;" value="Save" disabled></div></form></bubble>');}} function fu_ano(id,name,form){ fu_uqy(); fu_hbj(); if (Array.isArray(form)==false){ var data=fu_fhg(form);}else{ var data=form;} var postdata={}; postdata["cafe"]=id; var sendurl=""; if (name=="name"){ postdata["name"]=ae(fu_qti(data["name"])); postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_name";} if (name=="alias"){ postdata["alias"]=data["alias"]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_alias";} if (name=="mode"){ postdata["mode"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_mode";} if (name=="hidden"){ postdata["mode"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_hidden";} if (name=="public_comment"){ postdata["mode"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_rule_public_comment";} if (name=="public_react"){ postdata["mode"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_rule_public_react";} if (name=="public_view"){ postdata["mode"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_rule_public_view";} if (name=="member_create"){ postdata["mode"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_rule_member_create";} if (name=="member_react"){ postdata["mode"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_rule_member_react";} if (name=="member_comment"){ postdata["mode"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_rule_member_comment";} if (name=="member_feed"){ postdata["mode"]=data[0]; postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_rule_member_feed";} if (name=="bio"){ postdata["bio"]=ae(fu_qti(data["bio"])); postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_bio";} if (name=="about"){ postdata["content"]=ae(fu_qti(data["about"])); postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_about";} if (name=="avatar"){ postdata["file"]=ae(data["avatar"]); postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_avatar";} if (name=="header"){ postdata["file"]=ae(data["header"]); postdata=fu_mmy(postdata); sendurl="https://"+s_hostname+"/post_cafe_update_header";}
fu_hhf(sendurl,postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_ygh("Updated");} if (response["response_data"]=="taken"){ fu_ygh("This has been taken already");}
fu_qqc();}else{ fu_ygh("Unable to save data"); fu_qqc();}
fu_qaf();});} function fu_evf(id,user,name,photo,current,value){ if (value==undefined){ value=false;}
fu_uti(); if (value==false){ fu_qak("container_modl","<h1>Member status for "+fu_qdo(name)+"</h1>"); fu_qak("container_modl","<div style='margin:15px;text-align:center;'><img source=\""+photo+"\" style='width:160px;height:160px;' class=\"avatar optimizer_img\" nowait='true' alt='Avatar for "+name+"'></div>"); fu_qak("container_modl","<bubble class='alt1'>You can change an account status from waiting to active or banned using this menu, or making an active user banned. You can also remove a member at any time by selecting remove.</bubble>"); if (current!='active'){ fu_qak("container_modl","<bubble onclick=\"javascript:fu_evf('"+id+"','"+user+"','"+name+"','"+photo+"','"+current+"','active');\"><strong style=\"display: inline-block;margin-bottom: 10px;\">Active</strong><BR>Make user active and able to interact and post in the café.</bubble>");}
fu_qak("container_modl","<bubble onclick=\"javascript:fu_evf('"+id+"','"+user+"','"+name+"','"+photo+"','"+current+"','banned');\"><strong style=\"display: inline-block;margin-bottom: 10px;\">Banned</strong><BR>Remove the member from the café and block any interaction.</bubble>"); fu_qak("container_modl","<bubble onclick=\"javascript:fu_evf('"+id+"','"+user+"','"+name+"','"+photo+"','"+current+"','remove');\"><strong style=\"display: inline-block;margin-bottom: 10px;\">Remove</strong><BR>Remove the member from the café, they can join back later on if the café is public.</bubble>");}else{ fu_uqy(); fu_hbj(); var postdata={}; postdata["cafe"]=id; postdata["member"]=user; postdata["mode"]=value; postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_cafe_update_member_status",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_ygh("Member status has been updated");}
fu_euy("/settings/"+id+"/members");}else{ fu_ygh("Unable to save data");}
fu_qaf();});}} function fu_uuf(id,user,name,photo,current,value){ if (value==undefined){ value=false;}
fu_uti(); if (value==false){ fu_qak("container_modl","<h1>Member admin status for "+fu_qdo(name)+"</h1>"); fu_qak("container_modl","<div style='margin:15px;text-align:center;'><img source=\""+photo+"\" style='width:160px;height:160px;' class=\"avatar optimizer_img\" nowait='true' alt='Avatar for "+name+"'></div>"); fu_qak("container_modl","<bubble class='alt1'>Setting a member of a café as admin gives them access to this settings area and access to the moderating tools.</bubble>"); if (current=="0"){ fu_qak("container_modl","<bubble onclick=\"javascript:fu_uuf('"+id+"','"+user+"','"+name+"','"+photo+"','"+current+"','on');\"><strong style=\"display: inline-block;margin-bottom: 10px;\">Set Admin</strong><BR>Give member admin access.</bubble>");}else{ fu_qak("container_modl","<bubble onclick=\"javascript:fu_uuf('"+id+"','"+user+"','"+name+"','"+photo+"','"+current+"','off');\"><strong style=\"display: inline-block;margin-bottom: 10px;\">Remove</strong><BR>Remove admin access from member.</bubble>");}}else{ fu_uqy(); fu_hbj(); var postdata={}; postdata["cafe"]=id; postdata["member"]=user; postdata["mode"]=value; postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_cafe_update_member_admin",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_ygh("Member admin status has been updated");} if (response["response_data"]=="self"){ fu_ygh("You are not allowed to update the admin settings of your own account");}
fu_euy("/settings/"+id+"/members");}else{ fu_ygh("Unable to save data");}
fu_qaf();});}} function fu_dyg(id,user,name,photo,current,value){ if (value==undefined){ value=false;}
fu_uti(); if (value==false){ fu_qak("container_modl","<h1>Member moderator status for "+fu_qdo(name)+"</h1>"); fu_qak("container_modl","<div style='margin:15px;text-align:center;'><img source=\""+photo+"\" style='width:160px;height:160px;' class=\"avatar optimizer_img\" nowait='true' alt='Avatar for "+name+"'></div>"); fu_qak("container_modl","<bubble class='alt1'>Setting a member of a café as moderator gives them access to moderating tools.</bubble>"); if (current=="0"){ fu_qak("container_modl","<bubble onclick=\"javascript:fu_dyg('"+id+"','"+user+"','"+name+"','"+photo+"','"+current+"','on');\"><strong style=\"display: inline-block;margin-bottom: 10px;\">Set Moderator</strong><BR>Give member moderator access.</bubble>");}else{ fu_qak("container_modl","<bubble onclick=\"javascript:fu_dyg('"+id+"','"+user+"','"+name+"','"+photo+"','"+current+"','off');\"><strong style=\"display: inline-block;margin-bottom: 10px;\">Remove</strong><BR>Remove moderator access from member.</bubble>");}}else{ fu_uqy(); fu_hbj(); var postdata={}; postdata["cafe"]=id; postdata["member"]=user; postdata["mode"]=value; postdata=fu_mmy(postdata); fu_hhf("https://"+s_hostname+"/post_cafe_update_member_moderator",postdata,function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]=="ok"){ fu_ygh("Member moderator status has been updated");}
fu_euy("/settings/"+id+"/members");}else{ fu_ygh("Unable to save data");}
fu_qaf();});}} function fu_nby(){ fu_xbz(); fu_uti(); fu_qak("container_modl","<h1>User Switcher</h1>",true); fu_qak("container_modl","<div style='margin-bottom:20px;'><a href=\"javascript:fu_hdv();\"><div class=\"tab\">New Session</div></a> <a href=\"/logout\"><div class=\"tab\">Logout</div></a></div>",true); var sessionstorage=false; if (fu_mlq("ses_s_sessions")!=""){ sessionstorage=fu_leh(fu_mlq("ses_s_sessions"));}
sessionstorage[""+su_id+""]={}; sessionstorage[""+su_id+""]["session"]=su_session; sessionstorage[""+su_id+""]["alias"]=su_alias; sessionstorage[""+su_id+""]["id"]=su_id; sessionstorage[""+su_id+""]["name"]=su_name; sessionstorage[""+su_id+""]["language"]=su_language; fu_qex("ses_s_sessions", fu_mmy(sessionstorage)); if (sessionstorage!=false){ var options=""; var currentaccount=""; fu_lgl(sessionstorage, function(id){ if (sessionstorage[""+id+""]!=null){ var userdata=sessionstorage[""+id+""]; if (userdata["name"]!=null){ if (su_id!=id){ options=""+options+"<div class='minibubble' onclick='javascript:fu_qrd(\""+id+"\");'><img src='https://endpoint.hey.cafe/takemeto/account_avatar?query="+id+"' class='avatar' style='float:left;height:50px;width:50px;margin-right:15px;'><h3 style='margin-top: 5px;margin-bottom: 0px;'>"+fu_ctl(userdata["name"])+"</h3><trans>Tap to switch accounts</trans></div>";}else{ currentaccount=""+currentaccount+"<div class='minibubble'><img src='https://endpoint.hey.cafe/takemeto/account_avatar?query="+id+"' class='avatar' style='float:left;height:50px;width:50px;margin-right:15px;'><h3 style='margin-top: 5px;margin-bottom: 0px;'>"+fu_ctl(userdata["name"])+"</h3><trans>Your current account</trans></div>";}} }}); fu_qak("container_modl","<bubble><h3 style='margin-top:0px;'><trans>Active session</trans></h3>"+currentaccount+"<h3><trans>Other sessions</trans></h3>"+options+"</bubble>");}else{ fu_qak("container_modl","<bubble class=\"alt1\">You have no other active sessions</bubble>",true);}} function fu_hdv(){ s_checkups=false; var sessionstorage={}; if (fu_mlq("ses_s_sessions")!=""){ sessionstorage=fu_leh(fu_mlq("ses_s_sessions"));}
sessionstorage[""+su_id+""]={}; sessionstorage[""+su_id+""]["session"]=su_session; sessionstorage[""+su_id+""]["alias"]=su_alias; sessionstorage[""+su_id+""]["id"]=su_id; sessionstorage[""+su_id+""]["name"]=su_name; sessionstorage[""+su_id+""]["language"]=su_language; fu_qex("ses_s_sessions", fu_mmy(sessionstorage)); fu_uqy(); fu_knz("https://"+s_hostname+"/post_account_logout_switch",function(result){ var response = fu_leh(result); fu_agt(); su_session=null; su_alias=null; su_id=null; su_name=null; su_language="en"; su_avatar=null; su_header=null; su_admin=false; su_moderator=false; fu_kym("ses_su_session"); fu_kym("ses_su_alias"); fu_kym("ses_su_id"); fu_kym("ses_su_name"); fu_kym("ses_su_language"); fu_euy("/login"); setTimeout("s_checkups=true;", 4000); fu_qaf();});} function fu_qrd(account){ s_checkups=false; if (fu_mlq("ses_s_sessions")!=""){ sessionstorage=fu_leh(fu_mlq("ses_s_sessions")); sessionstorage[""+su_id+""]={}; sessionstorage[""+su_id+""]["session"]=su_session; sessionstorage[""+su_id+""]["alias"]=su_alias; sessionstorage[""+su_id+""]["id"]=su_id; sessionstorage[""+su_id+""]["name"]=su_name; sessionstorage[""+su_id+""]["language"]=su_language; fu_qex("ses_s_sessions", fu_mmy(sessionstorage)); su_session=null; su_alias=null; su_id=null; su_name=null; su_language="en"; su_avatar=null; su_header=null; su_admin=false; su_moderator=false; if (sessionstorage[""+account+""]!=null){ fu_uqy(); fu_knz("https://"+s_hostname+"/post_account_logout_switch",function(result){ var response = fu_leh(result); fu_agt(); fu_qex("ses_su_session", sessionstorage[""+account+""]["session"]); fu_qex("ses_su_alias", sessionstorage[""+account+""]["alias"]); fu_qex("ses_su_id", sessionstorage[""+account+""]["id"]); fu_qex("ses_su_name", sessionstorage[""+account+""]["name"]); fu_qex("ses_su_language", sessionstorage[""+account+""]["language"]); fu_ygh("Switching accounts"); fu_pml(); fu_qaf();});}else{ fu_ygh("We had a problem with the session"); fu_euy("/"); fu_pml();}}else{ fu_ygh("You have no sessions setup"); fu_euy("/");} setTimeout("s_checkups=true;", 4000);}
function fu_apd(){ var type=null; var content=null; var sendback="null"; var foundtype=false; var arr = sp.split('/'); if (arr!=null){ if (arr[2]!=undefined){ type=arr[2];} if (arr[3]!=undefined){ content=arr[3];} if (arr[4]!=undefined){ sendback=fu_qdo(decodeURIComponent(""+arr[4]+""));}else{ sendback=document.referrer;}} if (sendback==""){ sendback="null";} if (sendback.includes("hey.cafe")){ sendback="null";} if (su_id!=null){ fu_crv("simple"); fu_pcc("Share"); setTimeout("fu_csx('"+sendback+"');", 1000); fu_yax("basics", "#container_footer", "display:none;"); fu_yax("basics", "modl .close", "display:none;"); fu_yax("basics", "modl .frame", "margin-top: 0px;border-radius: 0px;max-height: calc(100% - 30px);box-shadow: rgba(0, 0, 0, 0) 0px 1px 5px -2px;-webkit-box-shadow: rgba(0, 0, 0, 0) 0px 1px 5px -2px;"); fu_yax("basics", "modl .background", "background-color: rgba(138, 138, 138, 0);display: none;"); if (type=="conversation"){ foundtype=true; fu_hmy(content);} if (type=="comment"){ foundtype=true; fu_jli(content);} if (foundtype==false){ fu_hmy(type);}}else{ s_loginmessage="Login to your Hey.Café account first before we can continue."; if (type=="comment"){ s_loginmessage="Login to your Hey.Café account first before we can create a comment.";} if (type=="conversation"){ s_loginmessage="Login to your Hey.Café account first before we can share the content.";}
s_loginrestore=sp; fu_euy("/login");}} function fu_hmy(content){ fu_yax("newshare", "modl", "background:none;"); fu_yax("newshare", "modl .frame", "margin:0px;"); var sendcontent=fu_qdo(decodeURIComponent(""+content+"")); fu_fcn('',fu_qti(sendcontent));} function fu_jli(conversation){ fu_yax("newshare", "modl", "background:none;"); fu_yax("newshare", "modl .frame", "margin:0px;"); fu_kdn(conversation,false);} var checkclosedcount=0; function fu_csx(sendback){ if (s_modl==false){ if (checkclosedcount==2){ if (sendback!="null"){ fu_qak("container_content","<bubble class='alt1' style='text-align: center;font-size: 1.1em;font-weight: 600;'>Sending you back...</bubble><div class='loading'></div>"); window.location.href = sendback;}else{ fu_qak("container_content","<bubble class='alt1' style='text-align:center;font-size: 1.1em;font-weight: 600;'>You can close this page</bubble>"); window.close();}
checkclosedcount=100;}else{ checkclosedcount=checkclosedcount+1;}} setTimeout("fu_csx('"+sendback+"');", 300);} function fu_spa(resource,id){ fu_uti(); fu_qak("container_modl","<h1>Share</h1>"); fu_qak("container_modl","<bubble><div class='loading'></div></bubble>"); if (resource=="conversation"){ fu_knz("https://"+s_hostname+"/get_conversation_info?query="+id+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ var text=false; var title=fu_xnf(response["response_data"]["contents"]); var description=fu_kwg(response["response_data"]["contents"]); var smallstring=fu_wwb(Array.from(response["response_data"]["contents"]).slice(0, 120).join(''))+"..."; if (text==false && title!=false){ text=title;} if (text==false && description!=false){ text=description;} if (text==false && smallstring!=false){ text=smallstring;} var url="https://hey.cafe/conversation/"+response["response_data"]["id"]+""; var urlfull="https://hey.cafe/conversation/"+response["response_data"]["id"]+""; var urlspace=fu_qix(response["response_data"]["contents"]); if (urlspace!=false){ urlfull="https://hey.cafe/conversation/"+response["response_data"]["id"]+"/"+urlspace+"";}
fu_dpa(text+" #heycafe",url,urlfull);}else{ fu_uti(); fu_qak("container_modl","<h1>Share failed</h1>"); fu_qak("container_modl","<bubble class='alt1'>We are not able to load the content needed</bubble>");}});}} function fu_dpa(text,url,urlfull){ fu_uti(); if (urlfull==undefined){ urlfull=url;}
fu_qak("container_modl","<h1>Share</h1>"); fu_qak("container_modl","<bubble>So you want to share this outside of Hey.café... That is great! Here is the content you are sharing, just tap an option below to open that service. You can also click on the boxes below to copy the text or the url if you want to use somewhere else.<div id='sharetext_case'></div></bubble>"); if (urlfull!=url){ fu_qak("sharetext_case","<pre style=\"white-space: pre-wrap;white-space: -moz-pre-wrap;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;margin-bottom: 0px;\" onclick=\"fu_nib('CopyContentClickFull');\"><code id='CopyContentClickFull'>"+text+" "+urlfull+"</code></pre>");}else{ fu_qak("sharetext_case","<pre style=\"white-space: pre-wrap;white-space: -moz-pre-wrap;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;margin-bottom: 0px;\" onclick=\"fu_nib('CopyContentClickFull');\"><code id='CopyContentClickFull'>"+text+" "+url+"</code></pre>");}
fu_qak("sharetext_case","<pre style=\"white-space: pre-wrap;white-space: -moz-pre-wrap;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;margin-bottom: 0px;\" onclick=\"fu_nib('CopyContentClickText');\"><code id='CopyContentClickText'>"+text+"</code></pre>"); if (urlfull!=url){ fu_qak("sharetext_case","<pre style=\"white-space: pre-wrap;white-space: -moz-pre-wrap;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;margin-bottom: 0px;\" onclick=\"fu_nib('CopyContentClickURL');\"><code id='CopyContentClickURL'>"+urlfull+"</code></pre>");}else{ fu_qak("sharetext_case","<pre style=\"white-space: pre-wrap;white-space: -moz-pre-wrap;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;margin-bottom: 0px;\" onclick=\"fu_nib('CopyContentClickURL');\"><code id='CopyContentClickURL'>"+url+"</code></pre>");}
fu_qak("container_modl","<h2 style='margin-top:40px;'>Services</h2>"); var linktext = fu_wwb(text); var buttons=fu_enx(urlfull,text); fu_qak("container_modl","<bubble>"+buttons+"</bubble>"); if (url.includes("hey.cafe")){ if (url.includes("/conversation/")){ var foundid = url.match(/(\/conversation\/)([^&\n?#\s]+)/); var conversationid=foundid[2]; if (conversationid!=undefined){ if (conversationid.includes("/")==false){ fu_qak("container_modl","<h2 style='margin-top:40px;'>Website embed</h2>"); fu_qak("container_modl",'<bubble>You can put this on your website to embed this content directly. You can click the box below to copy to clipboard.<pre style="white-space: pre-wrap;white-space: -moz-pre-wrap;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;margin-bottom: 0px;" onclick="fu_nib(\'CopyContentClickEmbed\');"><code id="CopyContentClickEmbed">&#60;script src="https://hey.cafe/application/external/embed.js" content="conversation" resource="'+conversationid+'"&#62;&#60;/script&#62;</code></pre></bubble>');}} }} }function fu_bhx(){ if (fu_qgu()==true){ fu_uqy(); fu_crv("full"); fu_pcc("Discussions"); fu_qak("container_content","<h1>Discussions</h1>",true); fu_qak("container_content","<div class='horizontalscroll' style='margin-bottom:20px;' id='MenuFeed'></div>"); fu_qak("MenuFeed","<a href='/feed'><div class='tab'>Conversations</div></a>",true); fu_qak("MenuFeed","<a href='/cafes'><div class='tab'>Cafés</div></a>",true); fu_qak("MenuFeed","<a href='/tags'><div class='tab current'>Discussions</div></a>",true); fu_qak("container_content","<div></div>"); fu_qak("container_content","<div style='margin-top:20px;'></div>"); fu_qak("container_content","<div id='PageTagsGenerateCase'></div>"); fu_qak("container_content","<div id='PageTagsBottomLoader'></div>"); fu_tum(0); fu_qaf();}} function fu_tum(offset){ fu_oen("PageTagsBottomLoader"); fu_qak("PageTagsBottomLoader","<div class='loading'></div>"); fu_knz("https://"+s_hostname+"/get_feed_tags?count=40&start="+offset+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["tags"]!=false){ var firstcheckrender=true; if (aa('tags_loaded')==undefined){ var render_frame_id=fu_sjw(20); fu_qak("PageTagsGenerateCase","<div id='tags_loaded'></div><div id='tags_render_"+render_frame_id+"'></div>");}else{ var render_frame_id=fu_sjw(20); fu_qak("PageTagsGenerateCase","<div id='tags_render_"+render_frame_id+"'></div>");}
fu_lgl(response["response_data"]["tags"], function(id){ fu_etj(response["response_data"]["tags"][""+id+""],"tags_render_"+render_frame_id+"");}); setTimeout(function(){ fu_oen("PageTagsBottomLoader"); fu_qak("PageTagsBottomLoader","<action type='inview_loadmore_pagetags' offset='"+(parseInt(offset)+40)+"'></action>");}, 400);}else{ fu_oen("PageTagsBottomLoader"); if (offset==0){ fu_qak("PageTagsBottomLoader","<bubble class='alt1'>Sorry we can't find any café discussion tags.</bubble>",true);}} }else{ fu_rfy("Not able to load");}});} function fu_etj(content,container){ var icon=""; var weight=400; var subtext="Can't find last item..."; var recentavatars=""; var clickevent="javascript:fu_euy('/!"+content["cafe"]["alias"]+"/tag/"+content["id"]+"');"; var conversations=""; var avatarsdone=[]; var headermeta=""; if (content["cafe"]!=false){ headermeta="<div tabindex='0' class='cafeheader' style='display: inline-block;zoom: 0.8;margin: 0px;' onclick=\"javascript:fu_euy('/!"+content["cafe"]["alias"]+"');\"><img source=\""+content["cafe"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for café "+content["cafe"]["name"]+"'> <strong>"+fu_ctl(content["cafe"]["name"])+"</strong></div>";}
fu_lgl(content["conversations"], function(id){ var theconcon=content["conversations"][""+id+""]; if (avatarsdone[""+theconcon["account"]["id"]+""]==undefined){ avatarsdone[""+theconcon["account"]["id"]+""]=true; recentavatars=""+recentavatars+"<a href=\"javascript:fu_fvt('"+theconcon["account"]["alias"]+"');\" "+fu_wfk(theconcon["account"])+"><img source='"+theconcon["account"]["avatar"]+"' class='optimizer_img avatar' style='width:20px;height:20px;margin-right:5px;margin-top:5px;' alt='Profile image for "+theconcon["account"]["name"]+"'></a>";}}); fu_qak(container,"<bubble id='tag_overview_"+content["id"]+"' class='conversation'><h2 onclick=\""+clickevent+"\" style='margin-top:0px;margin-bottom: 10px;'>"+fu_ctl(content["info_emoji"])+" "+fu_ctl(content["info_name"])+"</h2><div>"+headermeta+"</div><hr></hr><div id='tag_convos_"+content["id"]+"'></div></bubble>"); fu_lgl(content["conversations"], function(id){ fu_qak("tag_convos_"+content["id"]+"","<div id='tags_content_preview_"+content["conversations"][""+id+""]["id"]+"'><action type='inview_load_preview_conversation' element='tags_content_preview_"+content["conversations"][""+id+""]["id"]+"' conversation='"+content["conversations"][""+id+""]["id"]+"'></action><div class='loading'></div></div>");});}function fu_yiq(){ if (fu_qgu()==true){ fu_uqy(); fu_crv("full"); fu_pcc("Shared Videos"); fu_qak("container_content","<h1>Shared Videos</h1>",true); fu_qak("container_content",'<div id="video_results"><div class=\'loading\'></div></div>'); fu_raa(); fu_qaf();}} function fu_raa(){ var query="[https://youtube.com watch] [https://youtube.com live] [https://youtu.be]"; var search_had_results=false; fu_oen("video_results"); fu_qak("video_results","<div class='loading'></div>"); fu_knz("https://"+s_hostname+"/get_search_conversations?search="+ae(fu_qti(query))+"&count=20&following=true",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ fu_oen("video_results"); if (response["response_data"]["conversations"]!=false){ fu_lgl(response["response_data"]["conversations"], function(id){ fu_fwq(response["response_data"]["conversations"][""+id+""]);});}else{ if (search_had_results==false){ fu_qak("video_results","<bubble class='alt1'>You are not following anyone who has shared videos from a source like Youtube.</bubble>");}} }else{ fu_rfy("Not able to load list...");}});} function fu_fwq(content){ if (aa("video_convo_"+content["id"]+"")==null){ var headermeta=""; if (content["cafe"]!=false){ } if (content["account"]!=false){ headermeta=headermeta+"<div class='minibubble' tabindex='0' class='alt0' onclick=\"javascript:fu_euy('/@"+content["account"]["alias"]+"');\" style='margin-top: 0px;font-size: 0.7em;padding: 5px !important;padding-right: 10px !important;position: absolute;z-index: 5;left: 0px;top:0px;border-radius: 0px;border-top-left-radius: 12px;border:0px;'><img source=\""+content["account"]["avatar"]+"\" class=\"avatar optimizer_img\" alt='Avatar for Account "+content["account"]["name"]+"' style='width: 15px;height: 15px;float: left;margin-right: 5px;'><strong>"+fu_ctl(content["account"]["name"])+"</strong></div>";} var time=fu_hms(content["date_created"]); var contents=content["contents"]; if (content["info_hidden_global"]=="0" && content["info_hidden_cafe"]=="0"){ var urlmatches = contents.match(/\bhttps?:\/\/([^\<\n\s]+)\b/gi); fu_lgl(urlmatches, function(id){ var url=urlmatches[""+id+""]; var view="unknown"; var meta_id="metadata_"+fu_sjw(30)+""; var loadcontent=""; if (url.includes("youtube.com") || url.includes("youtu.be")){ if (url.includes("/watch?") || url.includes("live/") || url.includes("embed/") || url.includes("youtu.be/")){ loadcontent='<action type="inview_load_videos_youtube" element="'+meta_id+'" url="'+url+'" goto="/conversation/'+content["id"]+'"></action>'; view="youtubevideo";}} if (view!="unknown"){ fu_qak("video_results",'<bubble id="video_convo_'+content["id"]+'" class="halfsized video"><div style="margin: -10px;margin-top: -20px;margin-bottom: -20px;">'+headermeta+''+loadcontent+'<div id="'+meta_id+'"><div class=\'loading\'></div></div></div></bubble>');}});}} } function fu_tob(element,url,goto){ var randhostname=fu_bpp(); var foundid =url.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/); var videoid=(foundid&&foundid[7].length==11)? foundid[7] : false; if (videoid==false){ var foundidtwo=url.match(/^.*youtu.be\/([^#&?]*).*/); var videoid=(foundidtwo&&foundidtwo[1].length==11)? foundidtwo[1] : false;} if (videoid==false){ var foundidtwo=url.match(/^.*youtube\.com\/live\/([^#&?]*).*/); var videoid=(foundidtwo&&foundidtwo[1].length==11)? foundidtwo[1] : false;} if (videoid!=false){ var playid="mediaplay_"+fu_sjw(30)+""; fu_knz("https://"+randhostname+"/get_bot_youtube_video_meta?query="+fu_qti(videoid)+"",function(result){ var response = fu_leh(result); if (response["system_api_error"]==false){ if (response["response_data"]["title"]!="false"){ fu_oen(element); fu_qak(element,"<div class='embed youtube'><div id='"+playid+"'><div class='media' style='position: relative;'><div class=\"aspectcase sixteenbynine\"><div class=\"content\"><a title='View Content To Play Youtube video' href=\""+goto+"\"><div class='playbuttoncase'><span class='playbutton'></span></div><div class='cover optimizer_bg content' source='https://img.youtube.com/vi/"+videoid+"/maxresdefault.jpg'></div></a></div></div></div></div><div style='font-size:0.8em;' id='"+element+"_yt_userdata'><a href='"+url+"' target='_blank' rel='noreferrer'><strong>"+response["response_data"]["title"]+"</strong></a></div></div>"); if (response["response_data"]["author_url"]!="false"){ fu_knz("https://"+randhostname+"/get_bot_website_meta?query="+fu_qti(response["response_data"]["author_url"])+"",function(result){ var author = fu_leh(result); if (author["system_api_error"]==false){ fu_oen(""+element+"_yt_userdata"); fu_qak(""+element+"_yt_userdata","<div style='overflow:hidden;'><div style='display:inline-block;float:left;margin-right:10px;'><a href='"+response["response_data"]["author_url"]+"' target='_blank' rel='noreferrer'><img source='"+author["response_data"]["image"]+"' class='optimizer_img media' style='border-radius:100%;width:40px;height:40px;'></a></div><a href='"+url+"' target='_blank' rel='noreferrer'><strong>"+response["response_data"]["title"]+"</strong></a><BR>"+response["response_data"]["author"]+"</div>");}},false,true);}}else{ fu_oen(element); fu_qak(element,"<div class='embed youtube'><div id='"+playid+"'><div class='media' style='position: relative;'><div class=\"aspectcase sixteenbynine\"><div class=\"content\"><a title='View Content To Play Youtube video' href=\""+goto+"\"><div class='playbuttoncase'><span class='playbutton'></span></div><div class='cover optimizer_bg content' source='https://img.youtube.com/vi/"+videoid+"/maxresdefault.jpg'></div></a></div></div></div></div><div style='margin-top:10px;' id='"+element+"_yt_userdata'></div></div>");}} },false,true);}}</script></head><body>
	<div id="js_startup">
		<div style='font-family: -apple-system, BlinkMacSystemFont,Roboto, Oxygen-Sans, Ubuntu, Cantarell, sans-serif;font-weight:600;'>
			<div id="onjslaunchfail">
				<div style="margin:0px auto;text-align:center;margin-top:20px;max-width:600px;padding:10px;"><h1 style='margin:0px;'>Hey.Café</h1></div><div style="background: rgb(247, 248, 250);border-radius:15px;margin:0px auto;text-align:center;margin-top:20px;max-width:600px;padding:10px;color:rgb(97, 97, 97);font-weight: 500;">Hey, looks like something may have failed to load. This application is Javascript based and some older browsers may have problems.<BR><BR>This site requires the use of Javascript. Without it nothing will work.<BR><BR>If you think this is a bug <a href="/about.txt" style='color: rgb(96, 72, 244);font-weight: 600;text-decoration: none;'>contact us</a>.</div>
			</div>
		</div>
	</div>
	<content id="js_content"></content>
</body></html>
